/*!
 * dist/jquery.inputmask.min
 * https://github.com/RobinHerbots/Inputmask
 * Copyright (c) 2010 - 2020 Robin Herbots
 * Licensed under the MIT license
 * Version: 5.0.4-beta.40
 */
!function webpackUniversalModuleDefinition(root,factory){if("object"==typeof exports&&"object"==typeof module)module.exports=factory(require("jquery"));else if("function"==typeof define&&define.amd)define(["jquery"],factory);else{var a="object"==typeof exports?factory(require("jquery")):factory(root.jQuery);for(var i in a)("object"==typeof exports?exports:root)[i]=a[i]}}(window,function(__WEBPACK_EXTERNAL_MODULE__8__){return modules=[function(module){module.exports=JSON.parse('{"BACKSPACE":8,"BACKSPACE_SAFARI":127,"DELETE":46,"DOWN":40,"END":35,"ENTER":13,"ESCAPE":27,"HOME":36,"INSERT":45,"LEFT":37,"PAGE_DOWN":34,"PAGE_UP":33,"RIGHT":39,"SPACE":32,"TAB":9,"UP":38,"X":88,"CONTROL":17,"KEY_229":229}')},function(module,exports,__webpack_require__){"use strict";__webpack_require__(9);var _mask=__webpack_require__(16),_maskLexer=__webpack_require__(17),_validationTests=__webpack_require__(3),_positioning=__webpack_require__(2),_validation=__webpack_require__(4),_inputHandling=__webpack_require__(5),_eventruler=__webpack_require__(10);function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var $=__webpack_require__(11),window=__webpack_require__(12),document=window.document,dataKey="_inputmask_opts";function Inputmask(alias,options,internal){if(!(this instanceof Inputmask))return new Inputmask(alias,options,internal);this.dependencyLib=$,this.el=void 0,this.events={},this.maskset=void 0,!0!==internal&&($.isPlainObject(alias)?options=alias:(options=options||{},alias&&(options.alias=alias)),this.opts=$.extend(!0,{},this.defaults,options),this.noMasksCache=options&&void 0!==options.definitions,this.userOptions=options||{},resolveAlias(this.opts.alias,options,this.opts)),this.refreshValue=!1,this.undoValue=void 0,this.$el=void 0,this.skipKeyPressEvent=!1,this.skipInputEvent=!1,this.validationEvent=!1,this.ignorable=!1,this.maxLength,this.mouseEnter=!1,this.originalPlaceholder=void 0,this.isComposing=!1}function resolveAlias(aliasStr,options,opts){var aliasDefinition=Inputmask.prototype.aliases[aliasStr];return aliasDefinition?(aliasDefinition.alias&&resolveAlias(aliasDefinition.alias,void 0,opts),$.extend(!0,opts,aliasDefinition),$.extend(!0,opts,options),!0):(null===opts.mask&&(opts.mask=aliasStr),!1)}function importAttributeOptions(npt,opts,userOptions,dataAttribute){function importOption(option,optionData){var attrOption=""===dataAttribute?option:dataAttribute+"-"+option;optionData=void 0!==optionData?optionData:npt.getAttribute(attrOption),null!==optionData&&("string"==typeof optionData&&(0===option.indexOf("on")?optionData=window[optionData]:"false"===optionData?optionData=!1:"true"===optionData&&(optionData=!0)),userOptions[option]=optionData)}if(!0===opts.importDataAttributes){var attrOptions=npt.getAttribute(dataAttribute),option,dataoptions,optionData,p;if(attrOptions&&""!==attrOptions&&(attrOptions=attrOptions.replace(/'/g,'"'),dataoptions=JSON.parse("{"+attrOptions+"}")),dataoptions)for(p in optionData=void 0,dataoptions)if("alias"===p.toLowerCase()){optionData=dataoptions[p];break}for(option in importOption("alias",optionData),userOptions.alias&&resolveAlias(userOptions.alias,userOptions,opts),opts){if(dataoptions)for(p in optionData=void 0,dataoptions)if(p.toLowerCase()===option.toLowerCase()){optionData=dataoptions[p];break}importOption(option,optionData)}}return $.extend(!0,opts,userOptions),"rtl"!==npt.dir&&!opts.rightAlign||(npt.style.textAlign="right"),"rtl"!==npt.dir&&!opts.numericInput||(npt.dir="ltr",npt.removeAttribute("dir"),opts.isRTL=!0),Object.keys(userOptions).length}Inputmask.prototype={dataAttribute:"data-inputmask",defaults:{_maxTestPos:500,placeholder:"_",optionalmarker:["[","]"],quantifiermarker:["{","}"],groupmarker:["(",")"],alternatormarker:"|",escapeChar:"\\",mask:null,regex:null,oncomplete:$.noop,onincomplete:$.noop,oncleared:$.noop,repeat:0,greedy:!1,autoUnmask:!1,removeMaskOnSubmit:!1,clearMaskOnLostFocus:!0,insertMode:!0,insertModeVisual:!0,clearIncomplete:!1,alias:null,onKeyDown:$.noop,onBeforeMask:null,onBeforePaste:function onBeforePaste(pastedValue,opts){return $.isFunction(opts.onBeforeMask)?opts.onBeforeMask.call(this,pastedValue,opts):pastedValue},onBeforeWrite:null,onUnMask:null,showMaskOnFocus:!0,showMaskOnHover:!0,onKeyValidation:$.noop,skipOptionalPartCharacter:" ",numericInput:!1,rightAlign:!1,undoOnEscape:!0,radixPoint:"",_radixDance:!1,groupSeparator:"",keepStatic:null,positionCaretOnTab:!0,tabThrough:!1,supportsInputType:["text","tel","url","password","search"],ignorables:[8,9,19,27,33,34,35,36,37,38,39,40,45,46,93,112,113,114,115,116,117,118,119,120,121,122,123,0,229],isComplete:null,preValidation:null,postValidation:null,staticDefinitionSymbol:void 0,jitMasking:!1,nullable:!0,inputEventOnly:!1,noValuePatching:!1,positionCaretOnClick:"lvp",casing:null,inputmode:"text",importDataAttributes:!0,shiftPositions:!0},definitions:{9:{validator:"[0-9\uff10-\uff19]",definitionSymbol:"*"},a:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",definitionSymbol:"*"},"*":{validator:"[0-9\uff10-\uff19A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]"}},aliases:{},masksCache:{},get isRTL(){return this.opts.isRTL||this.opts.numericInput},mask:function mask(elems){var that=this;return"string"==typeof elems&&(elems=document.getElementById(elems)||document.querySelectorAll(elems)),elems=elems.nodeName?[elems]:elems,$.each(elems,function(ndx,el){var scopedOpts=$.extend(!0,{},that.opts);if(importAttributeOptions(el,scopedOpts,$.extend(!0,{},that.userOptions),that.dataAttribute)){var maskset=(0,_maskLexer.generateMaskSet)(scopedOpts,that.noMasksCache);void 0!==maskset&&(void 0!==el.inputmask&&(el.inputmask.opts.autoUnmask=!0,el.inputmask.remove()),el.inputmask=new Inputmask(void 0,void 0,!0),el.inputmask.opts=scopedOpts,el.inputmask.noMasksCache=that.noMasksCache,el.inputmask.userOptions=$.extend(!0,{},that.userOptions),el.inputmask.el=el,el.inputmask.$el=$(el),el.inputmask.maskset=maskset,$.data(el,dataKey,that.userOptions),_mask.mask.call(el.inputmask))}}),elems&&elems[0]&&elems[0].inputmask||this},option:function option(options,noremask){return"string"==typeof options?this.opts[options]:"object"===_typeof(options)?($.extend(this.userOptions,options),this.el&&!0!==noremask&&this.mask(this.el),this):void 0},unmaskedvalue:function unmaskedvalue(value){if(this.maskset=this.maskset||(0,_maskLexer.generateMaskSet)(this.opts,this.noMasksCache),void 0===this.el||void 0!==value){var valueBuffer=($.isFunction(this.opts.onBeforeMask)&&this.opts.onBeforeMask.call(this,value,this.opts)||value).split("");_inputHandling.checkVal.call(this,void 0,!1,!1,valueBuffer),$.isFunction(this.opts.onBeforeWrite)&&this.opts.onBeforeWrite.call(this,void 0,_positioning.getBuffer.call(this),0,this.opts)}return _inputHandling.unmaskedvalue.call(this,this.el)},remove:function remove(){if(this.el){$.data(this.el,dataKey,null);var cv=this.opts.autoUnmask?(0,_inputHandling.unmaskedvalue)(this.el):this._valueGet(this.opts.autoUnmask),valueProperty;cv!==_positioning.getBufferTemplate.call(this).join("")?this._valueSet(cv,this.opts.autoUnmask):this._valueSet(""),_eventruler.EventRuler.off(this.el),Object.getOwnPropertyDescriptor&&Object.getPrototypeOf?(valueProperty=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this.el),"value"),valueProperty&&this.__valueGet&&Object.defineProperty(this.el,"value",{get:this.__valueGet,set:this.__valueSet,configurable:!0})):document.__lookupGetter__&&this.el.__lookupGetter__("value")&&this.__valueGet&&(this.el.__defineGetter__("value",this.__valueGet),this.el.__defineSetter__("value",this.__valueSet)),this.el.inputmask=void 0}return this.el},getemptymask:function getemptymask(){return this.maskset=this.maskset||(0,_maskLexer.generateMaskSet)(this.opts,this.noMasksCache),_positioning.getBufferTemplate.call(this).join("")},hasMaskedValue:function hasMaskedValue(){return!this.opts.autoUnmask},isComplete:function isComplete(){return this.maskset=this.maskset||(0,_maskLexer.generateMaskSet)(this.opts,this.noMasksCache),_validation.isComplete.call(this,_positioning.getBuffer.call(this))},getmetadata:function getmetadata(){if(this.maskset=this.maskset||(0,_maskLexer.generateMaskSet)(this.opts,this.noMasksCache),$.isArray(this.maskset.metadata)){var maskTarget=_validationTests.getMaskTemplate.call(this,!0,0,!1).join("");return $.each(this.maskset.metadata,function(ndx,mtdt){if(mtdt.mask===maskTarget)return maskTarget=mtdt,!1}),maskTarget}return this.maskset.metadata},isValid:function isValid(value){if(this.maskset=this.maskset||(0,_maskLexer.generateMaskSet)(this.opts,this.noMasksCache),value){var valueBuffer=($.isFunction(this.opts.onBeforeMask)&&this.opts.onBeforeMask.call(this,value,this.opts)||value).split("");_inputHandling.checkVal.call(this,void 0,!0,!1,valueBuffer)}else value=this.isRTL?_positioning.getBuffer.call(this).slice().reverse().join(""):_positioning.getBuffer.call(this).join("");for(var buffer=_positioning.getBuffer.call(this),rl=_positioning.determineLastRequiredPosition.call(this),lmib=buffer.length-1;rl<lmib&&!_positioning.isMask.call(this,lmib);lmib--);return buffer.splice(rl,lmib+1-rl),_validation.isComplete.call(this,buffer)&&value===(this.isRTL?_positioning.getBuffer.call(this).slice().reverse().join(""):_positioning.getBuffer.call(this).join(""))},format:function format(value,metadata){this.maskset=this.maskset||(0,_maskLexer.generateMaskSet)(this.opts,this.noMasksCache);var valueBuffer=($.isFunction(this.opts.onBeforeMask)&&this.opts.onBeforeMask.call(this,value,this.opts)||value).split("");_inputHandling.checkVal.call(this,void 0,!0,!1,valueBuffer);var formattedValue=this.isRTL?_positioning.getBuffer.call(this).slice().reverse().join(""):_positioning.getBuffer.call(this).join("");return metadata?{value:formattedValue,metadata:this.getmetadata()}:formattedValue},setValue:function setValue(value){this.el&&$(this.el).trigger("setvalue",[value])},analyseMask:_maskLexer.analyseMask},Inputmask.extendDefaults=function(options){$.extend(!0,Inputmask.prototype.defaults,options)},Inputmask.extendDefinitions=function(definition){$.extend(!0,Inputmask.prototype.definitions,definition)},Inputmask.extendAliases=function(alias){$.extend(!0,Inputmask.prototype.aliases,alias)},Inputmask.format=function(value,options,metadata){return Inputmask(options).format(value,metadata)},Inputmask.unmask=function(value,options){return Inputmask(options).unmaskedvalue(value)},Inputmask.isValid=function(value,options){return Inputmask(options).isValid(value)},Inputmask.remove=function(elems){"string"==typeof elems&&(elems=document.getElementById(elems)||document.querySelectorAll(elems)),elems=elems.nodeName?[elems]:elems,$.each(elems,function(ndx,el){el.inputmask&&el.inputmask.remove()})},Inputmask.setValue=function(elems,value){"string"==typeof elems&&(elems=document.getElementById(elems)||document.querySelectorAll(elems)),elems=elems.nodeName?[elems]:elems,$.each(elems,function(ndx,el){el.inputmask?el.inputmask.setValue(value):$(el).trigger("setvalue",[value])})},Inputmask.dependencyLib=$,window.Inputmask=Inputmask,module.exports=Inputmask},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.caret=caret,exports.determineLastRequiredPosition=determineLastRequiredPosition,exports.determineNewCaretPosition=determineNewCaretPosition,exports.getBuffer=getBuffer,exports.getBufferTemplate=getBufferTemplate,exports.getLastValidPosition=getLastValidPosition,exports.isMask=isMask,exports.resetMaskSet=resetMaskSet,exports.seekNext=seekNext,exports.seekPrevious=seekPrevious,exports.translatePosition=translatePosition;var _validationTests=__webpack_require__(3),_validation=__webpack_require__(4);function caret(input,begin,end,notranslate,isDelete){var inputmask=this,opts=this.opts,$=this.dependencyLib,range;if(void 0===begin)return"selectionStart"in input&&"selectionEnd"in input?(begin=input.selectionStart,end=input.selectionEnd):window.getSelection?(range=window.getSelection().getRangeAt(0),range.commonAncestorContainer.parentNode!==input&&range.commonAncestorContainer!==input||(begin=range.startOffset,end=range.endOffset)):document.selection&&document.selection.createRange&&(range=document.selection.createRange(),begin=0-range.duplicate().moveStart("character",-input.inputmask._valueGet().length),end=begin+range.text.length),{begin:notranslate?begin:translatePosition.call(this,begin),end:notranslate?end:translatePosition.call(this,end)};if($.isArray(begin)&&(end=this.isRTL?begin[0]:begin[1],begin=this.isRTL?begin[1]:begin[0]),void 0!==begin.begin&&(end=this.isRTL?begin.begin:begin.end,begin=this.isRTL?begin.end:begin.begin),"number"==typeof begin){begin=notranslate?begin:translatePosition.call(this,begin),end=notranslate?end:translatePosition.call(this,end),end="number"==typeof end?end:begin;var scrollCalc=parseInt(((input.ownerDocument.defaultView||window).getComputedStyle?(input.ownerDocument.defaultView||window).getComputedStyle(input,null):input.currentStyle).fontSize)*end;if(input.scrollLeft=scrollCalc>input.scrollWidth?scrollCalc:0,input.inputmask.caretPos={begin:begin,end:end},opts.insertModeVisual&&!1===opts.insertMode&&begin===end&&(isDelete||end++),input===(input.inputmask.shadowRoot||document).activeElement)if("setSelectionRange"in input)input.setSelectionRange(begin,end);else if(window.getSelection){if(range=document.createRange(),void 0===input.firstChild||null===input.firstChild){var textNode=document.createTextNode("");input.appendChild(textNode)}range.setStart(input.firstChild,begin<input.inputmask._valueGet().length?begin:input.inputmask._valueGet().length),range.setEnd(input.firstChild,end<input.inputmask._valueGet().length?end:input.inputmask._valueGet().length),range.collapse(!0);var sel=window.getSelection();sel.removeAllRanges(),sel.addRange(range)}else input.createTextRange&&(range=input.createTextRange(),range.collapse(!0),range.moveEnd("character",end),range.moveStart("character",begin),range.select())}}function determineLastRequiredPosition(returnDefinition){var inputmask=this,maskset=this.maskset,$=this.dependencyLib,buffer=_validationTests.getMaskTemplate.call(this,!0,getLastValidPosition.call(this),!0,!0),bl=buffer.length,pos,lvp=getLastValidPosition.call(this),positions={},lvTest=maskset.validPositions[lvp],ndxIntlzr=void 0!==lvTest?lvTest.locator.slice():void 0,testPos;for(pos=lvp+1;pos<buffer.length;pos++)testPos=_validationTests.getTestTemplate.call(this,pos,ndxIntlzr,pos-1),ndxIntlzr=testPos.locator.slice(),positions[pos]=$.extend(!0,{},testPos);var lvTestAlt=lvTest&&void 0!==lvTest.alternation?lvTest.locator[lvTest.alternation]:void 0;for(pos=bl-1;lvp<pos&&(testPos=positions[pos],(testPos.match.optionality||testPos.match.optionalQuantifier&&testPos.match.newBlockMarker||lvTestAlt&&(lvTestAlt!==positions[pos].locator[lvTest.alternation]&&1!=testPos.match.static||!0===testPos.match.static&&testPos.locator[lvTest.alternation]&&_validation.checkAlternationMatch.call(this,testPos.locator[lvTest.alternation].toString().split(","),lvTestAlt.toString().split(","))&&""!==_validationTests.getTests.call(this,pos)[0].def))&&buffer[pos]===_validationTests.getPlaceholder.call(this,pos,testPos.match));pos--)bl--;return returnDefinition?{l:bl,def:positions[bl]?positions[bl].match:void 0}:bl}function determineNewCaretPosition(selectedCaret,tabbed){var inputmask=this,maskset=this.maskset,opts=this.opts;function doRadixFocus(clickPos){if(""!==opts.radixPoint&&0!==opts.digits){var vps=maskset.validPositions;if(void 0===vps[clickPos]||vps[clickPos].input===_validationTests.getPlaceholder.call(inputmask,clickPos)){if(clickPos<seekNext.call(inputmask,-1))return!0;var radixPos=$.inArray(opts.radixPoint,getBuffer.call(inputmask));if(-1!==radixPos){for(var vp in vps)if(vps[vp]&&radixPos<vp&&vps[vp].input!==_validationTests.getPlaceholder.call(inputmask,vp))return!1;return!0}}}return!1}if(tabbed&&(inputmask.isRTL?selectedCaret.end=selectedCaret.begin:selectedCaret.begin=selectedCaret.end),selectedCaret.begin===selectedCaret.end){switch(opts.positionCaretOnClick){case"none":break;case"select":selectedCaret={begin:0,end:getBuffer.call(inputmask).length};break;case"ignore":selectedCaret.end=selectedCaret.begin=seekNext.call(inputmask,getLastValidPosition.call(inputmask));break;case"radixFocus":if(doRadixFocus(selectedCaret.begin)){var radixPos=getBuffer.call(inputmask).join("").indexOf(opts.radixPoint);selectedCaret.end=selectedCaret.begin=opts.numericInput?seekNext.call(inputmask,radixPos):radixPos;break}default:var clickPosition=selectedCaret.begin,lvclickPosition=getLastValidPosition.call(inputmask,clickPosition,!0),lastPosition=seekNext.call(inputmask,-1!==lvclickPosition||isMask.call(inputmask,0)?lvclickPosition:0);if(clickPosition<lastPosition)selectedCaret.end=selectedCaret.begin=isMask.call(inputmask,clickPosition,!0)||isMask.call(inputmask,clickPosition-1,!0)?clickPosition:seekNext.call(inputmask,clickPosition);else{var lvp=maskset.validPositions[lvclickPosition],tt=_validationTests.getTestTemplate.call(inputmask,lastPosition,lvp?lvp.match.locator:void 0,lvp),placeholder=_validationTests.getPlaceholder.call(inputmask,lastPosition,tt.match);if(""!==placeholder&&getBuffer.call(inputmask)[lastPosition]!==placeholder&&!0!==tt.match.optionalQuantifier&&!0!==tt.match.newBlockMarker||!isMask.call(inputmask,lastPosition,opts.keepStatic)&&tt.match.def===placeholder){var newPos=seekNext.call(inputmask,lastPosition);(newPos<=clickPosition||clickPosition===lastPosition)&&(lastPosition=newPos)}selectedCaret.end=selectedCaret.begin=lastPosition}}return selectedCaret}}function getBuffer(noCache){var inputmask=this,maskset=this.maskset;return void 0!==maskset.buffer&&!0!==noCache||(maskset.buffer=_validationTests.getMaskTemplate.call(this,!0,getLastValidPosition.call(this),!0),void 0===maskset._buffer&&(maskset._buffer=maskset.buffer.slice())),maskset.buffer}function getBufferTemplate(){var inputmask=this,maskset=this.maskset;return void 0===maskset._buffer&&(maskset._buffer=_validationTests.getMaskTemplate.call(this,!1,1),void 0===maskset.buffer&&(maskset.buffer=maskset._buffer.slice())),maskset._buffer}function getLastValidPosition(closestTo,strict,validPositions){var maskset=this.maskset,before=-1,after=-1,valids=validPositions||maskset.validPositions;for(var posNdx in void 0===closestTo&&(closestTo=-1),valids){var psNdx=parseInt(posNdx);valids[psNdx]&&(strict||!0!==valids[psNdx].generatedInput)&&(psNdx<=closestTo&&(before=psNdx),closestTo<=psNdx&&(after=psNdx))}return-1===before||before==closestTo?after:-1==after?before:closestTo-before<after-closestTo?before:after}function isMask(pos,strict,fuzzy){var inputmask=this,maskset=this.maskset,test=_validationTests.getTestTemplate.call(this,pos).match;if(""===test.def&&(test=_validationTests.getTest.call(this,pos).match),!0!==test.static)return test.fn;if(!0===fuzzy&&void 0!==maskset.validPositions[pos]&&!0!==maskset.validPositions[pos].generatedInput)return!0;if(!0!==strict&&-1<pos){if(fuzzy){var tests=_validationTests.getTests.call(this,pos);return tests.length>1+(""===tests[tests.length-1].match.def?1:0)}var testTemplate=_validationTests.determineTestTemplate.call(this,pos,_validationTests.getTests.call(this,pos)),testPlaceHolder=_validationTests.getPlaceholder.call(this,pos,testTemplate.match);return testTemplate.match.def!==testPlaceHolder}return!1}function resetMaskSet(soft){var maskset=this.maskset;maskset.buffer=void 0,!0!==soft&&(maskset.validPositions={},maskset.p=0)}function seekNext(pos,newBlock,fuzzy){var inputmask=this;void 0===fuzzy&&(fuzzy=!0);for(var position=pos+1;""!==_validationTests.getTest.call(this,position).match.def&&(!0===newBlock&&(!0!==_validationTests.getTest.call(this,position).match.newBlockMarker||!isMask.call(this,position,void 0,!0))||!0!==newBlock&&!isMask.call(this,position,void 0,fuzzy));)position++;return position}function seekPrevious(pos,newBlock){var inputmask=this,position=pos,tests;if(position<=0)return 0;for(;0<--position&&(!0===newBlock&&!0!==_validationTests.getTest.call(this,position).match.newBlockMarker||!0!==newBlock&&!isMask.call(this,position,void 0,!0)&&(tests=_validationTests.getTests.call(this,position),tests.length<2||2===tests.length&&""===tests[1].match.def)););return position}function translatePosition(pos){var inputmask=this,opts=this.opts,el=this.el;return!this.isRTL||"number"!=typeof pos||opts.greedy&&""===opts.placeholder||!el||(pos=this._valueGet().length-pos),pos}},function(module,exports,__webpack_require__){"use strict";function getLocator(tst,align){var locator=(null!=tst.alternation?tst.mloc[getDecisionTaker(tst)]:tst.locator).join("");if(""!==locator)for(;locator.length<align;)locator+="0";return locator}function getDecisionTaker(tst){var decisionTaker=tst.locator[tst.alternation];return"string"==typeof decisionTaker&&0<decisionTaker.length&&(decisionTaker=decisionTaker.split(",")[0]),void 0!==decisionTaker?decisionTaker.toString():""}function getPlaceholder(pos,test,returnPL){var inputmask=this,$=this.dependencyLib,opts=this.opts,maskset=this.maskset;if(test=test||getTest.call(this,pos).match,void 0!==test.placeholder||!0===returnPL)return $.isFunction(test.placeholder)?test.placeholder(opts):test.placeholder;if(!0!==test.static)return opts.placeholder.charAt(pos%opts.placeholder.length);if(-1<pos&&void 0===maskset.validPositions[pos]){var tests=getTests.call(this,pos),staticAlternations=[],prevTest;if(tests.length>1+(""===tests[tests.length-1].match.def?1:0))for(var i=0;i<tests.length;i++)if(""!==tests[i].match.def&&!0!==tests[i].match.optionality&&!0!==tests[i].match.optionalQuantifier&&(!0===tests[i].match.static||void 0===prevTest||!1!==tests[i].match.fn.test(prevTest.match.def,maskset,pos,!0,opts))&&(staticAlternations.push(tests[i]),!0===tests[i].match.static&&(prevTest=tests[i]),1<staticAlternations.length&&/[0-9a-bA-Z]/.test(staticAlternations[0].match.def)))return opts.placeholder.charAt(pos%opts.placeholder.length)}return test.def}function getMaskTemplate(baseOnInput,minimalPos,includeMode,noJit,clearOptionalTail){var inputmask=this,opts=this.opts,maskset=this.maskset,greedy=opts.greedy;clearOptionalTail&&(opts.greedy=!1),minimalPos=minimalPos||0;var maskTemplate=[],ndxIntlzr,pos=0,test,testPos,jitRenderStatic;do{if(!0===baseOnInput&&maskset.validPositions[pos])testPos=clearOptionalTail&&!0===maskset.validPositions[pos].match.optionality&&void 0===maskset.validPositions[pos+1]&&(!0===maskset.validPositions[pos].generatedInput||maskset.validPositions[pos].input==opts.skipOptionalPartCharacter&&0<pos)?determineTestTemplate.call(this,pos,getTests.call(this,pos,ndxIntlzr,pos-1)):maskset.validPositions[pos],test=testPos.match,ndxIntlzr=testPos.locator.slice(),maskTemplate.push(!0===includeMode?testPos.input:!1===includeMode?test.nativeDef:getPlaceholder.call(this,pos,test));else{testPos=getTestTemplate.call(this,pos,ndxIntlzr,pos-1),test=testPos.match,ndxIntlzr=testPos.locator.slice();var jitMasking=!0!==noJit&&(!1!==opts.jitMasking?opts.jitMasking:test.jit);jitRenderStatic=jitRenderStatic&&test.static&&test.def!==opts.groupSeparator&&null===test.fn||maskset.validPositions[pos-1]&&test.static&&test.def!==opts.groupSeparator&&null===test.fn,jitRenderStatic||!1===jitMasking||void 0===jitMasking||"number"==typeof jitMasking&&isFinite(jitMasking)&&pos<jitMasking?maskTemplate.push(!1===includeMode?test.nativeDef:getPlaceholder.call(this,pos,test)):jitRenderStatic=!1}pos++}while((void 0===this.maxLength||pos<this.maxLength)&&(!0!==test.static||""!==test.def)||pos<minimalPos);return""===maskTemplate[maskTemplate.length-1]&&maskTemplate.pop(),!1===includeMode&&void 0!==maskset.maskLength||(maskset.maskLength=pos-1),opts.greedy=greedy,maskTemplate}function getTestTemplate(pos,ndxIntlzr,tstPs){var inputmask=this,maskset=this.maskset;return maskset.validPositions[pos]||determineTestTemplate.call(this,pos,getTests.call(this,pos,ndxIntlzr?ndxIntlzr.slice():ndxIntlzr,tstPs))}function determineTestTemplate(pos,tests){var inputmask=this,opts=this.opts;pos=0<pos?pos-1:0;for(var altTest=getTest.call(this,pos),targetLocator=getLocator(altTest),tstLocator,closest,bestMatch,ndx=0;ndx<tests.length;ndx++){var tst=tests[ndx];tstLocator=getLocator(tst,targetLocator.length);var distance=Math.abs(tstLocator-targetLocator);(void 0===closest||""!==tstLocator&&distance<closest||bestMatch&&!opts.greedy&&bestMatch.match.optionality&&"master"===bestMatch.match.newBlockMarker&&(!tst.match.optionality||!tst.match.newBlockMarker)||bestMatch&&bestMatch.match.optionalQuantifier&&!tst.match.optionalQuantifier)&&(closest=distance,bestMatch=tst)}return bestMatch}function getTest(pos,tests){var inputmask=this,maskset=this.maskset;return maskset.validPositions[pos]?maskset.validPositions[pos]:(tests||getTests.call(this,pos))[0]}function getTests(pos,ndxIntlzr,tstPs){var inputmask=this,$=this.dependencyLib,maskset=this.maskset,opts=this.opts,el=this.el,maskTokens=maskset.maskToken,testPos=ndxIntlzr?tstPs:0,ndxInitializer=ndxIntlzr?ndxIntlzr.slice():[0],matches=[],insertStop=!1,latestMatch,cacheDependency=ndxIntlzr?ndxIntlzr.join(""):"";function resolveTestFromToken(maskToken,ndxInitializer,loopNdx,quantifierRecurse){function handleMatch(match,loopNdx,quantifierRecurse){function isFirstMatch(latestMatch,tokenGroup){var firstMatch=0===$.inArray(latestMatch,tokenGroup.matches);return firstMatch||$.each(tokenGroup.matches,function(ndx,match){if(!0===match.isQuantifier?firstMatch=isFirstMatch(latestMatch,tokenGroup.matches[ndx-1]):Object.prototype.hasOwnProperty.call(match,"matches")&&(firstMatch=isFirstMatch(latestMatch,match)),firstMatch)return!1}),firstMatch}function resolveNdxInitializer(pos,alternateNdx,targetAlternation){var bestMatch,indexPos;if((maskset.tests[pos]||maskset.validPositions[pos])&&$.each(maskset.tests[pos]||[maskset.validPositions[pos]],function(ndx,lmnt){if(lmnt.mloc[alternateNdx])return bestMatch=lmnt,!1;var alternation=void 0!==targetAlternation?targetAlternation:lmnt.alternation,ndxPos=void 0!==lmnt.locator[alternation]?lmnt.locator[alternation].toString().indexOf(alternateNdx):-1;(void 0===indexPos||ndxPos<indexPos)&&-1!==ndxPos&&(bestMatch=lmnt,indexPos=ndxPos)}),bestMatch){var bestMatchAltIndex=bestMatch.locator[bestMatch.alternation],locator=bestMatch.mloc[alternateNdx]||bestMatch.mloc[bestMatchAltIndex]||bestMatch.locator;return locator.slice((void 0!==targetAlternation?targetAlternation:bestMatch.alternation)+1)}return void 0!==targetAlternation?resolveNdxInitializer(pos,alternateNdx):void 0}function isSubsetOf(source,target){function expand(pattern){for(var expanded=[],start=-1,end,i=0,l=pattern.length;i<l;i++)if("-"===pattern.charAt(i))for(end=pattern.charCodeAt(i+1);++start<end;)expanded.push(String.fromCharCode(start));else start=pattern.charCodeAt(i),expanded.push(pattern.charAt(i));return expanded.join("")}return source.match.def===target.match.nativeDef||!(!(opts.regex||source.match.fn instanceof RegExp&&target.match.fn instanceof RegExp)||!0===source.match.static||!0===target.match.static)&&-1!==expand(target.match.fn.toString().replace(/[[\]/]/g,"")).indexOf(expand(source.match.fn.toString().replace(/[[\]/]/g,"")))}function staticCanMatchDefinition(source,target){return!0===source.match.static&&!0!==target.match.static&&target.match.fn.test(source.match.def,maskset,pos,!1,opts,!1)}function setMergeLocators(targetMatch,altMatch){var alternationNdx=targetMatch.alternation,shouldMerge=void 0===altMatch||alternationNdx===altMatch.alternation&&-1===targetMatch.locator[alternationNdx].toString().indexOf(altMatch.locator[alternationNdx]);if(!shouldMerge&&alternationNdx>altMatch.alternation)for(var i=altMatch.alternation;i<alternationNdx;i++)if(targetMatch.locator[i]!==altMatch.locator[i]){alternationNdx=i,shouldMerge=!0;break}if(shouldMerge){targetMatch.mloc=targetMatch.mloc||{};var locNdx=targetMatch.locator[alternationNdx];if(void 0!==locNdx){if("string"==typeof locNdx&&(locNdx=locNdx.split(",")[0]),void 0===targetMatch.mloc[locNdx]&&(targetMatch.mloc[locNdx]=targetMatch.locator.slice()),void 0!==altMatch){for(var ndx in altMatch.mloc)"string"==typeof ndx&&(ndx=ndx.split(",")[0]),void 0===targetMatch.mloc[ndx]&&(targetMatch.mloc[ndx]=altMatch.mloc[ndx]);targetMatch.locator[alternationNdx]=Object.keys(targetMatch.mloc).join(",")}return!0}targetMatch.alternation=void 0}return!1}function isSameLevel(targetMatch,altMatch){if(targetMatch.locator.length!==altMatch.locator.length)return!1;for(var locNdx=targetMatch.alternation+1;locNdx<targetMatch.locator.length;locNdx++)if(targetMatch.locator[locNdx]!==altMatch.locator[locNdx])return!1;return!0}if(testPos>pos+opts._maxTestPos)throw"Inputmask: There is probably an error in your mask definition or in the code. Create an issue on github with an example of the mask you are using. "+maskset.mask;if(testPos===pos&&void 0===match.matches)return matches.push({match:match,locator:loopNdx.reverse(),cd:cacheDependency,mloc:{}}),!0;if(void 0!==match.matches){if(match.isGroup&&quantifierRecurse!==match){if(match=handleMatch(maskToken.matches[$.inArray(match,maskToken.matches)+1],loopNdx,quantifierRecurse),match)return!0}else if(match.isOptional){var optionalToken=match,mtchsNdx=matches.length;if(match=resolveTestFromToken(match,ndxInitializer,loopNdx,quantifierRecurse),match){if($.each(matches,function(ndx,mtch){mtchsNdx<=ndx&&(mtch.match.optionality=!0)}),latestMatch=matches[matches.length-1].match,void 0!==quantifierRecurse||!isFirstMatch(latestMatch,optionalToken))return!0;insertStop=!0,testPos=pos}}else if(match.isAlternator){var alternateToken=match,malternateMatches=[],maltMatches,currentMatches=matches.slice(),loopNdxCnt=loopNdx.length,altIndex=0<ndxInitializer.length?ndxInitializer.shift():-1;if(-1===altIndex||"string"==typeof altIndex){var currentPos=testPos,ndxInitializerClone=ndxInitializer.slice(),altIndexArr=[],amndx;if("string"==typeof altIndex)altIndexArr=altIndex.split(",");else for(amndx=0;amndx<alternateToken.matches.length;amndx++)altIndexArr.push(amndx.toString());if(void 0!==maskset.excludes[pos]){for(var altIndexArrClone=altIndexArr.slice(),i=0,exl=maskset.excludes[pos].length;i<exl;i++){var excludeSet=maskset.excludes[pos][i].toString().split(":");loopNdx.length==excludeSet[1]&&altIndexArr.splice(altIndexArr.indexOf(excludeSet[0]),1)}0===altIndexArr.length&&(delete maskset.excludes[pos],altIndexArr=altIndexArrClone)}(!0===opts.keepStatic||isFinite(parseInt(opts.keepStatic))&&currentPos>=opts.keepStatic)&&(altIndexArr=altIndexArr.slice(0,1));for(var unMatchedAlternation=!1,ndx=0;ndx<altIndexArr.length;ndx++){amndx=parseInt(altIndexArr[ndx]),matches=[],ndxInitializer="string"==typeof altIndex&&resolveNdxInitializer(testPos,amndx,loopNdxCnt)||ndxInitializerClone.slice(),alternateToken.matches[amndx]&&handleMatch(alternateToken.matches[amndx],[amndx].concat(loopNdx),quantifierRecurse)?match=!0:0===ndx&&(unMatchedAlternation=!0),maltMatches=matches.slice(),testPos=currentPos,matches=[];for(var ndx1=0;ndx1<maltMatches.length;ndx1++){var altMatch=maltMatches[ndx1],dropMatch=!1;altMatch.match.jit=altMatch.match.jit||unMatchedAlternation,altMatch.alternation=altMatch.alternation||loopNdxCnt,setMergeLocators(altMatch);for(var ndx2=0;ndx2<malternateMatches.length;ndx2++){var altMatch2=malternateMatches[ndx2];if("string"!=typeof altIndex||void 0!==altMatch.alternation&&-1!==$.inArray(altMatch.locator[altMatch.alternation].toString(),altIndexArr)){if(altMatch.match.nativeDef===altMatch2.match.nativeDef){dropMatch=!0,setMergeLocators(altMatch2,altMatch);break}if(isSubsetOf(altMatch,altMatch2)){setMergeLocators(altMatch,altMatch2)&&(dropMatch=!0,malternateMatches.splice(malternateMatches.indexOf(altMatch2),0,altMatch));break}if(isSubsetOf(altMatch2,altMatch)){setMergeLocators(altMatch2,altMatch);break}if(staticCanMatchDefinition(altMatch,altMatch2)){isSameLevel(altMatch,altMatch2)||void 0!==el.inputmask.userOptions.keepStatic?setMergeLocators(altMatch,altMatch2)&&(dropMatch=!0,malternateMatches.splice(malternateMatches.indexOf(altMatch2),0,altMatch)):opts.keepStatic=!0;break}}}dropMatch||malternateMatches.push(altMatch)}}matches=currentMatches.concat(malternateMatches),testPos=pos,insertStop=0<matches.length,match=0<malternateMatches.length,ndxInitializer=ndxInitializerClone.slice()}else match=handleMatch(alternateToken.matches[altIndex]||maskToken.matches[altIndex],[altIndex].concat(loopNdx),quantifierRecurse);if(match)return!0}else if(match.isQuantifier&&quantifierRecurse!==maskToken.matches[$.inArray(match,maskToken.matches)-1])for(var qt=match,qndx=0<ndxInitializer.length?ndxInitializer.shift():0;qndx<(isNaN(qt.quantifier.max)?qndx+1:qt.quantifier.max)&&testPos<=pos;qndx++){var tokenGroup=maskToken.matches[$.inArray(qt,maskToken.matches)-1];if(match=handleMatch(tokenGroup,[qndx].concat(loopNdx),tokenGroup),match){if(latestMatch=matches[matches.length-1].match,latestMatch.optionalQuantifier=qndx>=qt.quantifier.min,latestMatch.jit=(qndx||1)*tokenGroup.matches.indexOf(latestMatch)>=qt.quantifier.jit,latestMatch.optionalQuantifier&&isFirstMatch(latestMatch,tokenGroup)){insertStop=!0,testPos=pos;break}return latestMatch.jit&&(maskset.jitOffset[pos]=tokenGroup.matches.length-tokenGroup.matches.indexOf(latestMatch)),!0}}else if(match=resolveTestFromToken(match,ndxInitializer,loopNdx,quantifierRecurse),match)return!0}else testPos++}for(var tndx=0<ndxInitializer.length?ndxInitializer.shift():0;tndx<maskToken.matches.length;tndx++)if(!0!==maskToken.matches[tndx].isQuantifier){var match=handleMatch(maskToken.matches[tndx],[tndx].concat(loopNdx),quantifierRecurse);if(match&&testPos===pos)return match;if(pos<testPos)break}}function mergeLocators(pos,tests){var locator=[];return $.isArray(tests)||(tests=[tests]),0<tests.length&&(void 0===tests[0].alternation||!0===opts.keepStatic?(locator=determineTestTemplate.call(inputmask,pos,tests.slice()).locator.slice(),0===locator.length&&(locator=tests[0].locator.slice())):$.each(tests,function(ndx,tst){if(""!==tst.def)if(0===locator.length)locator=tst.locator.slice();else for(var i=0;i<locator.length;i++)tst.locator[i]&&-1===locator[i].toString().indexOf(tst.locator[i])&&(locator[i]+=","+tst.locator[i])})),locator}if(-1<pos&&(void 0===inputmask.maxLength||pos<inputmask.maxLength)){if(void 0===ndxIntlzr){for(var previousPos=pos-1,test;void 0===(test=maskset.validPositions[previousPos]||maskset.tests[previousPos])&&-1<previousPos;)previousPos--;void 0!==test&&-1<previousPos&&(ndxInitializer=mergeLocators(previousPos,test),cacheDependency=ndxInitializer.join(""),testPos=previousPos)}if(maskset.tests[pos]&&maskset.tests[pos][0].cd===cacheDependency)return maskset.tests[pos];for(var mtndx=ndxInitializer.shift();mtndx<maskTokens.length;mtndx++){var match=resolveTestFromToken(maskTokens[mtndx],ndxInitializer,[mtndx]);if(match&&testPos===pos||pos<testPos)break}}return 0!==matches.length&&!insertStop||matches.push({match:{fn:null,static:!0,optionality:!1,casing:null,def:"",placeholder:""},locator:[],mloc:{},cd:cacheDependency}),void 0!==ndxIntlzr&&maskset.tests[pos]?$.extend(!0,[],matches):(maskset.tests[pos]=$.extend(!0,[],matches),maskset.tests[pos])}Object.defineProperty(exports,"__esModule",{value:!0}),exports.determineTestTemplate=determineTestTemplate,exports.getDecisionTaker=getDecisionTaker,exports.getMaskTemplate=getMaskTemplate,exports.getPlaceholder=getPlaceholder,exports.getTest=getTest,exports.getTests=getTests,exports.getTestTemplate=getTestTemplate},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.alternate=alternate,exports.checkAlternationMatch=checkAlternationMatch,exports.isComplete=isComplete,exports.isValid=isValid,exports.refreshFromBuffer=refreshFromBuffer,exports.revalidateMask=revalidateMask,exports.handleRemove=handleRemove;var _validationTests=__webpack_require__(3),_keycode=_interopRequireDefault(__webpack_require__(0)),_positioning=__webpack_require__(2),_eventhandlers=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function alternate(maskPos,c,strict,fromIsValid,rAltPos,selection){var inputmask=this,$=this.dependencyLib,opts=this.opts,maskset=this.maskset,validPsClone=$.extend(!0,{},maskset.validPositions),tstClone=$.extend(!0,{},maskset.tests),lastAlt,alternation,isValidRslt=!1,returnRslt=!1,altPos,prevAltPos,i,validPos,decisionPos,lAltPos=void 0!==rAltPos?rAltPos:_positioning.getLastValidPosition.call(this),nextPos,input,begin,end;if(selection&&(begin=selection.begin,end=selection.end,selection.begin>selection.end&&(begin=selection.end,end=selection.begin)),-1===lAltPos&&void 0===rAltPos)lastAlt=0,prevAltPos=_validationTests.getTest.call(this,lastAlt),alternation=prevAltPos.alternation;else for(;0<=lAltPos;lAltPos--)if(altPos=maskset.validPositions[lAltPos],altPos&&void 0!==altPos.alternation){if(prevAltPos&&prevAltPos.locator[altPos.alternation]!==altPos.locator[altPos.alternation])break;lastAlt=lAltPos,alternation=maskset.validPositions[lastAlt].alternation,prevAltPos=altPos}if(void 0!==alternation){decisionPos=parseInt(lastAlt),maskset.excludes[decisionPos]=maskset.excludes[decisionPos]||[],!0!==maskPos&&maskset.excludes[decisionPos].push((0,_validationTests.getDecisionTaker)(prevAltPos)+":"+prevAltPos.alternation);var validInputs=[],resultPos=-1;for(i=decisionPos;i<_positioning.getLastValidPosition.call(this,void 0,!0)+1;i++)-1===resultPos&&maskPos<=i&&void 0!==c&&(validInputs.push(c),resultPos=validInputs.length-1),validPos=maskset.validPositions[i],validPos&&!0!==validPos.generatedInput&&(void 0===selection||i<begin||end<=i)&&validInputs.push(validPos.input),delete maskset.validPositions[i];for(-1===resultPos&&void 0!==c&&(validInputs.push(c),resultPos=validInputs.length-1);void 0!==maskset.excludes[decisionPos]&&maskset.excludes[decisionPos].length<10;){for(maskset.tests={},_positioning.resetMaskSet.call(this,!0),isValidRslt=!0,i=0;i<validInputs.length&&(nextPos=isValidRslt.caret||_positioning.getLastValidPosition.call(this,void 0,!0)+1,input=validInputs[i],isValidRslt=isValid.call(this,nextPos,input,!1,fromIsValid,!0));i++)i===resultPos&&(returnRslt=isValidRslt),1==maskPos&&isValidRslt&&(returnRslt={caretPos:i});if(isValidRslt)break;if(_positioning.resetMaskSet.call(this),prevAltPos=_validationTests.getTest.call(this,decisionPos),maskset.validPositions=$.extend(!0,{},validPsClone),maskset.tests=$.extend(!0,{},tstClone),!maskset.excludes[decisionPos]){returnRslt=alternate.call(this,maskPos,c,strict,fromIsValid,decisionPos-1,selection);break}var decisionTaker=(0,_validationTests.getDecisionTaker)(prevAltPos);if(-1!==maskset.excludes[decisionPos].indexOf(decisionTaker+":"+prevAltPos.alternation)){returnRslt=alternate.call(this,maskPos,c,strict,fromIsValid,decisionPos-1,selection);break}for(maskset.excludes[decisionPos].push(decisionTaker+":"+prevAltPos.alternation),i=decisionPos;i<_positioning.getLastValidPosition.call(this,void 0,!0)+1;i++)delete maskset.validPositions[i]}}return returnRslt&&!1===opts.keepStatic||delete maskset.excludes[decisionPos],returnRslt}function casing(elem,test,pos){var opts=this.opts,maskset=this.maskset,$=this.dependencyLib;switch(opts.casing||test.casing){case"upper":elem=elem.toUpperCase();break;case"lower":elem=elem.toLowerCase();break;case"title":var posBefore=maskset.validPositions[pos-1];elem=0===pos||posBefore&&posBefore.input===String.fromCharCode(_keycode.default.SPACE)?elem.toUpperCase():elem.toLowerCase();break;default:if($.isFunction(opts.casing)){var args=Array.prototype.slice.call(arguments);args.push(maskset.validPositions),elem=opts.casing.apply(this,args)}}return elem}function checkAlternationMatch(altArr1,altArr2,na){for(var opts=this.opts,$=this.dependencyLib,altArrC=opts.greedy?altArr2:altArr2.slice(0,1),isMatch=!1,naArr=void 0!==na?na.split(","):[],naNdx,i=0;i<naArr.length;i++)-1!==(naNdx=altArr1.indexOf(naArr[i]))&&altArr1.splice(naNdx,1);for(var alndx=0;alndx<altArr1.length;alndx++)if(-1!==$.inArray(altArr1[alndx],altArrC)){isMatch=!0;break}return isMatch}function handleRemove(input,k,pos,strict,fromIsValid){var inputmask=this,maskset=this.maskset,opts=this.opts;if((opts.numericInput||this.isRTL)&&(k===_keycode.default.BACKSPACE?k=_keycode.default.DELETE:k===_keycode.default.DELETE&&(k=_keycode.default.BACKSPACE),this.isRTL)){var pend=pos.end;pos.end=pos.begin,pos.begin=pend}var lvp=_positioning.getLastValidPosition.call(this,void 0,!0),offset;if(pos.end>=_positioning.getBuffer.call(this).length&&lvp>=pos.end&&(pos.end=lvp+1),k===_keycode.default.BACKSPACE?pos.end-pos.begin<1&&(pos.begin=_positioning.seekPrevious.call(this,pos.begin)):k===_keycode.default.DELETE&&pos.begin===pos.end&&(pos.end=_positioning.isMask.call(this,pos.end,!0,!0)?pos.end+1:_positioning.seekNext.call(this,pos.end)+1),!1!==(offset=revalidateMask.call(this,pos))){if(!0!==strict&&!1!==opts.keepStatic||null!==opts.regex&&-1!==_validationTests.getTest.call(this,pos.begin).match.def.indexOf("|")){var result=alternate.call(this,!0);if(result){var newPos=void 0!==result.caret?result.caret:result.pos?_positioning.seekNext.call(this,result.pos.begin?result.pos.begin:result.pos):_positioning.getLastValidPosition.call(this,-1,!0);(k!==_keycode.default.DELETE||pos.begin>newPos)&&pos.begin}}!0!==strict&&(maskset.p=k===_keycode.default.DELETE?pos.begin+offset:pos.begin)}}function isComplete(buffer){var inputmask=this,opts=this.opts,$=this.dependencyLib,maskset=this.maskset;if($.isFunction(opts.isComplete))return opts.isComplete(buffer,opts);if("*"!==opts.repeat){var complete=!1,lrp=_positioning.determineLastRequiredPosition.call(this,!0),aml=_positioning.seekPrevious.call(this,lrp.l);if(void 0===lrp.def||lrp.def.newBlockMarker||lrp.def.optionality||lrp.def.optionalQuantifier){complete=!0;for(var i=0;i<=aml;i++){var test=_validationTests.getTestTemplate.call(this,i).match;if(!0!==test.static&&void 0===maskset.validPositions[i]&&!0!==test.optionality&&!0!==test.optionalQuantifier||!0===test.static&&buffer[i]!==_validationTests.getPlaceholder.call(this,i,test)){complete=!1;break}}}return complete}}function isValid(pos,c,strict,fromIsValid,fromAlternate,validateOnly,fromCheckval){var inputmask=this,$=this.dependencyLib,opts=this.opts,el=inputmask.el,maskset=inputmask.maskset;function isSelection(posObj){return inputmask.isRTL?1<posObj.begin-posObj.end||posObj.begin-posObj.end==1:1<posObj.end-posObj.begin||posObj.end-posObj.begin==1}strict=!0===strict;var maskPos=pos;function processCommandObject(commandObj){if(void 0!==commandObj){if(void 0!==commandObj.remove&&($.isArray(commandObj.remove)||(commandObj.remove=[commandObj.remove]),$.each(commandObj.remove.sort(function(a,b){return b.pos-a.pos}),function(ndx,lmnt){revalidateMask.call(inputmask,{begin:lmnt,end:lmnt+1})}),commandObj.remove=void 0),void 0!==commandObj.insert&&($.isArray(commandObj.insert)||(commandObj.insert=[commandObj.insert]),$.each(commandObj.insert.sort(function(a,b){return a.pos-b.pos}),function(ndx,lmnt){""!==lmnt.c&&isValid.call(inputmask,lmnt.pos,lmnt.c,void 0===lmnt.strict||lmnt.strict,void 0!==lmnt.fromIsValid?lmnt.fromIsValid:fromIsValid)}),commandObj.insert=void 0),commandObj.refreshFromBuffer&&commandObj.buffer){var refresh=commandObj.refreshFromBuffer;refreshFromBuffer.call(inputmask,!0===refresh?refresh:refresh.start,refresh.end,commandObj.buffer),commandObj.refreshFromBuffer=void 0}void 0!==commandObj.rewritePosition&&(maskPos=commandObj.rewritePosition,commandObj=!0)}return commandObj}function _isValid(position,c,strict){var rslt=!1;return $.each(_validationTests.getTests.call(inputmask,position),function(ndx,tst){var test=tst.match;if(_positioning.getBuffer.call(inputmask,!0),rslt=null!=test.fn?test.fn.test(c,maskset,position,strict,opts,isSelection(pos)):(c===test.def||c===opts.skipOptionalPartCharacter)&&""!==test.def&&{c:_validationTests.getPlaceholder.call(inputmask,position,test,!0)||test.def,pos:position},!1!==rslt){var elem=void 0!==rslt.c?rslt.c:c,validatedPos=position;return elem=elem===opts.skipOptionalPartCharacter&&!0===test.static?_validationTests.getPlaceholder.call(inputmask,position,test,!0)||test.def:elem,rslt=processCommandObject(rslt),!0!==rslt&&void 0!==rslt.pos&&rslt.pos!==position&&(validatedPos=rslt.pos),!0!==rslt&&void 0===rslt.pos&&void 0===rslt.c?!1:(!1===revalidateMask.call(inputmask,pos,$.extend({},tst,{input:casing.call(inputmask,elem,test,validatedPos)}),fromIsValid,validatedPos)&&(rslt=!1),!1)}}),rslt}void 0!==pos.begin&&(maskPos=inputmask.isRTL?pos.end:pos.begin);var result=!0,positionsClone=$.extend(!0,{},maskset.validPositions);if(!1===opts.keepStatic&&void 0!==maskset.excludes[maskPos]&&!0!==fromAlternate&&!0!==fromIsValid)for(var i=maskPos;i<(inputmask.isRTL?pos.begin:pos.end);i++)void 0!==maskset.excludes[i]&&(maskset.excludes[i]=void 0,delete maskset.tests[i]);if($.isFunction(opts.preValidation)&&!0!==fromIsValid&&!0!==validateOnly&&(result=opts.preValidation.call(el,_positioning.getBuffer.call(inputmask),maskPos,c,isSelection(pos),opts,maskset,pos,strict||fromAlternate),result=processCommandObject(result)),!0===result){if(void 0===inputmask.maxLength||maskPos<inputmask.maxLength){if(result=_isValid(maskPos,c,strict),(!strict||!0===fromIsValid)&&!1===result&&!0!==validateOnly){var currentPosValid=maskset.validPositions[maskPos];if(!currentPosValid||!0!==currentPosValid.match.static||currentPosValid.match.def!==c&&c!==opts.skipOptionalPartCharacter){if(opts.insertMode||void 0===maskset.validPositions[_positioning.seekNext.call(inputmask,maskPos)]||pos.end>maskPos){var skip=!1;if(maskset.jitOffset[maskPos]&&void 0===maskset.validPositions[_positioning.seekNext.call(inputmask,maskPos)]&&(result=isValid.call(inputmask,maskPos+maskset.jitOffset[maskPos],c,!0),!1!==result&&(!0!==fromAlternate&&(result.caret=maskPos),skip=!0)),pos.end>maskPos&&(maskset.validPositions[maskPos]=void 0),!skip&&!_positioning.isMask.call(inputmask,maskPos,opts.keepStatic))for(var nPos=maskPos+1,snPos=_positioning.seekNext.call(inputmask,maskPos);nPos<=snPos;nPos++)if(result=_isValid(nPos,c,strict),!1!==result){result=trackbackPositions.call(inputmask,maskPos,void 0!==result.pos?result.pos:nPos)||result,maskPos=nPos;break}}}else result={caret:_positioning.seekNext.call(inputmask,maskPos)}}}else result=!1;!1!==result||!opts.keepStatic||!isComplete.call(inputmask,_positioning.getBuffer.call(inputmask))&&0!==maskPos||strict||!0===fromAlternate?isSelection(pos)&&maskset.tests[maskPos]&&1<maskset.tests[maskPos].length&&opts.keepStatic&&!strict&&!0!==fromAlternate&&(result=alternate.call(inputmask,!0)):result=alternate.call(inputmask,maskPos,c,strict,fromIsValid,void 0,pos),!0===result&&(result={pos:maskPos})}if($.isFunction(opts.postValidation)&&!0!==fromIsValid&&!0!==validateOnly){var postResult=opts.postValidation.call(el,_positioning.getBuffer.call(inputmask,!0),void 0!==pos.begin?inputmask.isRTL?pos.end:pos.begin:pos,c,result,opts,maskset,strict,fromCheckval);void 0!==postResult&&(result=!0===postResult?result:postResult)}result&&void 0===result.pos&&(result.pos=maskPos),!1===result||!0===validateOnly?(_positioning.resetMaskSet.call(inputmask,!0),maskset.validPositions=$.extend(!0,{},positionsClone)):trackbackPositions.call(inputmask,void 0,maskPos,!0);var endResult=processCommandObject(result);return endResult}function positionCanMatchDefinition(pos,testDefinition,opts){for(var inputmask=this,maskset=this.maskset,valid=!1,tests=_validationTests.getTests.call(this,pos),tndx=0;tndx<tests.length;tndx++){if(tests[tndx].match&&(!(tests[tndx].match.nativeDef!==testDefinition.match[opts.shiftPositions?"def":"nativeDef"]||opts.shiftPositions&&testDefinition.match.static)||tests[tndx].match.nativeDef===testDefinition.match.nativeDef)){valid=!0;break}if(tests[tndx].match&&tests[tndx].match.def===testDefinition.match.nativeDef){valid=void 0;break}}return!1===valid&&void 0!==maskset.jitOffset[pos]&&(valid=positionCanMatchDefinition.call(this,pos+maskset.jitOffset[pos],testDefinition,opts)),valid}function refreshFromBuffer(start,end,buffer){var inputmask=this,maskset=this.maskset,opts=this.opts,$=this.dependencyLib,el=this.el,i,p,skipOptionalPartCharacter=opts.skipOptionalPartCharacter,bffr=this.isRTL?buffer.slice().reverse():buffer;if(opts.skipOptionalPartCharacter="",!0===start)_positioning.resetMaskSet.call(this),maskset.tests={},start=0,end=buffer.length,p=_positioning.determineNewCaretPosition.call(this,{begin:0,end:0},!1).begin;else{for(i=start;i<end;i++)delete maskset.validPositions[i];p=start}var keypress=new $.Event("keypress");for(i=start;i<end;i++){keypress.which=bffr[i].toString().charCodeAt(0),this.ignorable=!1;var valResult=_eventhandlers.EventHandlers.keypressEvent.call(el,keypress,!0,!1,!1,p);!1!==valResult&&(p=valResult.forwardPosition)}opts.skipOptionalPartCharacter=skipOptionalPartCharacter}function trackbackPositions(originalPos,newPos,fillOnly){var inputmask=this,maskset=this.maskset,$=this.dependencyLib;if(void 0===originalPos)for(originalPos=newPos-1;0<originalPos&&!maskset.validPositions[originalPos];originalPos--);for(var ps=originalPos;ps<newPos;ps++)if(void 0===maskset.validPositions[ps]&&!_positioning.isMask.call(this,ps,!0)){var vp=0==ps?_validationTests.getTest.call(this,ps):maskset.validPositions[ps-1];if(vp){var tests=_validationTests.getTests.call(this,ps).slice();""===tests[tests.length-1].match.def&&tests.pop();var bestMatch=_validationTests.determineTestTemplate.call(this,ps,tests),np;if(bestMatch&&(!0!==bestMatch.match.jit||"master"===bestMatch.match.newBlockMarker&&(np=maskset.validPositions[ps+1])&&!0===np.match.optionalQuantifier)&&(bestMatch=$.extend({},bestMatch,{input:_validationTests.getPlaceholder.call(this,ps,bestMatch.match,!0)||bestMatch.match.def}),bestMatch.generatedInput=!0,revalidateMask.call(this,ps,bestMatch,!0),!0!==fillOnly)){var cvpInput=maskset.validPositions[newPos].input;return maskset.validPositions[newPos]=void 0,isValid.call(this,newPos,cvpInput,!0,!0)}}}}function revalidateMask(pos,validTest,fromIsValid,validatedPos){var inputmask=this,maskset=this.maskset,opts=this.opts,$=this.dependencyLib;function IsEnclosedStatic(pos,valids,selection){var posMatch=valids[pos];if(void 0===posMatch||!0!==posMatch.match.static||!0===posMatch.match.optionality||void 0!==valids[0]&&void 0!==valids[0].alternation)return!1;var prevMatch=selection.begin<=pos-1?valids[pos-1]&&!0===valids[pos-1].match.static&&valids[pos-1]:valids[pos-1],nextMatch=selection.end>pos+1?valids[pos+1]&&!0===valids[pos+1].match.static&&valids[pos+1]:valids[pos+1];return prevMatch&&nextMatch}var offset=0,begin=void 0!==pos.begin?pos.begin:pos,end=void 0!==pos.end?pos.end:pos;if(pos.begin>pos.end&&(begin=pos.end,end=pos.begin),validatedPos=void 0!==validatedPos?validatedPos:begin,begin!==end||opts.insertMode&&void 0!==maskset.validPositions[validatedPos]&&void 0===fromIsValid||void 0===validTest){var positionsClone=$.extend(!0,{},maskset.validPositions),lvp=_positioning.getLastValidPosition.call(this,void 0,!0),i;for(maskset.p=begin,i=lvp;begin<=i;i--)delete maskset.validPositions[i],void 0===validTest&&delete maskset.tests[i+1];var valid=!0,j=validatedPos,posMatch=j,t,canMatch;for(validTest&&(maskset.validPositions[validatedPos]=$.extend(!0,{},validTest),posMatch++,j++),i=validTest?end:end-1;i<=lvp;i++){if(void 0!==(t=positionsClone[i])&&!0!==t.generatedInput&&(end<=i||begin<=i&&IsEnclosedStatic(i,positionsClone,{begin:begin,end:end}))){for(;""!==_validationTests.getTest.call(this,posMatch).match.def;){if(!1!==(canMatch=positionCanMatchDefinition.call(this,posMatch,t,opts))||"+"===t.match.def){"+"===t.match.def&&_positioning.getBuffer.call(this,!0);var result=isValid.call(this,posMatch,t.input,"+"!==t.match.def,"+"!==t.match.def);if(valid=!1!==result,j=(result.pos||posMatch)+1,!valid&&canMatch)break}else valid=!1;if(valid){void 0===validTest&&t.match.static&&i===pos.begin&&offset++;break}if(!valid&&posMatch>maskset.maskLength)break;posMatch++}""==_validationTests.getTest.call(this,posMatch).match.def&&(valid=!1),posMatch=j}if(!valid)break}if(!valid)return maskset.validPositions=$.extend(!0,{},positionsClone),_positioning.resetMaskSet.call(this,!0),!1}else validTest&&_validationTests.getTest.call(this,validatedPos).match.cd===validTest.match.cd&&(maskset.validPositions[validatedPos]=$.extend(!0,{},validTest));return _positioning.resetMaskSet.call(this,!0),offset}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyInputValue=applyInputValue,exports.clearOptionalTail=clearOptionalTail,exports.checkVal=checkVal,exports.HandleNativePlaceholder=HandleNativePlaceholder,exports.unmaskedvalue=unmaskedvalue,exports.writeBuffer=writeBuffer;var _keycode=_interopRequireDefault(__webpack_require__(0)),_validationTests=__webpack_require__(3),_positioning=__webpack_require__(2),_validation=__webpack_require__(4),_environment=__webpack_require__(7),_eventhandlers=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function applyInputValue(input,value){var inputmask=input?input.inputmask:this,opts=inputmask.opts,$=inputmask.dependencyLib;input.inputmask.refreshValue=!1,$.isFunction(opts.onBeforeMask)&&(value=opts.onBeforeMask.call(inputmask,value,opts)||value),value=value.toString().split(""),checkVal(input,!0,!1,value),inputmask.undoValue=_positioning.getBuffer.call(inputmask).join(""),(opts.clearMaskOnLostFocus||opts.clearIncomplete)&&input.inputmask._valueGet()===_positioning.getBufferTemplate.call(inputmask).join("")&&-1===_positioning.getLastValidPosition.call(inputmask)&&input.inputmask._valueSet("")}function clearOptionalTail(buffer){var inputmask=this;buffer.length=0;for(var template=_validationTests.getMaskTemplate.call(this,!0,0,!0,void 0,!0),lmnt;void 0!==(lmnt=template.shift());)buffer.push(lmnt);return buffer}function checkVal(input,writeOut,strict,nptvl,initiatingEvent){var inputmask=input?input.inputmask:this,maskset=inputmask.maskset,opts=inputmask.opts,$=inputmask.dependencyLib,inputValue=nptvl.slice(),charCodes="",initialNdx=-1,result=void 0,skipOptionalPartCharacter=opts.skipOptionalPartCharacter;function isTemplateMatch(ndx,charCodes){for(var targetTemplate=_validationTests.getMaskTemplate.call(inputmask,!0,0).slice(ndx,_positioning.seekNext.call(inputmask,ndx)).join("").replace(/'/g,""),charCodeNdx=targetTemplate.indexOf(charCodes);0<charCodeNdx&&" "===targetTemplate[charCodeNdx-1];)charCodeNdx--;var match=0===charCodeNdx&&!_positioning.isMask.call(inputmask,ndx)&&(_validationTests.getTest.call(inputmask,ndx).match.nativeDef===charCodes.charAt(0)||!0===_validationTests.getTest.call(inputmask,ndx).match.static&&_validationTests.getTest.call(inputmask,ndx).match.nativeDef==="'"+charCodes.charAt(0)||" "===_validationTests.getTest.call(inputmask,ndx).match.nativeDef&&(_validationTests.getTest.call(inputmask,ndx+1).match.nativeDef===charCodes.charAt(0)||!0===_validationTests.getTest.call(inputmask,ndx+1).match.static&&_validationTests.getTest.call(inputmask,ndx+1).match.nativeDef==="'"+charCodes.charAt(0)));if(!match&&0<charCodeNdx&&!_positioning.isMask.call(inputmask,ndx,!1,!0)){var nextPos=_positioning.seekNext.call(inputmask,ndx);inputmask.caretPos.begin<nextPos&&(inputmask.caretPos={begin:nextPos})}return match}opts.skipOptionalPartCharacter="",_positioning.resetMaskSet.call(inputmask),maskset.tests={},initialNdx=opts.radixPoint?_positioning.determineNewCaretPosition.call(inputmask,{begin:0,end:0}).begin:0,maskset.p=initialNdx,inputmask.caretPos={begin:initialNdx};var staticMatches=[],prevCaretPos=inputmask.caretPos;if($.each(inputValue,function(ndx,charCode){if(void 0!==charCode)if(void 0===maskset.validPositions[ndx]&&inputValue[ndx]===_validationTests.getPlaceholder.call(inputmask,ndx)&&_positioning.isMask.call(inputmask,ndx,!0)&&!1===_validation.isValid.call(inputmask,ndx,inputValue[ndx],!0,void 0,void 0,!0))maskset.p++;else{var keypress=new $.Event("_checkval");keypress.which=charCode.toString().charCodeAt(0),charCodes+=charCode;var lvp=_positioning.getLastValidPosition.call(inputmask,void 0,!0);isTemplateMatch(initialNdx,charCodes)?result=_eventhandlers.EventHandlers.keypressEvent.call(input||inputmask,keypress,!0,!1,strict,lvp+1):(result=_eventhandlers.EventHandlers.keypressEvent.call(input||inputmask,keypress,!0,!1,strict,inputmask.caretPos.begin),result&&(initialNdx=inputmask.caretPos.begin+1,charCodes="")),result?(void 0!==result.pos&&maskset.validPositions[result.pos]&&!0===maskset.validPositions[result.pos].match.static&&void 0===maskset.validPositions[result.pos].alternation&&(staticMatches.push(result.pos),inputmask.isRTL||(result.forwardPosition=result.pos+1)),writeBuffer.call(inputmask,void 0,_positioning.getBuffer.call(inputmask),result.forwardPosition,keypress,!1),inputmask.caretPos={begin:result.forwardPosition,end:result.forwardPosition},prevCaretPos=inputmask.caretPos):inputmask.caretPos=prevCaretPos}}),0<staticMatches.length){var sndx,validPos,nextValid=_positioning.seekNext.call(inputmask,-1,void 0,!1);if(!_validation.isComplete.call(inputmask,_positioning.getBuffer.call(inputmask))&&staticMatches.length<=nextValid||_validation.isComplete.call(inputmask,_positioning.getBuffer.call(inputmask))&&0<staticMatches.length&&staticMatches.length!==nextValid&&0===staticMatches[0])for(var nextSndx=nextValid;void 0!==(sndx=staticMatches.shift());){var keypress=new $.Event("_checkval");if(validPos=maskset.validPositions[sndx],validPos.generatedInput=!0,keypress.which=validPos.input.charCodeAt(0),result=_eventhandlers.EventHandlers.keypressEvent.call(input,keypress,!0,!1,strict,nextSndx),result&&void 0!==result.pos&&result.pos!==sndx&&maskset.validPositions[result.pos]&&!0===maskset.validPositions[result.pos].match.static)staticMatches.push(result.pos);else if(!result)break;nextSndx++}}writeOut&&writeBuffer.call(inputmask,input,_positioning.getBuffer.call(inputmask),result?result.forwardPosition:inputmask.caretPos.begin,initiatingEvent||new $.Event("checkval"),initiatingEvent&&"input"===initiatingEvent.type&&inputmask.undoValue!==_positioning.getBuffer.call(inputmask).join("")),opts.skipOptionalPartCharacter=skipOptionalPartCharacter}function HandleNativePlaceholder(npt,value){var inputmask=npt?npt.inputmask:this;if(_environment.ie){if(npt.inputmask._valueGet()!==value&&(npt.placeholder!==value||""===npt.placeholder)){var buffer=_positioning.getBuffer.call(inputmask).slice(),nptValue=npt.inputmask._valueGet();if(nptValue!==value){var lvp=_positioning.getLastValidPosition.call(inputmask);-1===lvp&&nptValue===_positioning.getBufferTemplate.call(inputmask).join("")?buffer=[]:-1!==lvp&&clearOptionalTail.call(inputmask,buffer),writeBuffer(npt,buffer)}}}else npt.placeholder!==value&&(npt.placeholder=value,""===npt.placeholder&&npt.removeAttribute("placeholder"))}function unmaskedvalue(input){var inputmask=input?input.inputmask:this,opts=inputmask.opts,maskset=inputmask.maskset,$=inputmask.dependencyLib;if(input){if(void 0===input.inputmask)return input.value;input.inputmask&&input.inputmask.refreshValue&&applyInputValue(input,input.inputmask._valueGet(!0))}var umValue=[],vps=maskset.validPositions;for(var pndx in vps)vps[pndx]&&vps[pndx].match&&(1!=vps[pndx].match.static||$.isArray(maskset.metadata)&&!0!==vps[pndx].generatedInput)&&umValue.push(vps[pndx].input);var unmaskedValue=0===umValue.length?"":(inputmask.isRTL?umValue.reverse():umValue).join("");if($.isFunction(opts.onUnMask)){var bufferValue=(inputmask.isRTL?_positioning.getBuffer.call(inputmask).slice().reverse():_positioning.getBuffer.call(inputmask)).join("");unmaskedValue=opts.onUnMask.call(inputmask,bufferValue,unmaskedValue,opts)}return unmaskedValue}function writeBuffer(input,buffer,caretPos,event,triggerEvents){var inputmask=input?input.inputmask:this,opts=inputmask.opts,$=inputmask.dependencyLib;if(event&&$.isFunction(opts.onBeforeWrite)){var result=opts.onBeforeWrite.call(inputmask,event,buffer,caretPos,opts);if(result){if(result.refreshFromBuffer){var refresh=result.refreshFromBuffer;_validation.refreshFromBuffer.call(inputmask,!0===refresh?refresh:refresh.start,refresh.end,result.buffer||buffer),buffer=_positioning.getBuffer.call(inputmask,!0)}void 0!==caretPos&&(caretPos=void 0!==result.caret?result.caret:caretPos)}}if(void 0!==input&&(input.inputmask._valueSet(buffer.join("")),void 0===caretPos||void 0!==event&&"blur"===event.type||_positioning.caret.call(inputmask,input,caretPos,void 0,void 0,void 0!==event&&"keydown"===event.type&&(event.keyCode===_keycode.default.DELETE||event.keyCode===_keycode.default.BACKSPACE)),!0===triggerEvents)){var $input=$(input),nptVal=input.inputmask._valueGet();input.inputmask.skipInputEvent=!0,$input.trigger("input"),setTimeout(function(){nptVal===_positioning.getBufferTemplate.call(inputmask).join("")?$input.trigger("cleared"):!0===_validation.isComplete.call(inputmask,buffer)&&$input.trigger("complete")},0)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventHandlers=void 0;var _positioning=__webpack_require__(2),_keycode=_interopRequireDefault(__webpack_require__(0)),_environment=__webpack_require__(7),_validation=__webpack_require__(4),_inputHandling=__webpack_require__(5),_validationTests=__webpack_require__(3);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EventHandlers={keydownEvent:function keydownEvent(e){var inputmask=this.inputmask,opts=inputmask.opts,$=inputmask.dependencyLib,maskset=inputmask.maskset,input=this,$input=$(input),k=e.keyCode,pos=_positioning.caret.call(inputmask,input),kdResult=opts.onKeyDown.call(this,e,_positioning.getBuffer.call(inputmask),pos,opts);if(void 0!==kdResult)return kdResult;if(k===_keycode.default.BACKSPACE||k===_keycode.default.DELETE||_environment.iphone&&k===_keycode.default.BACKSPACE_SAFARI||e.ctrlKey&&k===_keycode.default.X&&!("oncut"in input))e.preventDefault(),_validation.handleRemove.call(inputmask,input,k,pos),(0,_inputHandling.writeBuffer)(input,_positioning.getBuffer.call(inputmask,!0),maskset.p,e,input.inputmask._valueGet()!==_positioning.getBuffer.call(inputmask).join(""));else if(k===_keycode.default.END||k===_keycode.default.PAGE_DOWN){e.preventDefault();var caretPos=_positioning.seekNext.call(inputmask,_positioning.getLastValidPosition.call(inputmask));_positioning.caret.call(inputmask,input,e.shiftKey?pos.begin:caretPos,caretPos,!0)}else k===_keycode.default.HOME&&!e.shiftKey||k===_keycode.default.PAGE_UP?(e.preventDefault(),_positioning.caret.call(inputmask,input,0,e.shiftKey?pos.begin:0,!0)):(opts.undoOnEscape&&k===_keycode.default.ESCAPE||90===k&&e.ctrlKey)&&!0!==e.altKey?((0,_inputHandling.checkVal)(input,!0,!1,inputmask.undoValue.split("")),$input.trigger("click")):!0===opts.tabThrough&&k===_keycode.default.TAB?(!0===e.shiftKey?(!0===_validationTests.getTest.call(inputmask,pos.begin).match.static&&(pos.begin=_positioning.seekNext.call(inputmask,pos.begin)),pos.end=_positioning.seekPrevious.call(inputmask,pos.begin,!0),pos.begin=_positioning.seekPrevious.call(inputmask,pos.end,!0)):(pos.begin=_positioning.seekNext.call(inputmask,pos.begin,!0),pos.end=_positioning.seekNext.call(inputmask,pos.begin,!0),pos.end<maskset.maskLength&&pos.end--),pos.begin<maskset.maskLength&&(e.preventDefault(),_positioning.caret.call(inputmask,input,pos.begin,pos.end))):e.shiftKey||opts.insertModeVisual&&!1===opts.insertMode&&(k===_keycode.default.RIGHT?setTimeout(function(){var caretPos=_positioning.caret.call(inputmask,input);_positioning.caret.call(inputmask,input,caretPos.begin)},0):k===_keycode.default.LEFT&&setTimeout(function(){var caretPos_begin=_positioning.translatePosition.call(inputmask,input.inputmask.caretPos.begin),caretPos_end=_positioning.translatePosition.call(inputmask,input.inputmask.caretPos.end);inputmask.isRTL?_positioning.caret.call(inputmask,input,caretPos_begin+(caretPos_begin===maskset.maskLength?0:1)):_positioning.caret.call(inputmask,input,caretPos_begin-(0===caretPos_begin?0:1))},0));inputmask.ignorable=-1!==$.inArray(k,opts.ignorables)},keypressEvent:function keypressEvent(e,checkval,writeOut,strict,ndx){var inputmask=this.inputmask||this,opts=inputmask.opts,$=inputmask.dependencyLib,maskset=inputmask.maskset,input=this,$input=$(input),k=e.which||e.charCode||e.keyCode;if(!(!0===checkval||e.ctrlKey&&e.altKey)&&(e.ctrlKey||e.metaKey||inputmask.ignorable))return k===_keycode.default.ENTER&&inputmask.undoValue!==_positioning.getBuffer.call(inputmask).join("")&&(inputmask.undoValue=_positioning.getBuffer.call(inputmask).join(""),setTimeout(function(){$input.trigger("change")},0)),inputmask.skipInputEvent=!0,!0;if(k){44!==k&&46!==k||3!==e.location||""===opts.radixPoint||(k=opts.radixPoint.charCodeAt(0));var pos=checkval?{begin:ndx,end:ndx}:_positioning.caret.call(inputmask,input),forwardPosition,c=String.fromCharCode(k);maskset.writeOutBuffer=!0;var valResult=_validation.isValid.call(inputmask,pos,c,strict,void 0,void 0,void 0,checkval);if(!1!==valResult&&(_positioning.resetMaskSet.call(inputmask,!0),forwardPosition=void 0!==valResult.caret?valResult.caret:_positioning.seekNext.call(inputmask,valResult.pos.begin?valResult.pos.begin:valResult.pos),maskset.p=forwardPosition),forwardPosition=opts.numericInput&&void 0===valResult.caret?_positioning.seekPrevious.call(inputmask,forwardPosition):forwardPosition,!1!==writeOut&&(setTimeout(function(){opts.onKeyValidation.call(input,k,valResult)},0),maskset.writeOutBuffer&&!1!==valResult)){var buffer=_positioning.getBuffer.call(inputmask);(0,_inputHandling.writeBuffer)(input,buffer,forwardPosition,e,!0!==checkval)}if(e.preventDefault(),checkval)return!1!==valResult&&(valResult.forwardPosition=forwardPosition),valResult}},keyupEvent:function keyupEvent(e){var inputmask=this.inputmask;!inputmask.isComposing||e.keyCode!==_keycode.default.KEY_229&&e.keyCode!==_keycode.default.ENTER||inputmask.$el.trigger("input")},pasteEvent:function pasteEvent(e){var inputmask=this.inputmask,opts=inputmask.opts,$=inputmask.dependencyLib,input=this,inputValue=inputmask._valueGet(!0),caretPos=_positioning.caret.call(inputmask,this),tempValue;inputmask.isRTL&&(tempValue=caretPos.end,caretPos.end=caretPos.begin,caretPos.begin=tempValue);var valueBeforeCaret=inputValue.substr(0,caretPos.begin),valueAfterCaret=inputValue.substr(caretPos.end,inputValue.length);if(valueBeforeCaret==(inputmask.isRTL?_positioning.getBufferTemplate.call(inputmask).slice().reverse():_positioning.getBufferTemplate.call(inputmask)).slice(0,caretPos.begin).join("")&&(valueBeforeCaret=""),valueAfterCaret==(inputmask.isRTL?_positioning.getBufferTemplate.call(inputmask).slice().reverse():_positioning.getBufferTemplate.call(inputmask)).slice(caretPos.end).join("")&&(valueAfterCaret=""),window.clipboardData&&window.clipboardData.getData)inputValue=valueBeforeCaret+window.clipboardData.getData("Text")+valueAfterCaret;else{if(!e.clipboardData||!e.clipboardData.getData)return!0;inputValue=valueBeforeCaret+e.clipboardData.getData("text/plain")+valueAfterCaret}var pasteValue=inputValue;if($.isFunction(opts.onBeforePaste)){if(pasteValue=opts.onBeforePaste.call(inputmask,inputValue,opts),!1===pasteValue)return e.preventDefault();pasteValue=pasteValue||inputValue}return(0,_inputHandling.checkVal)(this,!0,!1,pasteValue.toString().split(""),e),e.preventDefault()},inputFallBackEvent:function inputFallBackEvent(e){var inputmask=this.inputmask,opts=inputmask.opts,$=inputmask.dependencyLib;function ieMobileHandler(input,inputValue,caretPos){if(_environment.iemobile){var inputChar=inputValue.replace(_positioning.getBuffer.call(inputmask).join(""),"");if(1===inputChar.length){var iv=inputValue.split("");iv.splice(caretPos.begin,0,inputChar),inputValue=iv.join("")}}return inputValue}function analyseChanges(inputValue,buffer,caretPos){for(var frontPart=inputValue.substr(0,caretPos.begin).split(""),backPart=inputValue.substr(caretPos.begin).split(""),frontBufferPart=buffer.substr(0,caretPos.begin).split(""),backBufferPart=buffer.substr(caretPos.begin).split(""),fpl=frontPart.length>=frontBufferPart.length?frontPart.length:frontBufferPart.length,bpl=backPart.length>=backBufferPart.length?backPart.length:backBufferPart.length,bl,i,action="",data=[],marker="~",placeholder;frontPart.length<fpl;)frontPart.push("~");for(;frontBufferPart.length<fpl;)frontBufferPart.push("~");for(;backPart.length<bpl;)backPart.unshift("~");for(;backBufferPart.length<bpl;)backBufferPart.unshift("~");var newBuffer=frontPart.concat(backPart),oldBuffer=frontBufferPart.concat(backBufferPart);for(i=0,bl=newBuffer.length;i<bl;i++)switch(placeholder=_validationTests.getPlaceholder.call(inputmask,_positioning.translatePosition.call(inputmask,i)),action){case"insertText":oldBuffer[i-1]===newBuffer[i]&&caretPos.begin==newBuffer.length-1&&data.push(newBuffer[i]),i=bl;break;case"insertReplacementText":"~"===newBuffer[i]?caretPos.end++:i=bl;break;case"deleteContentBackward":"~"===newBuffer[i]?caretPos.end++:i=bl;break;default:newBuffer[i]!==oldBuffer[i]&&("~"!==newBuffer[i+1]&&newBuffer[i+1]!==placeholder&&void 0!==newBuffer[i+1]||(oldBuffer[i]!==placeholder||"~"!==oldBuffer[i+1])&&"~"!==oldBuffer[i]?"~"===oldBuffer[i+1]&&oldBuffer[i]===newBuffer[i+1]?(action="insertText",data.push(newBuffer[i]),caretPos.begin--,caretPos.end--):newBuffer[i]!==placeholder&&"~"!==newBuffer[i]&&("~"===newBuffer[i+1]||oldBuffer[i]!==newBuffer[i]&&oldBuffer[i+1]===newBuffer[i+1])?(action="insertReplacementText",data.push(newBuffer[i]),caretPos.begin--):"~"===newBuffer[i]?(action="deleteContentBackward",!_positioning.isMask.call(inputmask,_positioning.translatePosition.call(inputmask,i),!0)&&oldBuffer[i]!==opts.radixPoint||caretPos.end++):i=bl:(action="insertText",data.push(newBuffer[i]),caretPos.begin--,caretPos.end--));break}return{action:action,data:data,caret:caretPos}}var input=this,inputValue=input.inputmask._valueGet(!0),buffer=(inputmask.isRTL?_positioning.getBuffer.call(inputmask).slice().reverse():_positioning.getBuffer.call(inputmask)).join(""),caretPos=_positioning.caret.call(inputmask,input,void 0,void 0,!0);if(buffer!==inputValue){inputValue=ieMobileHandler(input,inputValue,caretPos);var changes=analyseChanges(inputValue,buffer,caretPos);switch((input.inputmask.shadowRoot||document).activeElement!==input&&input.focus(),(0,_inputHandling.writeBuffer)(input,_positioning.getBuffer.call(inputmask)),_positioning.caret.call(inputmask,input,caretPos.begin,caretPos.end,!0),changes.action){case"insertText":case"insertReplacementText":$.each(changes.data,function(ndx,entry){var keypress=new $.Event("keypress");keypress.which=entry.charCodeAt(0),inputmask.ignorable=!1,EventHandlers.keypressEvent.call(input,keypress)}),setTimeout(function(){inputmask.$el.trigger("keyup")},0);break;case"deleteContentBackward":var keydown=new $.Event("keydown");keydown.keyCode=_keycode.default.BACKSPACE,EventHandlers.keydownEvent.call(input,keydown);break;default:(0,_inputHandling.applyInputValue)(input,inputValue);break}e.preventDefault()}},compositionendEvent:function compositionendEvent(e){var inputmask=this.inputmask;inputmask.isComposing=!1,inputmask.$el.trigger("input")},setValueEvent:function setValueEvent(e,argument_1,argument_2){var inputmask=this.inputmask,input=this,value=e&&e.detail?e.detail[0]:argument_1;void 0===value&&(value=this.inputmask._valueGet(!0)),(0,_inputHandling.applyInputValue)(this,value),(e.detail&&void 0!==e.detail[1]||void 0!==argument_2)&&_positioning.caret.call(inputmask,this,e.detail?e.detail[1]:argument_2)},focusEvent:function focusEvent(e){var inputmask=this.inputmask,opts=inputmask.opts,input=this,nptValue=this.inputmask._valueGet();opts.showMaskOnFocus&&nptValue!==_positioning.getBuffer.call(inputmask).join("")&&(0,_inputHandling.writeBuffer)(this,_positioning.getBuffer.call(inputmask),_positioning.seekNext.call(inputmask,_positioning.getLastValidPosition.call(inputmask))),!0!==opts.positionCaretOnTab||!1!==inputmask.mouseEnter||_validation.isComplete.call(inputmask,_positioning.getBuffer.call(inputmask))&&-1!==_positioning.getLastValidPosition.call(inputmask)||EventHandlers.clickEvent.apply(this,[e,!0]),inputmask.undoValue=_positioning.getBuffer.call(inputmask).join("")},invalidEvent:function invalidEvent(e){this.inputmask.validationEvent=!0},mouseleaveEvent:function mouseleaveEvent(){var inputmask=this.inputmask,opts=inputmask.opts,input=this;inputmask.mouseEnter=!1,opts.clearMaskOnLostFocus&&(this.inputmask.shadowRoot||document).activeElement!==this&&(0,_inputHandling.HandleNativePlaceholder)(this,inputmask.originalPlaceholder)},clickEvent:function clickEvent(e,tabbed){var inputmask=this.inputmask,input=this;if((this.inputmask.shadowRoot||document).activeElement===this){var newCaretPosition=_positioning.determineNewCaretPosition.call(inputmask,_positioning.caret.call(inputmask,this),tabbed);void 0!==newCaretPosition&&_positioning.caret.call(inputmask,this,newCaretPosition)}},cutEvent:function cutEvent(e){var inputmask=this.inputmask,maskset=inputmask.maskset,input=this,pos=_positioning.caret.call(inputmask,this),clipboardData=window.clipboardData||e.clipboardData,clipData=inputmask.isRTL?_positioning.getBuffer.call(inputmask).slice(pos.end,pos.begin):_positioning.getBuffer.call(inputmask).slice(pos.begin,pos.end);clipboardData.setData("text",inputmask.isRTL?clipData.reverse().join(""):clipData.join("")),document.execCommand&&document.execCommand("copy"),_validation.handleRemove.call(inputmask,this,_keycode.default.DELETE,pos),(0,_inputHandling.writeBuffer)(this,_positioning.getBuffer.call(inputmask),maskset.p,e,inputmask.undoValue!==_positioning.getBuffer.call(inputmask).join(""))},blurEvent:function blurEvent(e){var inputmask=this.inputmask,opts=inputmask.opts,$=inputmask.dependencyLib,$input=$(this),input=this;if(this.inputmask){(0,_inputHandling.HandleNativePlaceholder)(this,inputmask.originalPlaceholder);var nptValue=this.inputmask._valueGet(),buffer=_positioning.getBuffer.call(inputmask).slice();""!==nptValue&&(opts.clearMaskOnLostFocus&&(-1===_positioning.getLastValidPosition.call(inputmask)&&nptValue===_positioning.getBufferTemplate.call(inputmask).join("")?buffer=[]:_inputHandling.clearOptionalTail.call(inputmask,buffer)),!1===_validation.isComplete.call(inputmask,buffer)&&(setTimeout(function(){$input.trigger("incomplete")},0),opts.clearIncomplete&&(_positioning.resetMaskSet.call(inputmask),buffer=opts.clearMaskOnLostFocus?[]:_positioning.getBufferTemplate.call(inputmask).slice())),(0,_inputHandling.writeBuffer)(this,buffer,void 0,e)),inputmask.undoValue!==_positioning.getBuffer.call(inputmask).join("")&&(inputmask.undoValue=_positioning.getBuffer.call(inputmask).join(""),$input.trigger("change"))}},mouseenterEvent:function mouseenterEvent(){var inputmask=this.inputmask,opts=inputmask.opts,input=this;inputmask.mouseEnter=!0,(this.inputmask.shadowRoot||document).activeElement!==this&&(null==inputmask.originalPlaceholder&&this.placeholder!==inputmask.originalPlaceholder&&(inputmask.originalPlaceholder=this.placeholder),opts.showMaskOnHover&&(0,_inputHandling.HandleNativePlaceholder)(this,(inputmask.isRTL?_positioning.getBufferTemplate.call(inputmask).slice().reverse():_positioning.getBufferTemplate.call(inputmask)).join("")))},submitEvent:function submitEvent(){var inputmask=this.inputmask,opts=inputmask.opts;inputmask.undoValue!==_positioning.getBuffer.call(inputmask).join("")&&inputmask.$el.trigger("change"),opts.clearMaskOnLostFocus&&-1===_positioning.getLastValidPosition.call(inputmask)&&inputmask._valueGet&&inputmask._valueGet()===_positioning.getBufferTemplate.call(inputmask).join("")&&inputmask._valueSet(""),opts.clearIncomplete&&!1===_validation.isComplete.call(inputmask,_positioning.getBuffer.call(inputmask))&&inputmask._valueSet(""),opts.removeMaskOnSubmit&&(inputmask._valueSet(inputmask.unmaskedvalue(),!0),setTimeout(function(){(0,_inputHandling.writeBuffer)(inputmask.el,_positioning.getBuffer.call(inputmask))},0))},resetEvent:function resetEvent(){var inputmask=this.inputmask;inputmask.refreshValue=!0,setTimeout(function(){(0,_inputHandling.applyInputValue)(inputmask.el,inputmask._valueGet(!0))},0)}};exports.EventHandlers=EventHandlers},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.iphone=exports.iemobile=exports.mobile=exports.ie=exports.ua=void 0;var ua=window.navigator&&window.navigator.userAgent||"",ie=0<ua.indexOf("MSIE ")||0<ua.indexOf("Trident/"),mobile="ontouchstart"in window,iemobile=/iemobile/i.test(ua),iphone=/iphone/i.test(ua)&&!iemobile;exports.iphone=iphone,exports.iemobile=iemobile,exports.mobile=mobile,exports.ie=ie,exports.ua=ua},function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE__8__},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"===_typeof("test".__proto__)?function(object){return object.__proto__}:function(object){return object.constructor.prototype})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventRuler=void 0;var _inputmask=_interopRequireDefault(__webpack_require__(1)),_keycode=_interopRequireDefault(__webpack_require__(0)),_positioning=__webpack_require__(2),_inputHandling=__webpack_require__(5);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EventRuler={on:function on(input,eventName,eventHandler){var ev=function ev(e){e.originalEvent&&(e=e.originalEvent||e,arguments[0]=e);var that=this,args,inputmask=that.inputmask,opts=inputmask?inputmask.opts:void 0;if(void 0===inputmask&&"FORM"!==this.nodeName){var imOpts=$.data(that,"_inputmask_opts");$(that).off(),imOpts&&new _inputmask.default(imOpts).mask(that)}else{if("setvalue"===e.type||"FORM"===this.nodeName||!(that.disabled||that.readOnly&&!("keydown"===e.type&&e.ctrlKey&&67===e.keyCode||!1===opts.tabThrough&&e.keyCode===_keycode.default.TAB))){switch(e.type){case"input":if(!0===inputmask.skipInputEvent||e.inputType&&"insertCompositionText"===e.inputType)return inputmask.skipInputEvent=!1,e.preventDefault();break;case"keydown":inputmask.skipKeyPressEvent=!1,inputmask.skipInputEvent=inputmask.isComposing=e.keyCode===_keycode.default.KEY_229;break;case"keyup":case"compositionend":inputmask.isComposing&&(inputmask.skipInputEvent=!1);break;case"keypress":if(!0===inputmask.skipKeyPressEvent)return e.preventDefault();inputmask.skipKeyPressEvent=!0;break;case"click":case"focus":return inputmask.validationEvent?(inputmask.validationEvent=!1,input.blur(),(0,_inputHandling.HandleNativePlaceholder)(input,(inputmask.isRTL?_positioning.getBufferTemplate.call(inputmask).slice().reverse():_positioning.getBufferTemplate.call(inputmask)).join("")),setTimeout(function(){input.focus()},3e3)):(args=arguments,setTimeout(function(){input.inputmask&&eventHandler.apply(that,args)},0)),!1}var returnVal=eventHandler.apply(that,arguments);return!1===returnVal&&(e.preventDefault(),e.stopPropagation()),returnVal}e.preventDefault()}};input.inputmask.events[eventName]=input.inputmask.events[eventName]||[],input.inputmask.events[eventName].push(ev),-1!==$.inArray(eventName,["submit","reset"])?null!==input.form&&$(input.form).on(eventName,ev.bind(input)):$(input).on(eventName,ev)},off:function off(input,event){if(input.inputmask&&input.inputmask.events){var _$=input.inputmask.dependencyLib,events=input.inputmask.events;event&&(events=[],events[event]=input.inputmask.events[event]),_$.each(events,function(eventName,evArr){for(;0<evArr.length;){var ev=evArr.pop();-1!==_$.inArray(eventName,["submit","reset"])?null!==input.form&&_$(input.form).off(eventName,ev):_$(input).off(eventName,ev)}delete input.inputmask.events[eventName]})}}};exports.EventRuler=EventRuler},function(module,exports,__webpack_require__){"use strict";var jquery=__webpack_require__(8);if(void 0===jquery)throw"jQuery not loaded!";module.exports=jquery},function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_RESULT__;function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}__WEBPACK_AMD_DEFINE_RESULT__=function(){return"undefined"!=typeof window?window:new(eval("require('jsdom').JSDOM"))("").window}.call(exports,__webpack_require__,exports,module),void 0===__WEBPACK_AMD_DEFINE_RESULT__||(module.exports=__WEBPACK_AMD_DEFINE_RESULT__)},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=_default;var escapeRegexRegex=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^"].join("|\\")+")","gim");function _default(str){return str.replace(escapeRegexRegex,"\\$1")}},function(module,exports,__webpack_require__){"use strict";__webpack_require__(15),__webpack_require__(18),__webpack_require__(19),__webpack_require__(20),module.exports=__webpack_require__(1)},function(module,exports,__webpack_require__){"use strict";var Inputmask=__webpack_require__(1);Inputmask.extendDefinitions({A:{validator:"[A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",casing:"upper"},"&":{validator:"[0-9A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5]",casing:"upper"},"#":{validator:"[0-9A-Fa-f]",casing:"upper"}});var ipValidatorRegex=new RegExp("25[0-5]|2[0-4][0-9]|[01][0-9][0-9]");function ipValidator(chrs,maskset,pos,strict,opts){return chrs=-1<pos-1&&"."!==maskset.buffer[pos-1]?(chrs=maskset.buffer[pos-1]+chrs,-1<pos-2&&"."!==maskset.buffer[pos-2]?maskset.buffer[pos-2]+chrs:"0"+chrs):"00"+chrs,ipValidatorRegex.test(chrs)}Inputmask.extendAliases({cssunit:{regex:"[+-]?[0-9]+\\.?([0-9]+)?(px|em|rem|ex|%|in|cm|mm|pt|pc)"},url:{regex:"(https?|ftp)://.*",autoUnmask:!1,keepStatic:!1},ip:{mask:"i[i[i]].j[j[j]].k[k[k]].l[l[l]]",definitions:{i:{validator:ipValidator},j:{validator:ipValidator},k:{validator:ipValidator},l:{validator:ipValidator}},onUnMask:function onUnMask(maskedValue,unmaskedValue,opts){return maskedValue},inputmode:"numeric"},email:{mask:"*{1,64}[.*{1,64}][.*{1,64}][.*{1,63}]@-{1,63}.-{1,63}[.-{1,63}][.-{1,63}]",greedy:!1,casing:"lower",onBeforePaste:function onBeforePaste(pastedValue,opts){return pastedValue=pastedValue.toLowerCase(),pastedValue.replace("mailto:","")},definitions:{"*":{validator:"[0-9\uff11-\uff19A-Za-z\u0410-\u044f\u0401\u0451\xc0-\xff\xb5!#$%&'*+/=?^_`{|}~-]"},"-":{validator:"[0-9A-Za-z-]"}},onUnMask:function onUnMask(maskedValue,unmaskedValue,opts){return maskedValue},inputmode:"email"},mac:{mask:"##:##:##:##:##:##"},vin:{mask:"V{13}9{4}",definitions:{V:{validator:"[A-HJ-NPR-Za-hj-npr-z\\d]",casing:"upper"}},clearIncomplete:!0,autoUnmask:!0},ssn:{mask:"999-99-9999",postValidation:function postValidation(buffer,pos,c,currentResult,opts,maskset,strict){return/^(?!219-09-9999|078-05-1120)(?!666|000|9.{2}).{3}-(?!00).{2}-(?!0{4}).{4}$/.test(buffer.join(""))}}}),module.exports=Inputmask},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.mask=mask,__webpack_require__(9);var _keycode=_interopRequireDefault(__webpack_require__(0)),_positioning=__webpack_require__(2),_inputHandling=__webpack_require__(5),_eventruler=__webpack_require__(10),_environment=__webpack_require__(7),_validation=__webpack_require__(4),_eventhandlers=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function mask(){var inputmask=this,opts=this.opts,el=this.el,$=this.dependencyLib;function isElementTypeSupported(input,opts){function patchValueProperty(npt){var valueGet,valueSet;function patchValhook(type){if($.valHooks&&(void 0===$.valHooks[type]||!0!==$.valHooks[type].inputmaskpatch)){var valhookGet=$.valHooks[type]&&$.valHooks[type].get?$.valHooks[type].get:function(elem){return elem.value},valhookSet=$.valHooks[type]&&$.valHooks[type].set?$.valHooks[type].set:function(elem,value){return elem.value=value,elem};$.valHooks[type]={get:function get(elem){if(elem.inputmask){if(elem.inputmask.opts.autoUnmask)return elem.inputmask.unmaskedvalue();var result=valhookGet(elem);return-1!==_positioning.getLastValidPosition.call(inputmask,void 0,void 0,elem.inputmask.maskset.validPositions)||!0!==opts.nullable?result:""}return valhookGet(elem)},set:function set(elem,value){var result=valhookSet(elem,value);return elem.inputmask&&(0,_inputHandling.applyInputValue)(elem,value),result},inputmaskpatch:!0}}}function getter(){return this.inputmask?this.inputmask.opts.autoUnmask?this.inputmask.unmaskedvalue():-1!==_positioning.getLastValidPosition.call(inputmask)||!0!==opts.nullable?(this.inputmask.shadowRoot||document.activeElement)===this&&opts.clearMaskOnLostFocus?(inputmask.isRTL?_inputHandling.clearOptionalTail.call(inputmask,_positioning.getBuffer.call(inputmask).slice()).reverse():_inputHandling.clearOptionalTail.call(inputmask,_positioning.getBuffer.call(inputmask).slice())).join(""):valueGet.call(this):"":valueGet.call(this)}function setter(value){valueSet.call(this,value),this.inputmask&&(0,_inputHandling.applyInputValue)(this,value)}function installNativeValueSetFallback(npt){_eventruler.EventRuler.on(npt,"mouseenter",function(){var input=this,value=this.inputmask._valueGet(!0);value!==(inputmask.isRTL?_positioning.getBuffer.call(inputmask).reverse():_positioning.getBuffer.call(inputmask)).join("")&&(0,_inputHandling.applyInputValue)(this,value)})}if(!npt.inputmask.__valueGet){if(!0!==opts.noValuePatching){if(Object.getOwnPropertyDescriptor){var valueProperty=Object.getPrototypeOf?Object.getOwnPropertyDescriptor(Object.getPrototypeOf(npt),"value"):void 0;valueProperty&&valueProperty.get&&valueProperty.set?(valueGet=valueProperty.get,valueSet=valueProperty.set,Object.defineProperty(npt,"value",{get:getter,set:setter,configurable:!0})):"input"!==npt.tagName.toLowerCase()&&(valueGet=function valueGet(){return this.textContent},valueSet=function valueSet(value){this.textContent=value},Object.defineProperty(npt,"value",{get:getter,set:setter,configurable:!0}))}else document.__lookupGetter__&&npt.__lookupGetter__("value")&&(valueGet=npt.__lookupGetter__("value"),valueSet=npt.__lookupSetter__("value"),npt.__defineGetter__("value",getter),npt.__defineSetter__("value",setter));npt.inputmask.__valueGet=valueGet,npt.inputmask.__valueSet=valueSet}npt.inputmask._valueGet=function(overruleRTL){return inputmask.isRTL&&!0!==overruleRTL?valueGet.call(this.el).split("").reverse().join(""):valueGet.call(this.el)},npt.inputmask._valueSet=function(value,overruleRTL){valueSet.call(this.el,null==value?"":!0!==overruleRTL&&inputmask.isRTL?value.split("").reverse().join(""):value)},void 0===valueGet&&(valueGet=function valueGet(){return this.value},valueSet=function valueSet(value){this.value=value},patchValhook(npt.type),installNativeValueSetFallback(npt))}}"textarea"!==input.tagName.toLowerCase()&&opts.ignorables.push(_keycode.default.ENTER);var elementType=input.getAttribute("type"),isSupported="input"===input.tagName.toLowerCase()&&-1!==$.inArray(elementType,opts.supportsInputType)||input.isContentEditable||"textarea"===input.tagName.toLowerCase();if(!isSupported)if("input"===input.tagName.toLowerCase()){var el=document.createElement("input");el.setAttribute("type",elementType),isSupported="text"===el.type,el=null}else isSupported="partial";return!1!==isSupported?patchValueProperty(input):input.inputmask=void 0,isSupported}_eventruler.EventRuler.off(el);var isSupported=isElementTypeSupported(el,opts);if(!1!==isSupported){inputmask.originalPlaceholder=el.placeholder,inputmask.maxLength=void 0!==el?el.maxLength:void 0,-1===inputmask.maxLength&&(inputmask.maxLength=void 0),"inputMode"in el&&null===el.getAttribute("inputmode")&&(el.inputMode=opts.inputmode,el.setAttribute("inputmode",opts.inputmode)),!0===isSupported&&(opts.showMaskOnFocus=opts.showMaskOnFocus&&-1===["cc-number","cc-exp"].indexOf(el.autocomplete),_environment.iphone&&(opts.insertModeVisual=!1),_eventruler.EventRuler.on(el,"submit",_eventhandlers.EventHandlers.submitEvent),_eventruler.EventRuler.on(el,"reset",_eventhandlers.EventHandlers.resetEvent),_eventruler.EventRuler.on(el,"blur",_eventhandlers.EventHandlers.blurEvent),_eventruler.EventRuler.on(el,"focus",_eventhandlers.EventHandlers.focusEvent),_eventruler.EventRuler.on(el,"invalid",_eventhandlers.EventHandlers.invalidEvent),_eventruler.EventRuler.on(el,"click",_eventhandlers.EventHandlers.clickEvent),_eventruler.EventRuler.on(el,"mouseleave",_eventhandlers.EventHandlers.mouseleaveEvent),_eventruler.EventRuler.on(el,"mouseenter",_eventhandlers.EventHandlers.mouseenterEvent),_eventruler.EventRuler.on(el,"paste",_eventhandlers.EventHandlers.pasteEvent),_eventruler.EventRuler.on(el,"cut",_eventhandlers.EventHandlers.cutEvent),_eventruler.EventRuler.on(el,"complete",opts.oncomplete),_eventruler.EventRuler.on(el,"incomplete",opts.onincomplete),_eventruler.EventRuler.on(el,"cleared",opts.oncleared),!0!==opts.inputEventOnly&&(_eventruler.EventRuler.on(el,"keydown",_eventhandlers.EventHandlers.keydownEvent),_eventruler.EventRuler.on(el,"keypress",_eventhandlers.EventHandlers.keypressEvent),_eventruler.EventRuler.on(el,"keyup",_eventhandlers.EventHandlers.keyupEvent)),(_environment.mobile||opts.inputEventOnly)&&el.removeAttribute("maxLength"),_eventruler.EventRuler.on(el,"input",_eventhandlers.EventHandlers.inputFallBackEvent),_eventruler.EventRuler.on(el,"compositionend",_eventhandlers.EventHandlers.compositionendEvent)),_eventruler.EventRuler.on(el,"setvalue",_eventhandlers.EventHandlers.setValueEvent),inputmask.undoValue=_positioning.getBufferTemplate.call(inputmask).join("");var activeElement=(el.inputmask.shadowRoot||document).activeElement;if(""!==el.inputmask._valueGet(!0)||!1===opts.clearMaskOnLostFocus||activeElement===el){(0,_inputHandling.applyInputValue)(el,el.inputmask._valueGet(!0),opts);var buffer=_positioning.getBuffer.call(inputmask).slice();!1===_validation.isComplete.call(inputmask,buffer)&&opts.clearIncomplete&&_positioning.resetMaskSet.call(inputmask),opts.clearMaskOnLostFocus&&activeElement!==el&&(-1===_positioning.getLastValidPosition.call(inputmask)?buffer=[]:_inputHandling.clearOptionalTail.call(inputmask,buffer)),(!1===opts.clearMaskOnLostFocus||opts.showMaskOnFocus&&activeElement===el||""!==el.inputmask._valueGet(!0))&&(0,_inputHandling.writeBuffer)(el,buffer),activeElement===el&&_positioning.caret.call(inputmask,el,_positioning.seekNext.call(inputmask,_positioning.getLastValidPosition.call(inputmask)))}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateMaskSet=generateMaskSet,exports.analyseMask=analyseMask;var $=__webpack_require__(11);function generateMaskSet(opts,nocache){var ms;function generateMask(mask,metadata,opts){var regexMask=!1,masksetDefinition,maskdefKey;if(null!==mask&&""!==mask||(regexMask=null!==opts.regex,mask=regexMask?(mask=opts.regex,mask.replace(/^(\^)(.*)(\$)$/,"$2")):(regexMask=!0,".*")),1===mask.length&&!1===opts.greedy&&0!==opts.repeat&&(opts.placeholder=""),0<opts.repeat||"*"===opts.repeat||"+"===opts.repeat){var repeatStart="*"===opts.repeat?0:"+"===opts.repeat?1:opts.repeat;mask=opts.groupmarker[0]+mask+opts.groupmarker[1]+opts.quantifiermarker[0]+repeatStart+","+opts.repeat+opts.quantifiermarker[1]}return maskdefKey=regexMask?"regex_"+opts.regex:opts.numericInput?mask.split("").reverse().join(""):mask,!1!==opts.keepStatic&&(maskdefKey="ks_"+maskdefKey),void 0===Inputmask.prototype.masksCache[maskdefKey]||!0===nocache?(masksetDefinition={mask:mask,maskToken:Inputmask.prototype.analyseMask(mask,regexMask,opts),validPositions:{},_buffer:void 0,buffer:void 0,tests:{},excludes:{},metadata:metadata,maskLength:void 0,jitOffset:{}},!0!==nocache&&(Inputmask.prototype.masksCache[maskdefKey]=masksetDefinition,masksetDefinition=$.extend(!0,{},Inputmask.prototype.masksCache[maskdefKey]))):masksetDefinition=$.extend(!0,{},Inputmask.prototype.masksCache[maskdefKey]),masksetDefinition}if($.isFunction(opts.mask)&&(opts.mask=opts.mask(opts)),$.isArray(opts.mask)){if(1<opts.mask.length){null===opts.keepStatic&&(opts.keepStatic=!0);var altMask=opts.groupmarker[0];return $.each(opts.isRTL?opts.mask.reverse():opts.mask,function(ndx,msk){1<altMask.length&&(altMask+=opts.groupmarker[1]+opts.alternatormarker+opts.groupmarker[0]),void 0===msk.mask||$.isFunction(msk.mask)?altMask+=msk:altMask+=msk.mask}),altMask+=opts.groupmarker[1],generateMask(altMask,opts.mask,opts)}opts.mask=opts.mask.pop()}return null===opts.keepStatic&&(opts.keepStatic=!1),ms=opts.mask&&void 0!==opts.mask.mask&&!$.isFunction(opts.mask.mask)?generateMask(opts.mask.mask,opts.mask,opts):generateMask(opts.mask,opts.mask,opts),ms}function analyseMask(mask,regexMask,opts){var tokenizer=/(?:[?*+]|\{[0-9+*]+(?:,[0-9+*]*)?(?:\|[0-9+*]*)?\})|[^.?*+^${[]()|\\]+|./g,regexTokenizer=/\[\^?]?(?:[^\\\]]+|\\[\S\s]?)*]?|\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9][0-9]*|x[0-9A-Fa-f]{2}|u[0-9A-Fa-f]{4}|c[A-Za-z]|[\S\s]?)|\((?:\?[:=!]?)?|(?:[?*+]|\{[0-9]+(?:,[0-9]*)?\})\??|[^.?*+^${[()|\\]+|./g,escaped=!1,currentToken=new MaskToken,match,m,openenings=[],maskTokens=[],openingToken,currentOpeningToken,alternator,lastMatch,closeRegexGroup=!1;function MaskToken(isGroup,isOptional,isQuantifier,isAlternator){this.matches=[],this.openGroup=isGroup||!1,this.alternatorGroup=!1,this.isGroup=isGroup||!1,this.isOptional=isOptional||!1,this.isQuantifier=isQuantifier||!1,this.isAlternator=isAlternator||!1,this.quantifier={min:1,max:1}}function insertTestDefinition(mtoken,element,position){position=void 0!==position?position:mtoken.matches.length;var prevMatch=mtoken.matches[position-1];if(regexMask)0===element.indexOf("[")||escaped&&/\\d|\\s|\\w]/i.test(element)||"."===element?mtoken.matches.splice(position++,0,{fn:new RegExp(element,opts.casing?"i":""),static:!1,optionality:!1,newBlockMarker:void 0===prevMatch?"master":prevMatch.def!==element,casing:null,def:element,placeholder:void 0,nativeDef:element}):(escaped&&(element=element[element.length-1]),$.each(element.split(""),function(ndx,lmnt){prevMatch=mtoken.matches[position-1],mtoken.matches.splice(position++,0,{fn:/[a-z]/i.test(opts.staticDefinitionSymbol||lmnt)?new RegExp("["+(opts.staticDefinitionSymbol||lmnt)+"]",opts.casing?"i":""):null,static:!0,optionality:!1,newBlockMarker:void 0===prevMatch?"master":prevMatch.def!==lmnt&&!0!==prevMatch.static,casing:null,def:opts.staticDefinitionSymbol||lmnt,placeholder:void 0!==opts.staticDefinitionSymbol?lmnt:void 0,nativeDef:(escaped?"'":"")+lmnt})})),escaped=!1;else{var maskdef=(opts.definitions?opts.definitions[element]:void 0)||Inputmask.prototype.definitions[element];maskdef&&!escaped?mtoken.matches.splice(position++,0,{fn:maskdef.validator?"string"==typeof maskdef.validator?new RegExp(maskdef.validator,opts.casing?"i":""):new function(){this.test=maskdef.validator}:new RegExp("."),static:maskdef.static||!1,optionality:!1,newBlockMarker:void 0===prevMatch?"master":prevMatch.def!==(maskdef.definitionSymbol||element),casing:maskdef.casing,def:maskdef.definitionSymbol||element,placeholder:maskdef.placeholder,nativeDef:element,generated:maskdef.generated}):(mtoken.matches.splice(position++,0,{fn:/[a-z]/i.test(opts.staticDefinitionSymbol||element)?new RegExp("["+(opts.staticDefinitionSymbol||element)+"]",opts.casing?"i":""):null,static:!0,optionality:!1,newBlockMarker:void 0===prevMatch?"master":prevMatch.def!==element&&!0!==prevMatch.static,casing:null,def:opts.staticDefinitionSymbol||element,placeholder:void 0!==opts.staticDefinitionSymbol?element:void 0,nativeDef:(escaped?"'":"")+element}),escaped=!1)}}function verifyGroupMarker(maskToken){maskToken&&maskToken.matches&&$.each(maskToken.matches,function(ndx,token){var nextToken=maskToken.matches[ndx+1];(void 0===nextToken||void 0===nextToken.matches||!1===nextToken.isQuantifier)&&token&&token.isGroup&&(token.isGroup=!1,regexMask||(insertTestDefinition(token,opts.groupmarker[0],0),!0!==token.openGroup&&insertTestDefinition(token,opts.groupmarker[1]))),verifyGroupMarker(token)})}function defaultCase(){if(0<openenings.length){if(currentOpeningToken=openenings[openenings.length-1],insertTestDefinition(currentOpeningToken,m),currentOpeningToken.isAlternator){alternator=openenings.pop();for(var mndx=0;mndx<alternator.matches.length;mndx++)alternator.matches[mndx].isGroup&&(alternator.matches[mndx].isGroup=!1);0<openenings.length?(currentOpeningToken=openenings[openenings.length-1],currentOpeningToken.matches.push(alternator)):currentToken.matches.push(alternator)}}else insertTestDefinition(currentToken,m)}function reverseTokens(maskToken){function reverseStatic(st){return st===opts.optionalmarker[0]?st=opts.optionalmarker[1]:st===opts.optionalmarker[1]?st=opts.optionalmarker[0]:st===opts.groupmarker[0]?st=opts.groupmarker[1]:st===opts.groupmarker[1]&&(st=opts.groupmarker[0]),st}for(var match in maskToken.matches=maskToken.matches.reverse(),maskToken.matches)if(Object.prototype.hasOwnProperty.call(maskToken.matches,match)){var intMatch=parseInt(match);if(maskToken.matches[match].isQuantifier&&maskToken.matches[intMatch+1]&&maskToken.matches[intMatch+1].isGroup){var qt=maskToken.matches[match];maskToken.matches.splice(match,1),maskToken.matches.splice(intMatch+1,0,qt)}void 0!==maskToken.matches[match].matches?maskToken.matches[match]=reverseTokens(maskToken.matches[match]):maskToken.matches[match]=reverseStatic(maskToken.matches[match])}return maskToken}function groupify(matches){var groupToken=new MaskToken(!0);return groupToken.openGroup=!1,groupToken.matches=matches,groupToken}function closeGroup(){if(openingToken=openenings.pop(),openingToken.openGroup=!1,void 0!==openingToken)if(0<openenings.length){if(currentOpeningToken=openenings[openenings.length-1],currentOpeningToken.matches.push(openingToken),currentOpeningToken.isAlternator){alternator=openenings.pop();for(var mndx=0;mndx<alternator.matches.length;mndx++)alternator.matches[mndx].isGroup=!1,alternator.matches[mndx].alternatorGroup=!1;0<openenings.length?(currentOpeningToken=openenings[openenings.length-1],currentOpeningToken.matches.push(alternator)):currentToken.matches.push(alternator)}}else currentToken.matches.push(openingToken);else defaultCase()}function groupQuantifier(matches){var lastMatch=matches.pop();return lastMatch.isQuantifier&&(lastMatch=groupify([matches.pop(),lastMatch])),lastMatch}for(regexMask&&(opts.optionalmarker[0]=void 0,opts.optionalmarker[1]=void 0);match=regexMask?regexTokenizer.exec(mask):tokenizer.exec(mask);){if(m=match[0],regexMask)switch(m.charAt(0)){case"?":m="{0,1}";break;case"+":case"*":m="{"+m+"}";break;case"|":if(0===openenings.length){var altRegexGroup=groupify(currentToken.matches);altRegexGroup.openGroup=!0,openenings.push(altRegexGroup),currentToken.matches=[],closeRegexGroup=!0}break}if(escaped)defaultCase();else switch(m.charAt(0)){case"(?=":break;case"(?!":break;case"(?<=":break;case"(?<!":break;case opts.escapeChar:escaped=!0,regexMask&&defaultCase();break;case opts.optionalmarker[1]:case opts.groupmarker[1]:closeGroup();break;case opts.optionalmarker[0]:openenings.push(new MaskToken(!1,!0));break;case opts.groupmarker[0]:openenings.push(new MaskToken(!0));break;case opts.quantifiermarker[0]:var quantifier=new MaskToken(!1,!1,!0);m=m.replace(/[{}]/g,"");var mqj=m.split("|"),mq=mqj[0].split(","),mq0=isNaN(mq[0])?mq[0]:parseInt(mq[0]),mq1=1===mq.length?mq0:isNaN(mq[1])?mq[1]:parseInt(mq[1]);"*"!==mq0&&"+"!==mq0||(mq0="*"===mq1?0:1),quantifier.quantifier={min:mq0,max:mq1,jit:mqj[1]};var matches=0<openenings.length?openenings[openenings.length-1].matches:currentToken.matches;if(match=matches.pop(),match.isAlternator){matches.push(match),matches=match.matches;var groupToken=new MaskToken(!0),tmpMatch=matches.pop();matches.push(groupToken),matches=groupToken.matches,match=tmpMatch}match.isGroup||(match=groupify([match])),matches.push(match),matches.push(quantifier);break;case opts.alternatormarker:if(0<openenings.length){currentOpeningToken=openenings[openenings.length-1];var subToken=currentOpeningToken.matches[currentOpeningToken.matches.length-1];lastMatch=currentOpeningToken.openGroup&&(void 0===subToken.matches||!1===subToken.isGroup&&!1===subToken.isAlternator)?openenings.pop():groupQuantifier(currentOpeningToken.matches)}else lastMatch=groupQuantifier(currentToken.matches);if(lastMatch.isAlternator)openenings.push(lastMatch);else if(lastMatch.alternatorGroup?(alternator=openenings.pop(),lastMatch.alternatorGroup=!1):alternator=new MaskToken(!1,!1,!1,!0),alternator.matches.push(lastMatch),openenings.push(alternator),lastMatch.openGroup){lastMatch.openGroup=!1;var alternatorGroup=new MaskToken(!0);alternatorGroup.alternatorGroup=!0,openenings.push(alternatorGroup)}break;default:defaultCase()}}for(closeRegexGroup&&closeGroup();0<openenings.length;)openingToken=openenings.pop(),currentToken.matches.push(openingToken);return 0<currentToken.matches.length&&(verifyGroupMarker(currentToken),maskTokens.push(currentToken)),(opts.numericInput||opts.isRTL)&&reverseTokens(maskTokens[0]),maskTokens}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var Inputmask=__webpack_require__(1),$=Inputmask.dependencyLib,keyCode=__webpack_require__(0),currentYear=(new Date).getFullYear(),escapeRegex=__webpack_require__(13).default,formatCode={d:["[1-9]|[12][0-9]|3[01]",Date.prototype.setDate,"day",Date.prototype.getDate],dd:["0[1-9]|[12][0-9]|3[01]",Date.prototype.setDate,"day",function(){return pad(Date.prototype.getDate.call(this),2)}],ddd:[""],dddd:[""],m:["[1-9]|1[012]",Date.prototype.setMonth,"month",function(){return Date.prototype.getMonth.call(this)+1}],mm:["0[1-9]|1[012]",Date.prototype.setMonth,"month",function(){return pad(Date.prototype.getMonth.call(this)+1,2)}],mmm:[""],mmmm:[""],yy:["[0-9]{2}",Date.prototype.setFullYear,"year",function(){return pad(Date.prototype.getFullYear.call(this),2)}],yyyy:["[0-9]{4}",Date.prototype.setFullYear,"year",function(){return pad(Date.prototype.getFullYear.call(this),4)}],h:["[1-9]|1[0-2]",Date.prototype.setHours,"hours",Date.prototype.getHours],hh:["0[1-9]|1[0-2]",Date.prototype.setHours,"hours",function(){return pad(Date.prototype.getHours.call(this),2)}],hx:[function(x){return"[0-9]{".concat(x,"}")},Date.prototype.setHours,"hours",function(x){return Date.prototype.getHours}],H:["1?[0-9]|2[0-3]",Date.prototype.setHours,"hours",Date.prototype.getHours],HH:["0[0-9]|1[0-9]|2[0-3]",Date.prototype.setHours,"hours",function(){return pad(Date.prototype.getHours.call(this),2)}],Hx:[function(x){return"[0-9]{".concat(x,"}")},Date.prototype.setHours,"hours",function(x){return function(){return pad(Date.prototype.getHours.call(this),x)}}],M:["[1-5]?[0-9]",Date.prototype.setMinutes,"minutes",Date.prototype.getMinutes],MM:["0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]",Date.prototype.setMinutes,"minutes",function(){return pad(Date.prototype.getMinutes.call(this),2)}],s:["[1-5]?[0-9]",Date.prototype.setSeconds,"seconds",Date.prototype.getSeconds],ss:["0[0-9]|1[0-9]|2[0-9]|3[0-9]|4[0-9]|5[0-9]",Date.prototype.setSeconds,"seconds",function(){return pad(Date.prototype.getSeconds.call(this),2)}],l:["[0-9]{3}",Date.prototype.setMilliseconds,"milliseconds",function(){return pad(Date.prototype.getMilliseconds.call(this),3)}],L:["[0-9]{2}",Date.prototype.setMilliseconds,"milliseconds",function(){return pad(Date.prototype.getMilliseconds.call(this),2)}],t:["[ap]"],tt:["[ap]m"],T:["[AP]"],TT:["[AP]M"],Z:[""],o:[""],S:[""]},formatAlias={isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};function formatcode(match){var dynMatches=new RegExp("\\d+$").exec(match[0]);if(dynMatches&&void 0!==dynMatches[0]){var fcode=formatCode[match[0][0]+"x"].slice("");return fcode[0]=fcode[0](dynMatches[0]),fcode[3]=fcode[3](dynMatches[0]),fcode}if(formatCode[match[0]])return formatCode[match[0]]}function getTokenizer(opts){if(!opts.tokenizer){var tokens=[],dyntokens=[];for(var ndx in formatCode)if(/\.*x$/.test(ndx)){var dynToken=ndx[0]+"\\d+";-1===dyntokens.indexOf(dynToken)&&dyntokens.push(dynToken)}else-1===tokens.indexOf(ndx[0])&&tokens.push(ndx[0]);opts.tokenizer="("+(0<dyntokens.length?dyntokens.join("|")+"|":"")+tokens.join("+|")+")+?|.",opts.tokenizer=new RegExp(opts.tokenizer,"g")}return opts.tokenizer}function prefillYear(dateParts,currentResult,opts){if(dateParts.year!==dateParts.rawyear){var crrntyear=currentYear.toString(),enteredPart=dateParts.rawyear.replace(/[^0-9]/g,""),currentYearPart=crrntyear.slice(0,enteredPart.length),currentYearNextPart=crrntyear.slice(enteredPart.length);if(2===enteredPart.length&&enteredPart===currentYearPart){var entryCurrentYear=new Date(currentYear,dateParts.month-1,dateParts.day);dateParts.day==entryCurrentYear.getDate()&&(!opts.max||opts.max.date.getTime()>=entryCurrentYear.getTime())&&(dateParts.date.setFullYear(currentYear),dateParts.year=crrntyear,currentResult.insert=[{pos:currentResult.pos+1,c:currentYearNextPart[0]},{pos:currentResult.pos+2,c:currentYearNextPart[1]}])}}return currentResult}function isValidDate(dateParts,currentResult,opts){if(!isFinite(dateParts.rawday)||"29"==dateParts.day&&!isFinite(dateParts.rawyear)||new Date(dateParts.date.getFullYear(),isFinite(dateParts.rawmonth)?dateParts.month:dateParts.date.getMonth()+1,0).getDate()>=dateParts.day)return currentResult;if("29"==dateParts.day){var tokenMatch=getTokenMatch(currentResult.pos,opts);if("yyyy"===tokenMatch.targetMatch[0]&&currentResult.pos-tokenMatch.targetMatchIndex==2)return currentResult.remove=currentResult.pos+1,currentResult}return!1}function isDateInRange(dateParts,result,opts,maskset,fromCheckval){if(!result)return result;if(opts.min){if(dateParts.rawyear){var rawYear=dateParts.rawyear.replace(/[^0-9]/g,""),minYear=opts.min.year.substr(0,rawYear.length),maxYear;if(rawYear<minYear){var tokenMatch=getTokenMatch(result.pos,opts);if(rawYear=dateParts.rawyear.substr(0,result.pos-tokenMatch.targetMatchIndex+1),minYear=opts.min.year.substr(0,rawYear.length),minYear<=rawYear)return result.remove=tokenMatch.targetMatchIndex+rawYear.length,result;if(rawYear="yyyy"===tokenMatch.targetMatch[0]?dateParts.rawyear.substr(1,1):dateParts.rawyear.substr(0,1),minYear=opts.min.year.substr(2,1),maxYear=opts.max?opts.max.year.substr(2,1):rawYear,1===rawYear.length&&minYear<=rawYear<=maxYear&&!0!==fromCheckval)return"yyyy"===tokenMatch.targetMatch[0]?(result.insert=[{pos:result.pos+1,c:rawYear,strict:!0}],result.caret=result.pos+2,maskset.validPositions[result.pos].input=opts.min.year[1]):(result.insert=[{pos:result.pos+1,c:opts.min.year[1],strict:!0},{pos:result.pos+2,c:rawYear,strict:!0}],result.caret=result.pos+3,maskset.validPositions[result.pos].input=opts.min.year[0]),result;result=!1}}result&&dateParts.year&&dateParts.year===dateParts.rawyear&&opts.min.date.getTime()==opts.min.date.getTime()&&(result=opts.min.date.getTime()<=dateParts.date.getTime())}return result&&opts.max&&opts.max.date.getTime()==opts.max.date.getTime()&&(result=opts.max.date.getTime()>=dateParts.date.getTime()),result}function parse(format,dateObjValue,opts,raw){var mask="",match,fcode;for(getTokenizer(opts).lastIndex=0;match=getTokenizer(opts).exec(format);)if(void 0===dateObjValue)if(fcode=formatcode(match))mask+="("+fcode[0]+")";else switch(match[0]){case"[":mask+="(";break;case"]":mask+=")?";break;default:mask+=escapeRegex(match[0])}else if(fcode=formatcode(match))if(!0!==raw&&fcode[3]){var getFn=fcode[3];mask+=getFn.call(dateObjValue.date)}else fcode[2]?mask+=dateObjValue["raw"+fcode[2]]:mask+=match[0];else mask+=match[0];return mask}function pad(val,len){for(val=String(val),len=len||2;val.length<len;)val="0"+val;return val}function analyseMask(maskString,format,opts){var dateObj={date:new Date(1,0,1)},targetProp,mask=maskString,match,dateOperation;function setValue(dateObj,value,opts){dateObj[targetProp]=value.replace(/[^0-9]/g,"0"),dateObj["raw"+targetProp]=value,void 0!==dateOperation&&dateOperation.call(dateObj.date,"month"==targetProp?parseInt(dateObj[targetProp])-1:dateObj[targetProp])}if("string"==typeof mask){for(getTokenizer(opts).lastIndex=0;match=getTokenizer(opts).exec(format);){var dynMatches=new RegExp("\\d+$").exec(match[0]),fcode=dynMatches?match[0][0]+"x":match[0],value=void 0;if(dynMatches){var lastIndex=getTokenizer(opts).lastIndex,tokanMatch=getTokenMatch(match.index,opts);getTokenizer(opts).lastIndex=lastIndex,value=mask.slice(0,mask.indexOf(tokanMatch.nextMatch[0]))}else value=mask.slice(0,fcode.length);Object.prototype.hasOwnProperty.call(formatCode,fcode)&&(targetProp=formatCode[fcode][2],dateOperation=formatCode[fcode][1],setValue(dateObj,value,opts)),mask=mask.slice(value.length)}return dateObj}if(mask&&"object"===_typeof(mask)&&Object.prototype.hasOwnProperty.call(mask,"date"))return mask}function importDate(dateObj,opts){return parse(opts.inputFormat,{date:dateObj},opts)}function getTokenMatch(pos,opts){var calcPos=0,targetMatch,match,matchLength=0;for(getTokenizer(opts).lastIndex=0;match=getTokenizer(opts).exec(opts.inputFormat);){var dynMatches=new RegExp("\\d+$").exec(match[0]);if(matchLength=dynMatches?parseInt(dynMatches[0]):match[0].length,calcPos+=matchLength,pos<=calcPos){targetMatch=match,match=getTokenizer(opts).exec(opts.inputFormat);break}}return{targetMatchIndex:calcPos-matchLength,nextMatch:match,targetMatch:targetMatch}}Inputmask.extendAliases({datetime:{mask:function mask(opts){return opts.numericInput=!1,formatCode.S=opts.i18n.ordinalSuffix.join("|"),opts.inputFormat=formatAlias[opts.inputFormat]||opts.inputFormat,opts.displayFormat=formatAlias[opts.displayFormat]||opts.displayFormat||opts.inputFormat,opts.outputFormat=formatAlias[opts.outputFormat]||opts.outputFormat||opts.inputFormat,opts.placeholder=""!==opts.placeholder?opts.placeholder:opts.inputFormat.replace(/[[\]]/,""),opts.regex=parse(opts.inputFormat,void 0,opts),opts.min=analyseMask(opts.min,opts.inputFormat,opts),opts.max=analyseMask(opts.max,opts.inputFormat,opts),null},placeholder:"",inputFormat:"isoDateTime",displayFormat:void 0,outputFormat:void 0,min:null,max:null,skipOptionalPartCharacter:"",i18n:{dayNames:["Mon","Tue","Wed","Thu","Fri","Sat","Sun","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"],ordinalSuffix:["st","nd","rd","th"]},preValidation:function preValidation(buffer,pos,c,isSelection,opts,maskset,caretPos,strict){if(strict)return!0;if(isNaN(c)&&buffer[pos]!==c){var tokenMatch=getTokenMatch(pos,opts);if(tokenMatch.nextMatch&&tokenMatch.nextMatch[0]===c&&1<tokenMatch.targetMatch[0].length){var validator=formatCode[tokenMatch.targetMatch[0]][0];if(new RegExp(validator).test("0"+buffer[pos-1]))return buffer[pos]=buffer[pos-1],buffer[pos-1]="0",{fuzzy:!0,buffer:buffer,refreshFromBuffer:{start:pos-1,end:pos+1},pos:pos+1}}}return!0},postValidation:function postValidation(buffer,pos,c,currentResult,opts,maskset,strict,fromCheckval){if(strict)return!0;var tokenMatch,validator;if(!1===currentResult)return tokenMatch=getTokenMatch(pos+1,opts),tokenMatch.targetMatch&&tokenMatch.targetMatchIndex===pos&&1<tokenMatch.targetMatch[0].length&&void 0!==formatCode[tokenMatch.targetMatch[0]]&&(validator=formatCode[tokenMatch.targetMatch[0]][0],new RegExp(validator).test("0"+c))?{insert:[{pos:pos,c:"0"},{pos:pos+1,c:c}],pos:pos+1}:currentResult;if(currentResult.fuzzy&&(buffer=currentResult.buffer,pos=currentResult.pos),tokenMatch=getTokenMatch(pos,opts),tokenMatch.targetMatch&&tokenMatch.targetMatch[0]&&void 0!==formatCode[tokenMatch.targetMatch[0]]){validator=formatCode[tokenMatch.targetMatch[0]][0];var part=buffer.slice(tokenMatch.targetMatchIndex,tokenMatch.targetMatchIndex+tokenMatch.targetMatch[0].length);!1===new RegExp(validator).test(part.join(""))&&2===tokenMatch.targetMatch[0].length&&maskset.validPositions[tokenMatch.targetMatchIndex]&&maskset.validPositions[tokenMatch.targetMatchIndex+1]&&(maskset.validPositions[tokenMatch.targetMatchIndex+1].input="0")}var result=currentResult,dateParts=analyseMask(buffer.join(""),opts.inputFormat,opts);return result&&dateParts.date.getTime()==dateParts.date.getTime()&&(result=prefillYear(dateParts,result,opts),result=isValidDate(dateParts,result,opts),result=isDateInRange(dateParts,result,opts,maskset,fromCheckval)),pos&&result&&currentResult.pos!==pos?{buffer:parse(opts.inputFormat,dateParts,opts).split(""),refreshFromBuffer:{start:pos,end:currentResult.pos}}:result},onKeyDown:function onKeyDown(e,buffer,caretPos,opts){var input=this;e.ctrlKey&&e.keyCode===keyCode.RIGHT&&(this.inputmask._valueSet(importDate(new Date,opts)),$(this).trigger("setvalue"))},onUnMask:function onUnMask(maskedValue,unmaskedValue,opts){return unmaskedValue?parse(opts.outputFormat,analyseMask(maskedValue,opts.inputFormat,opts),opts,!0):unmaskedValue},casing:function casing(elem,test,pos,validPositions){return 0==test.nativeDef.indexOf("[ap]")?elem.toLowerCase():0==test.nativeDef.indexOf("[AP]")?elem.toUpperCase():elem},onBeforeMask:function onBeforeMask(initialValue,opts){return"[object Date]"===Object.prototype.toString.call(initialValue)&&(initialValue=importDate(initialValue,opts)),initialValue},insertMode:!1,shiftPositions:!1,keepStatic:!1,inputmode:"numeric"}}),module.exports=Inputmask},function(module,exports,__webpack_require__){"use strict";var Inputmask=__webpack_require__(1),$=Inputmask.dependencyLib,keyCode=__webpack_require__(0),escapeRegex=__webpack_require__(13).default;function autoEscape(txt,opts){for(var escapedTxt="",i=0;i<txt.length;i++)Inputmask.prototype.definitions[txt.charAt(i)]||opts.definitions[txt.charAt(i)]||opts.optionalmarker[0]===txt.charAt(i)||opts.optionalmarker[1]===txt.charAt(i)||opts.quantifiermarker[0]===txt.charAt(i)||opts.quantifiermarker[1]===txt.charAt(i)||opts.groupmarker[0]===txt.charAt(i)||opts.groupmarker[1]===txt.charAt(i)||opts.alternatormarker===txt.charAt(i)?escapedTxt+="\\"+txt.charAt(i):escapedTxt+=txt.charAt(i);return escapedTxt}function alignDigits(buffer,digits,opts,force){if(0<buffer.length&&0<digits&&(!opts.digitsOptional||force)){var radixPosition=$.inArray(opts.radixPoint,buffer);-1===radixPosition&&(buffer.push(opts.radixPoint),radixPosition=buffer.length-1);for(var i=1;i<=digits;i++)isFinite(buffer[radixPosition+i])||(buffer[radixPosition+i]="0")}return buffer}function findValidator(symbol,maskset){var posNdx=0;if("+"===symbol){for(posNdx in maskset.validPositions);posNdx=parseInt(posNdx)}for(var tstNdx in maskset.tests)if(tstNdx=parseInt(tstNdx),posNdx<=tstNdx)for(var ndx=0,ndxl=maskset.tests[tstNdx].length;ndx<ndxl;ndx++)if((void 0===maskset.validPositions[tstNdx]||"-"===symbol)&&maskset.tests[tstNdx][ndx].match.def===symbol)return tstNdx+(void 0!==maskset.validPositions[tstNdx]&&"-"!==symbol?1:0);return posNdx}function findValid(symbol,maskset){var ret=-1;return $.each(maskset.validPositions,function(ndx,tst){if(tst&&tst.match.def===symbol)return ret=parseInt(ndx),!1}),ret}function parseMinMaxOptions(opts){void 0===opts.parseMinMaxOptions&&(null!==opts.min&&(opts.min=opts.min.toString().replace(new RegExp(escapeRegex(opts.groupSeparator),"g"),""),","===opts.radixPoint&&(opts.min=opts.min.replace(opts.radixPoint,".")),opts.min=isFinite(opts.min)?parseFloat(opts.min):NaN,isNaN(opts.min)&&(opts.min=Number.MIN_VALUE)),null!==opts.max&&(opts.max=opts.max.toString().replace(new RegExp(escapeRegex(opts.groupSeparator),"g"),""),","===opts.radixPoint&&(opts.max=opts.max.replace(opts.radixPoint,".")),opts.max=isFinite(opts.max)?parseFloat(opts.max):NaN,isNaN(opts.max)&&(opts.max=Number.MAX_VALUE)),opts.parseMinMaxOptions="done")}function genMask(opts){opts.repeat=0,opts.groupSeparator===opts.radixPoint&&opts.digits&&"0"!==opts.digits&&("."===opts.radixPoint?opts.groupSeparator=",":","===opts.radixPoint?opts.groupSeparator=".":opts.groupSeparator="")," "===opts.groupSeparator&&(opts.skipOptionalPartCharacter=void 0),1<opts.placeholder.length&&(opts.placeholder=opts.placeholder.charAt(0)),"radixFocus"===opts.positionCaretOnClick&&""===opts.placeholder&&(opts.positionCaretOnClick="lvp");var decimalDef="0",radixPointDef=opts.radixPoint;!0===opts.numericInput&&void 0===opts.__financeInput?(decimalDef="1",opts.positionCaretOnClick="radixFocus"===opts.positionCaretOnClick?"lvp":opts.positionCaretOnClick,opts.digitsOptional=!1,isNaN(opts.digits)&&(opts.digits=2),opts._radixDance=!1,radixPointDef=","===opts.radixPoint?"?":"!",""!==opts.radixPoint&&void 0===opts.definitions[radixPointDef]&&(opts.definitions[radixPointDef]={},opts.definitions[radixPointDef].validator="["+opts.radixPoint+"]",opts.definitions[radixPointDef].placeholder=opts.radixPoint,opts.definitions[radixPointDef].static=!0,opts.definitions[radixPointDef].generated=!0)):(opts.__financeInput=!1,opts.numericInput=!0);var mask="[+]",altMask;if(mask+=autoEscape(opts.prefix,opts),""!==opts.groupSeparator?(void 0===opts.definitions[opts.groupSeparator]&&(opts.definitions[opts.groupSeparator]={},opts.definitions[opts.groupSeparator].validator="["+opts.groupSeparator+"]",opts.definitions[opts.groupSeparator].placeholder=opts.groupSeparator,opts.definitions[opts.groupSeparator].static=!0,opts.definitions[opts.groupSeparator].generated=!0),mask+=opts._mask(opts)):mask+="9{+}",void 0!==opts.digits&&0!==opts.digits){var dq=opts.digits.toString().split(",");isFinite(dq[0])&&dq[1]&&isFinite(dq[1])?mask+=radixPointDef+decimalDef+"{"+opts.digits+"}":(isNaN(opts.digits)||0<parseInt(opts.digits))&&(opts.digitsOptional?(altMask=mask+radixPointDef+decimalDef+"{0,"+opts.digits+"}",opts.keepStatic=!0):mask+=radixPointDef+decimalDef+"{"+opts.digits+"}")}return mask+=autoEscape(opts.suffix,opts),mask+="[-]",altMask&&(mask=[altMask+autoEscape(opts.suffix,opts)+"[-]",mask]),opts.greedy=!1,parseMinMaxOptions(opts),mask}function hanndleRadixDance(pos,c,radixPos,maskset,opts){return opts._radixDance&&opts.numericInput&&c!==opts.negationSymbol.back&&pos<=radixPos&&(0<radixPos||c==opts.radixPoint)&&(void 0===maskset.validPositions[pos-1]||maskset.validPositions[pos-1].input!==opts.negationSymbol.back)&&(pos-=1),pos}function decimalValidator(chrs,maskset,pos,strict,opts){var radixPos=maskset.buffer?maskset.buffer.indexOf(opts.radixPoint):-1,result=-1!==radixPos&&new RegExp("[0-9\uff11-\uff19]").test(chrs);return opts._radixDance&&result&&null==maskset.validPositions[radixPos]?{insert:{pos:radixPos===pos?radixPos+1:radixPos,c:opts.radixPoint},pos:pos}:result}function checkForLeadingZeroes(buffer,opts){var numberMatches=new RegExp("(^"+(""!==opts.negationSymbol.front?escapeRegex(opts.negationSymbol.front)+"?":"")+escapeRegex(opts.prefix)+")(.*)("+escapeRegex(opts.suffix)+(""!=opts.negationSymbol.back?escapeRegex(opts.negationSymbol.back)+"?":"")+"$)").exec(buffer.slice().reverse().join("")),number=numberMatches?numberMatches[2]:"",leadingzeroes=!1;return number&&(number=number.split(opts.radixPoint.charAt(0))[0],leadingzeroes=new RegExp("^[0"+opts.groupSeparator+"]*").exec(number)),!(!leadingzeroes||!(1<leadingzeroes[0].length||0<leadingzeroes[0].length&&leadingzeroes[0].length<number.length))&&leadingzeroes}Inputmask.extendAliases({numeric:{mask:genMask,_mask:function _mask(opts){return"("+opts.groupSeparator+"999){+|1}"},digits:"*",digitsOptional:!0,enforceDigitsOnBlur:!1,radixPoint:".",positionCaretOnClick:"radixFocus",_radixDance:!0,groupSeparator:"",allowMinus:!0,negationSymbol:{front:"-",back:""},prefix:"",suffix:"",min:null,max:null,SetMaxOnOverflow:!1,step:1,inputType:"text",unmaskAsNumber:!1,roundingFN:Math.round,inputmode:"numeric",shortcuts:{k:"000",m:"000000"},placeholder:"0",greedy:!1,rightAlign:!0,insertMode:!0,autoUnmask:!1,skipOptionalPartCharacter:"",definitions:{0:{validator:decimalValidator},1:{validator:decimalValidator,definitionSymbol:"9"},"+":{validator:function validator(chrs,maskset,pos,strict,opts){return opts.allowMinus&&("-"===chrs||chrs===opts.negationSymbol.front)}},"-":{validator:function validator(chrs,maskset,pos,strict,opts){return opts.allowMinus&&chrs===opts.negationSymbol.back}}},preValidation:function preValidation(buffer,pos,c,isSelection,opts,maskset,caretPos,strict){if(!1!==opts.__financeInput&&c===opts.radixPoint)return!1;var pattern;if(pattern=opts.shortcuts&&opts.shortcuts[c]){if(1<pattern.length)for(var inserts=[],i=0;i<pattern.length;i++)inserts.push({pos:pos+i,c:pattern[i],strict:!1});return{insert:inserts}}var radixPos=$.inArray(opts.radixPoint,buffer),initPos=pos;if(pos=hanndleRadixDance(pos,c,radixPos,maskset,opts),"-"===c||c===opts.negationSymbol.front){if(!0!==opts.allowMinus)return!1;var isNegative=!1,front=findValid("+",maskset),back=findValid("-",maskset);return-1!==front&&(isNegative=[front,back]),!1!==isNegative?{remove:isNegative,caret:initPos}:{insert:[{pos:findValidator("+",maskset),c:opts.negationSymbol.front,fromIsValid:!0},{pos:findValidator("-",maskset),c:opts.negationSymbol.back,fromIsValid:void 0}],caret:initPos+opts.negationSymbol.back.length}}if(strict)return!0;if(-1!==radixPos&&!0===opts._radixDance&&!1===isSelection&&c===opts.radixPoint&&void 0!==opts.digits&&(isNaN(opts.digits)||0<parseInt(opts.digits))&&radixPos!==pos)return{caret:opts._radixDance&&pos===radixPos-1?radixPos+1:radixPos};if(!1===opts.__financeInput)if(isSelection){if(opts.digitsOptional)return{rewritePosition:caretPos.end};if(!opts.digitsOptional){if(caretPos.begin>radixPos&&caretPos.end<=radixPos)return c===opts.radixPoint?{insert:{pos:radixPos+1,c:"0",fromIsValid:!0},rewritePosition:radixPos}:{rewritePosition:radixPos+1};if(caretPos.begin<radixPos)return{rewritePosition:caretPos.begin-1}}}else if(!opts.showMaskOnHover&&!opts.showMaskOnFocus&&!opts.digitsOptional&&0<opts.digits&&""===this.inputmask.__valueGet.call(this))return{rewritePosition:radixPos};return{rewritePosition:pos}},postValidation:function postValidation(buffer,pos,c,currentResult,opts,maskset,strict){if(!1===currentResult)return currentResult;if(strict)return!0;if(null!==opts.min||null!==opts.max){var unmasked=opts.onUnMask(buffer.slice().reverse().join(""),void 0,$.extend({},opts,{unmaskAsNumber:!0}));if(null!==opts.min&&unmasked<opts.min&&(unmasked.toString().length>opts.min.toString().length||unmasked<0))return!1;if(null!==opts.max&&unmasked>opts.max)return!!opts.SetMaxOnOverflow&&{refreshFromBuffer:!0,buffer:alignDigits(opts.max.toString().replace(".",opts.radixPoint).split(""),opts.digits,opts).reverse()}}return currentResult},onUnMask:function onUnMask(maskedValue,unmaskedValue,opts){if(""===unmaskedValue&&!0===opts.nullable)return unmaskedValue;var processValue=maskedValue.replace(opts.prefix,"");return processValue=processValue.replace(opts.suffix,""),processValue=processValue.replace(new RegExp(escapeRegex(opts.groupSeparator),"g"),""),""!==opts.placeholder.charAt(0)&&(processValue=processValue.replace(new RegExp(opts.placeholder.charAt(0),"g"),"0")),opts.unmaskAsNumber?(""!==opts.radixPoint&&-1!==processValue.indexOf(opts.radixPoint)&&(processValue=processValue.replace(escapeRegex.call(this,opts.radixPoint),".")),processValue=processValue.replace(new RegExp("^"+escapeRegex(opts.negationSymbol.front)),"-"),processValue=processValue.replace(new RegExp(escapeRegex(opts.negationSymbol.back)+"$"),""),Number(processValue)):processValue},isComplete:function isComplete(buffer,opts){var maskedValue=(opts.numericInput?buffer.slice().reverse():buffer).join("");return maskedValue=maskedValue.replace(new RegExp("^"+escapeRegex(opts.negationSymbol.front)),"-"),maskedValue=maskedValue.replace(new RegExp(escapeRegex(opts.negationSymbol.back)+"$"),""),maskedValue=maskedValue.replace(opts.prefix,""),maskedValue=maskedValue.replace(opts.suffix,""),maskedValue=maskedValue.replace(new RegExp(escapeRegex(opts.groupSeparator)+"([0-9]{3})","g"),"$1"),","===opts.radixPoint&&(maskedValue=maskedValue.replace(escapeRegex(opts.radixPoint),".")),isFinite(maskedValue)},onBeforeMask:function onBeforeMask(initialValue,opts){var radixPoint=opts.radixPoint||",";isFinite(opts.digits)&&(opts.digits=parseInt(opts.digits)),"number"!=typeof initialValue&&"number"!==opts.inputType||""===radixPoint||(initialValue=initialValue.toString().replace(".",radixPoint));var valueParts=initialValue.split(radixPoint),integerPart=valueParts[0].replace(/[^\-0-9]/g,""),decimalPart=1<valueParts.length?valueParts[1].replace(/[^0-9]/g,""):"",forceDigits=1<valueParts.length;initialValue=integerPart+(""!==decimalPart?radixPoint+decimalPart:decimalPart);var digits=0;if(""!==radixPoint&&(digits=opts.digitsOptional?opts.digits<decimalPart.length?opts.digits:decimalPart.length:opts.digits,""!==decimalPart||!opts.digitsOptional)){var digitsFactor=Math.pow(10,digits||1);initialValue=initialValue.replace(escapeRegex(radixPoint),"."),isNaN(parseFloat(initialValue))||(initialValue=(opts.roundingFN(parseFloat(initialValue)*digitsFactor)/digitsFactor).toFixed(digits)),initialValue=initialValue.toString().replace(".",radixPoint)}if(0===opts.digits&&-1!==initialValue.indexOf(radixPoint)&&(initialValue=initialValue.substring(0,initialValue.indexOf(radixPoint))),null!==opts.min||null!==opts.max){var numberValue=initialValue.toString().replace(radixPoint,".");null!==opts.min&&numberValue<opts.min?initialValue=opts.min.toString().replace(".",radixPoint):null!==opts.max&&numberValue>opts.max&&(initialValue=opts.max.toString().replace(".",radixPoint))}return alignDigits(initialValue.toString().split(""),digits,opts,forceDigits).join("")},onBeforeWrite:function onBeforeWrite(e,buffer,caretPos,opts){function stripBuffer(buffer,stripRadix){if(!1!==opts.__financeInput||stripRadix){var position=$.inArray(opts.radixPoint,buffer);-1!==position&&buffer.splice(position,1)}if(""!==opts.groupSeparator)for(;-1!==(position=buffer.indexOf(opts.groupSeparator));)buffer.splice(position,1);return buffer}var result,leadingzeroes=checkForLeadingZeroes(buffer,opts);if(leadingzeroes)for(var caretNdx=buffer.join("").lastIndexOf(leadingzeroes[0].split("").reverse().join(""))-(leadingzeroes[0]==leadingzeroes.input?0:1),offset=leadingzeroes[0]==leadingzeroes.input?1:0,i=leadingzeroes[0].length-offset;0<i;i--)delete this.maskset.validPositions[caretNdx+i],delete buffer[caretNdx+i];if(e)switch(e.type){case"blur":case"checkval":if(null!==opts.min){var unmasked=opts.onUnMask(buffer.slice().reverse().join(""),void 0,$.extend({},opts,{unmaskAsNumber:!0}));if(null!==opts.min&&unmasked<opts.min)return{refreshFromBuffer:!0,buffer:alignDigits(opts.min.toString().replace(".",opts.radixPoint).split(""),opts.digits,opts).reverse()}}if(buffer[buffer.length-1]===opts.negationSymbol.front){var nmbrMtchs=new RegExp("(^"+(""!=opts.negationSymbol.front?escapeRegex(opts.negationSymbol.front)+"?":"")+escapeRegex(opts.prefix)+")(.*)("+escapeRegex(opts.suffix)+(""!=opts.negationSymbol.back?escapeRegex(opts.negationSymbol.back)+"?":"")+"$)").exec(stripBuffer(buffer.slice(),!0).reverse().join("")),number=nmbrMtchs?nmbrMtchs[2]:"";0==number&&(result={refreshFromBuffer:!0,buffer:[0]})}else""!==opts.radixPoint&&buffer[0]===opts.radixPoint&&(result&&result.buffer?result.buffer.shift():(buffer.shift(),result={refreshFromBuffer:!0,buffer:stripBuffer(buffer)}));if(opts.enforceDigitsOnBlur){result=result||{};var bffr=result&&result.buffer||buffer.slice().reverse();result.refreshFromBuffer=!0,result.buffer=alignDigits(bffr,opts.digits,opts,!0).reverse()}}return result},onKeyDown:function onKeyDown(e,buffer,caretPos,opts){var $input=$(this),bffr;if(e.ctrlKey)switch(e.keyCode){case keyCode.UP:return this.inputmask.__valueSet.call(this,parseFloat(this.inputmask.unmaskedvalue())+parseInt(opts.step)),$input.trigger("setvalue"),!1;case keyCode.DOWN:return this.inputmask.__valueSet.call(this,parseFloat(this.inputmask.unmaskedvalue())-parseInt(opts.step)),$input.trigger("setvalue"),!1}if(!e.shiftKey&&(e.keyCode===keyCode.DELETE||e.keyCode===keyCode.BACKSPACE||e.keyCode===keyCode.BACKSPACE_SAFARI)&&caretPos.begin!==buffer.length){if(buffer[e.keyCode===keyCode.DELETE?caretPos.begin-1:caretPos.end]===opts.negationSymbol.front)return bffr=buffer.slice().reverse(),""!==opts.negationSymbol.front&&bffr.shift(),""!==opts.negationSymbol.back&&bffr.pop(),$input.trigger("setvalue",[bffr.join(""),caretPos.begin]),!1;if(!0===opts._radixDance){var radixPos=$.inArray(opts.radixPoint,buffer);if(opts.digitsOptional){if(0===radixPos)return bffr=buffer.slice().reverse(),bffr.pop(),$input.trigger("setvalue",[bffr.join(""),caretPos.begin>=bffr.length?bffr.length:caretPos.begin]),!1}else if(-1!==radixPos&&(caretPos.begin<radixPos||caretPos.end<radixPos||e.keyCode===keyCode.DELETE&&caretPos.begin===radixPos))return caretPos.begin!==caretPos.end||e.keyCode!==keyCode.BACKSPACE&&e.keyCode!==keyCode.BACKSPACE_SAFARI||caretPos.begin++,bffr=buffer.slice().reverse(),bffr.splice(bffr.length-caretPos.begin,caretPos.begin-caretPos.end+1),bffr=alignDigits(bffr,opts.digits,opts).join(""),$input.trigger("setvalue",[bffr,caretPos.begin>=bffr.length?radixPos+1:caretPos.begin]),!1}}}},currency:{prefix:"",groupSeparator:",",alias:"numeric",digits:2,digitsOptional:!1},decimal:{alias:"numeric"},integer:{alias:"numeric",digits:0},percentage:{alias:"numeric",min:0,max:100,suffix:" %",digits:0,allowMinus:!1},indianns:{alias:"numeric",_mask:function _mask(opts){return"("+opts.groupSeparator+"99){*|1}("+opts.groupSeparator+"999){1|1}"},groupSeparator:",",radixPoint:".",placeholder:"0",digits:2,digitsOptional:!1}}),module.exports=Inputmask},function(module,exports,__webpack_require__){"use strict";var _window=_interopRequireDefault(__webpack_require__(12)),_inputmask=_interopRequireDefault(__webpack_require__(1));function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}function _createSuper(Derived){return function(){var Super=_getPrototypeOf(Derived),result;if(_isNativeReflectConstruct()){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(Class){if(null===Class||!_isNativeFunction(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if("undefined"!=typeof _cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)},_wrapNativeSuper(Class)}function _construct(Parent,args,Class){return _construct=_isNativeReflectConstruct()?Reflect.construct:function _construct(Parent,args,Class){var a=[null];a.push.apply(a,args);var Constructor=Function.bind.apply(Parent,a),instance=new Constructor;return Class&&_setPrototypeOf(instance,Class.prototype),instance},_construct.apply(null,arguments)}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var document=_window.default.document;if(document&&document.head&&document.head.attachShadow&&_window.default.customElements&&void 0===_window.default.customElements.get("input-mask")){var InputmaskElement=function(_HTMLElement){_inherits(InputmaskElement,_HTMLElement);var _super=_createSuper(InputmaskElement);function InputmaskElement(){var _this;_classCallCheck(this,InputmaskElement),_this=_super.call(this);var attributeNames=_this.getAttributeNames(),shadow=_this.attachShadow({mode:"closed"}),input=document.createElement("input");for(var attr in input.type="text",shadow.appendChild(input),attributeNames)Object.prototype.hasOwnProperty.call(attributeNames,attr)&&input.setAttribute(attributeNames[attr],_this.getAttribute(attributeNames[attr]));var im=new _inputmask.default;return im.dataAttribute="",im.mask(input),input.inputmask.shadowRoot=shadow,_this}return InputmaskElement}(_wrapNativeSuper(HTMLElement));_window.default.customElements.define("input-mask",InputmaskElement)}},function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var $=__webpack_require__(8),Inputmask=__webpack_require__(1);void 0===$.fn.inputmask&&($.fn.inputmask=function(fn,options){var nptmask,input=this[0];if(void 0===options&&(options={}),"string"==typeof fn)switch(fn){case"unmaskedvalue":return input&&input.inputmask?input.inputmask.unmaskedvalue():$(input).val();case"remove":return this.each(function(){this.inputmask&&this.inputmask.remove()});case"getemptymask":return input&&input.inputmask?input.inputmask.getemptymask():"";case"hasMaskedValue":return!(!input||!input.inputmask)&&input.inputmask.hasMaskedValue();case"isComplete":return!input||!input.inputmask||input.inputmask.isComplete();case"getmetadata":return input&&input.inputmask?input.inputmask.getmetadata():void 0;case"setvalue":Inputmask.setValue(input,options);break;case"option":if("string"!=typeof options)return this.each(function(){if(void 0!==this.inputmask)return this.inputmask.option(options)});if(input&&void 0!==input.inputmask)return input.inputmask.option(options);break;default:return options.alias=fn,nptmask=new Inputmask(options),this.each(function(){nptmask.mask(this)})}else{if(Array.isArray(fn))return options.alias=fn,nptmask=new Inputmask(options),this.each(function(){nptmask.mask(this)});if("object"==_typeof(fn))return nptmask=new Inputmask(fn),void 0===fn.mask&&void 0===fn.alias?this.each(function(){if(void 0!==this.inputmask)return this.inputmask.option(fn);nptmask.mask(this)}):this.each(function(){nptmask.mask(this)});if(void 0===fn)return this.each(function(){nptmask=new Inputmask(options),nptmask.mask(this)})}})},function(module,exports,__webpack_require__){"use strict";var im=__webpack_require__(14),jQuery=__webpack_require__(8);im.dependencyLib===jQuery&&__webpack_require__(21),module.exports=im}],installedModules={},__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{enumerable:!0,get:getter})},__webpack_require__.r=function(exports){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(exports,"__esModule",{value:!0})},__webpack_require__.t=function(value,mode){if(1&mode&&(value=__webpack_require__(value)),8&mode)return value;if(4&mode&&"object"==typeof value&&value&&value.__esModule)return value;var ns=Object.create(null);if(__webpack_require__.r(ns),Object.defineProperty(ns,"default",{enumerable:!0,value:value}),2&mode&&"string"!=typeof value)for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module.default}:function getModuleExports(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=22);function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}var modules,installedModules});
!function(t,s,e,i){"use strict";var a=t.fn.twbsPagination,n=function(s,e){if(this.$element=t(s),this.options=t.extend({},t.fn.twbsPagination.defaults,e),this.options.startPage<1||this.options.startPage>this.options.totalPages)throw new Error("Start page option is incorrect");if(this.options.totalPages=parseInt(this.options.totalPages),isNaN(this.options.totalPages))throw new Error("Total pages option is not correct!");if(this.options.visiblePages=parseInt(this.options.visiblePages),isNaN(this.options.visiblePages))throw new Error("Visible pages option is not correct!");if(this.options.beforePageClick instanceof Function&&this.$element.first().on("beforePage",this.options.beforePageClick),this.options.onPageClick instanceof Function&&this.$element.first().on("page",this.options.onPageClick),this.options.hideOnlyOnePage&&1==this.options.totalPages)return this.options.initiateStartPageClick&&this.$element.trigger("page",1),this;if(this.options.href&&(this.options.startPage=this.getPageFromQueryString(),this.options.startPage||(this.options.startPage=1)),"UL"===("function"==typeof this.$element.prop?this.$element.prop("tagName"):this.$element.attr("tagName")))this.$listContainer=this.$element;else{var i=this.$element,a=t([]);i.each(function(s){var e=t("<ul></ul>");t(this).append(e),a.push(e[0])}),this.$listContainer=a,this.$element=a}return this.$listContainer.addClass(this.options.paginationClass),this.options.initiateStartPageClick?this.show(this.options.startPage):(this.currentPage=this.options.startPage,this.render(this.getPages(this.options.startPage)),this.setupEvents()),this};n.prototype={constructor:n,destroy:function(){return this.$element.empty(),this.$element.removeData("twbs-pagination"),this.$element.off("page"),this},show:function(t){if(t<1||t>this.options.totalPages)throw new Error("Page is incorrect.");this.currentPage=t,this.$element.trigger("beforePage",t);var s=this.getPages(t);return this.render(s),this.setupEvents(),this.$element.trigger("page",t),s},enable:function(){this.show(this.currentPage)},disable:function(){var s=this;this.$listContainer.off("click").on("click","li",function(t){t.preventDefault()}),this.$listContainer.children().each(function(){t(this).hasClass(s.options.activeClass)||t(this).addClass(s.options.disabledClass)})},buildListItems:function(t){var s=[];if(this.options.first&&s.push(this.buildItem("first",1)),this.options.prev){var e=t.currentPage>1?t.currentPage-1:this.options.loop?this.options.totalPages:1;s.push(this.buildItem("prev",e))}for(var i=0;i<t.numeric.length;i++)s.push(this.buildItem("page",t.numeric[i]));if(this.options.next){var a=t.currentPage<this.options.totalPages?t.currentPage+1:this.options.loop?1:this.options.totalPages;s.push(this.buildItem("next",a))}return this.options.last&&s.push(this.buildItem("last",this.options.totalPages)),s},buildItem:function(s,e){var i=t("<li></li>"),a=t("<a></a>"),n=this.options[s]?this.makeText(this.options[s],e):e;return i.addClass(this.options[s+"Class"]),i.data("page",e),i.data("page-type",s),i.append(a.attr("href",this.makeHref(e)).addClass(this.options.anchorClass).html(n)),i},getPages:function(t){var s=[],e=Math.floor(this.options.visiblePages/2),i=t-e+1-this.options.visiblePages%2,a=t+e,n=this.options.visiblePages;n>this.options.totalPages&&(n=this.options.totalPages),i<=0&&(i=1,a=n),a>this.options.totalPages&&(i=this.options.totalPages-n+1,a=this.options.totalPages);for(var o=i;o<=a;)s.push(o),o++;return{currentPage:t,numeric:s}},render:function(s){var e=this;this.$listContainer.children().remove();var i=this.buildListItems(s);t.each(i,function(t,s){e.$listContainer.append(s)}),this.$listContainer.children().each(function(){var i=t(this);switch(i.data("page-type")){case"page":i.data("page")===s.currentPage&&i.addClass(e.options.activeClass);break;case"first":i.toggleClass(e.options.disabledClass,1===s.currentPage);break;case"last":i.toggleClass(e.options.disabledClass,s.currentPage===e.options.totalPages);break;case"prev":i.toggleClass(e.options.disabledClass,!e.options.loop&&1===s.currentPage);break;case"next":i.toggleClass(e.options.disabledClass,!e.options.loop&&s.currentPage===e.options.totalPages)}})},setupEvents:function(){var s=this;this.$listContainer.off("click").on("click","li",function(e){var i=t(this);if(i.hasClass(s.options.disabledClass)||i.hasClass(s.options.activeClass))return!1;!s.options.href&&e.preventDefault(),s.show(parseInt(i.data("page")))})},changeTotalPages:function(t,s){return this.options.totalPages=t,this.show(s)},makeHref:function(t){return this.options.href?this.generateQueryString(t):"#"},makeText:function(t,s){return t.replace(this.options.pageVariable,s).replace(this.options.totalPagesVariable,this.options.totalPages)},getPageFromQueryString:function(t){var s=this.getSearchString(t),e=new RegExp(this.options.pageVariable+"(=([^&#]*)|&|#|$)").exec(s);return e&&e[2]?(e=decodeURIComponent(e[2]),e=parseInt(e),isNaN(e)?null:e):null},generateQueryString:function(t,s){var e=this.getSearchString(s),i=new RegExp(this.options.pageVariable+"=*[^&#]*");return e?"?"+e.replace(i,this.options.pageVariable+"="+t):""},getSearchString:function(t){var e=t||s.location.search;return""===e?null:(0===e.indexOf("?")&&(e=e.substr(1)),e)},getCurrentPage:function(){return this.currentPage},getTotalPages:function(){return this.options.totalPages}},t.fn.twbsPagination=function(s){var e,i=Array.prototype.slice.call(arguments,1),a=t(this),o=a.data("twbs-pagination"),r="object"==typeof s?s:{};return o||a.data("twbs-pagination",o=new n(this,r)),"string"==typeof s&&(e=o[s].apply(o,i)),void 0===e?a:e},t.fn.twbsPagination.defaults={totalPages:1,startPage:1,visiblePages:5,initiateStartPageClick:!0,hideOnlyOnePage:!1,href:!1,pageVariable:"{{page}}",totalPagesVariable:"{{total_pages}}",page:null,first:"First",prev:"Previous",next:"Next",last:"Last",loop:!1,beforePageClick:null,onPageClick:null,paginationClass:"pagination",nextClass:"page-item next",prevClass:"page-item prev",lastClass:"page-item last",firstClass:"page-item first",pageClass:"page-item",activeClass:"active",disabledClass:"disabled",anchorClass:"page-link"},t.fn.twbsPagination.Constructor=n,t.fn.twbsPagination.noConflict=function(){return t.fn.twbsPagination=a,this},t.fn.twbsPagination.version="1.4.2"}(window.jQuery,window,document);
var specFormer = {
  parentSelector: "",
  formSelector: "",
  formInputSelector: "",
  labelSelector: "",
  inputSelector: "",
  counterSelector: "",
  selectSelector: "",
  selectInputSelector: "",

  init: (parentElement) => {
    specFormer.parentSelector = parentElement;
    specFormer.formSelector = `${parentElement} .spec-former__form`;
    specFormer.formInputSelector = `${parentElement} .spec-former__form-input`;
    specFormer.labelSelector = `${parentElement} .spec-former__form-input__label`;
    specFormer.inputSelector = `${parentElement} .spec-former__form-input__input`;
    specFormer.counterSelector = `${parentElement} .spec-former__form-input__counter`;
    specFormer.selectSelector = `${parentElement} .spec-former__form-input__select`;
    specFormer.selectInputSelector = `${parentElement} .spec-former__form-input__select__input`;

    specFormer.addEventListeners();
  },

  addEventListeners: () => {

    let ignoredKeys = [9,16,17,18,20,91];

    jQuery(`${specFormer.selectInputSelector}, ${specFormer.inputSelector}`).focus((ev) => {
      specFormer.animateLabelOnFocus(ev);
    });

    jQuery(`${specFormer.inputSelector}`).click((ev) => {
      specFormer.animateLabelOnFocus(ev);
    });

    jQuery(`${specFormer.selectInputSelector}`).click((ev) => {
      specFormer.openSelectArrow(ev.target);
      specFormer.animateLabelOnFocus(ev);
    });

    jQuery(`${specFormer.selectInputSelector}`).change((ev) => {
      specFormer.closeSelectArrow(ev.target);
      specFormer.animateLabelOnFocus(ev);
      jQuery(ev.target).focus();
    });

    jQuery(`${specFormer.selectInputSelector}`).blur((ev) => {
      specFormer.closeSelectArrow(ev.target);
    });

    jQuery(document).on(`click`, `${specFormer.formInputSelector}__tooltip-button`, (ev) => {
      specFormer.toggleTooltipOnClick(ev.target);
    });

    jQuery(`${specFormer.formInputSelector}__tooltip-button`).keypress(function (ev) {
      if (ev.which == 13) {
        ev.stopPropagation();
        ev.preventDefault();
      }
    });

    jQuery(document).click((ev) => {
      if (!jQuery(ev.target).hasClass(`spec-former__form-input__tooltip-button`)) {
        specFormer.hideTooltip(`${specFormer.formInputSelector}__tooltip-button`);
      }
    });

    jQuery(`${specFormer.counterSelector}`).keyup((ev) => {


      if(!ignoredKeys.includes(ev.which)){
        specFormer.updateCounterOnInputChange(ev);
      }

    });

    jQuery(`${specFormer.formInputSelector}__password-see-button`).click((ev) => {
      specFormer.togglePasswordVisibility(ev);
    });

    jQuery(`.spec-former__form-input__counter`).focus((ev) => {
      let count = ev.target.value.replace(/[^0-9A-Za-z]/g, '').length;
      let dataCounter = jQuery(ev.target).siblings(`${specFormer.counterSelector}-label`).attr('data-counter');
      let dataField = jQuery(ev.target).siblings(`${specFormer.counterSelector}-label`).attr('data-field');

      if(!ignoredKeys.includes(ev.which)){
        jQuery(ev.target).attr('aria-label',
          (dataCounter - count) == 0 ? `${dataField} limite máximo atingido` : `${dataField} ${count} de ${dataCounter} preenchidos`
        );
      }
    });
  },

  animateLabelOnFocus: (ev) => {
    jQuery(ev.target).siblings(`${specFormer.labelSelector}`).addClass(`--touched`);
    jQuery(ev.target).parent().addClass(`--touched`);
  },

  updateCounterOnInputChange: (ev) => {
    let count = ev.target.value.replace(/[^0-9A-Za-z]/g, '').length;
    let dataCounter = jQuery(ev.target).siblings(`${specFormer.counterSelector}-label`).attr('data-counter');
    let dataField = jQuery(ev.target).siblings(`${specFormer.counterSelector}-label`).attr('data-field');
    let dataHiddenLabel = jQuery(ev.target).siblings(`${specFormer.counterSelector}-label`).attr('data-hidden-label');

    

    if (dataHiddenLabel) {
      if ((dataCounter - count) == 0) {
        jQuery(ev.target).siblings(`${specFormer.counterSelector}-label`).children(`${specFormer.counterSelector}-live`).html(`<p>limite máximo atingido</p>`);
        setTimeout(() => {
          jQuery(ev.target).siblings(`${specFormer.counterSelector}-label`).children(`${specFormer.counterSelector}-live`).html(``);
        }, 1000);
      }

      jQuery(ev.target).siblings(`${specFormer.counterSelector}-label`).children(`${specFormer.counterSelector}__actual`).html(`${count}/${dataCounter}`);
      jQuery(ev.target).siblings(`${specFormer.counterSelector}-label`).children(`${specFormer.counterSelector}-fake-hidden`).html(`${dataField} ${count} de ${dataCounter} preenchidos`);
      return;
    }

    // default
    jQuery(ev.target).siblings(`${specFormer.counterSelector}-label`).children(`${specFormer.counterSelector}__actual`).html(count);
    jQuery(ev.target).siblings(`${specFormer.counterSelector}-label`).attr('aria-label', `${dataField} ${count} de ${dataCounter} preenchidos`);
  },

  toggleTooltipOnClick: (target) => {
    if (jQuery(target).siblings(`${specFormer.formInputSelector}__tooltip-container`).children(`${specFormer.formInputSelector}__tooltip`).length == 0) {
      jQuery(target).attr('aria-expanded', 'true');
      setTimeout(() => {
        jQuery(target).siblings(`.spec-former__form-input__tooltip-container`).html(
          `<div class="spec-former__form-input__tooltip">
            <div class="spec-former__form-input__tooltip__arrow" aria-hidden="true"></div>
            <p>${jQuery(target).siblings(`${specFormer.formInputSelector}__tooltip-container`).data('tooltip-text')}</p>
          </div>`
        );

        specFormer.updateTooltipPosition(
          jQuery(target)
        );
      }, 10);
    } else {
      specFormer.hideTooltip(target);
    }
  },

  hideTooltip: (target) => {
    jQuery(target).siblings(`${specFormer.formInputSelector}__tooltip-container`).html(``);
    setTimeout(() => {
      jQuery(target).attr('aria-expanded', 'false');
    }, 10);
  },

  updateTooltipPosition: (target) => {
    let targetPosition = jQuery(target).position();
    let tooltipPosition;

    if (jQuery(window).width() >= 992) {
      tooltipPosition = {
        top: `${targetPosition.top - 5}px`,
        left: `${targetPosition.left + 28}px`
      }
    } else if (jQuery(window).width() >= 576) {
      tooltipPosition = {
        top: `${targetPosition.top + 30}px`,
        left: `${targetPosition.left - 270}px`
      }
    } else {
      tooltipPosition = {
        top: `${targetPosition.top + 30}px`,
        left: `-5px`
      }
    }

    jQuery(target).siblings(`${specFormer.formInputSelector}__tooltip-container`).children(`${specFormer.formInputSelector}__tooltip`).css(tooltipPosition);
  },

  toggleTooltipAriaHidden: (target) => {
    jQuery(target).siblings(`${specFormer.formInputSelector}__tooltip`).children('p').attr('aria-hidden', (
      jQuery(target).siblings(`${specFormer.formInputSelector}__tooltip`).hasClass('--hidden')
    ));
  },

  showFieldsWithErrors: (errors) => {
    errors.forEach((error) => {
      jQuery(`#${error.id}`).addClass('--error');
      jQuery(`#${error.id}`).siblings(`${specFormer.labelSelector}`).addClass(`--error`);
      jQuery(`#${error.id}`).siblings(`${specFormer.formInputSelector}__error-message`).html(error.message).removeClass('--hidden');
      jQuery(`#${error.id}`).siblings(`${specFormer.formInputSelector}__error-icon`).removeClass('--hidden');
      jQuery(`#${error.id}`).parent().addClass(`--error`);

    });
  },

  clearFieldsWithErrors: () => {
    jQuery(`${specFormer.inputSelector}`).removeClass('--error');
    jQuery(`${specFormer.selectInputSelector}`).removeClass('--error');
    jQuery(`${specFormer.formInputSelector}__error-message`).addClass('--hidden');
    jQuery(`${specFormer.formInputSelector}__error-icon`).addClass('--hidden');
  },

  clearInput: (target) => {
    jQuery(target).val("");

    if (jQuery(target).siblings(`${specFormer.labelSelector}`).hasClass('--touched')) {
      jQuery(target).siblings(`${specFormer.labelSelector}`).removeClass("--touched");
    }
  },

  populateSelect: (target, optionsArray) => {
    specFormer.clearInput(target);
    let html = "<option selected disabled></option>";
    optionsArray.forEach(item => {
      html += `<option value="${item.value}">${item.name}</option>`;
    });
    jQuery(target).html(html);
  },

  getFormValues: (target = "") => {
    let inputs = jQuery(target).serializeArray();
    let values = {};

    inputs.forEach((item) => {
      values[item.name] = item.value;
    });

    return values;
  },

  toggleDisabled: (target) => {
    jQuery(target).prop('disabled', (i, item) => { return !item });
    jQuery(target).parent().toggleClass('--disabled');
    jQuery(target).siblings('*').toggleClass('--disabled');
  },

  openSelectArrow: (target) => {
    jQuery(target).siblings(".spec-former__form-input__select__icon").removeClass('icon-itaufonts_seta_down');
    jQuery(target).siblings(".spec-former__form-input__select__icon").addClass('icon-itaufonts_seta_up');
  },

  closeSelectArrow: (target) => {
    jQuery(target).siblings(".spec-former__form-input__select__icon").addClass('icon-itaufonts_seta_down');
    jQuery(target).siblings(".spec-former__form-input__select__icon").removeClass('icon-itaufonts_seta_up');
  },

  clearAllInputs: (targets) => {
    targets.forEach(target => {
      specFormer.clearInput(target);
      jQuery(target).removeClass('--open');
      jQuery(target).attr('data-selected', '&#8194;');
    });
    specFormer.clearFieldsWithErrors();
  },

  disabledAllInputs: (targets) => {
    targets.forEach(target => {
      jQuery(target).attr('disabled', 'disabled');
      jQuery(target).siblings().addClass('--disabled');
      jQuery(target).removeClass('--open');
    });
  },

  togglePasswordVisibility: (ev) => {
    jQuery(ev.target).toggleClass('icon-itaufonts_full_olho_ativo');
    jQuery(ev.target).toggleClass('icon-itaufonts_full_olho_inativo');
    jQuery(ev.target).siblings(`${specFormer.inputSelector}`).attr('type', jQuery(ev.target).siblings(`${specFormer.inputSelector}`).attr('type') == 'text' ? 'password' : 'text');

    jQuery(ev.target).attr('aria-label',
      jQuery(ev.target).attr('aria-label') == 'esconder senha' ? 'mostrar senha' : 'esconder senha'
    );
  },

};
/*
     _ _      _       _
 ___| (_) ___| | __  (_)___
/ __| | |/ __| |/ /  | / __|
\__ \ | | (__|   < _ | \__ \
|___/_|_|\___|_|\_(_)/ |___/
                   |__/

 Version: 1.8.0
  Author: Ken Wheeler
 Website: http://kenwheeler.github.io
    Docs: http://kenwheeler.github.io/slick
    Repo: http://github.com/kenwheeler/slick
  Issues: http://github.com/kenwheeler/slick/issues

 */
/* global window, document, define, jQuery, setInterval, clearInterval */
;(function(factory) {
    'use strict';
    if (typeof define === 'function' && define.amd) {
        define(['jquery'], factory);
    } else if (typeof exports !== 'undefined') {
        module.exports = factory(require('jquery'));
    } else {
        factory(jQuery);
    }

}(function($) {
    'use strict';
    var Slick = window.Slick || {};

    Slick = (function() {

        var instanceUid = 0;

        if($('.card-item').html() == undefined) {
            $('.carousel').each(function(index){
                var parsysElem = $(this).find("div.parsys");
                if(parsysElem.length > 0) {
                    if(parsysElem.length == 2) {
                        var parsysHtml = parsysElem[1];
                        var parsysHtmlOriginal2 = $(parsysHtml).html();
                        $(parsysHtml).remove();
                        var parsysHtmlOriginal = parsysElem[0];
                        $(parsysHtmlOriginal).append(parsysHtmlOriginal2);
                    }
                    $(this).find('.parsys').addClass('variable slider');
                    $(this).find('.slider').removeClass('parsys');
                    $(this).find('.slider').attr('id', 'slider'+index);
                }
            });
        }

        function Slick(element, settings) {

            var _ = this, dataSettings;

            _.defaults = {
                accessibility: true,
                adaptiveHeight: false,
                appendArrows: $(element),
                appendDots: $(element),
                arrows: true,
                asNavFor: null,
                prevArrow: '<button class="slick-prev" aria-label="Página anterior" type="button">Página anterior</button>',
                nextArrow: '<button class="slick-next" aria-label="Próxima página" type="button">Próxima página</button>',
                autoplay: false,
                autoplaySpeed: 3000,
                centerMode: false,
                centerPadding: '50px',
                cssEase: 'ease',
                customPaging: function(slider, i) {
                    return $('<button type="button" />').text(i + 1);
                },
                dots: false,
                dotsClass: 'slick-dots',
                draggable: true,
                easing: 'linear',
                edgeFriction: 0.35,
                fade: false,
                focusOnSelect: false,
                focusOnChange: false,
                infinite: true,
                initialSlide: 0,
                lazyLoad: 'ondemand',
                mobileFirst: false,
                pauseOnHover: true,
                pauseOnFocus: true,
                pauseOnDotsHover: false,
                respondTo: 'window',
                responsive: null,
                rows: 1,
                rtl: false,
                slide: '',
                slidesPerRow: 1,
                slidesToShow: 1,
                slidesToScroll: 1,
                speed: 500,
                swipe: true,
                swipeToSlide: false,
                touchMove: true,
                touchThreshold: 5,
                useCSS: true,
                useTransform: true,
                variableWidth: false,
                vertical: false,
                verticalSwiping: false,
                waitForAnimate: true,
                zIndex: 1000
            };

            _.initials = {
                animating: false,
                dragging: false,
                autoPlayTimer: null,
                currentDirection: 0,
                currentLeft: null,
                currentSlide: 0,
                direction: 1,
                $dots: null,
                listWidth: null,
                listHeight: null,
                loadIndex: 0,
                $nextArrow: null,
                $prevArrow: null,
                scrolling: false,
                slideCount: null,
                slideWidth: null,
                $slideTrack: null,
                $slides: null,
                sliding: false,
                slideOffset: 0,
                swipeLeft: null,
                swiping: false,
                $list: null,
                touchObject: {},
                transformsEnabled: false,
                unslicked: false
            };

            $.extend(_, _.initials);

            _.activeBreakpoint = null;
            _.animType = null;
            _.animProp = null;
            _.breakpoints = [];
            _.breakpointSettings = [];
            _.cssTransitions = false;
            _.focussed = false;
            _.interrupted = false;
            _.hidden = 'hidden';
            _.paused = true;
            _.positionProp = null;
            _.respondTo = null;
            _.rowCount = 1;
            _.shouldClick = true;
            _.$slider = $(element);
            _.$slidesCache = null;
            _.transformType = null;
            _.transitionType = null;
            _.visibilityChange = 'visibilitychange';
            _.windowWidth = 0;
            _.windowTimer = null;

            dataSettings = $(element).data('slick') || {};

            _.options = $.extend({}, _.defaults, settings, dataSettings);

            _.currentSlide = _.options.initialSlide;

            _.originalSettings = _.options;

            if (typeof document.mozHidden !== 'undefined') {
                _.hidden = 'mozHidden';
                _.visibilityChange = 'mozvisibilitychange';
            } else if (typeof document.webkitHidden !== 'undefined') {
                _.hidden = 'webkitHidden';
                _.visibilityChange = 'webkitvisibilitychange';
            }

            _.autoPlay = $.proxy(_.autoPlay, _);
            _.autoPlayClear = $.proxy(_.autoPlayClear, _);
            _.autoPlayIterator = $.proxy(_.autoPlayIterator, _);
            _.changeSlide = $.proxy(_.changeSlide, _);
            _.clickHandler = $.proxy(_.clickHandler, _);
            _.selectHandler = $.proxy(_.selectHandler, _);
            _.setPosition = $.proxy(_.setPosition, _);
            _.swipeHandler = $.proxy(_.swipeHandler, _);
            _.dragHandler = $.proxy(_.dragHandler, _);
            _.keyHandler = $.proxy(_.keyHandler, _);

            _.instanceUid = instanceUid++;

            // A simple way to check for HTML strings
            // Strict HTML recognition (must start with <)
            // Extracted from jQuery v1.11 source
            _.htmlExpr = /^(?:\s*(<[\w\W]+>)[^>]*)$/;


            _.registerBreakpoints();
            _.init(true);

        }

        return Slick;

    }());

    Slick.prototype.activateADA = function() {
        var _ = this;

        _.$slideTrack.find('.slick-active').attr({
            'aria-hidden': 'false'
        }).find('a, input, button, select').attr({
            'tabindex': '0'
        });

    };

    Slick.prototype.addSlide = Slick.prototype.slickAdd = function(markup, index, addBefore) {

        var _ = this;

        if (typeof(index) === 'boolean') {
            addBefore = index;
            index = null;
        } else if (index < 0 || (index >= _.slideCount)) {
            return false;
        }

        _.unload();

        if (typeof(index) === 'number') {
            if (index === 0 && _.$slides.length === 0) {
                $(markup).appendTo(_.$slideTrack);
            } else if (addBefore) {
                $(markup).insertBefore(_.$slides.eq(index));
            } else {
                $(markup).insertAfter(_.$slides.eq(index));
            }
        } else {
            if (addBefore === true) {
                $(markup).prependTo(_.$slideTrack);
            } else {
                $(markup).appendTo(_.$slideTrack);
            }
        }

        _.$slides = _.$slideTrack.children(this.options.slide);

        _.$slideTrack.children(this.options.slide).detach();

        _.$slideTrack.append(_.$slides);

        _.$slides.each(function(index, element) {
            $(element).attr('data-slick-index', index);
        });

        _.$slidesCache = _.$slides;

        _.reinit();

    };

    Slick.prototype.animateHeight = function() {
        var _ = this;
        if (_.options.slidesToShow === 1 && _.options.adaptiveHeight === true && _.options.vertical === false) {
            var targetHeight = _.$slides.eq(_.currentSlide).outerHeight(true);
            _.$list.animate({
                height: targetHeight
            }, _.options.speed);
        }
    };

    Slick.prototype.animateSlide = function(targetLeft, callback) {

        var animProps = {},
            _ = this;

        _.animateHeight();

        if (_.options.rtl === true && _.options.vertical === false) {
            targetLeft = -targetLeft;
        }
        if (_.transformsEnabled === false) {
            if (_.options.vertical === false) {
                _.$slideTrack.animate({
                    left: targetLeft
                }, _.options.speed, _.options.easing, callback);
            } else {
                _.$slideTrack.animate({
                    top: targetLeft
                }, _.options.speed, _.options.easing, callback);
            }

        } else {

            if (_.cssTransitions === false) {
                if (_.options.rtl === true) {
                    _.currentLeft = -(_.currentLeft);
                }
                $({
                    animStart: _.currentLeft
                }).animate({
                    animStart: targetLeft
                }, {
                    duration: _.options.speed,
                    easing: _.options.easing,
                    step: function(now) {
                        now = Math.ceil(now);
                        if (_.options.vertical === false) {
                            animProps[_.animType] = 'translate(' +
                                now + 'px, 0px)';
                            _.$slideTrack.css(animProps);
                        } else {
                            animProps[_.animType] = 'translate(0px,' +
                                now + 'px)';
                            _.$slideTrack.css(animProps);
                        }
                    },
                    complete: function() {
                        if (callback) {
                            callback.call();
                        }
                    }
                });

            } else {

                _.applyTransition();
                targetLeft = Math.ceil(targetLeft);

                if (_.options.vertical === false) {
                    animProps[_.animType] = 'translate3d(' + targetLeft + 'px, 0px, 0px)';
                } else {
                    animProps[_.animType] = 'translate3d(0px,' + targetLeft + 'px, 0px)';
                }
                _.$slideTrack.css(animProps);

                if (callback) {
                    setTimeout(function() {

                        _.disableTransition();

                        callback.call();
                    }, _.options.speed);
                }

            }

        }

    };

    Slick.prototype.getNavTarget = function() {

        var _ = this,
            asNavFor = _.options.asNavFor;

        if ( asNavFor && asNavFor !== null ) {
            asNavFor = $(asNavFor).not(_.$slider);
        }

        return asNavFor;

    };

    Slick.prototype.asNavFor = function(index) {

        var _ = this,
            asNavFor = _.getNavTarget();

        if ( asNavFor !== null && typeof asNavFor === 'object' ) {
            asNavFor.each(function() {
                var target = $(this).slick('getSlick');
                if(!target.unslicked) {
                    target.slideHandler(index, true);
                }
            });
        }

    };

    Slick.prototype.applyTransition = function(slide) {

        var _ = this,
            transition = {};

        if (_.options.fade === false) {
            transition[_.transitionType] = _.transformType + ' ' + _.options.speed + 'ms ' + _.options.cssEase;
        } else {
            transition[_.transitionType] = 'opacity ' + _.options.speed + 'ms ' + _.options.cssEase;
        }

        if (_.options.fade === false) {
            _.$slideTrack.css(transition);
        } else {
            _.$slides.eq(slide).css(transition);
        }

    };

    Slick.prototype.autoPlay = function() {

        var _ = this;

        _.autoPlayClear();

        if ( _.slideCount > _.options.slidesToShow ) {
            _.autoPlayTimer = setInterval( _.autoPlayIterator, _.options.autoplaySpeed );
        }

    };

    Slick.prototype.autoPlayClear = function() {

        var _ = this;

        if (_.autoPlayTimer) {
            clearInterval(_.autoPlayTimer);
        }

    };

    Slick.prototype.autoPlayIterator = function() {

        var _ = this,
            slideTo = _.currentSlide + _.options.slidesToScroll;

        if ( !_.paused && !_.interrupted && !_.focussed ) {

            if ( _.options.infinite === false ) {

                if ( _.direction === 1 && ( _.currentSlide + 1 ) === ( _.slideCount - 1 )) {
                    _.direction = 0;
                }

                else if ( _.direction === 0 ) {

                    slideTo = _.currentSlide - _.options.slidesToScroll;

                    if ( _.currentSlide - 1 === 0 ) {
                        _.direction = 1;
                    }

                }

            }

            _.slideHandler( slideTo );

        }

    };

    Slick.prototype.buildArrows = function() {

        var _ = this;

        if (_.options.arrows === true ) {

            _.$prevArrow = $(_.options.prevArrow).addClass('slick-arrow');
            _.$nextArrow = $(_.options.nextArrow).addClass('slick-arrow');

            if( _.slideCount > _.options.slidesToShow ) {

                _.$prevArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');
                _.$nextArrow.removeClass('slick-hidden').removeAttr('aria-hidden tabindex');

                if (_.htmlExpr.test(_.options.prevArrow)) {
                    _.$prevArrow.prependTo(_.options.appendArrows);
                }

                if (_.htmlExpr.test(_.options.nextArrow)) {
                    _.$nextArrow.appendTo(_.options.appendArrows);
                }

                if (_.options.infinite !== true) {
                    _.$prevArrow
                        .addClass('slick-disabled')
                        .attr('aria-disabled', 'true');
                }

            } else {

                _.$prevArrow.add( _.$nextArrow )

                    .addClass('slick-hidden')
                    .attr({
                        'aria-disabled': 'true',
                        'tabindex': '-1'
                    });

            }

        }

    };

    Slick.prototype.buildDots = function() {

        var _ = this,
            i, dot;

        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {

            _.$slider.addClass('slick-dotted');

            dot = $('<ul />').addClass(_.options.dotsClass);

            for (i = 0; i <= _.getDotCount(); i += 1) {
                dot.append($('<li />').append(_.options.customPaging.call(this, _, i)));
            }

            _.$dots = dot.appendTo(_.options.appendDots);

            _.$dots.find('li').first().addClass('slick-active');

        }

    };

    Slick.prototype.buildOut = function() {

        var _ = this;

        _.$slides =
            _.$slider
                .children( _.options.slide + ':not(.slick-cloned)')
                .addClass('slick-slide');

        _.slideCount = _.$slides.length;

        _.$slides.each(function(index, element) {
            $(element)
                .attr('data-slick-index', index)
                .data('originalStyling', $(element).attr('style') || '');
        });

        _.$slider.addClass('slick-slider');

        _.$slideTrack = (_.slideCount === 0) ?
            $('<div class="slick-track"/>').appendTo(_.$slider) :
            _.$slides.wrapAll('<div class="slick-track"/>').parent();

        _.$list = _.$slideTrack.wrap(
            '<div class="slick-list"/>').parent();
        _.$slideTrack.css('opacity', 0);

        if (_.options.centerMode === true || _.options.swipeToSlide === true) {
            _.options.slidesToScroll = 1;
        }

        $('img[data-lazy]', _.$slider).not('[src]').addClass('slick-loading');

        _.setupInfinite();

        _.buildArrows();

        _.buildDots();

        _.updateDots();


        _.setSlideClasses(typeof _.currentSlide === 'number' ? _.currentSlide : 0);

        if (_.options.draggable === true) {
            _.$list.addClass('draggable');
        }

    };

    Slick.prototype.buildRows = function() {

        var _ = this, a, b, c, newSlides, numOfSlides, originalSlides,slidesPerSection;

        newSlides = document.createDocumentFragment();
        originalSlides = _.$slider.children();

        if(_.options.rows > 1) {

            slidesPerSection = _.options.slidesPerRow * _.options.rows;
            numOfSlides = Math.ceil(
                originalSlides.length / slidesPerSection
            );

            for(a = 0; a < numOfSlides; a++){
                var slide = document.createElement('div');
                for(b = 0; b < _.options.rows; b++) {
                    var row = document.createElement('div');
                    for(c = 0; c < _.options.slidesPerRow; c++) {
                        var target = (a * slidesPerSection + ((b * _.options.slidesPerRow) + c));
                        if (originalSlides.get(target)) {
                            row.appendChild(originalSlides.get(target));
                        }
                    }
                    slide.appendChild(row);
                }
                newSlides.appendChild(slide);
            }

            _.$slider.empty().append(newSlides);
            _.$slider.children().children().children()
                .css({
                    'width':(100 / _.options.slidesPerRow) + '%',
                    'display': 'inline-block'
                });

        }

    };

    Slick.prototype.checkResponsive = function(initial, forceUpdate) {

        var _ = this,
            breakpoint, targetBreakpoint, respondToWidth, triggerBreakpoint = false;
        var sliderWidth = _.$slider.width();
        var windowWidth = window.innerWidth || $(window).width();

        if (_.respondTo === 'window') {
            respondToWidth = windowWidth;
        } else if (_.respondTo === 'slider') {
            respondToWidth = sliderWidth;
        } else if (_.respondTo === 'min') {
            respondToWidth = Math.min(windowWidth, sliderWidth);
        }

        if ( _.options.responsive &&
            _.options.responsive.length &&
            _.options.responsive !== null) {

            targetBreakpoint = null;

            for (breakpoint in _.breakpoints) {
                if (_.breakpoints.hasOwnProperty(breakpoint)) {
                    if (_.originalSettings.mobileFirst === false) {
                        if (respondToWidth < _.breakpoints[breakpoint]) {
                            targetBreakpoint = _.breakpoints[breakpoint];
                        }
                    } else {
                        if (respondToWidth > _.breakpoints[breakpoint]) {
                            targetBreakpoint = _.breakpoints[breakpoint];
                        }
                    }
                }
            }

            if (targetBreakpoint !== null) {
                if (_.activeBreakpoint !== null) {
                    if (targetBreakpoint !== _.activeBreakpoint || forceUpdate) {
                        _.activeBreakpoint =
                            targetBreakpoint;
                        if (_.breakpointSettings[targetBreakpoint] === 'unslick') {
                            _.unslick(targetBreakpoint);
                        } else {
                            _.options = $.extend({}, _.originalSettings,
                                _.breakpointSettings[
                                    targetBreakpoint]);
                            if (initial === true) {
                                _.currentSlide = _.options.initialSlide;
                            }
                            _.refresh(initial);
                        }
                        triggerBreakpoint = targetBreakpoint;
                    }
                } else {
                    _.activeBreakpoint = targetBreakpoint;
                    if (_.breakpointSettings[targetBreakpoint] === 'unslick') {
                        _.unslick(targetBreakpoint);
                    } else {
                        _.options = $.extend({}, _.originalSettings,
                            _.breakpointSettings[
                                targetBreakpoint]);
                        if (initial === true) {
                            _.currentSlide = _.options.initialSlide;
                        }
                        _.refresh(initial);
                    }
                    triggerBreakpoint = targetBreakpoint;
                }
            } else {
                if (_.activeBreakpoint !== null) {
                    _.activeBreakpoint = null;
                    _.options = _.originalSettings;
                    if (initial === true) {
                        _.currentSlide = _.options.initialSlide;
                    }
                    _.refresh(initial);
                    triggerBreakpoint = targetBreakpoint;
                }
            }

            // only trigger breakpoints during an actual break. not on initialize.
            if( !initial && triggerBreakpoint !== false ) {
                _.$slider.trigger('breakpoint', [_, triggerBreakpoint]);
            }
        }

    };

    Slick.prototype.changeSlide = function(event, dontAnimate) {

        var _ = this,
            $target = $(event.currentTarget),
            indexOffset, slideOffset, unevenOffset;

        // If target is a link, prevent default action.
        if($target.is('a')) {
            event.preventDefault();
        }

        // If target is not the <li> element (ie: a child), find the <li>.
        if(!$target.is('li')) {
            $target = $target.closest('li');
        }

        unevenOffset = (_.slideCount % _.options.slidesToScroll !== 0);
        indexOffset = unevenOffset ? 0 : (_.slideCount - _.currentSlide) % _.options.slidesToScroll;

        switch (event.data.message) {

            case 'previous':
                slideOffset = indexOffset === 0 ? _.options.slidesToScroll : _.options.slidesToShow - indexOffset;
                if (_.slideCount > _.options.slidesToShow) {
                    _.slideHandler(_.currentSlide - slideOffset, false, dontAnimate);
                }
                break;

            case 'next':
                slideOffset = indexOffset === 0 ? _.options.slidesToScroll : indexOffset;
                if (_.slideCount > _.options.slidesToShow) {
                    _.slideHandler(_.currentSlide + slideOffset, false, dontAnimate);
                }
                break;

            case 'index':
                var index = event.data.index === 0 ? 0 :
                    event.data.index || $target.index() * _.options.slidesToScroll;

                _.slideHandler(_.checkNavigable(index), false, dontAnimate);
                $target.children().trigger('focus');
                break;

            default:
                return;
        }

    };

    Slick.prototype.checkNavigable = function(index) {

        var _ = this,
            navigables, prevNavigable;

        navigables = _.getNavigableIndexes();
        prevNavigable = 0;
        if (index > navigables[navigables.length - 1]) {
            index = navigables[navigables.length - 1];
        } else {
            for (var n in navigables) {
                if (index < navigables[n]) {
                    index = prevNavigable;
                    break;
                }
                prevNavigable = navigables[n];
            }
        }

        return index;
    };

    Slick.prototype.cleanUpEvents = function() {

        var _ = this;

        if (_.options.dots && _.$dots !== null) {

            $('li', _.$dots)
                .off('click.slick', _.changeSlide)
                .off('mouseenter.slick', $.proxy(_.interrupt, _, true))
                .off('mouseleave.slick', $.proxy(_.interrupt, _, false));

            if (_.options.accessibility === true) {
                _.$dots.off('keydown.slick', _.keyHandler);
            }
        }

        _.$slider.off('focus.slick blur.slick');

        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {
            _.$prevArrow && _.$prevArrow.off('click.slick', _.changeSlide);
            _.$nextArrow && _.$nextArrow.off('click.slick', _.changeSlide);

            if (_.options.accessibility === true) {
                _.$prevArrow && _.$prevArrow.off('keydown.slick', _.keyHandler);
                _.$nextArrow && _.$nextArrow.off('keydown.slick', _.keyHandler);
            }
        }

        _.$list.off('touchstart.slick mousedown.slick', _.swipeHandler);
        _.$list.off('touchmove.slick mousemove.slick', _.swipeHandler);
        _.$list.off('touchend.slick mouseup.slick', _.swipeHandler);
        _.$list.off('touchcancel.slick mouseleave.slick', _.swipeHandler);

        _.$list.off('click.slick', _.clickHandler);

        $(document).off(_.visibilityChange, _.visibility);

        _.cleanUpSlideEvents();

        if (_.options.accessibility === true) {
            _.$list.off('keydown.slick', _.keyHandler);
        }

        if (_.options.focusOnSelect === true) {
            $(_.$slideTrack).children().off('click.slick', _.selectHandler);
        }

        $(window).off('orientationchange.slick.slick-' + _.instanceUid, _.orientationChange);

        $(window).off('resize.slick.slick-' + _.instanceUid, _.resize);

        $('[draggable!=true]', _.$slideTrack).off('dragstart', _.preventDefault);

        $(window).off('load.slick.slick-' + _.instanceUid, _.setPosition);

    };

    Slick.prototype.cleanUpSlideEvents = function() {

        var _ = this;

        _.$list.off('mouseenter.slick', $.proxy(_.interrupt, _, true));
        _.$list.off('mouseleave.slick', $.proxy(_.interrupt, _, false));

    };

    Slick.prototype.cleanUpRows = function() {

        var _ = this, originalSlides;

        if(_.options.rows > 1) {
            originalSlides = _.$slides.children().children();
            originalSlides.removeAttr('style');
            _.$slider.empty().append(originalSlides);
        }

    };

    Slick.prototype.clickHandler = function(event) {

        var _ = this;

        if (_.shouldClick === false) {
            event.stopImmediatePropagation();
            event.stopPropagation();
            event.preventDefault();
        }

    };

    Slick.prototype.destroy = function(refresh) {

        var _ = this;

        _.autoPlayClear();

        _.touchObject = {};

        _.cleanUpEvents();

        $('.slick-cloned', _.$slider).detach();

        if (_.$dots) {
            _.$dots.remove();
        }

        if ( _.$prevArrow && _.$prevArrow.length ) {

            _.$prevArrow
                .removeClass('slick-disabled slick-arrow slick-hidden')
                .removeAttr('aria-hidden aria-disabled tabindex')
                .css('display','');

            if ( _.htmlExpr.test( _.options.prevArrow )) {
                _.$prevArrow.remove();
            }
        }

        if ( _.$nextArrow && _.$nextArrow.length ) {

            _.$nextArrow
                .removeClass('slick-disabled slick-arrow slick-hidden')
                .removeAttr('aria-hidden aria-disabled tabindex')
                .css('display','');

            if ( _.htmlExpr.test( _.options.nextArrow )) {
                _.$nextArrow.remove();
            }
        }


        if (_.$slides) {

            _.$slides
                .removeClass('slick-slide slick-active slick-center slick-visible slick-current')
                .removeAttr('aria-hidden')
                .removeAttr('data-slick-index')
                .each(function(){
                    $(this).attr('style', $(this).data('originalStyling'));
                });

            _.$slideTrack.children(this.options.slide).detach();

            _.$slideTrack.detach();

            _.$list.detach();

            _.$slider.append(_.$slides);
        }

        _.cleanUpRows();

        _.$slider.removeClass('slick-slider');
        _.$slider.removeClass('slick-initialized');
        _.$slider.removeClass('slick-dotted');

        _.unslicked = true;

        if(!refresh) {
            _.$slider.trigger('destroy', [_]);
        }

    };

    Slick.prototype.disableTransition = function(slide) {

        var _ = this,
            transition = {};

        transition[_.transitionType] = '';

        if (_.options.fade === false) {
            _.$slideTrack.css(transition);
        } else {
            _.$slides.eq(slide).css(transition);
        }

    };

    Slick.prototype.fadeSlide = function(slideIndex, callback) {

        var _ = this;

        if (_.cssTransitions === false) {

            _.$slides.eq(slideIndex).css({
                zIndex: _.options.zIndex
            });

            _.$slides.eq(slideIndex).animate({
                opacity: 1
            }, _.options.speed, _.options.easing, callback);

        } else {

            _.applyTransition(slideIndex);

            _.$slides.eq(slideIndex).css({
                opacity: 1,
                zIndex: _.options.zIndex
            });

            if (callback) {
                setTimeout(function() {

                    _.disableTransition(slideIndex);

                    callback.call();
                }, _.options.speed);
            }

        }

    };

    Slick.prototype.fadeSlideOut = function(slideIndex) {

        var _ = this;

        if (_.cssTransitions === false) {

            _.$slides.eq(slideIndex).animate({
                opacity: 0,
                zIndex: _.options.zIndex - 2
            }, _.options.speed, _.options.easing);

        } else {

            _.applyTransition(slideIndex);

            _.$slides.eq(slideIndex).css({
                opacity: 0,
                zIndex: _.options.zIndex - 2
            });

        }

    };

    Slick.prototype.filterSlides = Slick.prototype.slickFilter = function(filter) {

        var _ = this;

        if (filter !== null) {

            _.$slidesCache = _.$slides;

            _.unload();

            _.$slideTrack.children(this.options.slide).detach();

            _.$slidesCache.filter(filter).appendTo(_.$slideTrack);

            _.reinit();

        }

    };

    Slick.prototype.focusHandler = function() {

        var _ = this;

        _.$slider
            .off('focus.slick blur.slick')
            .on('focus.slick blur.slick', '*', function(event) {

            event.stopImmediatePropagation();
            var $sf = $(this);

            setTimeout(function() {

                if( _.options.pauseOnFocus ) {
                    _.focussed = $sf.is(':focus');
                    _.autoPlay();
                }

            }, 0);

        });
    };

    Slick.prototype.getCurrent = Slick.prototype.slickCurrentSlide = function() {

        var _ = this;
        return _.currentSlide;

    };

    Slick.prototype.getDotCount = function() {

        var _ = this;

        var breakPoint = 0;
        var counter = 0;
        var pagerQty = 0;

        if (_.options.infinite === true) {
            if (_.slideCount <= _.options.slidesToShow) {
                 ++pagerQty;
            } else {
                while (breakPoint < _.slideCount) {
                    ++pagerQty;
                    breakPoint = counter + _.options.slidesToScroll;
                    counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;
                }
            }
        } else if (_.options.centerMode === true) {
            pagerQty = _.slideCount;
        } else if(!_.options.asNavFor) {
            pagerQty = 1 + Math.ceil((_.slideCount - _.options.slidesToShow) / _.options.slidesToScroll);
        }else {
            while (breakPoint < _.slideCount) {
                ++pagerQty;
                breakPoint = counter + _.options.slidesToScroll;
                counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;
            }
        }

        return pagerQty - 1;

    };

    Slick.prototype.getLeft = function(slideIndex) {

        var _ = this,
            targetLeft,
            verticalHeight,
            verticalOffset = 0,
            targetSlide,
            coef;

        _.slideOffset = 0;
        verticalHeight = _.$slides.first().outerHeight(true);

        if (_.options.infinite === true) {
            if (_.slideCount > _.options.slidesToShow) {
                _.slideOffset = (_.slideWidth * _.options.slidesToShow) * -1;
                coef = -1

                if (_.options.vertical === true && _.options.centerMode === true) {
                    if (_.options.slidesToShow === 2) {
                        coef = -1.5;
                    } else if (_.options.slidesToShow === 1) {
                        coef = -2
                    }
                }
                verticalOffset = (verticalHeight * _.options.slidesToShow) * coef;
            }
            if (_.slideCount % _.options.slidesToScroll !== 0) {
                if (slideIndex + _.options.slidesToScroll > _.slideCount && _.slideCount > _.options.slidesToShow) {
                    if (slideIndex > _.slideCount) {
                        _.slideOffset = ((_.options.slidesToShow - (slideIndex - _.slideCount)) * _.slideWidth) * -1;
                        verticalOffset = ((_.options.slidesToShow - (slideIndex - _.slideCount)) * verticalHeight) * -1;
                    } else {
                        _.slideOffset = ((_.slideCount % _.options.slidesToScroll) * _.slideWidth) * -1;
                        verticalOffset = ((_.slideCount % _.options.slidesToScroll) * verticalHeight) * -1;
                    }
                }
            }
        } else {
            if (slideIndex + _.options.slidesToShow > _.slideCount) {
                _.slideOffset = ((slideIndex + _.options.slidesToShow) - _.slideCount) * _.slideWidth;
                verticalOffset = ((slideIndex + _.options.slidesToShow) - _.slideCount) * verticalHeight;
            }
        }

        if (_.slideCount <= _.options.slidesToShow) {
            _.slideOffset = 0;
            verticalOffset = 0;
        }

        if (_.options.centerMode === true && _.slideCount <= _.options.slidesToShow) {
            _.slideOffset = ((_.slideWidth * Math.floor(_.options.slidesToShow)) / 2) - ((_.slideWidth * _.slideCount) / 2);
        } else if (_.options.centerMode === true && _.options.infinite === true) {
            _.slideOffset += _.slideWidth * Math.floor(_.options.slidesToShow / 2) - _.slideWidth;
        } else if (_.options.centerMode === true) {
            _.slideOffset = 0;
            _.slideOffset += _.slideWidth * Math.floor(_.options.slidesToShow / 2);
        }

        if (_.options.vertical === false) {
            targetLeft = ((slideIndex * _.slideWidth) * -1) + _.slideOffset;
        } else {
            targetLeft = ((slideIndex * verticalHeight) * -1) + verticalOffset;
        }

        if (_.options.variableWidth === true) {

            if (_.slideCount <= _.options.slidesToShow || _.options.infinite === false) {
                targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex);
            } else {
                targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex + _.options.slidesToShow);
            }

            if (_.options.rtl === true) {
                if (targetSlide[0]) {
                    targetLeft = (_.$slideTrack.width() - targetSlide[0].offsetLeft - targetSlide.width()) * -1;
                } else {
                    targetLeft =  0;
                }
            } else {
                targetLeft = targetSlide[0] ? targetSlide[0].offsetLeft * -1 : 0;
            }

            if (_.options.centerMode === true) {
                if (_.slideCount <= _.options.slidesToShow || _.options.infinite === false) {
                    targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex);
                } else {
                    targetSlide = _.$slideTrack.children('.slick-slide').eq(slideIndex + _.options.slidesToShow + 1);
                }

                if (_.options.rtl === true) {
                    if (targetSlide[0]) {
                        targetLeft = (_.$slideTrack.width() - targetSlide[0].offsetLeft - targetSlide.width()) * -1;
                    } else {
                        targetLeft =  0;
                    }
                } else {
                    targetLeft = targetSlide[0] ? targetSlide[0].offsetLeft * -1 : 0;
                }

                targetLeft += (_.$list.width() - targetSlide.outerWidth()) / 2;
            }
        }

        return targetLeft;

    };

    Slick.prototype.getOption = Slick.prototype.slickGetOption = function(option) {

        var _ = this;

        return _.options[option];

    };

    Slick.prototype.getNavigableIndexes = function() {

        var _ = this,
            breakPoint = 0,
            counter = 0,
            indexes = [],
            max;

        if (_.options.infinite === false) {
            max = _.slideCount;
        } else {
            breakPoint = _.options.slidesToScroll * -1;
            counter = _.options.slidesToScroll * -1;
            max = _.slideCount * 2;
        }

        while (breakPoint < max) {
            indexes.push(breakPoint);
            breakPoint = counter + _.options.slidesToScroll;
            counter += _.options.slidesToScroll <= _.options.slidesToShow ? _.options.slidesToScroll : _.options.slidesToShow;
        }

        return indexes;

    };

    Slick.prototype.getSlick = function() {

        return this;

    };

    Slick.prototype.getSlideCount = function() {

        var _ = this,
            slidesTraversed, swipedSlide, centerOffset;

        centerOffset = _.options.centerMode === true ? _.slideWidth * Math.floor(_.options.slidesToShow / 2) : 0;

        if (_.options.swipeToSlide === true) {
            _.$slideTrack.find('.slick-slide').each(function(index, slide) {
                if (slide.offsetLeft - centerOffset + ($(slide).outerWidth() / 2) > (_.swipeLeft * -1)) {
                    swipedSlide = slide;
                    return false;
                }
            });

            slidesTraversed = Math.abs($(swipedSlide).attr('data-slick-index') - _.currentSlide) || 1;

            return slidesTraversed;

        } else {
            return _.options.slidesToScroll;
        }

    };

    Slick.prototype.goTo = Slick.prototype.slickGoTo = function(slide, dontAnimate) {

        var _ = this;

        _.changeSlide({
            data: {
                message: 'index',
                index: parseInt(slide)
            }
        }, dontAnimate);

    };

    Slick.prototype.init = function(creation) {

        var _ = this;

        if (!$(_.$slider).hasClass('slick-initialized')) {

            $(_.$slider).addClass('slick-initialized');

            _.buildRows();
            _.buildOut();
            _.setProps();
            _.startLoad();
            _.loadSlider();
            _.initializeEvents();
            _.updateArrows();
            _.updateDots();
            _.checkResponsive(true);
            _.focusHandler();

        }

        if (creation) {
            _.$slider.trigger('init', [_]);
        }

        if (_.options.accessibility === true) {
            _.initADA();
        }

        if ( _.options.autoplay ) {

            _.paused = false;
            _.autoPlay();

        }

    };

    Slick.prototype.initADA = function() {
        var _ = this,
                numDotGroups = Math.ceil(_.slideCount / _.options.slidesToShow),
                tabControlIndexes = _.getNavigableIndexes().filter(function(val) {
                    return (val >= 0) && (val < _.slideCount);
                });

        _.$slides.add(_.$slideTrack.find('.slick-cloned')).attr({
            'aria-hidden': 'true',
            'tabindex': '-1'
        }).find('a, input, button, select').attr({
            'tabindex': '-1'
        });

        if (_.$dots !== null) {
            _.$slides.not(_.$slideTrack.find('.slick-cloned')).each(function(i) {
                var slideControlIndex = tabControlIndexes.indexOf(i);

                $(this).attr({
                    'role': 'tabpanel',
                    'id': 'slick-slide' + _.instanceUid + i,
                    'tabindex': -1
                });

                if (slideControlIndex !== -1) {
                    $(this).attr({
                        'aria-describedby': 'slick-slide-control' + _.instanceUid + slideControlIndex
                    });
                }
            });

            _.$dots.attr('role', 'tablist').find('li').each(function(i) {
                var mappedSlideIndex = tabControlIndexes[i];

                $(this).find('button').first().attr({
                    'role': 'tab',
                    'id': 'slick-slide-control' + _.instanceUid + i,
                    'aria-controls': 'slick-slide' + _.instanceUid + mappedSlideIndex,
                    'aria-label': (i + 1) + ' of ' + numDotGroups,
                    'aria-selected': null,
                    'tabindex': '-1'
                });

            }).eq(_.currentSlide).find('button').attr({
                'aria-selected': 'true',
                'tabindex': '0'
            }).end();
        }

        for (var i=_.currentSlide, max=i+_.options.slidesToShow; i < max; i++) {
            _.$slides.eq(i).attr('tabindex', 0);
        }

        _.activateADA();

    };

    Slick.prototype.initArrowEvents = function() {

        var _ = this;

        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {
            _.$prevArrow
               .off('click.slick')
               .on('click.slick', {
                    message: 'previous'
               }, _.changeSlide);
            _.$nextArrow
               .off('click.slick')
               .on('click.slick', {
                    message: 'next'
               }, _.changeSlide);

            if (_.options.accessibility === true) {
                _.$prevArrow.on('keydown.slick', _.keyHandler);
                _.$nextArrow.on('keydown.slick', _.keyHandler);
            }
        }

    };

    Slick.prototype.initDotEvents = function() {

        var _ = this;

        if (_.options.dots === true) {
            $('li', _.$dots).on('click.slick', {
                message: 'index'
            }, _.changeSlide);

            if (_.options.accessibility === true) {
                _.$dots.on('keydown.slick', _.keyHandler);
            }
        }

        if ( _.options.dots === true && _.options.pauseOnDotsHover === true ) {

            $('li', _.$dots)
                .on('mouseenter.slick', $.proxy(_.interrupt, _, true))
                .on('mouseleave.slick', $.proxy(_.interrupt, _, false));

        }

    };

    Slick.prototype.initSlideEvents = function() {

        var _ = this;

        if ( _.options.pauseOnHover ) {

            _.$list.on('mouseenter.slick', $.proxy(_.interrupt, _, true));
            _.$list.on('mouseleave.slick', $.proxy(_.interrupt, _, false));

        }

    };

    Slick.prototype.initializeEvents = function() {

        var _ = this;

        _.initArrowEvents();

        _.initDotEvents();
        _.initSlideEvents();

        _.$list.on('touchstart.slick mousedown.slick', {
            action: 'start'
        }, _.swipeHandler);
        _.$list.on('touchmove.slick mousemove.slick', {
            action: 'move'
        }, _.swipeHandler);
        _.$list.on('touchend.slick mouseup.slick', {
            action: 'end'
        }, _.swipeHandler);
        _.$list.on('touchcancel.slick mouseleave.slick', {
            action: 'end'
        }, _.swipeHandler);

        _.$list.on('click.slick', _.clickHandler);

        $(document).on(_.visibilityChange, $.proxy(_.visibility, _));

        if (_.options.accessibility === true) {
            _.$list.on('keydown.slick', _.keyHandler);
        }

        if (_.options.focusOnSelect === true) {
            $(_.$slideTrack).children().on('click.slick', _.selectHandler);
        }

        $(window).on('orientationchange.slick.slick-' + _.instanceUid, $.proxy(_.orientationChange, _));

        $(window).on('resize.slick.slick-' + _.instanceUid, $.proxy(_.resize, _));

        $('[draggable!=true]', _.$slideTrack).on('dragstart', _.preventDefault);

        $(window).on('load.slick.slick-' + _.instanceUid, _.setPosition);
        $(_.setPosition);

    };

    Slick.prototype.initUI = function() {

        var _ = this;

        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {

            _.$prevArrow.show();
            _.$nextArrow.show();

        }

        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {

            _.$dots.show();

        }

    };

    Slick.prototype.keyHandler = function(event) {

        var _ = this;
         //Dont slide if the cursor is inside the form fields and arrow keys are pressed
        if(!event.target.tagName.match('TEXTAREA|INPUT|SELECT')) {
            if (event.keyCode === 37 && _.options.accessibility === true) {
                _.changeSlide({
                    data: {
                        message: _.options.rtl === true ? 'next' :  'previous'
                    }
                });
            } else if (event.keyCode === 39 && _.options.accessibility === true) {
                _.changeSlide({
                    data: {
                        message: _.options.rtl === true ? 'previous' : 'next'
                    }
                });
            }
        }

    };

    Slick.prototype.lazyLoad = function() {

        var _ = this,
            loadRange, cloneRange, rangeStart, rangeEnd;

        function loadImages(imagesScope) {

            $('img[data-lazy]', imagesScope).each(function() {

                var image = $(this),
                    imageSource = $(this).attr('data-lazy'),
                    imageSrcSet = $(this).attr('data-srcset'),
                    imageSizes  = $(this).attr('data-sizes') || _.$slider.attr('data-sizes'),
                    imageToLoad = document.createElement('img');

                imageToLoad.onload = function() {

                    image
                        .animate({ opacity: 0 }, 100, function() {

                            if (imageSrcSet) {
                                image
                                    .attr('srcset', imageSrcSet );

                                if (imageSizes) {
                                    image
                                        .attr('sizes', imageSizes );
                                }
                            }

                            image
                                .attr('src', imageSource)
                                .animate({ opacity: 1 }, 200, function() {
                                    image
                                        .removeAttr('data-lazy data-srcset data-sizes')
                                        .removeClass('slick-loading');
                                });
                            _.$slider.trigger('lazyLoaded', [_, image, imageSource]);
                        });

                };

                imageToLoad.onerror = function() {

                    image
                        .removeAttr( 'data-lazy' )
                        .removeClass( 'slick-loading' )
                        .addClass( 'slick-lazyload-error' );

                    _.$slider.trigger('lazyLoadError', [ _, image, imageSource ]);

                };

                imageToLoad.src = imageSource;

            });

        }

        if (_.options.centerMode === true) {
            if (_.options.infinite === true) {
                rangeStart = _.currentSlide + (_.options.slidesToShow / 2 + 1);
                rangeEnd = rangeStart + _.options.slidesToShow + 2;
            } else {
                rangeStart = Math.max(0, _.currentSlide - (_.options.slidesToShow / 2 + 1));
                rangeEnd = 2 + (_.options.slidesToShow / 2 + 1) + _.currentSlide;
            }
        } else {
            rangeStart = _.options.infinite ? _.options.slidesToShow + _.currentSlide : _.currentSlide;
            rangeEnd = Math.ceil(rangeStart + _.options.slidesToShow);
            if (_.options.fade === true) {
                if (rangeStart > 0) rangeStart--;
                if (rangeEnd <= _.slideCount) rangeEnd++;
            }
        }

        loadRange = _.$slider.find('.slick-slide').slice(rangeStart, rangeEnd);

        if (_.options.lazyLoad === 'anticipated') {
            var prevSlide = rangeStart - 1,
                nextSlide = rangeEnd,
                $slides = _.$slider.find('.slick-slide');

            for (var i = 0; i < _.options.slidesToScroll; i++) {
                if (prevSlide < 0) prevSlide = _.slideCount - 1;
                loadRange = loadRange.add($slides.eq(prevSlide));
                loadRange = loadRange.add($slides.eq(nextSlide));
                prevSlide--;
                nextSlide++;
            }
        }

        loadImages(loadRange);

        if (_.slideCount <= _.options.slidesToShow) {
            cloneRange = _.$slider.find('.slick-slide');
            loadImages(cloneRange);
        } else
        if (_.currentSlide >= _.slideCount - _.options.slidesToShow) {
            cloneRange = _.$slider.find('.slick-cloned').slice(0, _.options.slidesToShow);
            loadImages(cloneRange);
        } else if (_.currentSlide === 0) {
            cloneRange = _.$slider.find('.slick-cloned').slice(_.options.slidesToShow * -1);
            loadImages(cloneRange);
        }

    };

    Slick.prototype.loadSlider = function() {

        var _ = this;

        _.setPosition();

        _.$slideTrack.css({
            opacity: 1
        });

        _.$slider.removeClass('slick-loading');

        _.initUI();

        if (_.options.lazyLoad === 'progressive') {
            _.progressiveLazyLoad();
        }

    };

    Slick.prototype.next = Slick.prototype.slickNext = function() {

        var _ = this;

        _.changeSlide({
            data: {
                message: 'next'
            }
        });

    };

    Slick.prototype.orientationChange = function() {

        var _ = this;

        _.checkResponsive();
        _.setPosition();

    };

    Slick.prototype.pause = Slick.prototype.slickPause = function() {

        var _ = this;

        _.autoPlayClear();
        _.paused = true;

    };

    Slick.prototype.play = Slick.prototype.slickPlay = function() {

        var _ = this;

        _.autoPlay();
        _.options.autoplay = true;
        _.paused = false;
        _.focussed = false;
        _.interrupted = false;

    };

    Slick.prototype.postSlide = function(index) {

        var _ = this;

        if( !_.unslicked ) {

            _.$slider.trigger('afterChange', [_, index]);

            _.animating = false;

            if (_.slideCount > _.options.slidesToShow) {
                _.setPosition();
            }

            _.swipeLeft = null;

            if ( _.options.autoplay ) {
                _.autoPlay();
            }

            if (_.options.accessibility === true) {
                _.initADA();
                
                if (_.options.focusOnChange) {
                    var $currentSlide = $(_.$slides.get(_.currentSlide));
                    $currentSlide.attr('tabindex', 0).focus();
                }
            }

        }

    };

    Slick.prototype.prev = Slick.prototype.slickPrev = function() {

        var _ = this;

        _.changeSlide({
            data: {
                message: 'previous'
            }
        });

    };

    Slick.prototype.preventDefault = function(event) {

        event.preventDefault();

    };

    Slick.prototype.progressiveLazyLoad = function( tryCount ) {

        tryCount = tryCount || 1;

        var _ = this,
            $imgsToLoad = $( 'img[data-lazy]', _.$slider ),
            image,
            imageSource,
            imageSrcSet,
            imageSizes,
            imageToLoad;

        if ( $imgsToLoad.length ) {

            image = $imgsToLoad.first();
            imageSource = image.attr('data-lazy');
            imageSrcSet = image.attr('data-srcset');
            imageSizes  = image.attr('data-sizes') || _.$slider.attr('data-sizes');
            imageToLoad = document.createElement('img');

            imageToLoad.onload = function() {

                if (imageSrcSet) {
                    image
                        .attr('srcset', imageSrcSet );

                    if (imageSizes) {
                        image
                            .attr('sizes', imageSizes );
                    }
                }

                image
                    .attr( 'src', imageSource )
                    .removeAttr('data-lazy data-srcset data-sizes')
                    .removeClass('slick-loading');

                if ( _.options.adaptiveHeight === true ) {
                    _.setPosition();
                }

                _.$slider.trigger('lazyLoaded', [ _, image, imageSource ]);
                _.progressiveLazyLoad();

            };

            imageToLoad.onerror = function() {

                if ( tryCount < 3 ) {

                    /**
                     * try to load the image 3 times,
                     * leave a slight delay so we don't get
                     * servers blocking the request.
                     */
                    setTimeout( function() {
                        _.progressiveLazyLoad( tryCount + 1 );
                    }, 500 );

                } else {

                    image
                        .removeAttr( 'data-lazy' )
                        .removeClass( 'slick-loading' )
                        .addClass( 'slick-lazyload-error' );

                    _.$slider.trigger('lazyLoadError', [ _, image, imageSource ]);

                    _.progressiveLazyLoad();

                }

            };

            imageToLoad.src = imageSource;

        } else {

            _.$slider.trigger('allImagesLoaded', [ _ ]);

        }

    };

    Slick.prototype.refresh = function( initializing ) {

        var _ = this, currentSlide, lastVisibleIndex;

        lastVisibleIndex = _.slideCount - _.options.slidesToShow;

        // in non-infinite sliders, we don't want to go past the
        // last visible index.
        if( !_.options.infinite && ( _.currentSlide > lastVisibleIndex )) {
            _.currentSlide = lastVisibleIndex;
        }

        // if less slides than to show, go to start.
        if ( _.slideCount <= _.options.slidesToShow ) {
            _.currentSlide = 0;

        }

        currentSlide = _.currentSlide;

        _.destroy(true);

        $.extend(_, _.initials, { currentSlide: currentSlide });

        _.init();

        if( !initializing ) {

            _.changeSlide({
                data: {
                    message: 'index',
                    index: currentSlide
                }
            }, false);

        }

    };

    Slick.prototype.registerBreakpoints = function() {

        var _ = this, breakpoint, currentBreakpoint, l,
            responsiveSettings = _.options.responsive || null;

        if ( $.type(responsiveSettings) === 'array' && responsiveSettings.length ) {

            _.respondTo = _.options.respondTo || 'window';

            for ( breakpoint in responsiveSettings ) {

                l = _.breakpoints.length-1;

                if (responsiveSettings.hasOwnProperty(breakpoint)) {
                    currentBreakpoint = responsiveSettings[breakpoint].breakpoint;

                    // loop through the breakpoints and cut out any existing
                    // ones with the same breakpoint number, we don't want dupes.
                    while( l >= 0 ) {
                        if( _.breakpoints[l] && _.breakpoints[l] === currentBreakpoint ) {
                            _.breakpoints.splice(l,1);
                        }
                        l--;
                    }

                    _.breakpoints.push(currentBreakpoint);
                    _.breakpointSettings[currentBreakpoint] = responsiveSettings[breakpoint].settings;

                }

            }

            _.breakpoints.sort(function(a, b) {
                return ( _.options.mobileFirst ) ? a-b : b-a;
            });

        }

    };

    Slick.prototype.reinit = function() {

        var _ = this;

        _.$slides =
            _.$slideTrack
                .children(_.options.slide)
                .addClass('slick-slide');

        _.slideCount = _.$slides.length;

        if (_.currentSlide >= _.slideCount && _.currentSlide !== 0) {
            _.currentSlide = _.currentSlide - _.options.slidesToScroll;
        }

        if (_.slideCount <= _.options.slidesToShow) {
            _.currentSlide = 0;
        }

        _.registerBreakpoints();

        _.setProps();
        _.setupInfinite();
        _.buildArrows();
        _.updateArrows();
        _.initArrowEvents();
        _.buildDots();
        _.updateDots();
        _.initDotEvents();
        _.cleanUpSlideEvents();
        _.initSlideEvents();

        _.checkResponsive(false, true);

        if (_.options.focusOnSelect === true) {
            $(_.$slideTrack).children().on('click.slick', _.selectHandler);
        }

        _.setSlideClasses(typeof _.currentSlide === 'number' ? _.currentSlide : 0);

        _.setPosition();
        _.focusHandler();

        _.paused = !_.options.autoplay;
        _.autoPlay();

        _.$slider.trigger('reInit', [_]);

    };

    Slick.prototype.resize = function() {

        var _ = this;

        if ($(window).width() !== _.windowWidth) {
            clearTimeout(_.windowDelay);
            _.windowDelay = window.setTimeout(function() {
                _.windowWidth = $(window).width();
                _.checkResponsive();
                if( !_.unslicked ) { _.setPosition(); }
            }, 50);
        }
    };

    Slick.prototype.removeSlide = Slick.prototype.slickRemove = function(index, removeBefore, removeAll) {

        var _ = this;

        if (typeof(index) === 'boolean') {
            removeBefore = index;
            index = removeBefore === true ? 0 : _.slideCount - 1;
        } else {
            index = removeBefore === true ? --index : index;
        }

        if (_.slideCount < 1 || index < 0 || index > _.slideCount - 1) {
            return false;
        }

        _.unload();

        if (removeAll === true) {
            _.$slideTrack.children().remove();
        } else {
            _.$slideTrack.children(this.options.slide).eq(index).remove();
        }

        _.$slides = _.$slideTrack.children(this.options.slide);

        _.$slideTrack.children(this.options.slide).detach();

        _.$slideTrack.append(_.$slides);

        _.$slidesCache = _.$slides;

        _.reinit();

    };

    Slick.prototype.setCSS = function(position) {

        var _ = this,
            positionProps = {},
            x, y;

        if (_.options.rtl === true) {
            position = -position;
        }
        x = _.positionProp == 'left' ? Math.ceil(position) + 'px' : '0px';
        y = _.positionProp == 'top' ? Math.ceil(position) + 'px' : '0px';

        positionProps[_.positionProp] = position;

        if (_.transformsEnabled === false) {
            _.$slideTrack.css(positionProps);
        } else {
            positionProps = {};
            if (_.cssTransitions === false) {
                positionProps[_.animType] = 'translate(' + x + ', ' + y + ')';
                _.$slideTrack.css(positionProps);
            } else {
                positionProps[_.animType] = 'translate3d(' + x + ', ' + y + ', 0px)';
                _.$slideTrack.css(positionProps);
            }
        }

    };

    Slick.prototype.setDimensions = function() {

        var _ = this;

        if (_.options.vertical === false) {
            if (_.options.centerMode === true) {
                _.$list.css({
                    padding: ('0px ' + _.options.centerPadding)
                });
            }
        } else {
            _.$list.height(_.$slides.first().outerHeight(true) * _.options.slidesToShow);
            if (_.options.centerMode === true) {
                _.$list.css({
                    padding: (_.options.centerPadding + ' 0px')
                });
            }
        }

        _.listWidth = _.$list.width();
        _.listHeight = _.$list.height();


        if (_.options.vertical === false && _.options.variableWidth === false) {
            _.slideWidth = Math.ceil(_.listWidth / _.options.slidesToShow);
            _.$slideTrack.width(Math.ceil((_.slideWidth * _.$slideTrack.children('.slick-slide').length)));

        } else if (_.options.variableWidth === true) {
            _.$slideTrack.width(5000 * _.slideCount);
        } else {
            _.slideWidth = Math.ceil(_.listWidth);
            _.$slideTrack.height(Math.ceil((_.$slides.first().outerHeight(true) * _.$slideTrack.children('.slick-slide').length)));
        }

        var offset = _.$slides.first().outerWidth(true) - _.$slides.first().width();
        if (_.options.variableWidth === false) _.$slideTrack.children('.slick-slide').width(_.slideWidth - offset);

    };

    Slick.prototype.setFade = function() {

        var _ = this,
            targetLeft;

        _.$slides.each(function(index, element) {
            targetLeft = (_.slideWidth * index) * -1;
            if (_.options.rtl === true) {
                $(element).css({
                    position: 'relative',
                    right: targetLeft,
                    top: 0,
                    zIndex: _.options.zIndex - 2,
                    opacity: 0
                });
            } else {
                $(element).css({
                    position: 'relative',
                    left: targetLeft,
                    top: 0,
                    zIndex: _.options.zIndex - 2,
                    opacity: 0
                });
            }
        });

        _.$slides.eq(_.currentSlide).css({
            zIndex: _.options.zIndex - 1,
            opacity: 1
        });

    };

    Slick.prototype.setHeight = function() {

        var _ = this;

        if (_.options.slidesToShow === 1 && _.options.adaptiveHeight === true && _.options.vertical === false) {
            var targetHeight = _.$slides.eq(_.currentSlide).outerHeight(true);
            _.$list.css('height', targetHeight);
        }

    };

    Slick.prototype.setOption =
    Slick.prototype.slickSetOption = function() {

        /**
         * accepts arguments in format of:
         *
         *  - for changing a single option's value:
         *     .slick("setOption", option, value, refresh )
         *
         *  - for changing a set of responsive options:
         *     .slick("setOption", 'responsive', [{}, ...], refresh )
         *
         *  - for updating multiple values at once (not responsive)
         *     .slick("setOption", { 'option': value, ... }, refresh )
         */

        var _ = this, l, item, option, value, refresh = false, type;

        if( $.type( arguments[0] ) === 'object' ) {

            option =  arguments[0];
            refresh = arguments[1];
            type = 'multiple';

        } else if ( $.type( arguments[0] ) === 'string' ) {

            option =  arguments[0];
            value = arguments[1];
            refresh = arguments[2];

            if ( arguments[0] === 'responsive' && $.type( arguments[1] ) === 'array' ) {

                type = 'responsive';

            } else if ( typeof arguments[1] !== 'undefined' ) {

                type = 'single';

            }

        }

        if ( type === 'single' ) {

            _.options[option] = value;


        } else if ( type === 'multiple' ) {

            $.each( option , function( opt, val ) {

                _.options[opt] = val;

            });


        } else if ( type === 'responsive' ) {

            for ( item in value ) {

                if( $.type( _.options.responsive ) !== 'array' ) {

                    _.options.responsive = [ value[item] ];

                } else {

                    l = _.options.responsive.length-1;

                    // loop through the responsive object and splice out duplicates.
                    while( l >= 0 ) {

                        if( _.options.responsive[l].breakpoint === value[item].breakpoint ) {

                            _.options.responsive.splice(l,1);

                        }

                        l--;

                    }

                    _.options.responsive.push( value[item] );

                }

            }

        }

        if ( refresh ) {

            _.unload();
            _.reinit();

        }

    };

    Slick.prototype.setPosition = function() {

        var _ = this;

        _.setDimensions();

        _.setHeight();

        if (_.options.fade === false) {
            _.setCSS(_.getLeft(_.currentSlide));
        } else {
            _.setFade();
        }

        _.$slider.trigger('setPosition', [_]);

    };

    Slick.prototype.setProps = function() {

        var _ = this,
            bodyStyle = document.body.style;

        _.positionProp = _.options.vertical === true ? 'top' : 'left';

        if (_.positionProp === 'top') {
            _.$slider.addClass('slick-vertical');
        } else {
            _.$slider.removeClass('slick-vertical');
        }

        if (bodyStyle.WebkitTransition !== undefined ||
            bodyStyle.MozTransition !== undefined ||
            bodyStyle.msTransition !== undefined) {
            if (_.options.useCSS === true) {
                _.cssTransitions = true;
            }
        }

        if ( _.options.fade ) {
            if ( typeof _.options.zIndex === 'number' ) {
                if( _.options.zIndex < 3 ) {
                    _.options.zIndex = 3;
                }
            } else {
                _.options.zIndex = _.defaults.zIndex;
            }
        }

        if (bodyStyle.OTransform !== undefined) {
            _.animType = 'OTransform';
            _.transformType = '-o-transform';
            _.transitionType = 'OTransition';
            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.webkitPerspective === undefined) _.animType = false;
        }
        if (bodyStyle.MozTransform !== undefined) {
            _.animType = 'MozTransform';
            _.transformType = '-moz-transform';
            _.transitionType = 'MozTransition';
            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.MozPerspective === undefined) _.animType = false;
        }
        if (bodyStyle.webkitTransform !== undefined) {
            _.animType = 'webkitTransform';
            _.transformType = '-webkit-transform';
            _.transitionType = 'webkitTransition';
            if (bodyStyle.perspectiveProperty === undefined && bodyStyle.webkitPerspective === undefined) _.animType = false;
        }
        if (bodyStyle.msTransform !== undefined) {
            _.animType = 'msTransform';
            _.transformType = '-ms-transform';
            _.transitionType = 'msTransition';
            if (bodyStyle.msTransform === undefined) _.animType = false;
        }
        if (bodyStyle.transform !== undefined && _.animType !== false) {
            _.animType = 'transform';
            _.transformType = 'transform';
            _.transitionType = 'transition';
        }
        _.transformsEnabled = _.options.useTransform && (_.animType !== null && _.animType !== false);
    };


    Slick.prototype.setSlideClasses = function(index) {

        var _ = this,
            centerOffset, allSlides, indexOffset, remainder;

        allSlides = _.$slider
            .find('.slick-slide')
            .removeClass('slick-active slick-center slick-current')
            .attr('aria-hidden', 'true');

        _.$slides
            .eq(index)
            .addClass('slick-current');

        if (_.options.centerMode === true) {

            var evenCoef = _.options.slidesToShow % 2 === 0 ? 1 : 0;

            centerOffset = Math.floor(_.options.slidesToShow / 2);

            if (_.options.infinite === true) {

                if (index >= centerOffset && index <= (_.slideCount - 1) - centerOffset) {
                    _.$slides
                        .slice(index - centerOffset + evenCoef, index + centerOffset + 1)
                        .addClass('slick-active')
                        .attr('aria-hidden', 'false');

                } else {

                    indexOffset = _.options.slidesToShow + index;
                    allSlides
                        .slice(indexOffset - centerOffset + 1 + evenCoef, indexOffset + centerOffset + 2)
                        .addClass('slick-active')
                        .attr('aria-hidden', 'false');

                }

                if (index === 0) {

                    allSlides
                        .eq(allSlides.length - 1 - _.options.slidesToShow)
                        .addClass('slick-center');

                } else if (index === _.slideCount - 1) {

                    allSlides
                        .eq(_.options.slidesToShow)
                        .addClass('slick-center');

                }

            }

            _.$slides
                .eq(index)
                .addClass('slick-center');

        } else {

            if (index >= 0 && index <= (_.slideCount - _.options.slidesToShow)) {

                _.$slides
                    .slice(index, index + _.options.slidesToShow)
                    .addClass('slick-active')
                    .attr('aria-hidden', 'false');

            } else if (allSlides.length <= _.options.slidesToShow) {

                allSlides
                    .addClass('slick-active')
                    .attr('aria-hidden', 'false');

            } else {

                remainder = _.slideCount % _.options.slidesToShow;
                indexOffset = _.options.infinite === true ? _.options.slidesToShow + index : index;

                if (_.options.slidesToShow == _.options.slidesToScroll && (_.slideCount - index) < _.options.slidesToShow) {

                    allSlides
                        .slice(indexOffset - (_.options.slidesToShow - remainder), indexOffset + remainder)
                        .addClass('slick-active')
                        .attr('aria-hidden', 'false');

                } else {

                    allSlides
                        .slice(indexOffset, indexOffset + _.options.slidesToShow)
                        .addClass('slick-active')
                        .attr('aria-hidden', 'false');

                }

            }

        }

        if (_.options.lazyLoad === 'ondemand' || _.options.lazyLoad === 'anticipated') {
            _.lazyLoad();
        }
    };

    Slick.prototype.setupInfinite = function() {

        var _ = this,
            i, slideIndex, infiniteCount;

        if (_.options.fade === true) {
            _.options.centerMode = false;
        }

        if (_.options.infinite === true && _.options.fade === false) {

            slideIndex = null;

            if (_.slideCount > _.options.slidesToShow) {

                if (_.options.centerMode === true) {
                    infiniteCount = _.options.slidesToShow + 1;
                } else {
                    infiniteCount = _.options.slidesToShow;
                }

                for (i = _.slideCount; i > (_.slideCount -
                        infiniteCount); i -= 1) {
                    slideIndex = i - 1;
                    $(_.$slides[slideIndex]).clone(true).attr('id', '')
                        .attr('data-slick-index', slideIndex - _.slideCount)
                        .prependTo(_.$slideTrack).addClass('slick-cloned');
                }
                for (i = 0; i < infiniteCount  + _.slideCount; i += 1) {
                    slideIndex = i;
                    $(_.$slides[slideIndex]).clone(true).attr('id', '')
                        .attr('data-slick-index', slideIndex + _.slideCount)
                        .appendTo(_.$slideTrack).addClass('slick-cloned');
                }
                _.$slideTrack.find('.slick-cloned').find('[id]').each(function() {
                    $(this).attr('id', '');
                });

            }

        }

    };

    Slick.prototype.interrupt = function( toggle ) {

        var _ = this;

        if( !toggle ) {
            _.autoPlay();
        }
        _.interrupted = toggle;

    };

    Slick.prototype.selectHandler = function(event) {

        var _ = this;

        var targetElement =
            $(event.target).is('.slick-slide') ?
                $(event.target) :
                $(event.target).parents('.slick-slide');

        var index = parseInt(targetElement.attr('data-slick-index'));

        if (!index) index = 0;

        if (_.slideCount <= _.options.slidesToShow) {

            _.slideHandler(index, false, true);
            return;

        }

        _.slideHandler(index);

    };

    Slick.prototype.slideHandler = function(index, sync, dontAnimate) {

        var targetSlide, animSlide, oldSlide, slideLeft, targetLeft = null,
            _ = this, navTarget;

        sync = sync || false;

        if (_.animating === true && _.options.waitForAnimate === true) {
            return;
        }

        if (_.options.fade === true && _.currentSlide === index) {
            return;
        }

        if (sync === false) {
            _.asNavFor(index);
        }

        targetSlide = index;
        targetLeft = _.getLeft(targetSlide);
        slideLeft = _.getLeft(_.currentSlide);

        _.currentLeft = _.swipeLeft === null ? slideLeft : _.swipeLeft;

        if (_.options.infinite === false && _.options.centerMode === false && (index < 0 || index > _.getDotCount() * _.options.slidesToScroll)) {
            if (_.options.fade === false) {
                targetSlide = _.currentSlide;
                if (dontAnimate !== true) {
                    _.animateSlide(slideLeft, function() {
                        _.postSlide(targetSlide);
                    });
                } else {
                    _.postSlide(targetSlide);
                }
            }
            return;
        } else if (_.options.infinite === false && _.options.centerMode === true && (index < 0 || index > (_.slideCount - _.options.slidesToScroll))) {
            if (_.options.fade === false) {
                targetSlide = _.currentSlide;
                if (dontAnimate !== true) {
                    _.animateSlide(slideLeft, function() {
                        _.postSlide(targetSlide);
                    });
                } else {
                    _.postSlide(targetSlide);
                }
            }
            return;
        }

        if ( _.options.autoplay ) {
            clearInterval(_.autoPlayTimer);
        }

        if (targetSlide < 0) {
            if (_.slideCount % _.options.slidesToScroll !== 0) {
                animSlide = _.slideCount - (_.slideCount % _.options.slidesToScroll);
            } else {
                animSlide = _.slideCount + targetSlide;
            }
        } else if (targetSlide >= _.slideCount) {
            if (_.slideCount % _.options.slidesToScroll !== 0) {
                animSlide = 0;
            } else {
                animSlide = targetSlide - _.slideCount;
            }
        } else {
            animSlide = targetSlide;
        }

        _.animating = true;

        _.$slider.trigger('beforeChange', [_, _.currentSlide, animSlide]);

        oldSlide = _.currentSlide;
        _.currentSlide = animSlide;

        _.setSlideClasses(_.currentSlide);

        if ( _.options.asNavFor ) {

            navTarget = _.getNavTarget();
            navTarget = navTarget.slick('getSlick');

            if ( navTarget.slideCount <= navTarget.options.slidesToShow ) {
                navTarget.setSlideClasses(_.currentSlide);
            }

        }

        _.updateDots();
        _.updateArrows();

        if (_.options.fade === true) {
            if (dontAnimate !== true) {

                _.fadeSlideOut(oldSlide);

                _.fadeSlide(animSlide, function() {
                    _.postSlide(animSlide);
                });

            } else {
                _.postSlide(animSlide);
            }
            _.animateHeight();
            return;
        }

        if (dontAnimate !== true) {
            _.animateSlide(targetLeft, function() {
                _.postSlide(animSlide);
            });
        } else {
            _.postSlide(animSlide);
        }

    };

    Slick.prototype.startLoad = function() {

        var _ = this;

        if (_.options.arrows === true && _.slideCount > _.options.slidesToShow) {

            _.$prevArrow.hide();
            _.$nextArrow.hide();

        }

        if (_.options.dots === true && _.slideCount > _.options.slidesToShow) {

            _.$dots.hide();

        }

        _.$slider.addClass('slick-loading');

    };

    Slick.prototype.swipeDirection = function() {

        var xDist, yDist, r, swipeAngle, _ = this;

        xDist = _.touchObject.startX - _.touchObject.curX;
        yDist = _.touchObject.startY - _.touchObject.curY;
        r = Math.atan2(yDist, xDist);

        swipeAngle = Math.round(r * 180 / Math.PI);
        if (swipeAngle < 0) {
            swipeAngle = 360 - Math.abs(swipeAngle);
        }

        if ((swipeAngle <= 45) && (swipeAngle >= 0)) {
            return (_.options.rtl === false ? 'left' : 'right');
        }
        if ((swipeAngle <= 360) && (swipeAngle >= 315)) {
            return (_.options.rtl === false ? 'left' : 'right');
        }
        if ((swipeAngle >= 135) && (swipeAngle <= 225)) {
            return (_.options.rtl === false ? 'right' : 'left');
        }
        if (_.options.verticalSwiping === true) {
            if ((swipeAngle >= 35) && (swipeAngle <= 135)) {
                return 'down';
            } else {
                return 'up';
            }
        }

        return 'vertical';

    };

    Slick.prototype.swipeEnd = function(event) {

        var _ = this,
            slideCount,
            direction;

        _.dragging = false;
        _.swiping = false;

        if (_.scrolling) {
            _.scrolling = false;
            return false;
        }

        _.interrupted = false;
        _.shouldClick = ( _.touchObject.swipeLength > 10 ) ? false : true;

        if ( _.touchObject.curX === undefined ) {
            return false;
        }

        if ( _.touchObject.edgeHit === true ) {
            _.$slider.trigger('edge', [_, _.swipeDirection() ]);
        }

        if ( _.touchObject.swipeLength >= _.touchObject.minSwipe ) {

            direction = _.swipeDirection();

            switch ( direction ) {

                case 'left':
                case 'down':

                    slideCount =
                        _.options.swipeToSlide ?
                            _.checkNavigable( _.currentSlide + _.getSlideCount() ) :
                            _.currentSlide + _.getSlideCount();

                    _.currentDirection = 0;

                    break;

                case 'right':
                case 'up':

                    slideCount =
                        _.options.swipeToSlide ?
                            _.checkNavigable( _.currentSlide - _.getSlideCount() ) :
                            _.currentSlide - _.getSlideCount();

                    _.currentDirection = 1;

                    break;

                default:


            }

            if( direction != 'vertical' ) {

                _.slideHandler( slideCount );
                _.touchObject = {};
                _.$slider.trigger('swipe', [_, direction ]);

            }

        } else {

            if ( _.touchObject.startX !== _.touchObject.curX ) {

                _.slideHandler( _.currentSlide );
                _.touchObject = {};

            }

        }

    };

    Slick.prototype.swipeHandler = function(event) {

        var _ = this;

        if ((_.options.swipe === false) || ('ontouchend' in document && _.options.swipe === false)) {
            return;
        } else if (_.options.draggable === false && event.type.indexOf('mouse') !== -1) {
            return;
        }

        _.touchObject.fingerCount = event.originalEvent && event.originalEvent.touches !== undefined ?
            event.originalEvent.touches.length : 1;

        _.touchObject.minSwipe = _.listWidth / _.options
            .touchThreshold;

        if (_.options.verticalSwiping === true) {
            _.touchObject.minSwipe = _.listHeight / _.options
                .touchThreshold;
        }

        switch (event.data.action) {

            case 'start':
                _.swipeStart(event);
                break;

            case 'move':
                _.swipeMove(event);
                break;

            case 'end':
                _.swipeEnd(event);
                break;

        }

    };

    Slick.prototype.swipeMove = function(event) {

        var _ = this,
            edgeWasHit = false,
            curLeft, swipeDirection, swipeLength, positionOffset, touches, verticalSwipeLength;

        touches = event.originalEvent !== undefined ? event.originalEvent.touches : null;

        if (!_.dragging || _.scrolling || touches && touches.length !== 1) {
            return false;
        }

        curLeft = _.getLeft(_.currentSlide);

        _.touchObject.curX = touches !== undefined ? touches[0].pageX : event.clientX;
        _.touchObject.curY = touches !== undefined ? touches[0].pageY : event.clientY;

        _.touchObject.swipeLength = Math.round(Math.sqrt(
            Math.pow(_.touchObject.curX - _.touchObject.startX, 2)));

        verticalSwipeLength = Math.round(Math.sqrt(
            Math.pow(_.touchObject.curY - _.touchObject.startY, 2)));

        if (!_.options.verticalSwiping && !_.swiping && verticalSwipeLength > 4) {
            _.scrolling = true;
            return false;
        }

        if (_.options.verticalSwiping === true) {
            _.touchObject.swipeLength = verticalSwipeLength;
        }

        swipeDirection = _.swipeDirection();

        if (event.originalEvent !== undefined && _.touchObject.swipeLength > 4) {
            _.swiping = true;
            event.preventDefault();
        }

        positionOffset = (_.options.rtl === false ? 1 : -1) * (_.touchObject.curX > _.touchObject.startX ? 1 : -1);
        if (_.options.verticalSwiping === true) {
            positionOffset = _.touchObject.curY > _.touchObject.startY ? 1 : -1;
        }


        swipeLength = _.touchObject.swipeLength;

        _.touchObject.edgeHit = false;

        if (_.options.infinite === false) {
            if ((_.currentSlide === 0 && swipeDirection === 'right') || (_.currentSlide >= _.getDotCount() && swipeDirection === 'left')) {
                swipeLength = _.touchObject.swipeLength * _.options.edgeFriction;
                _.touchObject.edgeHit = true;
            }
        }

        if (_.options.vertical === false) {
            _.swipeLeft = curLeft + swipeLength * positionOffset;
        } else {
            _.swipeLeft = curLeft + (swipeLength * (_.$list.height() / _.listWidth)) * positionOffset;
        }
        if (_.options.verticalSwiping === true) {
            _.swipeLeft = curLeft + swipeLength * positionOffset;
        }

        if (_.options.fade === true || _.options.touchMove === false) {
            return false;
        }

        if (_.animating === true) {
            _.swipeLeft = null;
            return false;
        }

        _.setCSS(_.swipeLeft);

    };

    Slick.prototype.swipeStart = function(event) {

        var _ = this,
            touches;

        _.interrupted = true;

        if (_.touchObject.fingerCount !== 1 || _.slideCount <= _.options.slidesToShow) {
            _.touchObject = {};
            return false;
        }

        if (event.originalEvent !== undefined && event.originalEvent.touches !== undefined) {
            touches = event.originalEvent.touches[0];
        }

        _.touchObject.startX = _.touchObject.curX = touches !== undefined ? touches.pageX : event.clientX;
        _.touchObject.startY = _.touchObject.curY = touches !== undefined ? touches.pageY : event.clientY;

        _.dragging = true;

    };

    Slick.prototype.unfilterSlides = Slick.prototype.slickUnfilter = function() {

        var _ = this;

        if (_.$slidesCache !== null) {

            _.unload();

            _.$slideTrack.children(this.options.slide).detach();

            _.$slidesCache.appendTo(_.$slideTrack);

            _.reinit();

        }

    };

    Slick.prototype.unload = function() {

        var _ = this;

        $('.slick-cloned', _.$slider).remove();

        if (_.$dots) {
            _.$dots.remove();
        }

        if (_.$prevArrow && _.htmlExpr.test(_.options.prevArrow)) {
            _.$prevArrow.remove();
        }

        if (_.$nextArrow && _.htmlExpr.test(_.options.nextArrow)) {
            _.$nextArrow.remove();
        }

        _.$slides
            .removeClass('slick-slide slick-active slick-visible slick-current')
            .attr('aria-hidden', 'true')
            .css('width', '');

    };

    Slick.prototype.unslick = function(fromBreakpoint) {

        var _ = this;
        _.$slider.trigger('unslick', [_, fromBreakpoint]);
        _.destroy();

    };

    Slick.prototype.updateArrows = function() {

        var _ = this,
            centerOffset;

        centerOffset = Math.floor(_.options.slidesToShow / 2);

        if ( _.options.arrows === true &&
            _.slideCount > _.options.slidesToShow &&
            !_.options.infinite ) {

            _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');
            _.$nextArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

            if (_.currentSlide === 0) {

                _.$prevArrow.addClass('slick-disabled').attr('aria-disabled', 'true');
                _.$nextArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

            } else if (_.currentSlide >= _.slideCount - _.options.slidesToShow && _.options.centerMode === false) {

                _.$nextArrow.addClass('slick-disabled').attr('aria-disabled', 'true');
                _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

            } else if (_.currentSlide >= _.slideCount - 1 && _.options.centerMode === true) {

                _.$nextArrow.addClass('slick-disabled').attr('aria-disabled', 'true');
                _.$prevArrow.removeClass('slick-disabled').attr('aria-disabled', 'false');

            }

        }

    };

    Slick.prototype.updateDots = function() {

        var _ = this;

        if (_.$dots !== null) {

            _.$dots
                .find('li')
                    .removeClass('slick-active')
                    .end();

            _.$dots
                .find('li')
                .eq(Math.floor(_.currentSlide / _.options.slidesToScroll))
                .addClass('slick-active');

        }

    };

    Slick.prototype.visibility = function() {

        var _ = this;

        if ( _.options.autoplay ) {

            if ( document[_.hidden] ) {

                _.interrupted = true;

            } else {

                _.interrupted = false;

            }

        }

    };

    $.fn.slick = function() {
        var _ = this,
            opt = arguments[0],
            args = Array.prototype.slice.call(arguments, 1),
            l = _.length,
            i,
            ret;
        for (i = 0; i < l; i++) {
            if (typeof opt == 'object' || typeof opt == 'undefined')
                _[i].slick = new Slick(_[i], opt);
            else
                ret = _[i].slick[opt].apply(_[i].slick, args);
            if (typeof ret != 'undefined') return ret;
        }
        return _;
    };

}));

/*!@license Copyright 2013, Heinrich Goebl, License: MIT, see https://github.com/hgoebl/mobile-detect.js*/
!function(a,b){a(function(){"use strict";function a(a,b){return null!=a&&null!=b&&a.toLowerCase()===b.toLowerCase()}function c(a,b){var c,d,e=a.length;if(!e||!b)return!1;for(c=b.toLowerCase(),d=0;d<e;++d)if(c===a[d].toLowerCase())return!0;return!1}function d(a){for(var b in a)i.call(a,b)&&(a[b]=new RegExp(a[b],"i"))}function e(a){return(a||"").substr(0,500)}function f(a,b){this.ua=e(a),this._cache={},this.maxPhoneWidth=b||600}var g={};g.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 6",Dell:"Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052",Samsung:"\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533",Asus:"Asus.*Galaxy|PadFone.*Mobile",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo (3DS|Switch)",Amoi:"Amoi",INQ:"INQ",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",GoogleTablet:"Android.*Pixel C",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304F|TB-X304L|TB-8703F|Tab2A7-10F",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP612|SOT31",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z99|z930|z999|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android.*\\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9|TECNO DP8D",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",VerizonTablet:"QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Window Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version.*Mobile.*Safari|Safari.*Mobile|MobileSafari",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Puffin:"Puffin",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]",UCBrowser:["UCWEB[VER]","UC.*Browser/[VER]"],MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},g.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,
    tabletPattern:/android|ipad|playbook|silk/i};var h,i=Object.prototype.hasOwnProperty;return g.FALLBACK_PHONE="UnknownPhone",g.FALLBACK_TABLET="UnknownTablet",g.FALLBACK_MOBILE="UnknownMobile",h="isArray"in Array?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},function(){var a,b,c,e,f,j,k=g.mobileDetectRules;for(a in k.props)if(i.call(k.props,a)){for(b=k.props[a],h(b)||(b=[b]),f=b.length,e=0;e<f;++e)c=b[e],j=c.indexOf("[VER]"),j>=0&&(c=c.substring(0,j)+"([\\w._\\+]+)"+c.substring(j+5)),b[e]=new RegExp(c,"i");k.props[a]=b}d(k.oss),d(k.phones),d(k.tablets),d(k.uas),d(k.utils),k.oss0={WindowsPhoneOS:k.oss.WindowsPhoneOS,WindowsMobileOS:k.oss.WindowsMobileOS}}(),g.findMatch=function(a,b){for(var c in a)if(i.call(a,c)&&a[c].test(b))return c;return null},g.findMatches=function(a,b){var c=[];for(var d in a)i.call(a,d)&&a[d].test(b)&&c.push(d);return c},g.getVersionStr=function(a,b){var c,d,e,f,h=g.mobileDetectRules.props;if(i.call(h,a))for(c=h[a],e=c.length,d=0;d<e;++d)if(f=c[d].exec(b),null!==f)return f[1];return null},g.getVersion=function(a,b){var c=g.getVersionStr(a,b);return c?g.prepareVersionNo(c):NaN},g.prepareVersionNo=function(a){var b;return b=a.split(/[a-z._ \/\-]/i),1===b.length&&(a=b[0]),b.length>1&&(a=b[0]+".",b.shift(),a+=b.join("")),Number(a)},g.isMobileFallback=function(a){return g.detectMobileBrowsers.fullPattern.test(a)||g.detectMobileBrowsers.shortPattern.test(a.substr(0,4))},g.isTabletFallback=function(a){return g.detectMobileBrowsers.tabletPattern.test(a)},g.prepareDetectionCache=function(a,c,d){if(a.mobile===b){var e,h,i;return(h=g.findMatch(g.mobileDetectRules.tablets,c))?(a.mobile=a.tablet=h,void(a.phone=null)):(e=g.findMatch(g.mobileDetectRules.phones,c))?(a.mobile=a.phone=e,void(a.tablet=null)):void(g.isMobileFallback(c)?(i=f.isPhoneSized(d),i===b?(a.mobile=g.FALLBACK_MOBILE,a.tablet=a.phone=null):i?(a.mobile=a.phone=g.FALLBACK_PHONE,a.tablet=null):(a.mobile=a.tablet=g.FALLBACK_TABLET,a.phone=null)):g.isTabletFallback(c)?(a.mobile=a.tablet=g.FALLBACK_TABLET,a.phone=null):a.mobile=a.tablet=a.phone=null)}},g.mobileGrade=function(a){var b=null!==a.mobile();return a.os("iOS")&&a.version("iPad")>=4.3||a.os("iOS")&&a.version("iPhone")>=3.1||a.os("iOS")&&a.version("iPod")>=3.1||a.version("Android")>2.1&&a.is("Webkit")||a.version("Windows Phone OS")>=7||a.is("BlackBerry")&&a.version("BlackBerry")>=6||a.match("Playbook.*Tablet")||a.version("webOS")>=1.4&&a.match("Palm|Pre|Pixi")||a.match("hp.*TouchPad")||a.is("Firefox")&&a.version("Firefox")>=12||a.is("Chrome")&&a.is("AndroidOS")&&a.version("Android")>=4||a.is("Skyfire")&&a.version("Skyfire")>=4.1&&a.is("AndroidOS")&&a.version("Android")>=2.3||a.is("Opera")&&a.version("Opera Mobi")>11&&a.is("AndroidOS")||a.is("MeeGoOS")||a.is("Tizen")||a.is("Dolfin")&&a.version("Bada")>=2||(a.is("UC Browser")||a.is("Dolfin"))&&a.version("Android")>=2.3||a.match("Kindle Fire")||a.is("Kindle")&&a.version("Kindle")>=3||a.is("AndroidOS")&&a.is("NookTablet")||a.version("Chrome")>=11&&!b||a.version("Safari")>=5&&!b||a.version("Firefox")>=4&&!b||a.version("MSIE")>=7&&!b||a.version("Opera")>=10&&!b?"A":a.os("iOS")&&a.version("iPad")<4.3||a.os("iOS")&&a.version("iPhone")<3.1||a.os("iOS")&&a.version("iPod")<3.1||a.is("Blackberry")&&a.version("BlackBerry")>=5&&a.version("BlackBerry")<6||a.version("Opera Mini")>=5&&a.version("Opera Mini")<=6.5&&(a.version("Android")>=2.3||a.is("iOS"))||a.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||a.version("Opera Mobi")>=11&&a.is("SymbianOS")?"B":(a.version("BlackBerry")<5||a.match("MSIEMobile|Windows CE.*Mobile")||a.version("Windows Mobile")<=5.2,"C")},g.detectOS=function(a){return g.findMatch(g.mobileDetectRules.oss0,a)||g.findMatch(g.mobileDetectRules.oss,a)},g.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height},f.prototype={constructor:f,mobile:function(){return g.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return g.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return g.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===b&&(this._cache.userAgent=g.findMatch(g.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===b&&(this._cache.userAgents=g.findMatches(g.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===b&&(this._cache.os=g.detectOS(this.ua)),this._cache.os},version:function(a){return g.getVersion(a,this.ua)},versionStr:function(a){return g.getVersionStr(a,this.ua)},is:function(b){return c(this.userAgents(),b)||a(b,this.os())||a(b,this.phone())||a(b,this.tablet())||c(g.findMatches(g.mobileDetectRules.utils,this.ua),b)},match:function(a){return a instanceof RegExp||(a=new RegExp(a,"i")),a.test(this.ua)},isPhoneSized:function(a){return f.isPhoneSized(a||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===b&&(this._cache.grade=g.mobileGrade(this)),this._cache.grade}},"undefined"!=typeof window&&window.screen?f.isPhoneSized=function(a){return a<0?b:g.getDeviceSmallerSide()<=a}:f.isPhoneSized=function(){},f._impl=g,f.version="1.4.2 2018-06-10",f})}(function(a){if("undefined"!=typeof module&&module.exports)return function(a){module.exports=a()};if("function"==typeof define&&define.amd)return define;if("undefined"!=typeof window)return function(a){window.MobileDetect=a()};throw new Error("unknown environment")}());
// function slideCarousel(elmnt){
//     const pager = $('.lSPager.lSpg li')
//     const list = $('.lSPager.lSpg li a .counter')[elmnt]
//     $(list).trigger('click')
// }

(function ($, undefined) {
    'use strict';
    var defaults = {
        item: 3,
        autoWidth: false,
        slideMove: 1,
        slideMargin: 10,
        addClass: '',
        mode: 'slide',
        useCSS: true,
        cssEasing: 'ease', //'cubic-bezier(0.25, 0, 0.25, 1)',
        easing: 'linear', //'for jquery animation',//
        speed: 400, //ms'
        auto: false,
        pauseOnHover: false,
        loop: false,
        slideEndAnimation: true,
        pause: 2000,
        keyPress: false,
        controls: true,
        prevHtml: '',
        nextHtml: '',
        rtl: false,
        adaptiveHeight: false,
        vertical: false,
        verticalHeight: 500,
        vThumbWidth: 100,
        thumbItem: 10,
        pager: true,
        gallery: false,
        galleryMargin: 5,
        thumbMargin: 5,
        currentPagerPosition: 'middle',
        enableTouch: true,
        enableDrag: true,
        freeMove: true,
        swipeThreshold: 40,
        responsive: [],
        /* jshint ignore:start */
        onBeforeStart: function ($el) {},
        onSliderLoad: function ($el) {},
        onBeforeSlide: function ($el, scene) {},
        onAfterSlide: function ($el, scene) {},
        onBeforeNextSlide: function ($el, scene) {},
        onBeforePrevSlide: function ($el, scene) {}
        /* jshint ignore:end */
    };
    $.fn.lightSlider = function (options) {
        if (this.length === 0) {
            return this;
        }

        if (this.length > 1) {
            this.each(function () {
                $(this).lightSlider(options);
            });
            return this;
        }

        var plugin = {},
            settings = $.extend(true, {}, defaults, options),
            settingsTemp = {},
            $el = this;
        plugin.$el = this;

        if (settings.mode === 'fade') {
            settings.vertical = false;
        }
        var $children = $el.children(),
            windowW = $(window).width(),
            breakpoint = null,
            resposiveObj = null,
            length = 0,
            w = 0,
            on = false,
            elSize = 0,
            $slide = '',
            scene = 0,
            property = (settings.vertical === true) ? 'height' : 'width',
            gutter = (settings.vertical === true) ? 'margin-bottom' : 'margin-right',
            slideValue = 0,
            pagerWidth = 0,
            slideWidth = 0,
            thumbWidth = 0,
            interval = null,
            isTouch = ('ontouchstart' in document.documentElement);
        var refresh = {};

        refresh.chbreakpoint = function () {
            windowW = $(window).width();
            if (settings.responsive.length) {
                var item;
                if (settings.autoWidth === false) {
                    item = settings.item;
                }
                if (windowW < settings.responsive[0].breakpoint) {
                    for (var i = 0; i < settings.responsive.length; i++) {
                        if (windowW < settings.responsive[i].breakpoint) {
                            breakpoint = settings.responsive[i].breakpoint;
                            resposiveObj = settings.responsive[i];
                        }
                    }
                }
                if (typeof resposiveObj !== 'undefined' && resposiveObj !== null) {
                    for (var j in resposiveObj.settings) {
                        if (resposiveObj.settings.hasOwnProperty(j)) {
                            if (typeof settingsTemp[j] === 'undefined' || settingsTemp[j] === null) {
                                settingsTemp[j] = settings[j];
                            }
                            settings[j] = resposiveObj.settings[j];
                        }
                    }
                }
                if (!$.isEmptyObject(settingsTemp) && windowW > settings.responsive[0].breakpoint) {
                    for (var k in settingsTemp) {
                        if (settingsTemp.hasOwnProperty(k)) {
                            settings[k] = settingsTemp[k];
                        }
                    }
                }
                if (settings.autoWidth === false) {
                    if (slideValue > 0 && slideWidth > 0) {
                        if (item !== settings.item) {
                            scene = Math.round(slideValue / ((slideWidth + settings.slideMargin) * settings.slideMove));
                        }
                    }
                }
            }
        };

        refresh.calSW = function () {
            if (settings.autoWidth === false) {
                slideWidth = (elSize - ((settings.item * (settings.slideMargin)) - settings.slideMargin)) / settings.item;
            }
        };

        refresh.calWidth = function (cln) {
            var ln = cln === true ? $slide.find('.lslide').length : $children.length;
            if (settings.autoWidth === false) {
                w = ln * (slideWidth + settings.slideMargin);
            } else {
                w = 0;
                for (var i = 0; i < ln; i++) {
                    w += (parseInt($children.eq(i).width()) + settings.slideMargin);
                }
            }
            return w;
        };
        plugin = {
            doCss: function () {
                var support = function () {
                    var transition = ['transition', 'MozTransition', 'WebkitTransition', 'OTransition', 'msTransition', 'KhtmlTransition'];
                    var root = document.documentElement;
                    for (var i = 0; i < transition.length; i++) {
                        if (transition[i] in root.style) {
                            return true;
                        }
                    }
                };
                if (settings.useCSS && support()) {
                    return true;
                }
                return false;
            },
            keyPress: function () {
                if (settings.keyPress) {
                    $(document).on('keyup.lightslider', function (e) {
                        if (!$(':focus').is('input, textarea')) {
                            if (e.preventDefault) {
                                e.preventDefault();
                            } else {
                                e.returnValue = false;
                            }
                            if (e.keyCode === 37) {
                                $el.goToPrevSlide();
                            } else if (e.keyCode === 39) {
                                $el.goToNextSlide();
                            }
                        }
                    });
                }
            },
            controls: function () {
                if (settings.controls) {
                    $el.parent().before('<div class="lSAction"><a class="lSPrev" role="button" tabindex=-1 aria-label="ir para página anterior">' + settings.prevHtml + '</a></div>');
                    $el.parent().after('<div class="lSAction"><a class="lSNext" role="button" tabindex=0 aria-label="ir para próxima página">' + settings.nextHtml + '</a></div>');
                    if (!settings.autoWidth) {
                        if (length <= settings.item) {
                            $slide.find('.lSAction').hide();
                        }
                    } else {
                        if (refresh.calWidth(false) < elSize) {
                            $slide.find('.lSAction').hide();
                        }
                    }
                    $slide.parent().find('.lSAction a').on('click', function (e) {
                        if (e.preventDefault) {
                            e.preventDefault();
                        } else {
                            e.returnValue = false;
                        }
                        if ($(this).attr('class') === 'lSPrev') {
                            $el.goToPrevSlide();
                        } else {
                            $el.goToNextSlide();
                        }
                        return false;
                    });
                }
            },
            initialStyle: function () {
                var $this = this;
                if (settings.mode === 'fade') {
                    settings.autoWidth = false;
                    settings.slideEndAnimation = false;
                }
                if (settings.auto) {
                    settings.slideEndAnimation = false;
                }
                if (settings.autoWidth) {
                    settings.slideMove = 1;
                    settings.item = 1;
                }
                if (settings.loop) {
                    settings.slideMove = 1;
                    settings.freeMove = false;
                }
                settings.onBeforeStart.call(this, $el);
                refresh.chbreakpoint();
                $el.addClass('lightSlider').wrap('<div class="lSSlideOuter ' + settings.addClass + '"><div class="lSSlideWrapper"></div></div>');
                $slide = $el.parent('.lSSlideWrapper');
                if (settings.rtl === true) {
                    $slide.parent().addClass('lSrtl');
                }
                if (settings.vertical) {
                    $slide.parent().addClass('vertical');
                    elSize = settings.verticalHeight;
                    $slide.css('height', elSize + 'px');
                } else {
                    elSize = $el.outerWidth();
                }
                $children.addClass('lslide');
                if (settings.loop === true && settings.mode === 'slide') {
                    refresh.calSW();
                    refresh.clone = function () {
                        if (refresh.calWidth(true) > elSize) {
                            /**/
                            var tWr = 0,
                                tI = 0;
                            for (var k = 0; k < $children.length; k++) {
                                tWr += (parseInt($el.find('.lslide').eq(k).width()) + settings.slideMargin);
                                tI++;
                                if (tWr >= (elSize + settings.slideMargin)) {
                                    break;
                                }
                            }
                            var tItem = settings.autoWidth === true ? tI : settings.item;

                            /**/
                            if (tItem < $el.find('.clone.left').length) {
                                for (var i = 0; i < $el.find('.clone.left').length - tItem; i++) {
                                    $children.eq(i).remove();
                                }
                            }
                            if (tItem < $el.find('.clone.right').length) {
                                for (var j = $children.length - 1; j > ($children.length - 1 - $el.find('.clone.right').length); j--) {
                                    scene--;
                                    $children.eq(j).remove();
                                }
                            }
                            /**/
                            for (var n = $el.find('.clone.right').length; n < tItem; n++) {
                                $el.find('.lslide').eq(n).clone().removeClass('lslide').addClass('clone right').appendTo($el);
                                scene++;
                            }
                            for (var m = $el.find('.lslide').length - $el.find('.clone.left').length; m > ($el.find('.lslide').length - tItem); m--) {
                                $el.find('.lslide').eq(m - 1).clone().removeClass('lslide').addClass('clone left').prependTo($el);
                            }
                            $children = $el.children();
                        } else {
                            if ($children.hasClass('clone')) {
                                $el.find('.clone').remove();
                                $this.move($el, 0);
                            }
                        }
                    };
                    refresh.clone();
                }
                refresh.sSW = function () {
                    length = $children.length;
                    if (settings.rtl === true && settings.vertical === false) {
                        gutter = 'margin-left';
                    }
                    if (settings.autoWidth === false) {
                        $children.css(property, slideWidth + 'px');
                    }
                    $children.css(gutter, settings.slideMargin + 'px');
                    w = refresh.calWidth(false);
                    $el.css(property, w + 'px');
                    if (settings.loop === true && settings.mode === 'slide') {
                        if (on === false) {
                            scene = $el.find('.clone.left').length;
                        }
                    }
                };
                refresh.calL = function () {
                    $children = $el.children();
                    length = $children.length;
                };
                if (this.doCss()) {
                    $slide.addClass('usingCss');
                }
                refresh.calL();
                if (settings.mode === 'slide') {
                    refresh.calSW();
                    refresh.sSW();
                    if (settings.loop === true) {
                        slideValue = $this.slideValue();
                        this.move($el, slideValue);
                    }
                    if (settings.vertical === false) {
                        this.setHeight($el, false);
                    }

                } else {
                    this.setHeight($el, true);
                    $el.addClass('lSFade');
                    if (!this.doCss()) {
                        $children.fadeOut(0);
                        $children.eq(scene).fadeIn(0);
                    }
                }
                if (settings.loop === true && settings.mode === 'slide') {
                    $children.eq(scene).addClass('active');
                } else {
                    $children.first().addClass('active');
                }
            },
            pager: function () {
                var $this = this;
                refresh.createPager = function () {
                    thumbWidth = (elSize - ((settings.thumbItem * (settings.thumbMargin)) - settings.thumbMargin)) / settings.thumbItem;
                    var $children = $slide.find('.lslide');
                    var length = $slide.find('.lslide').length;
                    var i = 0,
                        pagers = '',
                        v = 0;
                    for (i = 0; i < length; i++) {
                        if (settings.mode === 'slide') {
                            // calculate scene * slide value
                            if (!settings.autoWidth) {
                                v = i * ((slideWidth + settings.slideMargin) * settings.slideMove);
                            } else {
                                v += ((parseInt($children.eq(i).width()) + settings.slideMargin) * settings.slideMove);
                            }
                        }
                        var thumb = $children.eq(i * settings.slideMove).attr('data-thumb');
                        if (settings.gallery === true) {
                            pagers += '<li style="width:100%;' + property + ':' + thumbWidth + 'px;' + gutter + ':' + settings.thumbMargin + 'px"><a href="#"><img src="' + thumb + '" /></a></li>';
                        } else {
                            pagers += '<li><a href="javascript:slideCarousel('+parseInt(i)+')" role="button" data-index="' + (i + 1) + '" class="slick-count"  aria-label="Ir para página ' + (i + 1) + '"><div class="counter sl'+parseInt(i + 1)+'">' + (i + 1).toString().padStart(2, '0')  + '</div><div class="timeline"><span class="timeline-track"></span></div></a></li>';
                        }
                        if (settings.mode === 'slide') {
                            if ((v) >= w - elSize - settings.slideMargin) {
                                i = i + 1;
                                var minPgr = 2;
                                if (settings.autoWidth) {
                                    pagers += '<li><a href="#">' + (i + 1) + '</a></li>';
                                    minPgr = 1;
                                }
                                if (i < minPgr) {
                                    pagers = null;
                                    $slide.parent().addClass('noPager');
                                } else {
                                    $slide.parent().removeClass('noPager');
                                }
                                break;
                            }
                        }
                    }
                    var $cSouter = $slide.parent();
                    $cSouter.find('.lSPager').html(pagers); 
                    if (settings.gallery === true) {
                        if (settings.vertical === true) {
                            // set Gallery thumbnail width
                            $cSouter.find('.lSPager').css('width', settings.vThumbWidth + 'px');
                        }
                        pagerWidth = (i * (settings.thumbMargin + thumbWidth)) + 0.5;
                        $cSouter.find('.lSPager').css({
                            property: pagerWidth + 'px',
                            'transition-duration': settings.speed + 'ms'
                        });
                        if (settings.vertical === true) {
                            $slide.parent().css('padding-right', (settings.vThumbWidth + settings.galleryMargin) + 'px');
                        }
                        $cSouter.find('.lSPager').css(property, pagerWidth + 'px');
                    }
                    var $pager = $cSouter.find('.lSPager').find('li');
                    $pager.first().addClass('active');
                    $cSouter.find('.counter').on('click', function () {
                         
                        const list = $(this).parent().parent()[0]
                        if (settings.loop === true && settings.mode === 'slide') {
                            scene = scene + ($pager.index(list) - $cSouter.find('.lSPager').find('li.active').index());
                        } else {
                            scene = $pager.index(list);
                        }
                        $el.mode(false);
                        if (settings.gallery === true) {
                            $this.slideThumb();
                        }
                        return false;
                    });
                };
                if (settings.pager) {
                    var cl = 'lSpg';
                    if (settings.gallery) {
                        cl = 'lSGallery';
                    }
                    $slide.after('<ul class="lSPager ' + cl + '"></ul>');
                    var gMargin = (settings.vertical) ? 'margin-left' : 'margin-top';
                    $slide.parent().find('.lSPager').css(gMargin, settings.galleryMargin + 'px');
                    refresh.createPager();
                }

                setTimeout(function () {
                    refresh.init();
                }, 0);
            },
            setHeight: function (ob, fade) {
                var obj = null,
                    $this = this;
                if (settings.loop) {
                    obj = ob.children('.lslide ').first();
                } else {
                    obj = ob.children().first();
                }
                var setCss = function () {
                    var tH = obj.outerHeight(),
                        tP = 0,
                        tHT = tH;
                    if (fade) {
                        tH = 0;
                        tP = ((tHT) * 100) / elSize;
                    }
                    ob.css({
                        'height': tH + 'px',
                        'padding-bottom': tP + '%'
                    });
                };
                setCss();
                if (obj.find('img').length) {
                    if ( obj.find('img')[0].complete) {
                        setCss();
                        if (!interval) {
                            $this.auto();
                        }   
                    }else{
                        obj.find('img').on('load', function () {
                            setTimeout(function () {
                                setCss();
                                if (!interval) {
                                    $this.auto();
                                }
                            }, 100);
                        });
                    }
                }else{
                    if (!interval) {
                        $this.auto();
                    }
                }
            },
            active: function (ob, t) {
                if (this.doCss() && settings.mode === 'fade') {
                    $slide.addClass('on');
                }
                var sc = 0;
                if (scene * settings.slideMove < length) {
                    ob.removeClass('active');
                    if (!this.doCss() && settings.mode === 'fade' && t === false) {
                        ob.fadeOut(settings.speed);
                    }
                    if (t === true) {
                        sc = scene;
                    } else {
                        sc = scene * settings.slideMove;
                    }
                    //t === true ? sc = scene : sc = scene * settings.slideMove;
                    var l, nl;
                    if (t === true) {
                        l = ob.length;
                        nl = l - 1;
                        if (sc + 1 >= l) {
                            sc = nl;
                        }
                    }
                    if (settings.loop === true && settings.mode === 'slide') {
                        //t === true ? sc = scene - $el.find('.clone.left').length : sc = scene * settings.slideMove;
                        if (t === true) {
                            sc = scene - $el.find('.clone.left').length;
                        } else {
                            sc = scene * settings.slideMove;
                        }
                        if (t === true) {
                            l = ob.length;
                            nl = l - 1;
                            if (sc + 1 === l) {
                                sc = nl;
                            } else if (sc + 1 > l) {
                                sc = 0;
                            }
                        }
                    }

                    if (!this.doCss() && settings.mode === 'fade' && t === false) {
                        ob.eq(sc).fadeIn(settings.speed);
                    }
                    ob.eq(sc).addClass('active');
                } else {
                    ob.removeClass('active');
                    ob
                    ob.eq(ob.length - 1).addClass('active');
                    if (!this.doCss() && settings.mode === 'fade' && t === false) {
                        ob.fadeOut(settings.speed);
                        ob.eq(sc).fadeIn(settings.speed);
                    }
                }
            },
            move: function (ob, v) {
                if (settings.rtl === true) {
                    v = -v;
                }
                if (this.doCss()) {
                    if (settings.vertical === true) {
                        ob.css({
                            'transform': 'translate3d(0px, ' + (-v) + 'px, 0px)',
                            '-webkit-transform': 'translate3d(0px, ' + (-v) + 'px, 0px)'
                        });
                    } else {
                        ob.css({
                            'transform': 'translate3d(' + (-v) + 'px, 0px, 0px)',
                            '-webkit-transform': 'translate3d(' + (-v) + 'px, 0px, 0px)',
                        });
                    }
                } else {
                    if (settings.vertical === true) {
                        ob.css('position', 'relative').animate({
                            top: -v + 'px'
                        }, settings.speed, settings.easing);
                    } else {
                        ob.css('position', 'relative').animate({
                            left: -v + 'px'
                        }, settings.speed, settings.easing);
                    }
                }
                var $thumb = $slide.parent().find('.lSPager').find('li');
                this.active($thumb, true);
            },
            fade: function () {
                this.active($children, false);
                var $thumb = $slide.parent().find('.lSPager').find('li');
                this.active($thumb, true);
            },
            slide: function () {
                var $this = this;
                refresh.calSlide = function () {
                    if (w > elSize) {
                        slideValue = $this.slideValue();
                        $this.active($children, false);
                        if ((slideValue) > w - elSize - settings.slideMargin) {
                            slideValue = w - elSize - settings.slideMargin;
                        } else if (slideValue < 0) {
                            slideValue = 0;
                        }
                        $this.move($el, slideValue);
                        if (settings.loop === true && settings.mode === 'slide') {
                            if (scene >= (length - ($el.find('.clone.left').length / settings.slideMove))) {
                                $this.resetSlide($el.find('.clone.left').length);
                            }
                            if (scene === 0) {
                                $this.resetSlide($slide.find('.lslide').length);
                            }
                        }
                    }
                };
                refresh.calSlide();
            },
            resetSlide: function (s) {
                var $this = this;
                $slide.find('.lSAction a').addClass('disabled');
                setTimeout(function () {
                    scene = s;
                    $slide.css('transition-duration', '0ms');
                    slideValue = $this.slideValue();
                    $this.active($children, false);
                    plugin.move($el, slideValue);
                    setTimeout(function () {
                        $slide.css('transition-duration', settings.speed + 'ms');
                        $slide.find('.lSAction a').removeClass('disabled');
                    }, 50);
                }, settings.speed + 100);
            },
            slideValue: function () {
                var _sV = 0;
                if (settings.autoWidth === false) {
                    _sV = scene * ((slideWidth + settings.slideMargin) * settings.slideMove);
                } else {
                    _sV = 0;
                    for (var i = 0; i < scene; i++) {
                        _sV += (parseInt($children.eq(i).width()) + settings.slideMargin);
                    }
                }
                return _sV;
            },
            slideThumb: function () {
                var position;
                switch (settings.currentPagerPosition) {
                case 'left':
                    position = 0;
                    break;
                case 'middle':
                    position = (elSize / 2) - (thumbWidth / 2);
                    break;
                case 'right':
                    position = elSize - thumbWidth;
                }
                var sc = scene - $el.find('.clone.left').length;
                var $pager = $slide.parent().find('.lSPager');
                if (settings.mode === 'slide' && settings.loop === true) {
                    if (sc >= $pager.children().length) {
                        sc = 0;
                    } else if (sc < 0) {
                        sc = $pager.children().length;
                    }
                }
                var thumbSlide = sc * ((thumbWidth + settings.thumbMargin)) - (position);
                if ((thumbSlide + elSize) > pagerWidth) {
                    thumbSlide = pagerWidth - elSize - settings.thumbMargin;
                }
                if (thumbSlide < 0) {
                    thumbSlide = 0;
                }
                this.move($pager, thumbSlide);
            },
            auto: function () {
                if (settings.auto) {
                    clearInterval(interval);
                    interval = setInterval(function () {
                        $el.goToNextSlide();
                    }, settings.pause);
                }
            },
            pauseOnHover: function(){
                var $this = this;
                if (settings.auto && settings.pauseOnHover) {
                    $slide.on('mouseenter', function(){
                        $(this).addClass('ls-hover');
                        $el.pause();
                        settings.auto = true;
                    });
                    $slide.on('mouseleave',function(){
                        $(this).removeClass('ls-hover');
                        if (!$slide.find('.lightSlider').hasClass('lsGrabbing')) {
                            $this.auto();
                        }
                    });
                }
            },
            touchMove: function (endCoords, startCoords) {
                $slide.css('transition-duration', '0ms');
                if (settings.mode === 'slide') {
                    var distance = endCoords - startCoords;
                    var swipeVal = slideValue - distance;
                    if ((swipeVal) >= w - elSize - settings.slideMargin) {
                        if (settings.freeMove === false) {
                            swipeVal = w - elSize - settings.slideMargin;
                        } else {
                            var swipeValT = w - elSize - settings.slideMargin;
                            swipeVal = swipeValT + ((swipeVal - swipeValT) / 5);

                        }
                    } else if (swipeVal < 0) {
                        if (settings.freeMove === false) {
                            swipeVal = 0;
                        } else {
                            swipeVal = swipeVal / 5;
                        }
                    }
                    this.move($el, swipeVal);
                }
            },

            touchEnd: function (distance) {
                $slide.css('transition-duration', settings.speed + 'ms');
                if (settings.mode === 'slide') {
                    var mxVal = false;
                    var _next = true;
                    slideValue = slideValue - distance;
                    if ((slideValue) > w - elSize - settings.slideMargin) {
                        slideValue = w - elSize - settings.slideMargin;
                        if (settings.autoWidth === false) {
                            mxVal = true;
                        }
                    } else if (slideValue < 0) {
                        slideValue = 0;
                    }
                    var gC = function (next) {
                        var ad = 0;
                        if (!mxVal) {
                            if (next) {
                                ad = 1;
                            }
                        }
                        if (!settings.autoWidth) {
                            var num = slideValue / ((slideWidth + settings.slideMargin) * settings.slideMove);
                            scene = parseInt(num) + ad;
                            if (slideValue >= (w - elSize - settings.slideMargin)) {
                                if (num % 1 !== 0) {
                                    scene++;
                                }
                            }
                        } else {
                            var tW = 0;
                            for (var i = 0; i < $children.length; i++) {
                                tW += (parseInt($children.eq(i).width()) + settings.slideMargin);
                                scene = i + ad;
                                if (tW >= slideValue) {
                                    break;
                                }
                            }
                        }
                    };
                    if (distance >= settings.swipeThreshold) {
                        gC(false);
                        _next = false;
                    } else if (distance <= -settings.swipeThreshold) {
                        gC(true);
                        _next = false;
                    }
                    $el.mode(_next);
                    this.slideThumb();
                } else {
                    if (distance >= settings.swipeThreshold) {
                        $el.goToPrevSlide();
                    } else if (distance <= -settings.swipeThreshold) {
                        $el.goToNextSlide();
                    }
                }
            },



            enableDrag: function () {
                var $this = this;
                if (!isTouch) {
                    var startCoords = 0,
                        endCoords = 0,
                        isDraging = false;
                    $slide.find('.lightSlider').addClass('lsGrab');
                    $slide.on('mousedown', function (e) {
                        if (w < elSize) {
                            if (w !== 0) {
                                return false;
                            }
                        }
                        if ($(e.target).attr('class') !== ('lSPrev') && $(e.target).attr('class') !== ('lSNext')) {
                            startCoords = (settings.vertical === true) ? e.pageY : e.pageX;
                            isDraging = true;
                            if (e.preventDefault) {
                                e.preventDefault();
                            } else {
                                e.returnValue = false;
                            }
                            // ** Fix for webkit cursor issue https://code.google.com/p/chromium/issues/detail?id=26723
                            $slide.scrollLeft += 1;
                            $slide.scrollLeft -= 1;
                            // *
                            $slide.find('.lightSlider').removeClass('lsGrab').addClass('lsGrabbing');
                            clearInterval(interval);
                        }
                    });
                    $(window).on('mousemove', function (e) {
                        if (isDraging) {
                            endCoords = (settings.vertical === true) ? e.pageY : e.pageX;
                            $this.touchMove(endCoords, startCoords);
                        }
                    });
                    $(window).on('mouseup', function (e) {
                        if (isDraging) {
                            $slide.find('.lightSlider').removeClass('lsGrabbing').addClass('lsGrab');
                            isDraging = false;
                            endCoords = (settings.vertical === true) ? e.pageY : e.pageX;
                            var distance = endCoords - startCoords;
                            if (Math.abs(distance) >= settings.swipeThreshold) {
                                $(window).on('click.ls', function (e) {
                                    if (e.preventDefault) {
                                        e.preventDefault();
                                    } else {
                                        e.returnValue = false;
                                    }
                                    e.stopImmediatePropagation();
                                    e.stopPropagation();
                                    $(window).off('click.ls');
                                });
                            }

                            $this.touchEnd(distance);

                        }
                    });
                }
            },




            enableTouch: function () {
                var $this = this;
                if (isTouch) {
                    var startCoords = {},
                        endCoords = {};
                    $slide.on('touchstart', function (e) {
                        endCoords = e.originalEvent.targetTouches[0];
                        startCoords.pageX = e.originalEvent.targetTouches[0].pageX;
                        startCoords.pageY = e.originalEvent.targetTouches[0].pageY;
                        clearInterval(interval);
                    });
                    $slide.on('touchmove', function (e) {
                        if (w < elSize) {
                            if (w !== 0) {
                                return false;
                            }
                        }
                        var orig = e.originalEvent;
                        endCoords = orig.targetTouches[0];
                        var xMovement = Math.abs(endCoords.pageX - startCoords.pageX);
                        var yMovement = Math.abs(endCoords.pageY - startCoords.pageY);
                        if (settings.vertical === true) {
                            if ((yMovement * 3) > xMovement) {
                                e.preventDefault();
                            }
                            $this.touchMove(endCoords.pageY, startCoords.pageY);
                        } else {
                            if ((xMovement * 3) > yMovement) {
                                e.preventDefault();
                            }
                            $this.touchMove(endCoords.pageX, startCoords.pageX);
                        }

                    });
                    $slide.on('touchend', function () {
                        if (w < elSize) {
                            if (w !== 0) {
                                return false;
                            }
                        }
                        var distance;
                        if (settings.vertical === true) {
                            distance = endCoords.pageY - startCoords.pageY;
                        } else {
                            distance = endCoords.pageX - startCoords.pageX;
                        }
                        $this.touchEnd(distance);
                    });
                }
            },
            build: function () {
                var $this = this;
                $this.initialStyle();
                if (this.doCss()) {

                    if (settings.enableTouch === true) {
                        $this.enableTouch();
                    }
                    if (settings.enableDrag === true) {
                        $this.enableDrag();
                    }
                }

                $(window).on('focus', function(){
                    $this.auto();
                });
                
                $(window).on('blur', function(){
                    clearInterval(interval);
                });

                $this.pager();
                $this.pauseOnHover();
                $this.controls();
                $this.keyPress();
            }
        };
        plugin.build();
        refresh.init = function () {
            refresh.chbreakpoint();
            if (settings.vertical === true) {
                if (settings.item > 1) {
                    elSize = settings.verticalHeight;
                } else {
                    elSize = $children.outerHeight();
                }
                $slide.css('height', elSize + 'px');
            } else {
                elSize = $slide.outerWidth();
            }
            if (settings.loop === true && settings.mode === 'slide') {
                refresh.clone();
            }
            refresh.calL();
            if (settings.mode === 'slide') {
                $el.removeClass('lSSlide');
            }
            if (settings.mode === 'slide') {
                refresh.calSW();
                refresh.sSW();
            }
            setTimeout(function () {
                if (settings.mode === 'slide') {
                    $el.addClass('lSSlide');
                }
            }, 1000);
            if (settings.pager) {
                refresh.createPager();
            }
            if (settings.adaptiveHeight === true && settings.vertical === false) {
                $el.css('height', $children.eq(scene).outerHeight(true));
            }
            if (settings.adaptiveHeight === false) {
                if (settings.mode === 'slide') {
                    if (settings.vertical === false) {
                        plugin.setHeight($el, false);
                    }else{
                        plugin.auto();
                    }
                } else {
                    plugin.setHeight($el, true);
                }
            }
            if (settings.gallery === true) {
                plugin.slideThumb();
            }
            if (settings.mode === 'slide') {
                plugin.slide();
            }
            if (settings.autoWidth === false) {
                if ($children.length <= settings.item) {
                    $slide.find('.lSAction').hide();
                } else {
                    $slide.find('.lSAction').show();
                }
            } else {
                if ((refresh.calWidth(false) < elSize) && (w !== 0)) {
                    $slide.find('.lSAction').hide();
                } else {
                    $slide.find('.lSAction').show();
                }
            }
        };
        $el.goToPrevSlide = function () {
            if (scene > 0) {
                settings.onBeforePrevSlide.call(this, $el, scene);
                scene--;
                $el.mode(false);
                if (settings.gallery === true) {
                    plugin.slideThumb();
                }
            } else {
                if (settings.loop === true) {
                    settings.onBeforePrevSlide.call(this, $el, scene);
                    if (settings.mode === 'fade') {
                        var l = (length - 1);
                        scene = parseInt(l / settings.slideMove);
                    }
                    $el.mode(false);
                    if (settings.gallery === true) {
                        plugin.slideThumb();
                    }
                } else if (settings.slideEndAnimation === true) {
                    $el.addClass('leftEnd');
                    setTimeout(function () {
                        $el.removeClass('leftEnd');
                    }, 400);
                }
            }
        };
        $el.goToNextSlide = function () {
            var nextI = true;
            if (settings.mode === 'slide') {
                var _slideValue = plugin.slideValue();
                nextI = _slideValue < w - elSize - settings.slideMargin;
            }
            if (((scene * settings.slideMove) < length - settings.slideMove) && nextI) {
                settings.onBeforeNextSlide.call(this, $el, scene);
                scene++;
                $el.mode(false);
                if (settings.gallery === true) {
                    plugin.slideThumb();
                }
            } else {
                if (settings.loop === true) {
                    settings.onBeforeNextSlide.call(this, $el, scene);
                    scene = 0;
                    $el.mode(false);
                    if (settings.gallery === true) {
                        plugin.slideThumb();
                    }
                } else if (settings.slideEndAnimation === true) {
                    $el.addClass('rightEnd');
                    setTimeout(function () {
                        $el.removeClass('rightEnd');
                    }, 400);
                }
            }
        };
        $el.mode = function (_touch) {
            if (settings.adaptiveHeight === true && settings.vertical === false) {
                $el.css('height', $children.eq(scene).outerHeight(true));
            }
            if (on === false) {
                if (settings.mode === 'slide') {
                    if (plugin.doCss()) {
                        $el.addClass('lSSlide');
                        if (settings.speed !== '') {
                            $slide.css('transition-duration', settings.speed + 'ms');
                        }
                        if (settings.cssEasing !== '') {
                            $slide.css('transition-timing-function', settings.cssEasing);
                        }
                    }
                } else {
                    if (plugin.doCss()) {
                        if (settings.speed !== '') {
                            $el.css('transition-duration', settings.speed + 'ms');
                        }
                        if (settings.cssEasing !== '') {
                            $el.css('transition-timing-function', settings.cssEasing);
                        }
                    }
                }
            }
            if (!_touch) {
                settings.onBeforeSlide.call(this, $el, scene);
            }
            if (settings.mode === 'slide') {
                plugin.slide();
            } else {
                plugin.fade();
            }
            if (!$slide.hasClass('ls-hover')) {
                plugin.auto();
            }
            setTimeout(function () {
                if (!_touch) {
                    settings.onAfterSlide.call(this, $el, scene);
                }
            }, settings.speed);
            on = true;
        };
        $el.play = function () {
            $el.goToNextSlide();
            settings.auto = true;
            plugin.auto();
        };
        $el.pause = function () {
            settings.auto = false;
            clearInterval(interval);
        };
        $el.refresh = function () {
            refresh.init();
        };
        $el.getCurrentSlideCount = function () {
            var sc = scene;
            if (settings.loop) {
                var ln = $slide.find('.lslide').length,
                    cl = $el.find('.clone.left').length;
                if (scene <= cl - 1) {
                    sc = ln + (scene - cl);
                } else if (scene >= (ln + cl)) {
                    sc = scene - ln - cl;
                } else {
                    sc = scene - cl;
                }
            }
            return sc + 1;
        }; 
        $el.getTotalSlideCount = function () {
            return $slide.find('.lslide').length;
        };
        $el.goToSlide = function (s) {
            if (settings.loop) {
                scene = (s + $el.find('.clone.left').length - 1);
            } else {
                scene = s;
            }
            $el.mode(false);
            if (settings.gallery === true) {
                plugin.slideThumb();
            }
        };
        $el.destroy = function () {
            if ($el.lightSlider) {
                $el.goToPrevSlide = function(){};
                $el.goToNextSlide = function(){};
                $el.mode = function(){};
                $el.play = function(){};
                $el.pause = function(){};
                $el.refresh = function(){};
                $el.getCurrentSlideCount = function(){};
                $el.getTotalSlideCount = function(){};
                $el.goToSlide = function(){}; 
                $el.lightSlider = null;
                refresh = {
                    init : function(){}
                };
                $el.parent().parent().find('.lSAction, .lSPager').remove();
                $el.removeClass('lightSlider lSFade lSSlide lsGrab lsGrabbing leftEnd right').removeAttr('style').unwrap().unwrap();
                $el.children().removeAttr('style');
                $children.removeClass('lslide active');
                $el.find('.clone').remove();
                $children = null;
                interval = null;
                on = false;
                scene = 0;
            }

        };
        setTimeout(function () {
            settings.onSliderLoad.call(this, $el);
        }, 10);
        $(window).on('resize orientationchange', function (e) {
            setTimeout(function () {
                if (e.preventDefault) {
                    e.preventDefault();
                } else {
                    e.returnValue = false;
                }
                refresh.init();
            }, 200);
        });
        return this;
    };
}(jQuery));

/*! jQuery & Zepto Lazy v1.7.10 - http://jquery.eisbehr.de/lazy - MIT&GPL-2.0 license - Copyright 2012-2018 Daniel 'Eisbehr' Kern */
!function(t,e){"use strict";function r(r,a,i,u,l){function f(){L=t.devicePixelRatio>1,i=c(i),a.delay>=0&&setTimeout(function(){s(!0)},a.delay),(a.delay<0||a.combined)&&(u.e=v(a.throttle,function(t){"resize"===t.type&&(w=B=-1),s(t.all)}),u.a=function(t){t=c(t),i.push.apply(i,t)},u.g=function(){return i=n(i).filter(function(){return!n(this).data(a.loadedName)})},u.f=function(t){for(var e=0;e<t.length;e++){var r=i.filter(function(){return this===t[e]});r.length&&s(!1,r)}},s(),n(a.appendScroll).on("scroll."+l+" resize."+l,u.e))}function c(t){var i=a.defaultImage,o=a.placeholder,u=a.imageBase,l=a.srcsetAttribute,f=a.loaderAttribute,c=a._f||{};t=n(t).filter(function(){var t=n(this),r=m(this);return!t.data(a.handledName)&&(t.attr(a.attribute)||t.attr(l)||t.attr(f)||c[r]!==e)}).data("plugin_"+a.name,r);for(var s=0,d=t.length;s<d;s++){var A=n(t[s]),g=m(t[s]),h=A.attr(a.imageBaseAttribute)||u;g===N&&h&&A.attr(l)&&A.attr(l,b(A.attr(l),h)),c[g]===e||A.attr(f)||A.attr(f,c[g]),g===N&&i&&!A.attr(E)?A.attr(E,i):g===N||!o||A.css(O)&&"none"!==A.css(O)||A.css(O,"url('"+o+"')")}return t}function s(t,e){if(!i.length)return void(a.autoDestroy&&r.destroy());for(var o=e||i,u=!1,l=a.imageBase||"",f=a.srcsetAttribute,c=a.handledName,s=0;s<o.length;s++)if(t||e||A(o[s])){var g=n(o[s]),h=m(o[s]),b=g.attr(a.attribute),v=g.attr(a.imageBaseAttribute)||l,p=g.attr(a.loaderAttribute);g.data(c)||a.visibleOnly&&!g.is(":visible")||!((b||g.attr(f))&&(h===N&&(v+b!==g.attr(E)||g.attr(f)!==g.attr(F))||h!==N&&v+b!==g.css(O))||p)||(u=!0,g.data(c,!0),d(g,h,v,p))}u&&(i=n(i).filter(function(){return!n(this).data(c)}))}function d(t,e,r,i){++z;var o=function(){y("onError",t),p(),o=n.noop};y("beforeLoad",t);var u=a.attribute,l=a.srcsetAttribute,f=a.sizesAttribute,c=a.retinaAttribute,s=a.removeAttribute,d=a.loadedName,A=t.attr(c);if(i){var g=function(){s&&t.removeAttr(a.loaderAttribute),t.data(d,!0),y(T,t),setTimeout(p,1),g=n.noop};t.off(I).one(I,o).one(D,g),y(i,t,function(e){e?(t.off(D),g()):(t.off(I),o())})||t.trigger(I)}else{var h=n(new Image);h.one(I,o).one(D,function(){t.hide(),e===N?t.attr(C,h.attr(C)).attr(F,h.attr(F)).attr(E,h.attr(E)):t.css(O,"url('"+h.attr(E)+"')"),t[a.effect](a.effectTime),s&&(t.removeAttr(u+" "+l+" "+c+" "+a.imageBaseAttribute),f!==C&&t.removeAttr(f)),t.data(d,!0),y(T,t),h.remove(),p()});var m=(L&&A?A:t.attr(u))||"";h.attr(C,t.attr(f)).attr(F,t.attr(l)).attr(E,m?r+m:null),h.complete&&h.trigger(D)}}function A(t){var e=t.getBoundingClientRect(),r=a.scrollDirection,n=a.threshold,i=h()+n>e.top&&-n<e.bottom,o=g()+n>e.left&&-n<e.right;return"vertical"===r?i:"horizontal"===r?o:i&&o}function g(){return w>=0?w:w=n(t).width()}function h(){return B>=0?B:B=n(t).height()}function m(t){return t.tagName.toLowerCase()}function b(t,e){if(e){var r=t.split(",");t="";for(var a=0,n=r.length;a<n;a++)t+=e+r[a].trim()+(a!==n-1?",":"")}return t}function v(t,e){var n,i=0;return function(o,u){function l(){i=+new Date,e.call(r,o)}var f=+new Date-i;n&&clearTimeout(n),f>t||!a.enableThrottle||u?l():n=setTimeout(l,t-f)}}function p(){--z,i.length||z||y("onFinishedAll")}function y(t,e,n){return!!(t=a[t])&&(t.apply(r,[].slice.call(arguments,1)),!0)}var z=0,w=-1,B=-1,L=!1,T="afterLoad",D="load",I="error",N="img",E="src",F="srcset",C="sizes",O="background-image";"event"===a.bind||o?f():n(t).on(D+"."+l,f)}function a(a,o){var u=this,l=n.extend({},u.config,o),f={},c=l.name+"-"+ ++i;return u.config=function(t,r){return r===e?l[t]:(l[t]=r,u)},u.addItems=function(t){return f.a&&f.a("string"===n.type(t)?n(t):t),u},u.getItems=function(){return f.g?f.g():{}},u.update=function(t){return f.e&&f.e({},!t),u},u.force=function(t){return f.f&&f.f("string"===n.type(t)?n(t):t),u},u.loadAll=function(){return f.e&&f.e({all:!0},!0),u},u.destroy=function(){return n(l.appendScroll).off("."+c,f.e),n(t).off("."+c),f={},e},r(u,l,a,f,c),l.chainable?a:u}var n=t.jQuery||t.Zepto,i=0,o=!1;n.fn.Lazy=n.fn.lazy=function(t){return new a(this,t)},n.Lazy=n.lazy=function(t,r,i){if(n.isFunction(r)&&(i=r,r=[]),n.isFunction(i)){t=n.isArray(t)?t:[t],r=n.isArray(r)?r:[r];for(var o=a.prototype.config,u=o._f||(o._f={}),l=0,f=t.length;l<f;l++)(o[t[l]]===e||n.isFunction(o[t[l]]))&&(o[t[l]]=i);for(var c=0,s=r.length;c<s;c++)u[r[c]]=t[0]}},a.prototype.config={name:"lazy",chainable:!0,autoDestroy:!0,bind:"load",threshold:500,visibleOnly:!1,appendScroll:t,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",srcsetAttribute:"data-srcset",sizesAttribute:"data-sizes",retinaAttribute:"data-retina",loaderAttribute:"data-loader",imageBaseAttribute:"data-imagebase",removeAttribute:!0,handledName:"handled",loadedName:"loaded",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,beforeLoad:e,afterLoad:e,onError:e,onFinishedAll:e},n(t).on("load",function(){o=!0})}(window);
/*
* jQuery Mobile v1.5.0-alpha.1
* http://jquerymobile.com
*
* Copyright jQuery Foundation, Inc. and other contributors
* Released under the MIT license.
* http://jquery.org/license
*
*/

(function ( root, doc, factory ) {
	if ( typeof define === "function" && define.amd ) {
		// AMD. Register as an anonymous module.
		define( [ "jquery" ], function ( $ ) {
			factory( $, root, doc );
			return $.mobile;
		});
	} else {
		// Browser globals
		factory( root.jQuery, root, doc );
	}
}( this, document, function ( jQuery, window, document, undefined ) {/*!
 * jQuery Mobile Virtual Mouse @VERSION
 * http://jquerymobile.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

//>>label: Virtual Mouse (vmouse) Bindings
//>>group: Core
//>>description: Normalizes touch/mouse events.
//>>docs: http://api.jquerymobile.com/?s=vmouse

// This plugin is an experiment for abstracting away the touch and mouse
// events so that developers don't have to worry about which method of input
// the device their document is loaded on supports.
//
// The idea here is to allow the developer to register listeners for the
// basic mouse events, such as mousedown, mousemove, mouseup, and click,
// and the plugin will take care of registering the correct listeners
// behind the scenes to invoke the listener at the fastest possible time
// for that device, while still retaining the order of event firing in
// the traditional mouse environment, should multiple handlers be registered
// on the same element for different events.
//
// The current version exposes the following virtual events to jQuery bind methods:
// "vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel"

( function( factory ) {
	if ( typeof define === "function" && define.amd ) {

		// AMD. Register as an anonymous module.
		define( 'vmouse',[ "jquery" ], factory );
	} else {

		// Browser globals
		factory( jQuery );
	}
} )( function( $ ) {

var dataPropertyName = "virtualMouseBindings",
	touchTargetPropertyName = "virtualTouchID",
	touchEventProps = "clientX clientY pageX pageY screenX screenY".split( " " ),
	virtualEventNames = "vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split( " " ),
	generalProps = ( "altKey bubbles cancelable ctrlKey currentTarget detail eventPhase " +
		"metaKey relatedTarget shiftKey target timeStamp view which" ).split( " " ),
	mouseHookProps = $.event.mouseHooks ? $.event.mouseHooks.props : [],
	mouseEventProps = generalProps.concat( mouseHookProps ),
	activeDocHandlers = {},
	resetTimerID = 0,
	startX = 0,
	startY = 0,
	didScroll = false,
	clickBlockList = [],
	blockMouseTriggers = false,
	blockTouchTriggers = false,
	eventCaptureSupported = "addEventListener" in document,
	$document = $( document ),
	nextTouchID = 1,
	lastTouchID = 0, threshold,
	i;

$.vmouse = {
	moveDistanceThreshold: 10,
	clickDistanceThreshold: 10,
	resetTimerDuration: 1500,
	maximumTimeBetweenTouches: 100
};

function getNativeEvent( event ) {

	while ( event && typeof event.originalEvent !== "undefined" ) {
		event = event.originalEvent;
	}
	return event;
}

function createVirtualEvent( event, eventType ) {

	var t = event.type,
		oe, props, ne, prop, ct, touch, i, j, len;

	event = $.Event( event );
	event.type = eventType;

	oe = event.originalEvent;
	props = generalProps;

	// addresses separation of $.event.props in to $.event.mouseHook.props and Issue 3280
	// https://github.com/jquery/jquery-mobile/issues/3280
	if ( t.search( /^(mouse|click)/ ) > -1 ) {
		props = mouseEventProps;
	}

	// copy original event properties over to the new event
	// this would happen if we could call $.event.fix instead of $.Event
	// but we don't have a way to force an event to be fixed multiple times
	if ( oe ) {
		for ( i = props.length; i; ) {
			prop = props[ --i ];
			event[ prop ] = oe[ prop ];
		}
	}

	// make sure that if the mouse and click virtual events are generated
	// without a .which one is defined
	if ( t.search( /mouse(down|up)|click/ ) > -1 && !event.which ) {
		event.which = 1;
	}

	if ( t.search( /^touch/ ) !== -1 ) {
		ne = getNativeEvent( oe );
		t = ne.touches;
		ct = ne.changedTouches;
		touch = ( t && t.length ) ? t[ 0 ] : ( ( ct && ct.length ) ? ct[ 0 ] : undefined );

		if ( touch ) {
			for ( j = 0, len = touchEventProps.length; j < len; j++ ) {
				prop = touchEventProps[ j ];
				event[ prop ] = touch[ prop ];
			}
		}
	}

	return event;
}

function getVirtualBindingFlags( element ) {

	var flags = {},
		b, k;

	while ( element ) {

		b = $.data( element, dataPropertyName );

		for ( k in b ) {
			if ( b[ k ] ) {
				flags[ k ] = flags.hasVirtualBinding = true;
			}
		}
		element = element.parentNode;
	}
	return flags;
}

function getClosestElementWithVirtualBinding( element, eventType ) {
	var b;
	while ( element ) {

		b = $.data( element, dataPropertyName );

		if ( b && ( !eventType || b[ eventType ] ) ) {
			return element;
		}
		element = element.parentNode;
	}
	return null;
}

function enableTouchBindings() {
	blockTouchTriggers = false;
}

function disableTouchBindings() {
	blockTouchTriggers = true;
}

function enableMouseBindings() {
	lastTouchID = 0;
	clickBlockList.length = 0;
	blockMouseTriggers = false;

	// When mouse bindings are enabled, our
	// touch bindings are disabled.
	disableTouchBindings();
}

function disableMouseBindings() {
	// When mouse bindings are disabled, our
	// touch bindings are enabled.
	enableTouchBindings();
}

function clearResetTimer() {
	if ( resetTimerID ) {
		clearTimeout( resetTimerID );
		resetTimerID = 0;
	}
}

function startResetTimer() {
	clearResetTimer();
	resetTimerID = setTimeout( function() {
		resetTimerID = 0;
		enableMouseBindings();
	}, $.vmouse.resetTimerDuration );
}

function triggerVirtualEvent( eventType, event, flags ) {
	var ve;

	if ( ( flags && flags[ eventType ] ) ||
			( !flags && getClosestElementWithVirtualBinding( event.target, eventType ) ) ) {

		ve = createVirtualEvent( event, eventType );

		$( event.target ).trigger( ve );
	}

	return ve;
}

function mouseEventCallback( event ) {
	var touchID = $.data( event.target, touchTargetPropertyName ),
		ve;

	// It is unexpected if a click event is received before a touchend
	// or touchmove event, however this is a known behavior in Mobile
	// Safari when Mobile VoiceOver (as of iOS 8) is enabled and the user
	// double taps to activate a link element. In these cases if a touch
	// event is not received within the maximum time between touches,
	// re-enable mouse bindings and call the mouse event handler again.
	if ( event.type === "click" && $.data( event.target, "lastTouchType" ) === "touchstart" ) {
		setTimeout( function() {
			if ( $.data( event.target, "lastTouchType" ) === "touchstart" ) {
				enableMouseBindings();
				delete $.data( event.target ).lastTouchType;
				mouseEventCallback( event );
			}
		}, $.vmouse.maximumTimeBetweenTouches );
	}

	if ( !blockMouseTriggers && ( !lastTouchID || lastTouchID !== touchID ) ) {
		ve = triggerVirtualEvent( "v" + event.type, event );
		if ( ve ) {
			if ( ve.isDefaultPrevented() ) {
				event.preventDefault();
			}
			if ( ve.isPropagationStopped() ) {
				event.stopPropagation();
			}
			if ( ve.isImmediatePropagationStopped() ) {
				event.stopImmediatePropagation();
			}
		}
	}
}

function handleTouchStart( event ) {

	var touches = getNativeEvent( event ).touches,
		target, flags, t;

	if ( touches && touches.length === 1 ) {

		target = event.target;
		flags = getVirtualBindingFlags( target );

		$.data( event.target, "lastTouchType", event.type );

		if ( flags.hasVirtualBinding ) {

			lastTouchID = nextTouchID++;
			$.data( target, touchTargetPropertyName, lastTouchID );

			clearResetTimer();

			disableMouseBindings();
			didScroll = false;

			t = getNativeEvent( event ).touches[ 0 ];
			startX = t.pageX;
			startY = t.pageY;

			triggerVirtualEvent( "vmouseover", event, flags );
			triggerVirtualEvent( "vmousedown", event, flags );
		}
	}
}

function handleScroll( event ) {
	if ( blockTouchTriggers ) {
		return;
	}

	if ( !didScroll ) {
		triggerVirtualEvent( "vmousecancel", event, getVirtualBindingFlags( event.target ) );
	}

	$.data( event.target, "lastTouchType", event.type );

	didScroll = true;
	startResetTimer();
}

function handleTouchMove( event ) {
	if ( blockTouchTriggers ) {
		return;
	}

	var t = getNativeEvent( event ).touches[ 0 ],
		didCancel = didScroll,
		moveThreshold = $.vmouse.moveDistanceThreshold,
		flags = getVirtualBindingFlags( event.target );

	$.data( event.target, "lastTouchType", event.type );

	didScroll = didScroll ||
		( Math.abs( t.pageX - startX ) > moveThreshold ||
		Math.abs( t.pageY - startY ) > moveThreshold );

	if ( didScroll && !didCancel ) {
		triggerVirtualEvent( "vmousecancel", event, flags );
	}

	triggerVirtualEvent( "vmousemove", event, flags );
	startResetTimer();
}

function handleTouchEnd( event ) {
	if ( blockTouchTriggers || $.data( event.target, "lastTouchType" ) === undefined ) {
		return;
	}

	disableTouchBindings();
	delete $.data( event.target ).lastTouchType;

	var flags = getVirtualBindingFlags( event.target ),
		ve, t;
	triggerVirtualEvent( "vmouseup", event, flags );

	if ( !didScroll ) {
		ve = triggerVirtualEvent( "vclick", event, flags );
		if ( ve && ve.isDefaultPrevented() ) {
			// The target of the mouse events that follow the touchend
			// event don't necessarily match the target used during the
			// touch. This means we need to rely on coordinates for blocking
			// any click that is generated.
			t = getNativeEvent( event ).changedTouches[ 0 ];
			clickBlockList.push( {
				touchID: lastTouchID,
				x: t.clientX,
				y: t.clientY
			} );

			// Prevent any mouse events that follow from triggering
			// virtual event notifications.
			blockMouseTriggers = true;
		}
	}
	triggerVirtualEvent( "vmouseout", event, flags );
	didScroll = false;

	startResetTimer();
}

function hasVirtualBindings( ele ) {
	var bindings = $.data( ele, dataPropertyName ),
		k;

	if ( bindings ) {
		for ( k in bindings ) {
			if ( bindings[ k ] ) {
				return true;
			}
		}
	}
	return false;
}

function dummyMouseHandler() {
}

function getSpecialEventObject( eventType ) {
	var realType = eventType.substr( 1 );

	return {
		setup: function( /* data, namespace */ ) {
			// If this is the first virtual mouse binding for this element,
			// add a bindings object to its data.

			if ( !hasVirtualBindings( this ) ) {
				$.data( this, dataPropertyName, {} );
			}

			// If setup is called, we know it is the first binding for this
			// eventType, so initialize the count for the eventType to zero.
			var bindings = $.data( this, dataPropertyName );
			bindings[ eventType ] = true;

			// If this is the first virtual mouse event for this type,
			// register a global handler on the document.

			activeDocHandlers[ eventType ] = ( activeDocHandlers[ eventType ] || 0 ) + 1;

			if ( activeDocHandlers[ eventType ] === 1 ) {
				$document.bind( realType, mouseEventCallback );
			}

			// Some browsers, like Opera Mini, won't dispatch mouse/click events
			// for elements unless they actually have handlers registered on them.
			// To get around this, we register dummy handlers on the elements.

			$( this ).bind( realType, dummyMouseHandler );

			// For now, if event capture is not supported, we rely on mouse handlers.
			if ( eventCaptureSupported ) {
				// If this is the first virtual mouse binding for the document,
				// register our touchstart handler on the document.

				activeDocHandlers[ "touchstart" ] = ( activeDocHandlers[ "touchstart" ] || 0 ) + 1;

				if ( activeDocHandlers[ "touchstart" ] === 1 ) {
					$document.bind( "touchstart", handleTouchStart )
						.bind( "touchend", handleTouchEnd )

						// On touch platforms, touching the screen and then dragging your finger
						// causes the window content to scroll after some distance threshold is
						// exceeded. On these platforms, a scroll prevents a click event from being
						// dispatched, and on some platforms, even the touchend is suppressed. To
						// mimic the suppression of the click event, we need to watch for a scroll
						// event. Unfortunately, some platforms like iOS don't dispatch scroll
						// events until *AFTER* the user lifts their finger (touchend). This means
						// we need to watch both scroll and touchmove events to figure out whether
						// or not a scroll happenens before the touchend event is fired.

						.bind( "touchmove", handleTouchMove )
						.bind( "scroll", handleScroll );
				}
			}
		},

		teardown: function( /* data, namespace */ ) {
			// If this is the last virtual binding for this eventType,
			// remove its global handler from the document.

			--activeDocHandlers[eventType];

			if ( !activeDocHandlers[ eventType ] ) {
				$document.unbind( realType, mouseEventCallback );
			}

			if ( eventCaptureSupported ) {
				// If this is the last virtual mouse binding in existence,
				// remove our document touchstart listener.

				--activeDocHandlers["touchstart"];

				if ( !activeDocHandlers[ "touchstart" ] ) {
					$document.unbind( "touchstart", handleTouchStart )
						.unbind( "touchmove", handleTouchMove )
						.unbind( "touchend", handleTouchEnd )
						.unbind( "scroll", handleScroll );
				}
			}

			var $this = $( this ),
				bindings = $.data( this, dataPropertyName );

			// teardown may be called when an element was
			// removed from the DOM. If this is the case,
			// jQuery core may have already stripped the element
			// of any data bindings so we need to check it before
			// using it.
			if ( bindings ) {
				bindings[ eventType ] = false;
			}

			// Unregister the dummy event handler.

			$this.unbind( realType, dummyMouseHandler );

			// If this is the last virtual mouse binding on the
			// element, remove the binding data from the element.

			if ( !hasVirtualBindings( this ) ) {
				$this.removeData( dataPropertyName );
			}
		}
	};
}

// Expose our custom events to the jQuery bind/unbind mechanism.

for ( i = 0; i < virtualEventNames.length; i++ ) {
	$.event.special[ virtualEventNames[ i ] ] = getSpecialEventObject( virtualEventNames[ i ] );
}

// Add a capture click handler to block clicks.
// Note that we require event capture support for this so if the device
// doesn't support it, we punt for now and rely solely on mouse events.
if ( eventCaptureSupported ) {
	document.addEventListener( "click", function( e ) {
		var cnt = clickBlockList.length,
			target = e.target,
			x, y, ele, i, o, touchID;

		if ( cnt ) {
			x = e.clientX;
			y = e.clientY;
			threshold = $.vmouse.clickDistanceThreshold;

			// The idea here is to run through the clickBlockList to see if
			// the current click event is in the proximity of one of our
			// vclick events that had preventDefault() called on it. If we find
			// one, then we block the click.
			//
			// Why do we have to rely on proximity?
			//
			// Because the target of the touch event that triggered the vclick
			// can be different from the target of the click event synthesized
			// by the browser. The target of a mouse/click event that is synthesized
			// from a touch event seems to be implementation specific. For example,
			// some browsers will fire mouse/click events for a link that is near
			// a touch event, even though the target of the touchstart/touchend event
			// says the user touched outside the link. Also, it seems that with most
			// browsers, the target of the mouse/click event is not calculated until the
			// time it is dispatched, so if you replace an element that you touched
			// with another element, the target of the mouse/click will be the new
			// element underneath that point.
			//
			// Aside from proximity, we also check to see if the target and any
			// of its ancestors were the ones that blocked a click. This is necessary
			// because of the strange mouse/click target calculation done in the
			// Android 2.1 browser, where if you click on an element, and there is a
			// mouse/click handler on one of its ancestors, the target will be the
			// innermost child of the touched element, even if that child is no where
			// near the point of touch.

			ele = target;

			while ( ele ) {
				for ( i = 0; i < cnt; i++ ) {
					o = clickBlockList[ i ];
					touchID = 0;

					if ( ( ele === target && Math.abs( o.x - x ) < threshold && Math.abs( o.y - y ) < threshold ) ||
							$.data( ele, touchTargetPropertyName ) === o.touchID ) {
						// XXX: We may want to consider removing matches from the block list
						//      instead of waiting for the reset timer to fire.
						e.preventDefault();
						e.stopPropagation();
						return;
					}
				}
				ele = ele.parentNode;
			}
		}
	}, true );
}
} );

/*!
 * jQuery Mobile Namespace @VERSION
 * http://jquerymobile.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

//>>label: Namespace
//>>group: Core
//>>description: The mobile namespace on the jQuery object

( function( factory ) {
	if ( typeof define === "function" && define.amd ) {

		// AMD. Register as an anonymous module.
		define( 'ns',[ "jquery" ], factory );
	} else {

		// Browser globals
		factory( jQuery );
	}
} )( function( $ ) {

$.mobile = { version: "@VERSION" };

return $.mobile;
} );

/*!
 * jQuery Mobile Touch Support Test @VERSION
 * http://jquerymobile.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

//>>label: Touch support test
//>>group: Core
//>>description: Touch feature test

( function( factory ) {
	if ( typeof define === "function" && define.amd ) {

		// AMD. Register as an anonymous module.
		define( 'support/touch',[
			"jquery",
			"../ns" ], factory );
	} else {

		// Browser globals
		factory( jQuery );
	}
} )( function( $ ) {

var support = {
	touch: "ontouchend" in document
};

$.mobile.support = $.mobile.support || {};
$.extend( $.support, support );
$.extend( $.mobile.support, support );

return $.support;
} );

/*!
 * jQuery Mobile Touch Events @VERSION
 * http://jquerymobile.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

//>>label: Touch
//>>group: Events
//>>description: Touch events including: touchstart, touchmove, touchend, tap, taphold, swipe, swipeleft, swiperight

( function( factory ) {
	if ( typeof define === "function" && define.amd ) {

		// AMD. Register as an anonymous module.
		define( 'events/touch',[
			"jquery",
			"../vmouse",
			"../support/touch" ], factory );
	} else {

		// Browser globals
		factory( jQuery );
	}
} )( function( $ ) {
var $document = $( document ),
	supportTouch = $.mobile.support.touch,
	touchStartEvent = supportTouch ? "touchstart" : "mousedown",
	touchStopEvent = supportTouch ? "touchend" : "mouseup",
	touchMoveEvent = supportTouch ? "touchmove" : "mousemove";

// setup new event shortcuts
$.each( ( "touchstart touchmove touchend " +
"tap taphold " +
"swipe swipeleft swiperight" ).split( " " ), function( i, name ) {

	$.fn[ name ] = function( fn ) {
		return fn ? this.bind( name, fn ) : this.trigger( name );
	};

	// jQuery < 1.8
	if ( $.attrFn ) {
		$.attrFn[ name ] = true;
	}
} );

function triggerCustomEvent( obj, eventType, event, bubble ) {
	var originalType = event.type;
	event.type = eventType;
	if ( bubble ) {
		$.event.trigger( event, undefined, obj );
	} else {
		$.event.dispatch.call( obj, event );
	}
	event.type = originalType;
}

// also handles taphold
$.event.special.tap = {
	tapholdThreshold: 750,
	emitTapOnTaphold: true,
	setup: function() {
		var thisObject = this,
			$this = $( thisObject ),
			isTaphold = false;

		$this.bind( "vmousedown", function( event ) {
			isTaphold = false;
			if ( event.which && event.which !== 1 ) {
				return true;
			}

			var origTarget = event.target,
				timer, clickHandler;

			function clearTapTimer() {
				if ( timer ) {
					$this.bind( "vclick", clickHandler );
					clearTimeout( timer );
				}
			}

			function clearTapHandlers() {
				clearTapTimer();

				$this.unbind( "vclick", clickHandler )
					.unbind( "vmouseup", clearTapTimer );
				$document.unbind( "vmousecancel", clearTapHandlers );
			}

			clickHandler = function( event ) {
				clearTapHandlers();

				// ONLY trigger a 'tap' event if the start target is
				// the same as the stop target.
				if ( !isTaphold && origTarget === event.target ) {
					triggerCustomEvent( thisObject, "tap", event );
				} else if ( isTaphold ) {
					event.preventDefault();
				}
			};

			$this.bind( "vmouseup", clearTapTimer );

			$document.bind( "vmousecancel", clearTapHandlers );

			timer = setTimeout( function() {
				if ( !$.event.special.tap.emitTapOnTaphold ) {
					isTaphold = true;
				}
				timer = 0;
				triggerCustomEvent( thisObject, "taphold", $.Event( "taphold", { target: origTarget } ) );
			}, $.event.special.tap.tapholdThreshold );
		} );
	},
	teardown: function() {
		$( this ).unbind( "vmousedown" ).unbind( "vclick" ).unbind( "vmouseup" );
		$document.unbind( "vmousecancel" );
	}
};

// Also handles swipeleft, swiperight
$.event.special.swipe = {

	// More than this horizontal displacement, and we will suppress scrolling.
	scrollSupressionThreshold: 30,

	// More time than this, and it isn't a swipe.
	durationThreshold: 1000,

	// Swipe horizontal displacement must be more than this.
	horizontalDistanceThreshold: window.devicePixelRatio >= 2 ? 15 : 30,

	// Swipe vertical displacement must be less than this.
	verticalDistanceThreshold: window.devicePixelRatio >= 2 ? 15 : 30,

	getLocation: function( event ) {
		var winPageX = window.pageXOffset,
			winPageY = window.pageYOffset,
			x = event.clientX,
			y = event.clientY;

		if ( event.pageY === 0 && Math.floor( y ) > Math.floor( event.pageY ) ||
				event.pageX === 0 && Math.floor( x ) > Math.floor( event.pageX ) ) {

			// iOS4 clientX/clientY have the value that should have been
			// in pageX/pageY. While pageX/page/ have the value 0
			x = x - winPageX;
			y = y - winPageY;
		} else if ( y < ( event.pageY - winPageY ) || x < ( event.pageX - winPageX ) ) {

			// Some Android browsers have totally bogus values for clientX/Y
			// when scrolling/zooming a page. Detectable since clientX/clientY
			// should never be smaller than pageX/pageY minus page scroll
			x = event.pageX - winPageX;
			y = event.pageY - winPageY;
		}

		return {
			x: x,
			y: y
		};
	},

	start: function( event ) {
		var data = event.originalEvent.touches ?
				event.originalEvent.touches[ 0 ] : event,
			location = $.event.special.swipe.getLocation( data );
		return {
			time: ( new Date() ).getTime(),
			coords: [ location.x, location.y ],
			origin: $( event.target )
		};
	},

	stop: function( event ) {
		var data = event.originalEvent.touches ?
				event.originalEvent.touches[ 0 ] : event,
			location = $.event.special.swipe.getLocation( data );
		return {
			time: ( new Date() ).getTime(),
			coords: [ location.x, location.y ]
		};
	},

	handleSwipe: function( start, stop, thisObject, origTarget ) {
		if ( stop.time - start.time < $.event.special.swipe.durationThreshold &&
				Math.abs( start.coords[ 0 ] - stop.coords[ 0 ] ) > $.event.special.swipe.horizontalDistanceThreshold &&
				Math.abs( start.coords[ 1 ] - stop.coords[ 1 ] ) < $.event.special.swipe.verticalDistanceThreshold ) {
			var direction = start.coords[ 0 ] > stop.coords[ 0 ] ? "swipeleft" : "swiperight";

			triggerCustomEvent( thisObject, "swipe", $.Event( "swipe", { target: origTarget, swipestart: start, swipestop: stop } ), true );
			triggerCustomEvent( thisObject, direction, $.Event( direction, { target: origTarget, swipestart: start, swipestop: stop } ), true );
			return true;
		}
		return false;

	},

	// This serves as a flag to ensure that at most one swipe event event is
	// in work at any given time
	eventInProgress: false,

	setup: function() {
		var events,
			thisObject = this,
			$this = $( thisObject ),
			context = {};

		// Retrieve the events data for this element and add the swipe context
		events = $.data( this, "mobile-events" );
		if ( !events ) {
			events = { length: 0 };
			$.data( this, "mobile-events", events );
		}
		events.length++;
		events.swipe = context;

		context.start = function( event ) {

			// Bail if we're already working on a swipe event
			if ( $.event.special.swipe.eventInProgress ) {
				return;
			}
			$.event.special.swipe.eventInProgress = true;

			var stop,
				start = $.event.special.swipe.start( event ),
				origTarget = event.target,
				emitted = false;

			context.move = function( event ) {
				if ( !start || event.isDefaultPrevented() ) {
					return;
				}

				stop = $.event.special.swipe.stop( event );
				if ( !emitted ) {
					emitted = $.event.special.swipe.handleSwipe( start, stop, thisObject, origTarget );
					if ( emitted ) {

						// Reset the context to make way for the next swipe event
						$.event.special.swipe.eventInProgress = false;
					}
				}
				// prevent scrolling
				if ( Math.abs( start.coords[ 0 ] - stop.coords[ 0 ] ) > $.event.special.swipe.scrollSupressionThreshold ) {
					event.preventDefault();
				}
			};

			context.stop = function() {
				emitted = true;

				// Reset the context to make way for the next swipe event
				$.event.special.swipe.eventInProgress = false;
				$document.off( touchMoveEvent, context.move );
				context.move = null;
			};

			$document.on( touchMoveEvent, context.move )
				.one( touchStopEvent, context.stop );
		};
		$this.on( touchStartEvent, context.start );
	},

	teardown: function() {
		var events, context;

		events = $.data( this, "mobile-events" );
		if ( events ) {
			context = events.swipe;
			delete events.swipe;
			events.length--;
			if ( events.length === 0 ) {
				$.removeData( this, "mobile-events" );
			}
		}

		if ( context ) {
			if ( context.start ) {
				$( this ).off( touchStartEvent, context.start );
			}
			if ( context.move ) {
				$document.off( touchMoveEvent, context.move );
			}
			if ( context.stop ) {
				$document.off( touchStopEvent, context.stop );
			}
		}
	}
};
$.each( {
	taphold: "tap",
	swipeleft: "swipe.left",
	swiperight: "swipe.right"
}, function( event, sourceEvent ) {

	$.event.special[ event ] = {
		setup: function() {
			$( this ).bind( sourceEvent, $.noop );
		},
		teardown: function() {
			$( this ).unbind( sourceEvent );
		}
	};
} );

return $.event.special;
} );



}));

/* Detect-zoom
 * -----------
 * Cross Browser Zoom and Pixel Ratio Detector
 * Version 1.0.4 | Apr 1 2013
 * dual-licensed under the WTFPL and MIT license
 * Maintained by https://github/tombigel
 * Original developer https://github.com/yonran
 */
//AMD and CommonJS initialization copied from https://github.com/zohararad/audio5js
(function (root, ns, factory) {
  "use strict";

  if (typeof (module) !== 'undefined' && module.exports) { // CommonJS
      module.exports = factory(ns, root);
  } else if (typeof (define) === 'function' && define.amd) { // AMD
      define("detect-zoom", function () {
          return factory(ns, root);
      });
  } else {
      root[ns] = factory(ns, root);
  }

}(window, 'detectZoom', function () {

  /**
   * Use devicePixelRatio if supported by the browser
   * @return {Number}
   * @private
   */
  var devicePixelRatio = function () {
      return window.devicePixelRatio || 1;
  };

  /**
   * Fallback function to set default values
   * @return {Object}
   * @private
   */
  var fallback = function () {
      return {
          zoom: 1,
          devicePxPerCssPx: 1
      };
  };
  /**
   * IE 8 and 9: no trick needed!
   * TODO: Test on IE10 and Windows 8 RT
   * @return {Object}
   * @private
   **/
  var ie8 = function () {
      var zoom = Math.round((screen.deviceXDPI / screen.logicalXDPI) * 100) / 100;
      return {
          zoom: zoom,
          devicePxPerCssPx: zoom * devicePixelRatio()
      };
  };

  /**
   * For IE10 we need to change our technique again...
   * thanks https://github.com/stefanvanburen
   * @return {Object}
   * @private
   */
  var ie10 = function () {
      var zoom = Math.round((document.documentElement.offsetHeight / window.innerHeight) * 100) / 100;
      return {
          zoom: zoom,
          devicePxPerCssPx: zoom * devicePixelRatio()
      };
  };

/**
* For chrome
*
*/
  var chrome = function()
  {
    var zoom = Math.round(((window.outerWidth) / window.innerWidth)*100) / 100;
      return {
          zoom: zoom,
          devicePxPerCssPx: zoom * devicePixelRatio()
      };	    
  }

/**
* For safari (same as chrome)
*
*/
  var safari= function()
  {
    var zoom = Math.round(((document.documentElement.clientWidth) / window.innerWidth)*100) / 100;
      return {
          zoom: zoom,
          devicePxPerCssPx: zoom * devicePixelRatio()
      };	    
  }


  /**
   * Mobile WebKit
   * the trick: window.innerWIdth is in CSS pixels, while
   * screen.width and screen.height are in system pixels.
   * And there are no scrollbars to mess up the measurement.
   * @return {Object}
   * @private
   */
  var webkitMobile = function () {
      var deviceWidth = (Math.abs(window.orientation) == 90) ? screen.height : screen.width;
      var zoom = deviceWidth / window.innerWidth;
      return {
          zoom: zoom,
          devicePxPerCssPx: zoom * devicePixelRatio()
      };
  };

  /**
   * Desktop Webkit
   * the trick: an element's clientHeight is in CSS pixels, while you can
   * set its line-height in system pixels using font-size and
   * -webkit-text-size-adjust:none.
   * device-pixel-ratio: http://www.webkit.org/blog/55/high-dpi-web-sites/
   *
   * Previous trick (used before http://trac.webkit.org/changeset/100847):
   * documentElement.scrollWidth is in CSS pixels, while
   * document.width was in system pixels. Note that this is the
   * layout width of the document, which is slightly different from viewport
   * because document width does not include scrollbars and might be wider
   * due to big elements.
   * @return {Object}
   * @private
   */
  var webkit = function () {
      var important = function (str) {
          return str.replace(/;/g, " !important;");
      };

      var div = document.createElement('div');
      div.innerHTML = "1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>0";
      div.setAttribute('style', important('font: 100px/1em sans-serif; -webkit-text-size-adjust: none; text-size-adjust: none; height: auto; width: 1em; padding: 0; overflow: visible;'));

      // The container exists so that the div will be laid out in its own flow
      // while not impacting the layout, viewport size, or display of the
      // webpage as a whole.
      // Add !important and relevant CSS rule resets
      // so that other rules cannot affect the results.
      var container = document.createElement('div');
      container.setAttribute('style', important('width:0; height:0; overflow:hidden; visibility:hidden; position: absolute;'));
      container.appendChild(div);

      document.body.appendChild(container);
      var zoom = 1000 / div.clientHeight;
      zoom = Math.round(zoom * 100) / 100;
      document.body.removeChild(container);

      return{
          zoom: zoom,
          devicePxPerCssPx: zoom * devicePixelRatio()
      };
  };

  /**
   * no real trick; device-pixel-ratio is the ratio of device dpi / css dpi.
   * (Note that this is a different interpretation than Webkit's device
   * pixel ratio, which is the ratio device dpi / system dpi).
   *
   * Also, for Mozilla, there is no difference between the zoom factor and the device ratio.
   *
   * @return {Object}
   * @private
   */
  var firefox4 = function () {
      var zoom = mediaQueryBinarySearch('min--moz-device-pixel-ratio', '', 0, 10, 20, 0.0001);
      zoom = Math.round(zoom * 100) / 100;
      return {
          zoom: zoom,
          devicePxPerCssPx: zoom
      };
  };

  /**
   * Firefox 18.x
   * Mozilla added support for devicePixelRatio to Firefox 18,
   * but it is affected by the zoom level, so, like in older
   * Firefox we can't tell if we are in zoom mode or in a device
   * with a different pixel ratio
   * @return {Object}
   * @private
   */
  var firefox18 = function () {
      return {
          zoom: firefox4().zoom,
          devicePxPerCssPx: devicePixelRatio()
      };
  };

  /**
   * works starting Opera 11.11
   * the trick: outerWidth is the viewport width including scrollbars in
   * system px, while innerWidth is the viewport width including scrollbars
   * in CSS px
   * @return {Object}
   * @private
   */
  var opera11 = function () {
      var zoom = window.top.outerWidth / window.top.innerWidth;
      zoom = Math.round(zoom * 100) / 100;
      return {
          zoom: zoom,
          devicePxPerCssPx: zoom * devicePixelRatio()
      };
  };

  /**
   * Use a binary search through media queries to find zoom level in Firefox
   * @param property
   * @param unit
   * @param a
   * @param b
   * @param maxIter
   * @param epsilon
   * @return {Number}
   */
  var mediaQueryBinarySearch = function (property, unit, a, b, maxIter, epsilon) {
      var matchMedia;
      var head, style, div;
      if (window.matchMedia) {
          matchMedia = window.matchMedia;
      } else {
          head = document.getElementsByTagName('head')[0];
          style = document.createElement('style');
          head.appendChild(style);

          div = document.createElement('div');
          div.className = 'mediaQueryBinarySearch';
          div.style.display = 'none';
          document.body.appendChild(div);

          matchMedia = function (query) {
              style.sheet.insertRule('@media ' + query + '{.mediaQueryBinarySearch ' + '{text-decoration: underline} }', 0);
              var matched = getComputedStyle(div, null).textDecoration == 'underline';
              style.sheet.deleteRule(0);
              return {matches: matched};
          };
      }
      var ratio = binarySearch(a, b, maxIter);
      if (div) {
          head.removeChild(style);
          document.body.removeChild(div);
      }
      return ratio;

      function binarySearch(a, b, maxIter) {
          var mid = (a + b) / 2;
          if (maxIter <= 0 || b - a < epsilon) {
              return mid;
          }
          var query = "(" + property + ":" + mid + unit + ")";
          if (matchMedia(query).matches) {
              return binarySearch(mid, b, maxIter - 1);
          } else {
              return binarySearch(a, mid, maxIter - 1);
          }
      }
  };

  /**
   * Generate detection function
   * @private
   */
  var detectFunction = (function () {
      var func = fallback;
      //IE8+
      if (!isNaN(screen.logicalXDPI) && !isNaN(screen.systemXDPI)) {
          func = ie8;
      }
      // IE10+ / Touch
      else if (window.navigator.msMaxTouchPoints) {
          func = ie10;
      }
  //chrome
  else if(!!window.chrome && !(!!window.opera || navigator.userAgent.indexOf(' Opera') >= 0)){
    func = chrome;
  }
  //safari
  else if(Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0){
    func = safari;
  }	
      //Mobile Webkit
      else if ('orientation' in window && 'webkitRequestAnimationFrame' in window) {
          func = webkitMobile;
      }
      //WebKit
      else if ('webkitRequestAnimationFrame' in window) {
          func = webkit;
      }
      //Opera
      else if (navigator.userAgent.indexOf('Opera') >= 0) {
          func = opera11;
      }
      //Last one is Firefox
      //FF 18.x
      else if (window.devicePixelRatio) {
          func = firefox18;
      }
      //FF 4.0 - 17.x
      else if (firefox4().zoom > 0.001) {
          func = firefox4;
      }

      return func;
  }());


  return ({

      /**
       * Ratios.zoom shorthand
       * @return {Number} Zoom level
       */
      zoom: function () {
          return detectFunction().zoom;
      },

      /**
       * Ratios.devicePxPerCssPx shorthand
       * @return {Number} devicePxPerCssPx level
       */
      device: function () {
          return detectFunction().devicePxPerCssPx;
      }
  });
}));
/*
 * This combined file was created by the DataTables downloader builder:
 *   https://datatables.net/download
 *
 * To rebuild or modify this file with the latest versions of the included
 * software please visit:
 *   https://datatables.net/download/#dt/dt-1.10.20
 *
 * Included libraries:
 *   DataTables 1.10.20
 */

/*!
   Copyright 2008-2019 SpryMedia Ltd.

 This source file is free software, available under the following license:
   MIT license - http://datatables.net/license

 This source file is distributed in the hope that it will be useful, but
 WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.

 For details please refer to: http://www.datatables.net
 DataTables 1.10.20
 ©2008-2019 SpryMedia Ltd - datatables.net/license
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(f,z,y){f instanceof String&&(f=String(f));for(var p=f.length,H=0;H<p;H++){var L=f[H];if(z.call(y,L,H,f))return{i:H,v:L}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(f,z,y){f!=Array.prototype&&f!=Object.prototype&&(f[z]=y.value)};$jscomp.getGlobal=function(f){return"undefined"!=typeof window&&window===f?f:"undefined"!=typeof global&&null!=global?global:f};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(f,z,y,p){if(z){y=$jscomp.global;f=f.split(".");for(p=0;p<f.length-1;p++){var H=f[p];H in y||(y[H]={});y=y[H]}f=f[f.length-1];p=y[f];z=z(p);z!=p&&null!=z&&$jscomp.defineProperty(y,f,{configurable:!0,writable:!0,value:z})}};$jscomp.polyfill("Array.prototype.find",function(f){return f?f:function(f,y){return $jscomp.findInternal(this,f,y).v}},"es6","es3");
(function(f){"function"===typeof define&&define.amd?define(["jquery"],function(z){return f(z,window,document)}):"object"===typeof exports?module.exports=function(z,y){z||(z=window);y||(y="undefined"!==typeof window?require("jquery"):require("jquery")(z));return f(y,z,z.document)}:f(jQuery,window,document)})(function(f,z,y,p){function H(a){var b,c,d={};f.each(a,function(e,h){(b=e.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(b[1]+" ")&&(c=e.replace(b[0],b[2].toLowerCase()),
d[c]=e,"o"===b[1]&&H(a[e]))});a._hungarianMap=d}function L(a,b,c){a._hungarianMap||H(a);var d;f.each(b,function(e,h){d=a._hungarianMap[e];d===p||!c&&b[d]!==p||("o"===d.charAt(0)?(b[d]||(b[d]={}),f.extend(!0,b[d],b[e]),L(a[d],b[d],c)):b[d]=b[e])})}function Ga(a){var b=q.defaults.oLanguage,c=b.sDecimal;c&&Ha(c);if(a){var d=a.sZeroRecords;!a.sEmptyTable&&d&&"No data available in table"===b.sEmptyTable&&M(a,a,"sZeroRecords","sEmptyTable");!a.sLoadingRecords&&d&&"Loading..."===b.sLoadingRecords&&M(a,a,
"sZeroRecords","sLoadingRecords");a.sInfoThousands&&(a.sThousands=a.sInfoThousands);(a=a.sDecimal)&&c!==a&&Ha(a)}}function jb(a){F(a,"ordering","bSort");F(a,"orderMulti","bSortMulti");F(a,"orderClasses","bSortClasses");F(a,"orderCellsTop","bSortCellsTop");F(a,"order","aaSorting");F(a,"orderFixed","aaSortingFixed");F(a,"paging","bPaginate");F(a,"pagingType","sPaginationType");F(a,"pageLength","iDisplayLength");F(a,"searching","bFilter");"boolean"===typeof a.sScrollX&&(a.sScrollX=a.sScrollX?"100%":
"");"boolean"===typeof a.scrollX&&(a.scrollX=a.scrollX?"100%":"");if(a=a.aoSearchCols)for(var b=0,c=a.length;b<c;b++)a[b]&&L(q.models.oSearch,a[b])}function kb(a){F(a,"orderable","bSortable");F(a,"orderData","aDataSort");F(a,"orderSequence","asSorting");F(a,"orderDataType","sortDataType");var b=a.aDataSort;"number"!==typeof b||f.isArray(b)||(a.aDataSort=[b])}function lb(a){if(!q.__browser){var b={};q.__browser=b;var c=f("<div/>").css({position:"fixed",top:0,left:-1*f(z).scrollLeft(),height:1,width:1,
overflow:"hidden"}).append(f("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(f("<div/>").css({width:"100%",height:10}))).appendTo("body"),d=c.children(),e=d.children();b.barWidth=d[0].offsetWidth-d[0].clientWidth;b.bScrollOversize=100===e[0].offsetWidth&&100!==d[0].clientWidth;b.bScrollbarLeft=1!==Math.round(e.offset().left);b.bBounding=c[0].getBoundingClientRect().width?!0:!1;c.remove()}f.extend(a.oBrowser,q.__browser);a.oScroll.iBarWidth=q.__browser.barWidth}
function mb(a,b,c,d,e,h){var g=!1;if(c!==p){var k=c;g=!0}for(;d!==e;)a.hasOwnProperty(d)&&(k=g?b(k,a[d],d,a):a[d],g=!0,d+=h);return k}function Ia(a,b){var c=q.defaults.column,d=a.aoColumns.length;c=f.extend({},q.models.oColumn,c,{nTh:b?b:y.createElement("th"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:"",aDataSort:c.aDataSort?c.aDataSort:[d],mData:c.mData?c.mData:d,idx:d});a.aoColumns.push(c);c=a.aoPreSearchCols;c[d]=f.extend({},q.models.oSearch,c[d]);ma(a,d,f(b).data())}function ma(a,b,c){b=a.aoColumns[b];
var d=a.oClasses,e=f(b.nTh);if(!b.sWidthOrig){b.sWidthOrig=e.attr("width")||null;var h=(e.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);h&&(b.sWidthOrig=h[1])}c!==p&&null!==c&&(kb(c),L(q.defaults.column,c,!0),c.mDataProp===p||c.mData||(c.mData=c.mDataProp),c.sType&&(b._sManualType=c.sType),c.className&&!c.sClass&&(c.sClass=c.className),c.sClass&&e.addClass(c.sClass),f.extend(b,c),M(b,c,"sWidth","sWidthOrig"),c.iDataSort!==p&&(b.aDataSort=[c.iDataSort]),M(b,c,"aDataSort"));var g=b.mData,k=U(g),
l=b.mRender?U(b.mRender):null;c=function(a){return"string"===typeof a&&-1!==a.indexOf("@")};b._bAttrSrc=f.isPlainObject(g)&&(c(g.sort)||c(g.type)||c(g.filter));b._setter=null;b.fnGetData=function(a,b,c){var d=k(a,b,p,c);return l&&b?l(d,b,a,c):d};b.fnSetData=function(a,b,c){return Q(g)(a,b,c)};"number"!==typeof g&&(a._rowReadObject=!0);a.oFeatures.bSort||(b.bSortable=!1,e.addClass(d.sSortableNone));a=-1!==f.inArray("asc",b.asSorting);c=-1!==f.inArray("desc",b.asSorting);b.bSortable&&(a||c)?a&&!c?(b.sSortingClass=
d.sSortableAsc,b.sSortingClassJUI=d.sSortJUIAscAllowed):!a&&c?(b.sSortingClass=d.sSortableDesc,b.sSortingClassJUI=d.sSortJUIDescAllowed):(b.sSortingClass=d.sSortable,b.sSortingClassJUI=d.sSortJUI):(b.sSortingClass=d.sSortableNone,b.sSortingClassJUI="")}function aa(a){if(!1!==a.oFeatures.bAutoWidth){var b=a.aoColumns;Ja(a);for(var c=0,d=b.length;c<d;c++)b[c].nTh.style.width=b[c].sWidth}b=a.oScroll;""===b.sY&&""===b.sX||na(a);A(a,null,"column-sizing",[a])}function ba(a,b){a=oa(a,"bVisible");return"number"===
typeof a[b]?a[b]:null}function ca(a,b){a=oa(a,"bVisible");b=f.inArray(b,a);return-1!==b?b:null}function W(a){var b=0;f.each(a.aoColumns,function(a,d){d.bVisible&&"none"!==f(d.nTh).css("display")&&b++});return b}function oa(a,b){var c=[];f.map(a.aoColumns,function(a,e){a[b]&&c.push(e)});return c}function Ka(a){var b=a.aoColumns,c=a.aoData,d=q.ext.type.detect,e,h,g;var k=0;for(e=b.length;k<e;k++){var f=b[k];var n=[];if(!f.sType&&f._sManualType)f.sType=f._sManualType;else if(!f.sType){var m=0;for(h=
d.length;m<h;m++){var w=0;for(g=c.length;w<g;w++){n[w]===p&&(n[w]=I(a,w,k,"type"));var u=d[m](n[w],a);if(!u&&m!==d.length-1)break;if("html"===u)break}if(u){f.sType=u;break}}f.sType||(f.sType="string")}}}function nb(a,b,c,d){var e,h,g,k=a.aoColumns;if(b)for(e=b.length-1;0<=e;e--){var l=b[e];var n=l.targets!==p?l.targets:l.aTargets;f.isArray(n)||(n=[n]);var m=0;for(h=n.length;m<h;m++)if("number"===typeof n[m]&&0<=n[m]){for(;k.length<=n[m];)Ia(a);d(n[m],l)}else if("number"===typeof n[m]&&0>n[m])d(k.length+
n[m],l);else if("string"===typeof n[m]){var w=0;for(g=k.length;w<g;w++)("_all"==n[m]||f(k[w].nTh).hasClass(n[m]))&&d(w,l)}}if(c)for(e=0,a=c.length;e<a;e++)d(e,c[e])}function R(a,b,c,d){var e=a.aoData.length,h=f.extend(!0,{},q.models.oRow,{src:c?"dom":"data",idx:e});h._aData=b;a.aoData.push(h);for(var g=a.aoColumns,k=0,l=g.length;k<l;k++)g[k].sType=null;a.aiDisplayMaster.push(e);b=a.rowIdFn(b);b!==p&&(a.aIds[b]=h);!c&&a.oFeatures.bDeferRender||La(a,e,c,d);return e}function pa(a,b){var c;b instanceof
f||(b=f(b));return b.map(function(b,e){c=Ma(a,e);return R(a,c.data,e,c.cells)})}function I(a,b,c,d){var e=a.iDraw,h=a.aoColumns[c],g=a.aoData[b]._aData,k=h.sDefaultContent,f=h.fnGetData(g,d,{settings:a,row:b,col:c});if(f===p)return a.iDrawError!=e&&null===k&&(O(a,0,"Requested unknown parameter "+("function"==typeof h.mData?"{function}":"'"+h.mData+"'")+" for row "+b+", column "+c,4),a.iDrawError=e),k;if((f===g||null===f)&&null!==k&&d!==p)f=k;else if("function"===typeof f)return f.call(g);return null===
f&&"display"==d?"":f}function ob(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d,{settings:a,row:b,col:c})}function Na(a){return f.map(a.match(/(\\.|[^\.])+/g)||[""],function(a){return a.replace(/\\\./g,".")})}function U(a){if(f.isPlainObject(a)){var b={};f.each(a,function(a,c){c&&(b[a]=U(c))});return function(a,c,h,g){var d=b[c]||b._;return d!==p?d(a,c,h,g):a}}if(null===a)return function(a){return a};if("function"===typeof a)return function(b,c,h,g){return a(b,c,h,g)};if("string"!==typeof a||
-1===a.indexOf(".")&&-1===a.indexOf("[")&&-1===a.indexOf("("))return function(b,c){return b[a]};var c=function(a,b,h){if(""!==h){var d=Na(h);for(var e=0,l=d.length;e<l;e++){h=d[e].match(da);var n=d[e].match(X);if(h){d[e]=d[e].replace(da,"");""!==d[e]&&(a=a[d[e]]);n=[];d.splice(0,e+1);d=d.join(".");if(f.isArray(a))for(e=0,l=a.length;e<l;e++)n.push(c(a[e],b,d));a=h[0].substring(1,h[0].length-1);a=""===a?n:n.join(a);break}else if(n){d[e]=d[e].replace(X,"");a=a[d[e]]();continue}if(null===a||a[d[e]]===
p)return p;a=a[d[e]]}}return a};return function(b,e){return c(b,e,a)}}function Q(a){if(f.isPlainObject(a))return Q(a._);if(null===a)return function(){};if("function"===typeof a)return function(b,d,e){a(b,"set",d,e)};if("string"!==typeof a||-1===a.indexOf(".")&&-1===a.indexOf("[")&&-1===a.indexOf("("))return function(b,d){b[a]=d};var b=function(a,d,e){e=Na(e);var c=e[e.length-1];for(var g,k,l=0,n=e.length-1;l<n;l++){g=e[l].match(da);k=e[l].match(X);if(g){e[l]=e[l].replace(da,"");a[e[l]]=[];c=e.slice();
c.splice(0,l+1);g=c.join(".");if(f.isArray(d))for(k=0,n=d.length;k<n;k++)c={},b(c,d[k],g),a[e[l]].push(c);else a[e[l]]=d;return}k&&(e[l]=e[l].replace(X,""),a=a[e[l]](d));if(null===a[e[l]]||a[e[l]]===p)a[e[l]]={};a=a[e[l]]}if(c.match(X))a[c.replace(X,"")](d);else a[c.replace(da,"")]=d};return function(c,d){return b(c,d,a)}}function Oa(a){return J(a.aoData,"_aData")}function qa(a){a.aoData.length=0;a.aiDisplayMaster.length=0;a.aiDisplay.length=0;a.aIds={}}function ra(a,b,c){for(var d=-1,e=0,h=a.length;e<
h;e++)a[e]==b?d=e:a[e]>b&&a[e]--; -1!=d&&c===p&&a.splice(d,1)}function ea(a,b,c,d){var e=a.aoData[b],h,g=function(c,d){for(;c.childNodes.length;)c.removeChild(c.firstChild);c.innerHTML=I(a,b,d,"display")};if("dom"!==c&&(c&&"auto"!==c||"dom"!==e.src)){var k=e.anCells;if(k)if(d!==p)g(k[d],d);else for(c=0,h=k.length;c<h;c++)g(k[c],c)}else e._aData=Ma(a,e,d,d===p?p:e._aData).data;e._aSortData=null;e._aFilterData=null;g=a.aoColumns;if(d!==p)g[d].sType=null;else{c=0;for(h=g.length;c<h;c++)g[c].sType=null;
Pa(a,e)}}function Ma(a,b,c,d){var e=[],h=b.firstChild,g,k=0,l,n=a.aoColumns,m=a._rowReadObject;d=d!==p?d:m?{}:[];var w=function(a,b){if("string"===typeof a){var c=a.indexOf("@");-1!==c&&(c=a.substring(c+1),Q(a)(d,b.getAttribute(c)))}},u=function(a){if(c===p||c===k)g=n[k],l=f.trim(a.innerHTML),g&&g._bAttrSrc?(Q(g.mData._)(d,l),w(g.mData.sort,a),w(g.mData.type,a),w(g.mData.filter,a)):m?(g._setter||(g._setter=Q(g.mData)),g._setter(d,l)):d[k]=l;k++};if(h)for(;h;){var q=h.nodeName.toUpperCase();if("TD"==
q||"TH"==q)u(h),e.push(h);h=h.nextSibling}else for(e=b.anCells,h=0,q=e.length;h<q;h++)u(e[h]);(b=b.firstChild?b:b.nTr)&&(b=b.getAttribute("id"))&&Q(a.rowId)(d,b);return{data:d,cells:e}}function La(a,b,c,d){var e=a.aoData[b],h=e._aData,g=[],k,l;if(null===e.nTr){var n=c||y.createElement("tr");e.nTr=n;e.anCells=g;n._DT_RowIndex=b;Pa(a,e);var m=0;for(k=a.aoColumns.length;m<k;m++){var w=a.aoColumns[m];var p=(l=c?!1:!0)?y.createElement(w.sCellType):d[m];p._DT_CellIndex={row:b,column:m};g.push(p);if(l||
!(c&&!w.mRender&&w.mData===m||f.isPlainObject(w.mData)&&w.mData._===m+".display"))p.innerHTML=I(a,b,m,"display");w.sClass&&(p.className+=" "+w.sClass);w.bVisible&&!c?n.appendChild(p):!w.bVisible&&c&&p.parentNode.removeChild(p);w.fnCreatedCell&&w.fnCreatedCell.call(a.oInstance,p,I(a,b,m),h,b,m)}A(a,"aoRowCreatedCallback",null,[n,h,b,g])}e.nTr.setAttribute("role","row")}function Pa(a,b){var c=b.nTr,d=b._aData;if(c){if(a=a.rowIdFn(d))c.id=a;d.DT_RowClass&&(a=d.DT_RowClass.split(" "),b.__rowc=b.__rowc?
ta(b.__rowc.concat(a)):a,f(c).removeClass(b.__rowc.join(" ")).addClass(d.DT_RowClass));d.DT_RowAttr&&f(c).attr(d.DT_RowAttr);d.DT_RowData&&f(c).data(d.DT_RowData)}}function pb(a){var b,c,d=a.nTHead,e=a.nTFoot,h=0===f("th, td",d).length,g=a.oClasses,k=a.aoColumns;h&&(c=f("<tr/>").appendTo(d));var l=0;for(b=k.length;l<b;l++){var n=k[l];var m=f(n.nTh).addClass(n.sClass);h&&m.appendTo(c);a.oFeatures.bSort&&(m.addClass(n.sSortingClass),!1!==n.bSortable&&(m.attr("tabindex",a.iTabIndex).attr("aria-controls",
a.sTableId),Qa(a,n.nTh,l)));n.sTitle!=m[0].innerHTML&&m.html(n.sTitle);Ra(a,"header")(a,m,n,g)}h&&fa(a.aoHeader,d);f(d).find(">tr").attr("role","row");f(d).find(">tr>th, >tr>td").addClass(g.sHeaderTH);f(e).find(">tr>th, >tr>td").addClass(g.sFooterTH);if(null!==e)for(a=a.aoFooter[0],l=0,b=a.length;l<b;l++)n=k[l],n.nTf=a[l].cell,n.sClass&&f(n.nTf).addClass(n.sClass)}function ha(a,b,c){var d,e,h=[],g=[],k=a.aoColumns.length;if(b){c===p&&(c=!1);var l=0;for(d=b.length;l<d;l++){h[l]=b[l].slice();h[l].nTr=
b[l].nTr;for(e=k-1;0<=e;e--)a.aoColumns[e].bVisible||c||h[l].splice(e,1);g.push([])}l=0;for(d=h.length;l<d;l++){if(a=h[l].nTr)for(;e=a.firstChild;)a.removeChild(e);e=0;for(b=h[l].length;e<b;e++){var n=k=1;if(g[l][e]===p){a.appendChild(h[l][e].cell);for(g[l][e]=1;h[l+k]!==p&&h[l][e].cell==h[l+k][e].cell;)g[l+k][e]=1,k++;for(;h[l][e+n]!==p&&h[l][e].cell==h[l][e+n].cell;){for(c=0;c<k;c++)g[l+c][e+n]=1;n++}f(h[l][e].cell).attr("rowspan",k).attr("colspan",n)}}}}}function S(a){var b=A(a,"aoPreDrawCallback",
"preDraw",[a]);if(-1!==f.inArray(!1,b))K(a,!1);else{b=[];var c=0,d=a.asStripeClasses,e=d.length,h=a.oLanguage,g=a.iInitDisplayStart,k="ssp"==D(a),l=a.aiDisplay;a.bDrawing=!0;g!==p&&-1!==g&&(a._iDisplayStart=k?g:g>=a.fnRecordsDisplay()?0:g,a.iInitDisplayStart=-1);g=a._iDisplayStart;var n=a.fnDisplayEnd();if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++,K(a,!1);else if(!k)a.iDraw++;else if(!a.bDestroying&&!qb(a))return;if(0!==l.length)for(h=k?a.aoData.length:n,k=k?0:g;k<h;k++){var m=l[k],w=a.aoData[m];
null===w.nTr&&La(a,m);var u=w.nTr;if(0!==e){var q=d[c%e];w._sRowStripe!=q&&(f(u).removeClass(w._sRowStripe).addClass(q),w._sRowStripe=q)}A(a,"aoRowCallback",null,[u,w._aData,c,k,m]);b.push(u);c++}else c=h.sZeroRecords,1==a.iDraw&&"ajax"==D(a)?c=h.sLoadingRecords:h.sEmptyTable&&0===a.fnRecordsTotal()&&(c=h.sEmptyTable),b[0]=f("<tr/>",{"class":e?d[0]:""}).append(f("<td />",{valign:"top",colSpan:W(a),"class":a.oClasses.sRowEmpty}).html(c))[0];A(a,"aoHeaderCallback","header",[f(a.nTHead).children("tr")[0],
Oa(a),g,n,l]);A(a,"aoFooterCallback","footer",[f(a.nTFoot).children("tr")[0],Oa(a),g,n,l]);d=f(a.nTBody);d.children().detach();d.append(f(b));A(a,"aoDrawCallback","draw",[a]);a.bSorted=!1;a.bFiltered=!1;a.bDrawing=!1}}function V(a,b){var c=a.oFeatures,d=c.bFilter;c.bSort&&rb(a);d?ia(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice();!0!==b&&(a._iDisplayStart=0);a._drawHold=b;S(a);a._drawHold=!1}function sb(a){var b=a.oClasses,c=f(a.nTable);c=f("<div/>").insertBefore(c);var d=a.oFeatures,e=
f("<div/>",{id:a.sTableId+"_wrapper","class":b.sWrapper+(a.nTFoot?"":" "+b.sNoFooter)});a.nHolding=c[0];a.nTableWrapper=e[0];a.nTableReinsertBefore=a.nTable.nextSibling;for(var h=a.sDom.split(""),g,k,l,n,m,p,u=0;u<h.length;u++){g=null;k=h[u];if("<"==k){l=f("<div/>")[0];n=h[u+1];if("'"==n||'"'==n){m="";for(p=2;h[u+p]!=n;)m+=h[u+p],p++;"H"==m?m=b.sJUIHeader:"F"==m&&(m=b.sJUIFooter);-1!=m.indexOf(".")?(n=m.split("."),l.id=n[0].substr(1,n[0].length-1),l.className=n[1]):"#"==m.charAt(0)?l.id=m.substr(1,
m.length-1):l.className=m;u+=p}e.append(l);e=f(l)}else if(">"==k)e=e.parent();else if("l"==k&&d.bPaginate&&d.bLengthChange)g=tb(a);else if("f"==k&&d.bFilter)g=ub(a);else if("r"==k&&d.bProcessing)g=vb(a);else if("t"==k)g=wb(a);else if("i"==k&&d.bInfo)g=xb(a);else if("p"==k&&d.bPaginate)g=yb(a);else if(0!==q.ext.feature.length)for(l=q.ext.feature,p=0,n=l.length;p<n;p++)if(k==l[p].cFeature){g=l[p].fnInit(a);break}g&&(l=a.aanFeatures,l[k]||(l[k]=[]),l[k].push(g),e.append(g))}c.replaceWith(e);a.nHolding=
null}function fa(a,b){b=f(b).children("tr");var c,d,e;a.splice(0,a.length);var h=0;for(e=b.length;h<e;h++)a.push([]);h=0;for(e=b.length;h<e;h++){var g=b[h];for(c=g.firstChild;c;){if("TD"==c.nodeName.toUpperCase()||"TH"==c.nodeName.toUpperCase()){var k=1*c.getAttribute("colspan");var l=1*c.getAttribute("rowspan");k=k&&0!==k&&1!==k?k:1;l=l&&0!==l&&1!==l?l:1;var n=0;for(d=a[h];d[n];)n++;var m=n;var p=1===k?!0:!1;for(d=0;d<k;d++)for(n=0;n<l;n++)a[h+n][m+d]={cell:c,unique:p},a[h+n].nTr=g}c=c.nextSibling}}}
function ua(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],fa(c,b)));b=0;for(var e=c.length;b<e;b++)for(var h=0,g=c[b].length;h<g;h++)!c[b][h].unique||d[h]&&a.bSortCellsTop||(d[h]=c[b][h].cell);return d}function va(a,b,c){A(a,"aoServerParams","serverParams",[b]);if(b&&f.isArray(b)){var d={},e=/(.*?)\[\]$/;f.each(b,function(a,b){(a=b.name.match(e))?(a=a[0],d[a]||(d[a]=[]),d[a].push(b.value)):d[b.name]=b.value});b=d}var h=a.ajax,g=a.oInstance,k=function(b){A(a,null,"xhr",[a,b,a.jqXHR]);c(b)};if(f.isPlainObject(h)&&
h.data){var l=h.data;var n="function"===typeof l?l(b,a):l;b="function"===typeof l&&n?n:f.extend(!0,b,n);delete h.data}n={data:b,success:function(b){var c=b.error||b.sError;c&&O(a,0,c);a.json=b;k(b)},dataType:"json",cache:!1,type:a.sServerMethod,error:function(b,c,d){d=A(a,null,"xhr",[a,null,a.jqXHR]);-1===f.inArray(!0,d)&&("parsererror"==c?O(a,0,"Invalid JSON response",1):4===b.readyState&&O(a,0,"Ajax error",7));K(a,!1)}};a.oAjaxData=b;A(a,null,"preXhr",[a,b]);a.fnServerData?a.fnServerData.call(g,
a.sAjaxSource,f.map(b,function(a,b){return{name:b,value:a}}),k,a):a.sAjaxSource||"string"===typeof h?a.jqXHR=f.ajax(f.extend(n,{url:h||a.sAjaxSource})):"function"===typeof h?a.jqXHR=h.call(g,b,k,a):(a.jqXHR=f.ajax(f.extend(n,h)),h.data=l)}function qb(a){return a.bAjaxDataGet?(a.iDraw++,K(a,!0),va(a,zb(a),function(b){Ab(a,b)}),!1):!0}function zb(a){var b=a.aoColumns,c=b.length,d=a.oFeatures,e=a.oPreviousSearch,h=a.aoPreSearchCols,g=[],k=Y(a);var l=a._iDisplayStart;var n=!1!==d.bPaginate?a._iDisplayLength:
-1;var m=function(a,b){g.push({name:a,value:b})};m("sEcho",a.iDraw);m("iColumns",c);m("sColumns",J(b,"sName").join(","));m("iDisplayStart",l);m("iDisplayLength",n);var p={draw:a.iDraw,columns:[],order:[],start:l,length:n,search:{value:e.sSearch,regex:e.bRegex}};for(l=0;l<c;l++){var u=b[l];var sa=h[l];n="function"==typeof u.mData?"function":u.mData;p.columns.push({data:n,name:u.sName,searchable:u.bSearchable,orderable:u.bSortable,search:{value:sa.sSearch,regex:sa.bRegex}});m("mDataProp_"+l,n);d.bFilter&&
(m("sSearch_"+l,sa.sSearch),m("bRegex_"+l,sa.bRegex),m("bSearchable_"+l,u.bSearchable));d.bSort&&m("bSortable_"+l,u.bSortable)}d.bFilter&&(m("sSearch",e.sSearch),m("bRegex",e.bRegex));d.bSort&&(f.each(k,function(a,b){p.order.push({column:b.col,dir:b.dir});m("iSortCol_"+a,b.col);m("sSortDir_"+a,b.dir)}),m("iSortingCols",k.length));b=q.ext.legacy.ajax;return null===b?a.sAjaxSource?g:p:b?g:p}function Ab(a,b){var c=function(a,c){return b[a]!==p?b[a]:b[c]},d=wa(a,b),e=c("sEcho","draw"),h=c("iTotalRecords",
"recordsTotal");c=c("iTotalDisplayRecords","recordsFiltered");if(e){if(1*e<a.iDraw)return;a.iDraw=1*e}qa(a);a._iRecordsTotal=parseInt(h,10);a._iRecordsDisplay=parseInt(c,10);e=0;for(h=d.length;e<h;e++)R(a,d[e]);a.aiDisplay=a.aiDisplayMaster.slice();a.bAjaxDataGet=!1;S(a);a._bInitComplete||xa(a,b);a.bAjaxDataGet=!0;K(a,!1)}function wa(a,b){a=f.isPlainObject(a.ajax)&&a.ajax.dataSrc!==p?a.ajax.dataSrc:a.sAjaxDataProp;return"data"===a?b.aaData||b[a]:""!==a?U(a)(b):b}function ub(a){var b=a.oClasses,c=
a.sTableId,d=a.oLanguage,e=a.oPreviousSearch,h=a.aanFeatures,g='<input type="search" class="'+b.sFilterInput+'"/>',k=d.sSearch;k=k.match(/_INPUT_/)?k.replace("_INPUT_",g):k+g;b=f("<div/>",{id:h.f?null:c+"_filter","class":b.sFilter}).append(f("<label/>").append(k));h=function(){var b=this.value?this.value:"";b!=e.sSearch&&(ia(a,{sSearch:b,bRegex:e.bRegex,bSmart:e.bSmart,bCaseInsensitive:e.bCaseInsensitive}),a._iDisplayStart=0,S(a))};g=null!==a.searchDelay?a.searchDelay:"ssp"===D(a)?400:0;var l=f("input",
b).val(e.sSearch).attr("placeholder",d.sSearchPlaceholder).on("keyup.DT search.DT input.DT paste.DT cut.DT",g?Sa(h,g):h).on("keypress.DT",function(a){if(13==a.keyCode)return!1}).attr("aria-controls",c);f(a.nTable).on("search.dt.DT",function(b,c){if(a===c)try{l[0]!==y.activeElement&&l.val(e.sSearch)}catch(w){}});return b[0]}function ia(a,b,c){var d=a.oPreviousSearch,e=a.aoPreSearchCols,h=function(a){d.sSearch=a.sSearch;d.bRegex=a.bRegex;d.bSmart=a.bSmart;d.bCaseInsensitive=a.bCaseInsensitive},g=function(a){return a.bEscapeRegex!==
p?!a.bEscapeRegex:a.bRegex};Ka(a);if("ssp"!=D(a)){Bb(a,b.sSearch,c,g(b),b.bSmart,b.bCaseInsensitive);h(b);for(b=0;b<e.length;b++)Cb(a,e[b].sSearch,b,g(e[b]),e[b].bSmart,e[b].bCaseInsensitive);Db(a)}else h(b);a.bFiltered=!0;A(a,null,"search",[a])}function Db(a){for(var b=q.ext.search,c=a.aiDisplay,d,e,h=0,g=b.length;h<g;h++){for(var k=[],l=0,n=c.length;l<n;l++)e=c[l],d=a.aoData[e],b[h](a,d._aFilterData,e,d._aData,l)&&k.push(e);c.length=0;f.merge(c,k)}}function Cb(a,b,c,d,e,h){if(""!==b){var g=[],k=
a.aiDisplay;d=Ta(b,d,e,h);for(e=0;e<k.length;e++)b=a.aoData[k[e]]._aFilterData[c],d.test(b)&&g.push(k[e]);a.aiDisplay=g}}function Bb(a,b,c,d,e,h){e=Ta(b,d,e,h);var g=a.oPreviousSearch.sSearch,k=a.aiDisplayMaster;h=[];0!==q.ext.search.length&&(c=!0);var f=Eb(a);if(0>=b.length)a.aiDisplay=k.slice();else{if(f||c||d||g.length>b.length||0!==b.indexOf(g)||a.bSorted)a.aiDisplay=k.slice();b=a.aiDisplay;for(c=0;c<b.length;c++)e.test(a.aoData[b[c]]._sFilterRow)&&h.push(b[c]);a.aiDisplay=h}}function Ta(a,b,
c,d){a=b?a:Ua(a);c&&(a="^(?=.*?"+f.map(a.match(/"[^"]+"|[^ ]+/g)||[""],function(a){if('"'===a.charAt(0)){var b=a.match(/^"(.*)"$/);a=b?b[1]:a}return a.replace('"',"")}).join(")(?=.*?")+").*$");return new RegExp(a,d?"i":"")}function Eb(a){var b=a.aoColumns,c,d,e=q.ext.type.search;var h=!1;var g=0;for(c=a.aoData.length;g<c;g++){var k=a.aoData[g];if(!k._aFilterData){var f=[];var n=0;for(d=b.length;n<d;n++){h=b[n];if(h.bSearchable){var m=I(a,g,n,"filter");e[h.sType]&&(m=e[h.sType](m));null===m&&(m="");
"string"!==typeof m&&m.toString&&(m=m.toString())}else m="";m.indexOf&&-1!==m.indexOf("&")&&(ya.innerHTML=m,m=$b?ya.textContent:ya.innerText);m.replace&&(m=m.replace(/[\r\n\u2028]/g,""));f.push(m)}k._aFilterData=f;k._sFilterRow=f.join("  ");h=!0}}return h}function Fb(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,caseInsensitive:a.bCaseInsensitive}}function Gb(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function xb(a){var b=a.sTableId,c=a.aanFeatures.i,
d=f("<div/>",{"class":a.oClasses.sInfo,id:c?null:b+"_info"});c||(a.aoDrawCallback.push({fn:Hb,sName:"information"}),d.attr("role","status").attr("aria-live","polite"),f(a.nTable).attr("aria-describedby",b+"_info"));return d[0]}function Hb(a){var b=a.aanFeatures.i;if(0!==b.length){var c=a.oLanguage,d=a._iDisplayStart+1,e=a.fnDisplayEnd(),h=a.fnRecordsTotal(),g=a.fnRecordsDisplay(),k=g?c.sInfo:c.sInfoEmpty;g!==h&&(k+=" "+c.sInfoFiltered);k+=c.sInfoPostFix;k=Ib(a,k);c=c.fnInfoCallback;null!==c&&(k=c.call(a.oInstance,
a,d,e,h,g,k));f(b).html(k)}}function Ib(a,b){var c=a.fnFormatNumber,d=a._iDisplayStart+1,e=a._iDisplayLength,h=a.fnRecordsDisplay(),g=-1===e;return b.replace(/_START_/g,c.call(a,d)).replace(/_END_/g,c.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,c.call(a,h)).replace(/_PAGE_/g,c.call(a,g?1:Math.ceil(d/e))).replace(/_PAGES_/g,c.call(a,g?1:Math.ceil(h/e)))}function ja(a){var b=a.iInitDisplayStart,c=a.aoColumns;var d=a.oFeatures;var e=a.bDeferLoading;if(a.bInitialised){sb(a);
pb(a);ha(a,a.aoHeader);ha(a,a.aoFooter);K(a,!0);d.bAutoWidth&&Ja(a);var h=0;for(d=c.length;h<d;h++){var g=c[h];g.sWidth&&(g.nTh.style.width=B(g.sWidth))}A(a,null,"preInit",[a]);V(a);c=D(a);if("ssp"!=c||e)"ajax"==c?va(a,[],function(c){var d=wa(a,c);for(h=0;h<d.length;h++)R(a,d[h]);a.iInitDisplayStart=b;V(a);K(a,!1);xa(a,c)},a):(K(a,!1),xa(a))}else setTimeout(function(){ja(a)},200)}function xa(a,b){a._bInitComplete=!0;(b||a.oInit.aaData)&&aa(a);A(a,null,"plugin-init",[a,b]);A(a,"aoInitComplete","init",
[a,b])}function Va(a,b){b=parseInt(b,10);a._iDisplayLength=b;Wa(a);A(a,null,"length",[a,b])}function tb(a){var b=a.oClasses,c=a.sTableId,d=a.aLengthMenu,e=f.isArray(d[0]),h=e?d[0]:d;d=e?d[1]:d;e=f("<select/>",{name:c+"_length","aria-controls":c,"class":b.sLengthSelect});for(var g=0,k=h.length;g<k;g++)e[0][g]=new Option("number"===typeof d[g]?a.fnFormatNumber(d[g]):d[g],h[g]);var l=f("<div><label/></div>").addClass(b.sLength);a.aanFeatures.l||(l[0].id=c+"_length");l.children().append(a.oLanguage.sLengthMenu.replace("_MENU_",
e[0].outerHTML));f("select",l).val(a._iDisplayLength).on("change.DT",function(b){Va(a,f(this).val());S(a)});f(a.nTable).on("length.dt.DT",function(b,c,d){a===c&&f("select",l).val(d)});return l[0]}function yb(a){var b=a.sPaginationType,c=q.ext.pager[b],d="function"===typeof c,e=function(a){S(a)};b=f("<div/>").addClass(a.oClasses.sPaging+b)[0];var h=a.aanFeatures;d||c.fnInit(a,b,e);h.p||(b.id=a.sTableId+"_paginate",a.aoDrawCallback.push({fn:function(a){if(d){var b=a._iDisplayStart,g=a._iDisplayLength,
f=a.fnRecordsDisplay(),m=-1===g;b=m?0:Math.ceil(b/g);g=m?1:Math.ceil(f/g);f=c(b,g);var p;m=0;for(p=h.p.length;m<p;m++)Ra(a,"pageButton")(a,h.p[m],m,f,b,g)}else c.fnUpdate(a,e)},sName:"pagination"}));return b}function Xa(a,b,c){var d=a._iDisplayStart,e=a._iDisplayLength,h=a.fnRecordsDisplay();0===h||-1===e?d=0:"number"===typeof b?(d=b*e,d>h&&(d=0)):"first"==b?d=0:"previous"==b?(d=0<=e?d-e:0,0>d&&(d=0)):"next"==b?d+e<h&&(d+=e):"last"==b?d=Math.floor((h-1)/e)*e:O(a,0,"Unknown paging action: "+b,5);b=
a._iDisplayStart!==d;a._iDisplayStart=d;b&&(A(a,null,"page",[a]),c&&S(a));return b}function vb(a){return f("<div/>",{id:a.aanFeatures.r?null:a.sTableId+"_processing","class":a.oClasses.sProcessing}).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0]}function K(a,b){a.oFeatures.bProcessing&&f(a.aanFeatures.r).css("display",b?"block":"none");A(a,null,"processing",[a,b])}function wb(a){var b=f(a.nTable);b.attr("role","grid");var c=a.oScroll;if(""===c.sX&&""===c.sY)return a.nTable;var d=c.sX,e=c.sY,
h=a.oClasses,g=b.children("caption"),k=g.length?g[0]._captionSide:null,l=f(b[0].cloneNode(!1)),n=f(b[0].cloneNode(!1)),m=b.children("tfoot");m.length||(m=null);l=f("<div/>",{"class":h.sScrollWrapper}).append(f("<div/>",{"class":h.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:d?d?B(d):null:"100%"}).append(f("<div/>",{"class":h.sScrollHeadInner}).css({"box-sizing":"content-box",width:c.sXInner||"100%"}).append(l.removeAttr("id").css("margin-left",0).append("top"===k?g:null).append(b.children("thead"))))).append(f("<div/>",
{"class":h.sScrollBody}).css({position:"relative",overflow:"auto",width:d?B(d):null}).append(b));m&&l.append(f("<div/>",{"class":h.sScrollFoot}).css({overflow:"hidden",border:0,width:d?d?B(d):null:"100%"}).append(f("<div/>",{"class":h.sScrollFootInner}).append(n.removeAttr("id").css("margin-left",0).append("bottom"===k?g:null).append(b.children("tfoot")))));b=l.children();var p=b[0];h=b[1];var u=m?b[2]:null;if(d)f(h).on("scroll.DT",function(a){a=this.scrollLeft;p.scrollLeft=a;m&&(u.scrollLeft=a)});
f(h).css(e&&c.bCollapse?"max-height":"height",e);a.nScrollHead=p;a.nScrollBody=h;a.nScrollFoot=u;a.aoDrawCallback.push({fn:na,sName:"scrolling"});return l[0]}function na(a){var b=a.oScroll,c=b.sX,d=b.sXInner,e=b.sY;b=b.iBarWidth;var h=f(a.nScrollHead),g=h[0].style,k=h.children("div"),l=k[0].style,n=k.children("table");k=a.nScrollBody;var m=f(k),w=k.style,u=f(a.nScrollFoot).children("div"),q=u.children("table"),t=f(a.nTHead),r=f(a.nTable),v=r[0],za=v.style,T=a.nTFoot?f(a.nTFoot):null,A=a.oBrowser,
x=A.bScrollOversize,ac=J(a.aoColumns,"nTh"),Ya=[],y=[],z=[],C=[],G,H=function(a){a=a.style;a.paddingTop="0";a.paddingBottom="0";a.borderTopWidth="0";a.borderBottomWidth="0";a.height=0};var D=k.scrollHeight>k.clientHeight;if(a.scrollBarVis!==D&&a.scrollBarVis!==p)a.scrollBarVis=D,aa(a);else{a.scrollBarVis=D;r.children("thead, tfoot").remove();if(T){var E=T.clone().prependTo(r);var F=T.find("tr");E=E.find("tr")}var I=t.clone().prependTo(r);t=t.find("tr");D=I.find("tr");I.find("th, td").removeAttr("tabindex");
c||(w.width="100%",h[0].style.width="100%");f.each(ua(a,I),function(b,c){G=ba(a,b);c.style.width=a.aoColumns[G].sWidth});T&&N(function(a){a.style.width=""},E);h=r.outerWidth();""===c?(za.width="100%",x&&(r.find("tbody").height()>k.offsetHeight||"scroll"==m.css("overflow-y"))&&(za.width=B(r.outerWidth()-b)),h=r.outerWidth()):""!==d&&(za.width=B(d),h=r.outerWidth());N(H,D);N(function(a){z.push(a.innerHTML);Ya.push(B(f(a).css("width")))},D);N(function(a,b){-1!==f.inArray(a,ac)&&(a.style.width=Ya[b])},
t);f(D).height(0);T&&(N(H,E),N(function(a){C.push(a.innerHTML);y.push(B(f(a).css("width")))},E),N(function(a,b){a.style.width=y[b]},F),f(E).height(0));N(function(a,b){a.innerHTML='<div class="dataTables_sizing">'+z[b]+"</div>";a.childNodes[0].style.height="0";a.childNodes[0].style.overflow="hidden";a.style.width=Ya[b]},D);T&&N(function(a,b){a.innerHTML='<div class="dataTables_sizing">'+C[b]+"</div>";a.childNodes[0].style.height="0";a.childNodes[0].style.overflow="hidden";a.style.width=y[b]},E);r.outerWidth()<
h?(F=k.scrollHeight>k.offsetHeight||"scroll"==m.css("overflow-y")?h+b:h,x&&(k.scrollHeight>k.offsetHeight||"scroll"==m.css("overflow-y"))&&(za.width=B(F-b)),""!==c&&""===d||O(a,1,"Possible column misalignment",6)):F="100%";w.width=B(F);g.width=B(F);T&&(a.nScrollFoot.style.width=B(F));!e&&x&&(w.height=B(v.offsetHeight+b));c=r.outerWidth();n[0].style.width=B(c);l.width=B(c);d=r.height()>k.clientHeight||"scroll"==m.css("overflow-y");e="padding"+(A.bScrollbarLeft?"Left":"Right");l[e]=d?b+"px":"0px";T&&
(q[0].style.width=B(c),u[0].style.width=B(c),u[0].style[e]=d?b+"px":"0px");r.children("colgroup").insertBefore(r.children("thead"));m.trigger("scroll");!a.bSorted&&!a.bFiltered||a._drawHold||(k.scrollTop=0)}}function N(a,b,c){for(var d=0,e=0,h=b.length,g,k;e<h;){g=b[e].firstChild;for(k=c?c[e].firstChild:null;g;)1===g.nodeType&&(c?a(g,k,d):a(g,d),d++),g=g.nextSibling,k=c?k.nextSibling:null;e++}}function Ja(a){var b=a.nTable,c=a.aoColumns,d=a.oScroll,e=d.sY,h=d.sX,g=d.sXInner,k=c.length,l=oa(a,"bVisible"),
n=f("th",a.nTHead),m=b.getAttribute("width"),p=b.parentNode,u=!1,q,t=a.oBrowser;d=t.bScrollOversize;(q=b.style.width)&&-1!==q.indexOf("%")&&(m=q);for(q=0;q<l.length;q++){var r=c[l[q]];null!==r.sWidth&&(r.sWidth=Jb(r.sWidthOrig,p),u=!0)}if(d||!u&&!h&&!e&&k==W(a)&&k==n.length)for(q=0;q<k;q++)l=ba(a,q),null!==l&&(c[l].sWidth=B(n.eq(q).width()));else{k=f(b).clone().css("visibility","hidden").removeAttr("id");k.find("tbody tr").remove();var v=f("<tr/>").appendTo(k.find("tbody"));k.find("thead, tfoot").remove();
k.append(f(a.nTHead).clone()).append(f(a.nTFoot).clone());k.find("tfoot th, tfoot td").css("width","");n=ua(a,k.find("thead")[0]);for(q=0;q<l.length;q++)r=c[l[q]],n[q].style.width=null!==r.sWidthOrig&&""!==r.sWidthOrig?B(r.sWidthOrig):"",r.sWidthOrig&&h&&f(n[q]).append(f("<div/>").css({width:r.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(a.aoData.length)for(q=0;q<l.length;q++)u=l[q],r=c[u],f(Kb(a,u)).clone(!1).append(r.sContentPadding).appendTo(v);f("[name]",k).removeAttr("name");r=f("<div/>").css(h||
e?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(k).appendTo(p);h&&g?k.width(g):h?(k.css("width","auto"),k.removeAttr("width"),k.width()<p.clientWidth&&m&&k.width(p.clientWidth)):e?k.width(p.clientWidth):m&&k.width(m);for(q=e=0;q<l.length;q++)p=f(n[q]),g=p.outerWidth()-p.width(),p=t.bBounding?Math.ceil(n[q].getBoundingClientRect().width):p.outerWidth(),e+=p,c[l[q]].sWidth=B(p-g);b.style.width=B(e);r.remove()}m&&(b.style.width=B(m));!m&&!h||a._reszEvt||(b=function(){f(z).on("resize.DT-"+
a.sInstance,Sa(function(){aa(a)}))},d?setTimeout(b,1E3):b(),a._reszEvt=!0)}function Jb(a,b){if(!a)return 0;a=f("<div/>").css("width",B(a)).appendTo(b||y.body);b=a[0].offsetWidth;a.remove();return b}function Kb(a,b){var c=Lb(a,b);if(0>c)return null;var d=a.aoData[c];return d.nTr?d.anCells[b]:f("<td/>").html(I(a,c,b,"display"))[0]}function Lb(a,b){for(var c,d=-1,e=-1,h=0,g=a.aoData.length;h<g;h++)c=I(a,h,b,"display")+"",c=c.replace(bc,""),c=c.replace(/&nbsp;/g," "),c.length>d&&(d=c.length,e=h);return e}
function B(a){return null===a?"0px":"number"==typeof a?0>a?"0px":a+"px":a.match(/\d$/)?a+"px":a}function Y(a){var b=[],c=a.aoColumns;var d=a.aaSortingFixed;var e=f.isPlainObject(d);var h=[];var g=function(a){a.length&&!f.isArray(a[0])?h.push(a):f.merge(h,a)};f.isArray(d)&&g(d);e&&d.pre&&g(d.pre);g(a.aaSorting);e&&d.post&&g(d.post);for(a=0;a<h.length;a++){var k=h[a][0];g=c[k].aDataSort;d=0;for(e=g.length;d<e;d++){var l=g[d];var n=c[l].sType||"string";h[a]._idx===p&&(h[a]._idx=f.inArray(h[a][1],c[l].asSorting));
b.push({src:k,col:l,dir:h[a][1],index:h[a]._idx,type:n,formatter:q.ext.type.order[n+"-pre"]})}}return b}function rb(a){var b,c=[],d=q.ext.type.order,e=a.aoData,h=0,g=a.aiDisplayMaster;Ka(a);var k=Y(a);var f=0;for(b=k.length;f<b;f++){var n=k[f];n.formatter&&h++;Mb(a,n.col)}if("ssp"!=D(a)&&0!==k.length){f=0;for(b=g.length;f<b;f++)c[g[f]]=f;h===k.length?g.sort(function(a,b){var d,h=k.length,g=e[a]._aSortData,f=e[b]._aSortData;for(d=0;d<h;d++){var l=k[d];var m=g[l.col];var n=f[l.col];m=m<n?-1:m>n?1:0;
if(0!==m)return"asc"===l.dir?m:-m}m=c[a];n=c[b];return m<n?-1:m>n?1:0}):g.sort(function(a,b){var h,g=k.length,f=e[a]._aSortData,l=e[b]._aSortData;for(h=0;h<g;h++){var m=k[h];var n=f[m.col];var p=l[m.col];m=d[m.type+"-"+m.dir]||d["string-"+m.dir];n=m(n,p);if(0!==n)return n}n=c[a];p=c[b];return n<p?-1:n>p?1:0})}a.bSorted=!0}function Nb(a){var b=a.aoColumns,c=Y(a);a=a.oLanguage.oAria;for(var d=0,e=b.length;d<e;d++){var h=b[d];var g=h.asSorting;var k=h.sTitle.replace(/<.*?>/g,"");var f=h.nTh;f.removeAttribute("aria-sort");
h.bSortable&&(0<c.length&&c[0].col==d?(f.setAttribute("aria-sort","asc"==c[0].dir?"ascending":"descending"),h=g[c[0].index+1]||g[0]):h=g[0],k+="asc"===h?a.sSortAscending:a.sSortDescending);f.setAttribute("aria-label",k)}}function Za(a,b,c,d){var e=a.aaSorting,h=a.aoColumns[b].asSorting,g=function(a,b){var c=a._idx;c===p&&(c=f.inArray(a[1],h));return c+1<h.length?c+1:b?null:0};"number"===typeof e[0]&&(e=a.aaSorting=[e]);c&&a.oFeatures.bSortMulti?(c=f.inArray(b,J(e,"0")),-1!==c?(b=g(e[c],!0),null===
b&&1===e.length&&(b=0),null===b?e.splice(c,1):(e[c][1]=h[b],e[c]._idx=b)):(e.push([b,h[0],0]),e[e.length-1]._idx=0)):e.length&&e[0][0]==b?(b=g(e[0]),e.length=1,e[0][1]=h[b],e[0]._idx=b):(e.length=0,e.push([b,h[0]]),e[0]._idx=0);V(a);"function"==typeof d&&d(a)}function Qa(a,b,c,d){var e=a.aoColumns[c];$a(b,{},function(b){!1!==e.bSortable&&(a.oFeatures.bProcessing?(K(a,!0),setTimeout(function(){Za(a,c,b.shiftKey,d);"ssp"!==D(a)&&K(a,!1)},0)):Za(a,c,b.shiftKey,d))})}function Aa(a){var b=a.aLastSort,
c=a.oClasses.sSortColumn,d=Y(a),e=a.oFeatures,h;if(e.bSort&&e.bSortClasses){e=0;for(h=b.length;e<h;e++){var g=b[e].src;f(J(a.aoData,"anCells",g)).removeClass(c+(2>e?e+1:3))}e=0;for(h=d.length;e<h;e++)g=d[e].src,f(J(a.aoData,"anCells",g)).addClass(c+(2>e?e+1:3))}a.aLastSort=d}function Mb(a,b){var c=a.aoColumns[b],d=q.ext.order[c.sSortDataType],e;d&&(e=d.call(a.oInstance,a,b,ca(a,b)));for(var h,g=q.ext.type.order[c.sType+"-pre"],k=0,f=a.aoData.length;k<f;k++)if(c=a.aoData[k],c._aSortData||(c._aSortData=
[]),!c._aSortData[b]||d)h=d?e[k]:I(a,k,b,"sort"),c._aSortData[b]=g?g(h):h}function Ba(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b={time:+new Date,start:a._iDisplayStart,length:a._iDisplayLength,order:f.extend(!0,[],a.aaSorting),search:Fb(a.oPreviousSearch),columns:f.map(a.aoColumns,function(b,d){return{visible:b.bVisible,search:Fb(a.aoPreSearchCols[d])}})};A(a,"aoStateSaveParams","stateSaveParams",[a,b]);a.oSavedState=b;a.fnStateSaveCallback.call(a.oInstance,a,b)}}function Ob(a,b,c){var d,
e,h=a.aoColumns;b=function(b){if(b&&b.time){var g=A(a,"aoStateLoadParams","stateLoadParams",[a,b]);if(-1===f.inArray(!1,g)&&(g=a.iStateDuration,!(0<g&&b.time<+new Date-1E3*g||b.columns&&h.length!==b.columns.length))){a.oLoadedState=f.extend(!0,{},b);b.start!==p&&(a._iDisplayStart=b.start,a.iInitDisplayStart=b.start);b.length!==p&&(a._iDisplayLength=b.length);b.order!==p&&(a.aaSorting=[],f.each(b.order,function(b,c){a.aaSorting.push(c[0]>=h.length?[0,c[1]]:c)}));b.search!==p&&f.extend(a.oPreviousSearch,
Gb(b.search));if(b.columns)for(d=0,e=b.columns.length;d<e;d++)g=b.columns[d],g.visible!==p&&(h[d].bVisible=g.visible),g.search!==p&&f.extend(a.aoPreSearchCols[d],Gb(g.search));A(a,"aoStateLoaded","stateLoaded",[a,b])}}c()};if(a.oFeatures.bStateSave){var g=a.fnStateLoadCallback.call(a.oInstance,a,b);g!==p&&b(g)}else c()}function Ca(a){var b=q.settings;a=f.inArray(a,J(b,"nTable"));return-1!==a?b[a]:null}function O(a,b,c,d){c="DataTables warning: "+(a?"table id="+a.sTableId+" - ":"")+c;d&&(c+=". For more information about this error, please see http://datatables.net/tn/"+
d);if(b)z.console&&console.log&&console.log(c);else if(b=q.ext,b=b.sErrMode||b.errMode,a&&A(a,null,"error",[a,d,c]),"alert"==b)alert(c);else{if("throw"==b)throw Error(c);"function"==typeof b&&b(a,d,c)}}function M(a,b,c,d){f.isArray(c)?f.each(c,function(c,d){f.isArray(d)?M(a,b,d[0],d[1]):M(a,b,d)}):(d===p&&(d=c),b[c]!==p&&(a[d]=b[c]))}function ab(a,b,c){var d;for(d in b)if(b.hasOwnProperty(d)){var e=b[d];f.isPlainObject(e)?(f.isPlainObject(a[d])||(a[d]={}),f.extend(!0,a[d],e)):c&&"data"!==d&&"aaData"!==
d&&f.isArray(e)?a[d]=e.slice():a[d]=e}return a}function $a(a,b,c){f(a).on("click.DT",b,function(b){f(a).blur();c(b)}).on("keypress.DT",b,function(a){13===a.which&&(a.preventDefault(),c(a))}).on("selectstart.DT",function(){return!1})}function E(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function A(a,b,c,d){var e=[];b&&(e=f.map(a[b].slice().reverse(),function(b,c){return b.fn.apply(a.oInstance,d)}));null!==c&&(b=f.Event(c+".dt"),f(a.nTable).trigger(b,d),e.push(b.result));return e}function Wa(a){var b=a._iDisplayStart,
c=a.fnDisplayEnd(),d=a._iDisplayLength;b>=c&&(b=c-d);b-=b%d;if(-1===d||0>b)b=0;a._iDisplayStart=b}function Ra(a,b){a=a.renderer;var c=q.ext.renderer[b];return f.isPlainObject(a)&&a[b]?c[a[b]]||c._:"string"===typeof a?c[a]||c._:c._}function D(a){return a.oFeatures.bServerSide?"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function ka(a,b){var c=Pb.numbers_length,d=Math.floor(c/2);b<=c?a=Z(0,b):a<=d?(a=Z(0,c-2),a.push("ellipsis"),a.push(b-1)):(a>=b-1-d?a=Z(b-(c-2),b):(a=Z(a-d+2,a+d-1),a.push("ellipsis"),
a.push(b-1)),a.splice(0,0,"ellipsis"),a.splice(0,0,0));a.DT_el="span";return a}function Ha(a){f.each({num:function(b){return Da(b,a)},"num-fmt":function(b){return Da(b,a,bb)},"html-num":function(b){return Da(b,a,Ea)},"html-num-fmt":function(b){return Da(b,a,Ea,bb)}},function(b,c){C.type.order[b+a+"-pre"]=c;b.match(/^html\-/)&&(C.type.search[b+a]=C.type.search.html)})}function Qb(a){return function(){var b=[Ca(this[q.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return q.ext.internal[a].apply(this,
b)}}var q=function(a){this.$=function(a,b){return this.api(!0).$(a,b)};this._=function(a,b){return this.api(!0).rows(a,b).data()};this.api=function(a){return a?new v(Ca(this[C.iApiIndex])):new v(this)};this.fnAddData=function(a,b){var c=this.api(!0);a=f.isArray(a)&&(f.isArray(a[0])||f.isPlainObject(a[0]))?c.rows.add(a):c.row.add(a);(b===p||b)&&c.draw();return a.flatten().toArray()};this.fnAdjustColumnSizing=function(a){var b=this.api(!0).columns.adjust(),c=b.settings()[0],d=c.oScroll;a===p||a?b.draw(!1):
(""!==d.sX||""!==d.sY)&&na(c)};this.fnClearTable=function(a){var b=this.api(!0).clear();(a===p||a)&&b.draw()};this.fnClose=function(a){this.api(!0).row(a).child.hide()};this.fnDeleteRow=function(a,b,c){var d=this.api(!0);a=d.rows(a);var e=a.settings()[0],h=e.aoData[a[0][0]];a.remove();b&&b.call(this,e,h);(c===p||c)&&d.draw();return h};this.fnDestroy=function(a){this.api(!0).destroy(a)};this.fnDraw=function(a){this.api(!0).draw(a)};this.fnFilter=function(a,b,c,d,e,f){e=this.api(!0);null===b||b===p?
e.search(a,c,d,f):e.column(b).search(a,c,d,f);e.draw()};this.fnGetData=function(a,b){var c=this.api(!0);if(a!==p){var d=a.nodeName?a.nodeName.toLowerCase():"";return b!==p||"td"==d||"th"==d?c.cell(a,b).data():c.row(a).data()||null}return c.data().toArray()};this.fnGetNodes=function(a){var b=this.api(!0);return a!==p?b.row(a).node():b.rows().nodes().flatten().toArray()};this.fnGetPosition=function(a){var b=this.api(!0),c=a.nodeName.toUpperCase();return"TR"==c?b.row(a).index():"TD"==c||"TH"==c?(a=b.cell(a).index(),
[a.row,a.columnVisible,a.column]):null};this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()};this.fnOpen=function(a,b,c){return this.api(!0).row(a).child(b,c).show().child()[0]};this.fnPageChange=function(a,b){a=this.api(!0).page(a);(b===p||b)&&a.draw(!1)};this.fnSetColumnVis=function(a,b,c){a=this.api(!0).column(a).visible(b);(c===p||c)&&a.columns.adjust().draw()};this.fnSettings=function(){return Ca(this[C.iApiIndex])};this.fnSort=function(a){this.api(!0).order(a).draw()};this.fnSortListener=
function(a,b,c){this.api(!0).order.listener(a,b,c)};this.fnUpdate=function(a,b,c,d,e){var h=this.api(!0);c===p||null===c?h.row(b).data(a):h.cell(b,c).data(a);(e===p||e)&&h.columns.adjust();(d===p||d)&&h.draw();return 0};this.fnVersionCheck=C.fnVersionCheck;var b=this,c=a===p,d=this.length;c&&(a={});this.oApi=this.internal=C.internal;for(var e in q.ext.internal)e&&(this[e]=Qb(e));this.each(function(){var e={},g=1<d?ab(e,a,!0):a,k=0,l;e=this.getAttribute("id");var n=!1,m=q.defaults,w=f(this);if("table"!=
this.nodeName.toLowerCase())O(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{jb(m);kb(m.column);L(m,m,!0);L(m.column,m.column,!0);L(m,f.extend(g,w.data()),!0);var u=q.settings;k=0;for(l=u.length;k<l;k++){var t=u[k];if(t.nTable==this||t.nTHead&&t.nTHead.parentNode==this||t.nTFoot&&t.nTFoot.parentNode==this){var v=g.bRetrieve!==p?g.bRetrieve:m.bRetrieve;if(c||v)return t.oInstance;if(g.bDestroy!==p?g.bDestroy:m.bDestroy){t.oInstance.fnDestroy();break}else{O(t,0,"Cannot reinitialise DataTable",
3);return}}if(t.sTableId==this.id){u.splice(k,1);break}}if(null===e||""===e)this.id=e="DataTables_Table_"+q.ext._unique++;var r=f.extend(!0,{},q.models.oSettings,{sDestroyWidth:w[0].style.width,sInstance:e,sTableId:e});r.nTable=this;r.oApi=b.internal;r.oInit=g;u.push(r);r.oInstance=1===b.length?b:w.dataTable();jb(g);Ga(g.oLanguage);g.aLengthMenu&&!g.iDisplayLength&&(g.iDisplayLength=f.isArray(g.aLengthMenu[0])?g.aLengthMenu[0][0]:g.aLengthMenu[0]);g=ab(f.extend(!0,{},m),g);M(r.oFeatures,g,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" "));
M(r,g,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"]]);M(r.oScroll,g,[["sScrollX","sX"],["sScrollXInner","sXInner"],
["sScrollY","sY"],["bScrollCollapse","bCollapse"]]);M(r.oLanguage,g,"fnInfoCallback");E(r,"aoDrawCallback",g.fnDrawCallback,"user");E(r,"aoServerParams",g.fnServerParams,"user");E(r,"aoStateSaveParams",g.fnStateSaveParams,"user");E(r,"aoStateLoadParams",g.fnStateLoadParams,"user");E(r,"aoStateLoaded",g.fnStateLoaded,"user");E(r,"aoRowCallback",g.fnRowCallback,"user");E(r,"aoRowCreatedCallback",g.fnCreatedRow,"user");E(r,"aoHeaderCallback",g.fnHeaderCallback,"user");E(r,"aoFooterCallback",g.fnFooterCallback,
"user");E(r,"aoInitComplete",g.fnInitComplete,"user");E(r,"aoPreDrawCallback",g.fnPreDrawCallback,"user");r.rowIdFn=U(g.rowId);lb(r);var x=r.oClasses;f.extend(x,q.ext.classes,g.oClasses);w.addClass(x.sTable);r.iInitDisplayStart===p&&(r.iInitDisplayStart=g.iDisplayStart,r._iDisplayStart=g.iDisplayStart);null!==g.iDeferLoading&&(r.bDeferLoading=!0,e=f.isArray(g.iDeferLoading),r._iRecordsDisplay=e?g.iDeferLoading[0]:g.iDeferLoading,r._iRecordsTotal=e?g.iDeferLoading[1]:g.iDeferLoading);var y=r.oLanguage;
f.extend(!0,y,g.oLanguage);y.sUrl&&(f.ajax({dataType:"json",url:y.sUrl,success:function(a){Ga(a);L(m.oLanguage,a);f.extend(!0,y,a);ja(r)},error:function(){ja(r)}}),n=!0);null===g.asStripeClasses&&(r.asStripeClasses=[x.sStripeOdd,x.sStripeEven]);e=r.asStripeClasses;var z=w.children("tbody").find("tr").eq(0);-1!==f.inArray(!0,f.map(e,function(a,b){return z.hasClass(a)}))&&(f("tbody tr",this).removeClass(e.join(" ")),r.asDestroyStripes=e.slice());e=[];u=this.getElementsByTagName("thead");0!==u.length&&
(fa(r.aoHeader,u[0]),e=ua(r));if(null===g.aoColumns)for(u=[],k=0,l=e.length;k<l;k++)u.push(null);else u=g.aoColumns;k=0;for(l=u.length;k<l;k++)Ia(r,e?e[k]:null);nb(r,g.aoColumnDefs,u,function(a,b){ma(r,a,b)});if(z.length){var B=function(a,b){return null!==a.getAttribute("data-"+b)?b:null};f(z[0]).children("th, td").each(function(a,b){var c=r.aoColumns[a];if(c.mData===a){var d=B(b,"sort")||B(b,"order");b=B(b,"filter")||B(b,"search");if(null!==d||null!==b)c.mData={_:a+".display",sort:null!==d?a+".@data-"+
d:p,type:null!==d?a+".@data-"+d:p,filter:null!==b?a+".@data-"+b:p},ma(r,a)}})}var C=r.oFeatures;e=function(){if(g.aaSorting===p){var a=r.aaSorting;k=0;for(l=a.length;k<l;k++)a[k][1]=r.aoColumns[k].asSorting[0]}Aa(r);C.bSort&&E(r,"aoDrawCallback",function(){if(r.bSorted){var a=Y(r),b={};f.each(a,function(a,c){b[c.src]=c.dir});A(r,null,"order",[r,a,b]);Nb(r)}});E(r,"aoDrawCallback",function(){(r.bSorted||"ssp"===D(r)||C.bDeferRender)&&Aa(r)},"sc");a=w.children("caption").each(function(){this._captionSide=
f(this).css("caption-side")});var b=w.children("thead");0===b.length&&(b=f("<thead/>").appendTo(w));r.nTHead=b[0];b=w.children("tbody");0===b.length&&(b=f("<tbody/>").appendTo(w));r.nTBody=b[0];b=w.children("tfoot");0===b.length&&0<a.length&&(""!==r.oScroll.sX||""!==r.oScroll.sY)&&(b=f("<tfoot/>").appendTo(w));0===b.length||0===b.children().length?w.addClass(x.sNoFooter):0<b.length&&(r.nTFoot=b[0],fa(r.aoFooter,r.nTFoot));if(g.aaData)for(k=0;k<g.aaData.length;k++)R(r,g.aaData[k]);else(r.bDeferLoading||
"dom"==D(r))&&pa(r,f(r.nTBody).children("tr"));r.aiDisplay=r.aiDisplayMaster.slice();r.bInitialised=!0;!1===n&&ja(r)};g.bStateSave?(C.bStateSave=!0,E(r,"aoDrawCallback",Ba,"state_save"),Ob(r,g,e)):e()}});b=null;return this},C,t,x,cb={},Rb=/[\r\n\u2028]/g,Ea=/<.*?>/g,cc=/^\d{2,4}[\.\/\-]\d{1,2}[\.\/\-]\d{1,2}([T ]{1}\d{1,2}[:\.]\d{2}([\.:]\d{2})?)?$/,dc=/(\/|\.|\*|\+|\?|\||\(|\)|\[|\]|\{|\}|\\|\$|\^|\-)/g,bb=/[',$£€¥%\u2009\u202F\u20BD\u20a9\u20BArfkɃΞ]/gi,P=function(a){return a&&!0!==a&&"-"!==a?!1:
!0},Sb=function(a){var b=parseInt(a,10);return!isNaN(b)&&isFinite(a)?b:null},Tb=function(a,b){cb[b]||(cb[b]=new RegExp(Ua(b),"g"));return"string"===typeof a&&"."!==b?a.replace(/\./g,"").replace(cb[b],"."):a},db=function(a,b,c){var d="string"===typeof a;if(P(a))return!0;b&&d&&(a=Tb(a,b));c&&d&&(a=a.replace(bb,""));return!isNaN(parseFloat(a))&&isFinite(a)},Ub=function(a,b,c){return P(a)?!0:P(a)||"string"===typeof a?db(a.replace(Ea,""),b,c)?!0:null:null},J=function(a,b,c){var d=[],e=0,h=a.length;if(c!==
p)for(;e<h;e++)a[e]&&a[e][b]&&d.push(a[e][b][c]);else for(;e<h;e++)a[e]&&d.push(a[e][b]);return d},la=function(a,b,c,d){var e=[],h=0,g=b.length;if(d!==p)for(;h<g;h++)a[b[h]][c]&&e.push(a[b[h]][c][d]);else for(;h<g;h++)e.push(a[b[h]][c]);return e},Z=function(a,b){var c=[];if(b===p){b=0;var d=a}else d=b,b=a;for(a=b;a<d;a++)c.push(a);return c},Vb=function(a){for(var b=[],c=0,d=a.length;c<d;c++)a[c]&&b.push(a[c]);return b},ta=function(a){a:{if(!(2>a.length)){var b=a.slice().sort();for(var c=b[0],d=1,
e=b.length;d<e;d++){if(b[d]===c){b=!1;break a}c=b[d]}}b=!0}if(b)return a.slice();b=[];e=a.length;var h,g=0;d=0;a:for(;d<e;d++){c=a[d];for(h=0;h<g;h++)if(b[h]===c)continue a;b.push(c);g++}return b};q.util={throttle:function(a,b){var c=b!==p?b:200,d,e;return function(){var b=this,g=+new Date,f=arguments;d&&g<d+c?(clearTimeout(e),e=setTimeout(function(){d=p;a.apply(b,f)},c)):(d=g,a.apply(b,f))}},escapeRegex:function(a){return a.replace(dc,"\\$1")}};var F=function(a,b,c){a[b]!==p&&(a[c]=a[b])},da=/\[.*?\]$/,
X=/\(\)$/,Ua=q.util.escapeRegex,ya=f("<div>")[0],$b=ya.textContent!==p,bc=/<.*?>/g,Sa=q.util.throttle,Wb=[],G=Array.prototype,ec=function(a){var b,c=q.settings,d=f.map(c,function(a,b){return a.nTable});if(a){if(a.nTable&&a.oApi)return[a];if(a.nodeName&&"table"===a.nodeName.toLowerCase()){var e=f.inArray(a,d);return-1!==e?[c[e]]:null}if(a&&"function"===typeof a.settings)return a.settings().toArray();"string"===typeof a?b=f(a):a instanceof f&&(b=a)}else return[];if(b)return b.map(function(a){e=f.inArray(this,
d);return-1!==e?c[e]:null}).toArray()};var v=function(a,b){if(!(this instanceof v))return new v(a,b);var c=[],d=function(a){(a=ec(a))&&c.push.apply(c,a)};if(f.isArray(a))for(var e=0,h=a.length;e<h;e++)d(a[e]);else d(a);this.context=ta(c);b&&f.merge(this,b);this.selector={rows:null,cols:null,opts:null};v.extend(this,this,Wb)};q.Api=v;f.extend(v.prototype,{any:function(){return 0!==this.count()},concat:G.concat,context:[],count:function(){return this.flatten().length},each:function(a){for(var b=0,c=
this.length;b<c;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=this.context;return b.length>a?new v(b[a],this[a]):null},filter:function(a){var b=[];if(G.filter)b=G.filter.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new v(this.context,b)},flatten:function(){var a=[];return new v(this.context,a.concat.apply(a,this.toArray()))},join:G.join,indexOf:G.indexOf||function(a,b){b=b||0;for(var c=this.length;b<c;b++)if(this[b]===
a)return b;return-1},iterator:function(a,b,c,d){var e=[],h,g,f=this.context,l,n=this.selector;"string"===typeof a&&(d=c,c=b,b=a,a=!1);var m=0;for(h=f.length;m<h;m++){var q=new v(f[m]);if("table"===b){var u=c.call(q,f[m],m);u!==p&&e.push(u)}else if("columns"===b||"rows"===b)u=c.call(q,f[m],this[m],m),u!==p&&e.push(u);else if("column"===b||"column-rows"===b||"row"===b||"cell"===b){var t=this[m];"column-rows"===b&&(l=Fa(f[m],n.opts));var x=0;for(g=t.length;x<g;x++)u=t[x],u="cell"===b?c.call(q,f[m],u.row,
u.column,m,x):c.call(q,f[m],u,m,x,l),u!==p&&e.push(u)}}return e.length||d?(a=new v(f,a?e.concat.apply([],e):e),b=a.selector,b.rows=n.rows,b.cols=n.cols,b.opts=n.opts,a):this},lastIndexOf:G.lastIndexOf||function(a,b){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(G.map)b=G.map.call(this,a,this);else for(var c=0,d=this.length;c<d;c++)b.push(a.call(this,this[c],c));return new v(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},
pop:G.pop,push:G.push,reduce:G.reduce||function(a,b){return mb(this,a,b,0,this.length,1)},reduceRight:G.reduceRight||function(a,b){return mb(this,a,b,this.length-1,-1,-1)},reverse:G.reverse,selector:null,shift:G.shift,slice:function(){return new v(this.context,this)},sort:G.sort,splice:G.splice,toArray:function(){return G.slice.call(this)},to$:function(){return f(this)},toJQuery:function(){return f(this)},unique:function(){return new v(this.context,ta(this))},unshift:G.unshift});v.extend=function(a,
b,c){if(c.length&&b&&(b instanceof v||b.__dt_wrapper)){var d,e=function(a,b,c){return function(){var d=b.apply(a,arguments);v.extend(d,d,c.methodExt);return d}};var h=0;for(d=c.length;h<d;h++){var g=c[h];b[g.name]="function"===g.type?e(a,g.val,g):"object"===g.type?{}:g.val;b[g.name].__dt_wrapper=!0;v.extend(a,b[g.name],g.propExt)}}};v.register=t=function(a,b){if(f.isArray(a))for(var c=0,d=a.length;c<d;c++)v.register(a[c],b);else{d=a.split(".");var e=Wb,h;a=0;for(c=d.length;a<c;a++){var g=(h=-1!==
d[a].indexOf("()"))?d[a].replace("()",""):d[a];a:{var k=0;for(var l=e.length;k<l;k++)if(e[k].name===g){k=e[k];break a}k=null}k||(k={name:g,val:{},methodExt:[],propExt:[],type:"object"},e.push(k));a===c-1?(k.val=b,k.type="function"===typeof b?"function":f.isPlainObject(b)?"object":"other"):e=h?k.methodExt:k.propExt}}};v.registerPlural=x=function(a,b,c){v.register(a,c);v.register(b,function(){var a=c.apply(this,arguments);return a===this?this:a instanceof v?a.length?f.isArray(a[0])?new v(a.context,
a[0]):a[0]:p:a})};var fc=function(a,b){if("number"===typeof a)return[b[a]];var c=f.map(b,function(a,b){return a.nTable});return f(c).filter(a).map(function(a){a=f.inArray(this,c);return b[a]}).toArray()};t("tables()",function(a){return a?new v(fc(a,this.context)):this});t("table()",function(a){a=this.tables(a);var b=a.context;return b.length?new v(b[0]):a});x("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable},1)});x("tables().body()","table().body()",
function(){return this.iterator("table",function(a){return a.nTBody},1)});x("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead},1)});x("tables().footer()","table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot},1)});x("tables().containers()","table().container()",function(){return this.iterator("table",function(a){return a.nTableWrapper},1)});t("draw()",function(a){return this.iterator("table",function(b){"page"===
a?S(b):("string"===typeof a&&(a="full-hold"===a?!1:!0),V(b,!1===a))})});t("page()",function(a){return a===p?this.page.info().page:this.iterator("table",function(b){Xa(b,a)})});t("page.info()",function(a){if(0===this.context.length)return p;a=this.context[0];var b=a._iDisplayStart,c=a.oFeatures.bPaginate?a._iDisplayLength:-1,d=a.fnRecordsDisplay(),e=-1===c;return{page:e?0:Math.floor(b/c),pages:e?1:Math.ceil(d/c),start:b,end:a.fnDisplayEnd(),length:c,recordsTotal:a.fnRecordsTotal(),recordsDisplay:d,
serverSide:"ssp"===D(a)}});t("page.len()",function(a){return a===p?0!==this.context.length?this.context[0]._iDisplayLength:p:this.iterator("table",function(b){Va(b,a)})});var Xb=function(a,b,c){if(c){var d=new v(a);d.one("draw",function(){c(d.ajax.json())})}if("ssp"==D(a))V(a,b);else{K(a,!0);var e=a.jqXHR;e&&4!==e.readyState&&e.abort();va(a,[],function(c){qa(a);c=wa(a,c);for(var d=0,e=c.length;d<e;d++)R(a,c[d]);V(a,b);K(a,!1)})}};t("ajax.json()",function(){var a=this.context;if(0<a.length)return a[0].json});
t("ajax.params()",function(){var a=this.context;if(0<a.length)return a[0].oAjaxData});t("ajax.reload()",function(a,b){return this.iterator("table",function(c){Xb(c,!1===b,a)})});t("ajax.url()",function(a){var b=this.context;if(a===p){if(0===b.length)return p;b=b[0];return b.ajax?f.isPlainObject(b.ajax)?b.ajax.url:b.ajax:b.sAjaxSource}return this.iterator("table",function(b){f.isPlainObject(b.ajax)?b.ajax.url=a:b.ajax=a})});t("ajax.url().load()",function(a,b){return this.iterator("table",function(c){Xb(c,
!1===b,a)})});var eb=function(a,b,c,d,e){var h=[],g,k,l;var n=typeof b;b&&"string"!==n&&"function"!==n&&b.length!==p||(b=[b]);n=0;for(k=b.length;n<k;n++){var m=b[n]&&b[n].split&&!b[n].match(/[\[\(:]/)?b[n].split(","):[b[n]];var q=0;for(l=m.length;q<l;q++)(g=c("string"===typeof m[q]?f.trim(m[q]):m[q]))&&g.length&&(h=h.concat(g))}a=C.selector[a];if(a.length)for(n=0,k=a.length;n<k;n++)h=a[n](d,e,h);return ta(h)},fb=function(a){a||(a={});a.filter&&a.search===p&&(a.search=a.filter);return f.extend({search:"none",
order:"current",page:"all"},a)},gb=function(a){for(var b=0,c=a.length;b<c;b++)if(0<a[b].length)return a[0]=a[b],a[0].length=1,a.length=1,a.context=[a.context[b]],a;a.length=0;return a},Fa=function(a,b){var c=[],d=a.aiDisplay;var e=a.aiDisplayMaster;var h=b.search;var g=b.order;b=b.page;if("ssp"==D(a))return"removed"===h?[]:Z(0,e.length);if("current"==b)for(g=a._iDisplayStart,a=a.fnDisplayEnd();g<a;g++)c.push(d[g]);else if("current"==g||"applied"==g)if("none"==h)c=e.slice();else if("applied"==h)c=
d.slice();else{if("removed"==h){var k={};g=0;for(a=d.length;g<a;g++)k[d[g]]=null;c=f.map(e,function(a){return k.hasOwnProperty(a)?null:a})}}else if("index"==g||"original"==g)for(g=0,a=a.aoData.length;g<a;g++)"none"==h?c.push(g):(e=f.inArray(g,d),(-1===e&&"removed"==h||0<=e&&"applied"==h)&&c.push(g));return c},gc=function(a,b,c){var d;return eb("row",b,function(b){var e=Sb(b),g=a.aoData;if(null!==e&&!c)return[e];d||(d=Fa(a,c));if(null!==e&&-1!==f.inArray(e,d))return[e];if(null===b||b===p||""===b)return d;
if("function"===typeof b)return f.map(d,function(a){var c=g[a];return b(a,c._aData,c.nTr)?a:null});if(b.nodeName){e=b._DT_RowIndex;var k=b._DT_CellIndex;if(e!==p)return g[e]&&g[e].nTr===b?[e]:[];if(k)return g[k.row]&&g[k.row].nTr===b.parentNode?[k.row]:[];e=f(b).closest("*[data-dt-row]");return e.length?[e.data("dt-row")]:[]}if("string"===typeof b&&"#"===b.charAt(0)&&(e=a.aIds[b.replace(/^#/,"")],e!==p))return[e.idx];e=Vb(la(a.aoData,d,"nTr"));return f(e).filter(b).map(function(){return this._DT_RowIndex}).toArray()},
a,c)};t("rows()",function(a,b){a===p?a="":f.isPlainObject(a)&&(b=a,a="");b=fb(b);var c=this.iterator("table",function(c){return gc(c,a,b)},1);c.selector.rows=a;c.selector.opts=b;return c});t("rows().nodes()",function(){return this.iterator("row",function(a,b){return a.aoData[b].nTr||p},1)});t("rows().data()",function(){return this.iterator(!0,"rows",function(a,b){return la(a.aoData,b,"_aData")},1)});x("rows().cache()","row().cache()",function(a){return this.iterator("row",function(b,c){b=b.aoData[c];
return"search"===a?b._aFilterData:b._aSortData},1)});x("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",function(b,c){ea(b,c,a)})});x("rows().indexes()","row().index()",function(){return this.iterator("row",function(a,b){return b},1)});x("rows().ids()","row().id()",function(a){for(var b=[],c=this.context,d=0,e=c.length;d<e;d++)for(var h=0,g=this[d].length;h<g;h++){var f=c[d].rowIdFn(c[d].aoData[this[d][h]]._aData);b.push((!0===a?"#":"")+f)}return new v(c,b)});x("rows().remove()",
"row().remove()",function(){var a=this;this.iterator("row",function(b,c,d){var e=b.aoData,h=e[c],g,f;e.splice(c,1);var l=0;for(g=e.length;l<g;l++){var n=e[l];var m=n.anCells;null!==n.nTr&&(n.nTr._DT_RowIndex=l);if(null!==m)for(n=0,f=m.length;n<f;n++)m[n]._DT_CellIndex.row=l}ra(b.aiDisplayMaster,c);ra(b.aiDisplay,c);ra(a[d],c,!1);0<b._iRecordsDisplay&&b._iRecordsDisplay--;Wa(b);c=b.rowIdFn(h._aData);c!==p&&delete b.aIds[c]});this.iterator("table",function(a){for(var b=0,d=a.aoData.length;b<d;b++)a.aoData[b].idx=
b});return this});t("rows.add()",function(a){var b=this.iterator("table",function(b){var c,d=[];var g=0;for(c=a.length;g<c;g++){var f=a[g];f.nodeName&&"TR"===f.nodeName.toUpperCase()?d.push(pa(b,f)[0]):d.push(R(b,f))}return d},1),c=this.rows(-1);c.pop();f.merge(c,b);return c});t("row()",function(a,b){return gb(this.rows(a,b))});t("row().data()",function(a){var b=this.context;if(a===p)return b.length&&this.length?b[0].aoData[this[0]]._aData:p;var c=b[0].aoData[this[0]];c._aData=a;f.isArray(a)&&c.nTr.id&&
Q(b[0].rowId)(a,c.nTr.id);ea(b[0],this[0],"data");return this});t("row().node()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]].nTr||null:null});t("row.add()",function(a){a instanceof f&&a.length&&(a=a[0]);var b=this.iterator("table",function(b){return a.nodeName&&"TR"===a.nodeName.toUpperCase()?pa(b,a)[0]:R(b,a)});return this.row(b[0])});var hc=function(a,b,c,d){var e=[],h=function(b,c){if(f.isArray(b)||b instanceof f)for(var d=0,g=b.length;d<g;d++)h(b[d],c);else b.nodeName&&
"tr"===b.nodeName.toLowerCase()?e.push(b):(d=f("<tr><td/></tr>").addClass(c),f("td",d).addClass(c).html(b)[0].colSpan=W(a),e.push(d[0]))};h(c,d);b._details&&b._details.detach();b._details=f(e);b._detailsShow&&b._details.insertAfter(b.nTr)},hb=function(a,b){var c=a.context;c.length&&(a=c[0].aoData[b!==p?b:a[0]])&&a._details&&(a._details.remove(),a._detailsShow=p,a._details=p)},Yb=function(a,b){var c=a.context;c.length&&a.length&&(a=c[0].aoData[a[0]],a._details&&((a._detailsShow=b)?a._details.insertAfter(a.nTr):
a._details.detach(),ic(c[0])))},ic=function(a){var b=new v(a),c=a.aoData;b.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details");0<J(c,"_details").length&&(b.on("draw.dt.DT_details",function(d,e){a===e&&b.rows({page:"current"}).eq(0).each(function(a){a=c[a];a._detailsShow&&a._details.insertAfter(a.nTr)})}),b.on("column-visibility.dt.DT_details",function(b,e,f,g){if(a===e)for(e=W(e),f=0,g=c.length;f<g;f++)b=c[f],b._details&&b._details.children("td[colspan]").attr("colspan",
e)}),b.on("destroy.dt.DT_details",function(d,e){if(a===e)for(d=0,e=c.length;d<e;d++)c[d]._details&&hb(b,d)}))};t("row().child()",function(a,b){var c=this.context;if(a===p)return c.length&&this.length?c[0].aoData[this[0]]._details:p;!0===a?this.child.show():!1===a?hb(this):c.length&&this.length&&hc(c[0],c[0].aoData[this[0]],a,b);return this});t(["row().child.show()","row().child().show()"],function(a){Yb(this,!0);return this});t(["row().child.hide()","row().child().hide()"],function(){Yb(this,!1);
return this});t(["row().child.remove()","row().child().remove()"],function(){hb(this);return this});t("row().child.isShown()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]]._detailsShow||!1:!1});var jc=/^([^:]+):(name|visIdx|visible)$/,Zb=function(a,b,c,d,e){c=[];d=0;for(var f=e.length;d<f;d++)c.push(I(a,e[d],b));return c},kc=function(a,b,c){var d=a.aoColumns,e=J(d,"sName"),h=J(d,"nTh");return eb("column",b,function(b){var g=Sb(b);if(""===b)return Z(d.length);if(null!==
g)return[0<=g?g:d.length+g];if("function"===typeof b){var l=Fa(a,c);return f.map(d,function(c,d){return b(d,Zb(a,d,0,0,l),h[d])?d:null})}var n="string"===typeof b?b.match(jc):"";if(n)switch(n[2]){case "visIdx":case "visible":g=parseInt(n[1],10);if(0>g){var m=f.map(d,function(a,b){return a.bVisible?b:null});return[m[m.length+g]]}return[ba(a,g)];case "name":return f.map(e,function(a,b){return a===n[1]?b:null});default:return[]}if(b.nodeName&&b._DT_CellIndex)return[b._DT_CellIndex.column];g=f(h).filter(b).map(function(){return f.inArray(this,
h)}).toArray();if(g.length||!b.nodeName)return g;g=f(b).closest("*[data-dt-column]");return g.length?[g.data("dt-column")]:[]},a,c)};t("columns()",function(a,b){a===p?a="":f.isPlainObject(a)&&(b=a,a="");b=fb(b);var c=this.iterator("table",function(c){return kc(c,a,b)},1);c.selector.cols=a;c.selector.opts=b;return c});x("columns().header()","column().header()",function(a,b){return this.iterator("column",function(a,b){return a.aoColumns[b].nTh},1)});x("columns().footer()","column().footer()",function(a,
b){return this.iterator("column",function(a,b){return a.aoColumns[b].nTf},1)});x("columns().data()","column().data()",function(){return this.iterator("column-rows",Zb,1)});x("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].mData},1)});x("columns().cache()","column().cache()",function(a){return this.iterator("column-rows",function(b,c,d,e,f){return la(b.aoData,f,"search"===a?"_aFilterData":"_aSortData",c)},1)});x("columns().nodes()",
"column().nodes()",function(){return this.iterator("column-rows",function(a,b,c,d,e){return la(a.aoData,e,"anCells",b)},1)});x("columns().visible()","column().visible()",function(a,b){var c=this,d=this.iterator("column",function(b,c){if(a===p)return b.aoColumns[c].bVisible;var d=b.aoColumns,e=d[c],h=b.aoData,n;if(a!==p&&e.bVisible!==a){if(a){var m=f.inArray(!0,J(d,"bVisible"),c+1);d=0;for(n=h.length;d<n;d++){var q=h[d].nTr;b=h[d].anCells;q&&q.insertBefore(b[c],b[m]||null)}}else f(J(b.aoData,"anCells",
c)).detach();e.bVisible=a}});a!==p&&this.iterator("table",function(d){ha(d,d.aoHeader);ha(d,d.aoFooter);d.aiDisplay.length||f(d.nTBody).find("td[colspan]").attr("colspan",W(d));Ba(d);c.iterator("column",function(c,d){A(c,null,"column-visibility",[c,d,a,b])});(b===p||b)&&c.columns.adjust()});return d});x("columns().indexes()","column().index()",function(a){return this.iterator("column",function(b,c){return"visible"===a?ca(b,c):c},1)});t("columns.adjust()",function(){return this.iterator("table",function(a){aa(a)},
1)});t("column.index()",function(a,b){if(0!==this.context.length){var c=this.context[0];if("fromVisible"===a||"toData"===a)return ba(c,b);if("fromData"===a||"toVisible"===a)return ca(c,b)}});t("column()",function(a,b){return gb(this.columns(a,b))});var lc=function(a,b,c){var d=a.aoData,e=Fa(a,c),h=Vb(la(d,e,"anCells")),g=f([].concat.apply([],h)),k,l=a.aoColumns.length,n,m,q,u,t,v;return eb("cell",b,function(b){var c="function"===typeof b;if(null===b||b===p||c){n=[];m=0;for(q=e.length;m<q;m++)for(k=
e[m],u=0;u<l;u++)t={row:k,column:u},c?(v=d[k],b(t,I(a,k,u),v.anCells?v.anCells[u]:null)&&n.push(t)):n.push(t);return n}if(f.isPlainObject(b))return b.column!==p&&b.row!==p&&-1!==f.inArray(b.row,e)?[b]:[];c=g.filter(b).map(function(a,b){return{row:b._DT_CellIndex.row,column:b._DT_CellIndex.column}}).toArray();if(c.length||!b.nodeName)return c;v=f(b).closest("*[data-dt-row]");return v.length?[{row:v.data("dt-row"),column:v.data("dt-column")}]:[]},a,c)};t("cells()",function(a,b,c){f.isPlainObject(a)&&
(a.row===p?(c=a,a=null):(c=b,b=null));f.isPlainObject(b)&&(c=b,b=null);if(null===b||b===p)return this.iterator("table",function(b){return lc(b,a,fb(c))});var d=c?{page:c.page,order:c.order,search:c.search}:{},e=this.columns(b,d),h=this.rows(a,d),g,k,l,n;d=this.iterator("table",function(a,b){a=[];g=0;for(k=h[b].length;g<k;g++)for(l=0,n=e[b].length;l<n;l++)a.push({row:h[b][g],column:e[b][l]});return a},1);d=c&&c.selected?this.cells(d,c):d;f.extend(d.selector,{cols:b,rows:a,opts:c});return d});x("cells().nodes()",
"cell().node()",function(){return this.iterator("cell",function(a,b,c){return(a=a.aoData[b])&&a.anCells?a.anCells[c]:p},1)});t("cells().data()",function(){return this.iterator("cell",function(a,b,c){return I(a,b,c)},1)});x("cells().cache()","cell().cache()",function(a){a="search"===a?"_aFilterData":"_aSortData";return this.iterator("cell",function(b,c,d){return b.aoData[c][a][d]},1)});x("cells().render()","cell().render()",function(a){return this.iterator("cell",function(b,c,d){return I(b,c,d,a)},
1)});x("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,b,c){return{row:b,column:c,columnVisible:ca(a,c)}},1)});x("cells().invalidate()","cell().invalidate()",function(a){return this.iterator("cell",function(b,c,d){ea(b,c,a,d)})});t("cell()",function(a,b,c){return gb(this.cells(a,b,c))});t("cell().data()",function(a){var b=this.context,c=this[0];if(a===p)return b.length&&c.length?I(b[0],c[0].row,c[0].column):p;ob(b[0],c[0].row,c[0].column,a);ea(b[0],c[0].row,
"data",c[0].column);return this});t("order()",function(a,b){var c=this.context;if(a===p)return 0!==c.length?c[0].aaSorting:p;"number"===typeof a?a=[[a,b]]:a.length&&!f.isArray(a[0])&&(a=Array.prototype.slice.call(arguments));return this.iterator("table",function(b){b.aaSorting=a.slice()})});t("order.listener()",function(a,b,c){return this.iterator("table",function(d){Qa(d,a,b,c)})});t("order.fixed()",function(a){if(!a){var b=this.context;b=b.length?b[0].aaSortingFixed:p;return f.isArray(b)?{pre:b}:
b}return this.iterator("table",function(b){b.aaSortingFixed=f.extend(!0,{},a)})});t(["columns().order()","column().order()"],function(a){var b=this;return this.iterator("table",function(c,d){var e=[];f.each(b[d],function(b,c){e.push([c,a])});c.aaSorting=e})});t("search()",function(a,b,c,d){var e=this.context;return a===p?0!==e.length?e[0].oPreviousSearch.sSearch:p:this.iterator("table",function(e){e.oFeatures.bFilter&&ia(e,f.extend({},e.oPreviousSearch,{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===
c?!0:c,bCaseInsensitive:null===d?!0:d}),1)})});x("columns().search()","column().search()",function(a,b,c,d){return this.iterator("column",function(e,h){var g=e.aoPreSearchCols;if(a===p)return g[h].sSearch;e.oFeatures.bFilter&&(f.extend(g[h],{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===d?!0:d}),ia(e,e.oPreviousSearch,1))})});t("state()",function(){return this.context.length?this.context[0].oSavedState:null});t("state.clear()",function(){return this.iterator("table",
function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})});t("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null});t("state.save()",function(){return this.iterator("table",function(a){Ba(a)})});q.versionCheck=q.fnVersionCheck=function(a){var b=q.version.split(".");a=a.split(".");for(var c,d,e=0,f=a.length;e<f;e++)if(c=parseInt(b[e],10)||0,d=parseInt(a[e],10)||0,c!==d)return c>d;return!0};q.isDataTable=q.fnIsDataTable=function(a){var b=f(a).get(0),c=!1;if(a instanceof
q.Api)return!0;f.each(q.settings,function(a,e){a=e.nScrollHead?f("table",e.nScrollHead)[0]:null;var d=e.nScrollFoot?f("table",e.nScrollFoot)[0]:null;if(e.nTable===b||a===b||d===b)c=!0});return c};q.tables=q.fnTables=function(a){var b=!1;f.isPlainObject(a)&&(b=a.api,a=a.visible);var c=f.map(q.settings,function(b){if(!a||a&&f(b.nTable).is(":visible"))return b.nTable});return b?new v(c):c};q.camelToHungarian=L;t("$()",function(a,b){b=this.rows(b).nodes();b=f(b);return f([].concat(b.filter(a).toArray(),
b.find(a).toArray()))});f.each(["on","one","off"],function(a,b){t(b+"()",function(){var a=Array.prototype.slice.call(arguments);a[0]=f.map(a[0].split(/\s/),function(a){return a.match(/\.dt\b/)?a:a+".dt"}).join(" ");var d=f(this.tables().nodes());d[b].apply(d,a);return this})});t("clear()",function(){return this.iterator("table",function(a){qa(a)})});t("settings()",function(){return new v(this.context,this.context)});t("init()",function(){var a=this.context;return a.length?a[0].oInit:null});t("data()",
function(){return this.iterator("table",function(a){return J(a.aoData,"_aData")}).flatten()});t("destroy()",function(a){a=a||!1;return this.iterator("table",function(b){var c=b.nTableWrapper.parentNode,d=b.oClasses,e=b.nTable,h=b.nTBody,g=b.nTHead,k=b.nTFoot,l=f(e);h=f(h);var n=f(b.nTableWrapper),m=f.map(b.aoData,function(a){return a.nTr}),p;b.bDestroying=!0;A(b,"aoDestroyCallback","destroy",[b]);a||(new v(b)).columns().visible(!0);n.off(".DT").find(":not(tbody *)").off(".DT");f(z).off(".DT-"+b.sInstance);
e!=g.parentNode&&(l.children("thead").detach(),l.append(g));k&&e!=k.parentNode&&(l.children("tfoot").detach(),l.append(k));b.aaSorting=[];b.aaSortingFixed=[];Aa(b);f(m).removeClass(b.asStripeClasses.join(" "));f("th, td",g).removeClass(d.sSortable+" "+d.sSortableAsc+" "+d.sSortableDesc+" "+d.sSortableNone);h.children().detach();h.append(m);g=a?"remove":"detach";l[g]();n[g]();!a&&c&&(c.insertBefore(e,b.nTableReinsertBefore),l.css("width",b.sDestroyWidth).removeClass(d.sTable),(p=b.asDestroyStripes.length)&&
h.children().each(function(a){f(this).addClass(b.asDestroyStripes[a%p])}));c=f.inArray(b,q.settings);-1!==c&&q.settings.splice(c,1)})});f.each(["column","row","cell"],function(a,b){t(b+"s().every()",function(a){var c=this.selector.opts,e=this;return this.iterator(b,function(d,f,k,l,n){a.call(e[b](f,"cell"===b?k:c,"cell"===b?c:p),f,k,l,n)})})});t("i18n()",function(a,b,c){var d=this.context[0];a=U(a)(d.oLanguage);a===p&&(a=b);c!==p&&f.isPlainObject(a)&&(a=a[c]!==p?a[c]:a._);return a.replace("%d",c)});
q.version="1.10.20";q.settings=[];q.models={};q.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0};q.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1};q.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,
sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null};q.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,
bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(b){}},
fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===a.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,JSON.stringify(b))}catch(c){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",
sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:f.extend({},q.models.oSearch),sAjaxDataProp:"data",
sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"};H(q.defaults);q.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null};H(q.defaults.column);q.models.oSettings=
{oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},
aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,
aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:p,oAjaxData:p,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==D(this)?1*this._iRecordsTotal:
this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==D(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=this._iDisplayLength,b=this._iDisplayStart,c=b+a,d=this.aiDisplay.length,e=this.oFeatures,f=e.bPaginate;return e.bServerSide?!1===f||-1===a?b+d:Math.min(b+a,this._iRecordsDisplay):!f||c>d||-1===a?d:c},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null};q.ext=C={buttons:{},
classes:{},build:"dt/dt-1.10.20",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:q.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:q.version};f.extend(C,{afnFiltering:C.search,aTypes:C.type.detect,ofnSearch:C.type.search,oSort:C.type.order,afnSortData:C.order,aoFeatures:C.feature,oApi:C.internal,oStdClasses:C.classes,oPagination:C.pager});
f.extend(q.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",
sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",
sJUIHeader:"",sJUIFooter:""});var Pb=q.ext.pager;f.extend(Pb,{simple:function(a,b){return["previous","next"]},full:function(a,b){return["first","previous","next","last"]},numbers:function(a,b){return[ka(a,b)]},simple_numbers:function(a,b){return["previous",ka(a,b),"next"]},full_numbers:function(a,b){return["first","previous",ka(a,b),"next","last"]},first_last_numbers:function(a,b){return["first",ka(a,b),"last"]},_numbers:ka,numbers_length:7});f.extend(!0,q.ext.renderer,{pageButton:{_:function(a,b,
c,d,e,h){var g=a.oClasses,k=a.oLanguage.oPaginate,l=a.oLanguage.oAria.paginate||{},n,m,q=0,t=function(b,d){var p,r=g.sPageButtonDisabled,u=function(b){Xa(a,b.data.action,!0)};var w=0;for(p=d.length;w<p;w++){var v=d[w];if(f.isArray(v)){var x=f("<"+(v.DT_el||"div")+"/>").appendTo(b);t(x,v)}else{n=null;m=v;x=a.iTabIndex;switch(v){case "ellipsis":b.append('<span class="ellipsis">&#x2026;</span>');break;case "first":n=k.sFirst;0===e&&(x=-1,m+=" "+r);break;case "previous":n=k.sPrevious;0===e&&(x=-1,m+=
" "+r);break;case "next":n=k.sNext;e===h-1&&(x=-1,m+=" "+r);break;case "last":n=k.sLast;e===h-1&&(x=-1,m+=" "+r);break;default:n=v+1,m=e===v?g.sPageButtonActive:""}null!==n&&(x=f("<a>",{"class":g.sPageButton+" "+m,"aria-controls":a.sTableId,"aria-label":l[v],"data-dt-idx":q,tabindex:x,id:0===c&&"string"===typeof v?a.sTableId+"_"+v:null}).html(n).appendTo(b),$a(x,{action:v},u),q++)}}};try{var v=f(b).find(y.activeElement).data("dt-idx")}catch(mc){}t(f(b).empty(),d);v!==p&&f(b).find("[data-dt-idx="+
v+"]").focus()}}});f.extend(q.ext.type.detect,[function(a,b){b=b.oLanguage.sDecimal;return db(a,b)?"num"+b:null},function(a,b){if(a&&!(a instanceof Date)&&!cc.test(a))return null;b=Date.parse(a);return null!==b&&!isNaN(b)||P(a)?"date":null},function(a,b){b=b.oLanguage.sDecimal;return db(a,b,!0)?"num-fmt"+b:null},function(a,b){b=b.oLanguage.sDecimal;return Ub(a,b)?"html-num"+b:null},function(a,b){b=b.oLanguage.sDecimal;return Ub(a,b,!0)?"html-num-fmt"+b:null},function(a,b){return P(a)||"string"===
typeof a&&-1!==a.indexOf("<")?"html":null}]);f.extend(q.ext.type.search,{html:function(a){return P(a)?a:"string"===typeof a?a.replace(Rb," ").replace(Ea,""):""},string:function(a){return P(a)?a:"string"===typeof a?a.replace(Rb," "):a}});var Da=function(a,b,c,d){if(0!==a&&(!a||"-"===a))return-Infinity;b&&(a=Tb(a,b));a.replace&&(c&&(a=a.replace(c,"")),d&&(a=a.replace(d,"")));return 1*a};f.extend(C.type.order,{"date-pre":function(a){a=Date.parse(a);return isNaN(a)?-Infinity:a},"html-pre":function(a){return P(a)?
"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return P(a)?"":"string"===typeof a?a.toLowerCase():a.toString?a.toString():""},"string-asc":function(a,b){return a<b?-1:a>b?1:0},"string-desc":function(a,b){return a<b?1:a>b?-1:0}});Ha("");f.extend(!0,q.ext.renderer,{header:{_:function(a,b,c,d){f(a.nTable).on("order.dt.DT",function(e,f,g,k){a===f&&(e=c.idx,b.removeClass(c.sSortingClass+" "+d.sSortAsc+" "+d.sSortDesc).addClass("asc"==k[e]?d.sSortAsc:"desc"==k[e]?d.sSortDesc:
c.sSortingClass))})},jqueryui:function(a,b,c,d){f("<div/>").addClass(d.sSortJUIWrapper).append(b.contents()).append(f("<span/>").addClass(d.sSortIcon+" "+c.sSortingClassJUI)).appendTo(b);f(a.nTable).on("order.dt.DT",function(e,f,g,k){a===f&&(e=c.idx,b.removeClass(d.sSortAsc+" "+d.sSortDesc).addClass("asc"==k[e]?d.sSortAsc:"desc"==k[e]?d.sSortDesc:c.sSortingClass),b.find("span."+d.sSortIcon).removeClass(d.sSortJUIAsc+" "+d.sSortJUIDesc+" "+d.sSortJUI+" "+d.sSortJUIAscAllowed+" "+d.sSortJUIDescAllowed).addClass("asc"==
k[e]?d.sSortJUIAsc:"desc"==k[e]?d.sSortJUIDesc:c.sSortingClassJUI))})}}});var ib=function(a){return"string"===typeof a?a.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):a};q.render={number:function(a,b,c,d,e){return{display:function(f){if("number"!==typeof f&&"string"!==typeof f)return f;var g=0>f?"-":"",h=parseFloat(f);if(isNaN(h))return ib(f);h=h.toFixed(c);f=Math.abs(h);h=parseInt(f,10);f=c?b+(f-h).toFixed(c).substring(2):"";return g+(d||"")+h.toString().replace(/\B(?=(\d{3})+(?!\d))/g,
a)+f+(e||"")}}},text:function(){return{display:ib,filter:ib}}};f.extend(q.ext.internal,{_fnExternApiFunc:Qb,_fnBuildAjax:va,_fnAjaxUpdate:qb,_fnAjaxParameters:zb,_fnAjaxUpdateDraw:Ab,_fnAjaxDataSrc:wa,_fnAddColumn:Ia,_fnColumnOptions:ma,_fnAdjustColumnSizing:aa,_fnVisibleToColumnIndex:ba,_fnColumnIndexToVisible:ca,_fnVisbleColumns:W,_fnGetColumns:oa,_fnColumnTypes:Ka,_fnApplyColumnDefs:nb,_fnHungarianMap:H,_fnCamelToHungarian:L,_fnLanguageCompat:Ga,_fnBrowserDetect:lb,_fnAddData:R,_fnAddTr:pa,_fnNodeToDataIndex:function(a,
b){return b._DT_RowIndex!==p?b._DT_RowIndex:null},_fnNodeToColumnIndex:function(a,b,c){return f.inArray(c,a.aoData[b].anCells)},_fnGetCellData:I,_fnSetCellData:ob,_fnSplitObjNotation:Na,_fnGetObjectDataFn:U,_fnSetObjectDataFn:Q,_fnGetDataMaster:Oa,_fnClearTable:qa,_fnDeleteIndex:ra,_fnInvalidate:ea,_fnGetRowElements:Ma,_fnCreateTr:La,_fnBuildHead:pb,_fnDrawHead:ha,_fnDraw:S,_fnReDraw:V,_fnAddOptionsHtml:sb,_fnDetectHeader:fa,_fnGetUniqueThs:ua,_fnFeatureHtmlFilter:ub,_fnFilterComplete:ia,_fnFilterCustom:Db,
_fnFilterColumn:Cb,_fnFilter:Bb,_fnFilterCreateSearch:Ta,_fnEscapeRegex:Ua,_fnFilterData:Eb,_fnFeatureHtmlInfo:xb,_fnUpdateInfo:Hb,_fnInfoMacros:Ib,_fnInitialise:ja,_fnInitComplete:xa,_fnLengthChange:Va,_fnFeatureHtmlLength:tb,_fnFeatureHtmlPaginate:yb,_fnPageChange:Xa,_fnFeatureHtmlProcessing:vb,_fnProcessingDisplay:K,_fnFeatureHtmlTable:wb,_fnScrollDraw:na,_fnApplyToChildren:N,_fnCalculateColumnWidths:Ja,_fnThrottle:Sa,_fnConvertToWidth:Jb,_fnGetWidestNode:Kb,_fnGetMaxLenString:Lb,_fnStringToCss:B,
_fnSortFlatten:Y,_fnSort:rb,_fnSortAria:Nb,_fnSortListener:Za,_fnSortAttachListener:Qa,_fnSortingClasses:Aa,_fnSortData:Mb,_fnSaveState:Ba,_fnLoadState:Ob,_fnSettingsFromNode:Ca,_fnLog:O,_fnMap:M,_fnBindAction:$a,_fnCallbackReg:E,_fnCallbackFire:A,_fnLengthOverflow:Wa,_fnRenderer:Ra,_fnDataSource:D,_fnRowAttributes:Pa,_fnExtend:ab,_fnCalculateEnd:function(){}});f.fn.dataTable=q;q.$=f;f.fn.dataTableSettings=q.settings;f.fn.dataTableExt=q.ext;f.fn.DataTable=function(a){return f(this).dataTable(a).api()};
f.each(q,function(a,b){f.fn.DataTable[a]=b});return f.fn.dataTable});



"use strict";

function isVisible(b) {
  var c = $(window).height();
  var a = $(window).scrollTop();
  var d = $(b).offset().top;
  return d <= c + a;
}

var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
var isMac = window.navigator["platform"] == 'MacIntel';

var isBreakPoint = function isBreakPoint(bp) {
  //general*
  var bps = [320, 576, 768, 992, 1440, 8000],
      w = $(window).width(),
      min,
      max;

  for (var i = 0, l = bps.length; i < l; i++) {
    if (bps[i] === bp) {
      min = bps[i - 1] || 0;
      max = bps[i];
      break;
    }
  }

  return w >= min && w < max;
};

function setCookie(cname, cvalue, exdays) {
  var d = new Date();
  d.setTime(d.getTime() + exdays * 24 * 60 * 60 * 1000);
  var expires = "expires=" + d.toGMTString();
  document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}

function getCookie(cname) {
  var name = cname + "=";
  var decodedCookie = decodeURIComponent(document.cookie);
  var ca = decodedCookie.split(';');

  for (var i = 0; i < ca.length; i++) {
    var c = ca[i];

    while (c.charAt(0) == ' ') {
      c = c.substring(1);
    }

    if (c.indexOf(name) == 0) {
      return c.substring(name.length, c.length);
    }
  }

  return "";
}
"use strict";

document.addEventListener("DOMContentLoaded", function () {
  $('div.social-icons a[class^=icon-itaufonts_]').on('mouseover mouseout', function () {
    var arrStrClass = $(this).attr('class').split('_');
    $(this).toggleClass('icon-itaufonts_full_' + arrStrClass[arrStrClass.length - 1] + ' icon-itaufonts_' + arrStrClass[arrStrClass.length - 1]);
  });
});
$(document).ready(function(){
    smartBannerApp.init();
});

var smartBannerApp = {

    storesAddress : { ios: '', androidMobile: '', androidTablet: '' },

    init: function(){

        smartBannerApp.storesAddress.ios = $.trim($('input[name=linkPathIOS]').val());
        smartBannerApp.storesAddress.androidMobile = $.trim($('input[name=linkPathAndroidMobile]').val());
        smartBannerApp.storesAddress.androidTablet = $('input[name=smLinkPathAndroidTablet]').length > 0 ? $.trim($('input[name=smLinkPathAndroidTablet]').val()) : null;

        $.each(this.storesAddress, function () {
            if(smartBannerApp.getOS() === 'iOS'){
                smartBannerApp.setUrl(smartBannerApp.storesAddress.ios);
            } else {
                if (smartBannerApp.isTablet() !== null) {
                    if(smartBannerApp.storesAddress.androidTablet) {
                        smartBannerApp.setUrl(smartBannerApp.storesAddress.androidTablet);
                    }
                } else {
                    smartBannerApp.setUrl(smartBannerApp.storesAddress.androidMobile);
                }
            }
        });
    },

    getOS: function(){
        return smartBannerApp.mobileDetect().os();
    },

    mobileDetect: function() {
        return new MobileDetect(window.navigator.userAgent);
    },

    isTablet: function () {
        return new MobileDetect(window.navigator.userAgent).tablet();
    },

    setUrl: function (url){
        $('.smart-banner-app .wrapper-align-right .cta').attr('href', url);
    }

}
"use strict"; // INI - SEARCH RESULT

var TOTALRESULTS;
var FILTERACTIVE; //Validação de servidor

var ORIGIN = window.origin;
var URL_FAST;

switch (ORIGIN) {
  case "https://author-itau-sites-dev64b.adobecqms.net":
    URL_FAST = 'https://ww33.itau/ws_ctmm/BuscaPeloFast.asmx/BuscaFast?';
    break;

  case "https://bancoitau-stage64.adobecqms.net":
    URL_FAST = 'https://ww33.itau/ws_ctmm/BuscaPeloFast.asmx/BuscaFast?';
    break;

  default:
    URL_FAST = 'https://ww16.itau.com.br/ws/BuscaPeloFast.asmx/BuscaFast?';
    break;
}

var LIST_SIZE = 10;
var PAGE_NUM_START = 1;
var PARAMETER_NAME = 'q';
var PARAMETER_NAME_DEFAULT = 'def';
var BREAKPOINT_MOBILE = 550;
var MOBILE_PAG_ROWS = 5;
var DESK_PAG_ROWS = 10;
var ALLRESULTS = "%";
var Navigators = 'tudo';
var strModeList = 'fql';
var Relevancia = 0;
var strViewList = "spitaucombrsppublished"; //"spnovoitauftsppublished";

var ModifierName = Navigators;
var QtfLemmatize = true;
var QtfSpellcheck = true;
var Dynteaser = true;
var GEOPERMIS; // if(!isSafari){
// navigator.permissions.query({ name: 'geolocation' }).then((perm, e) => { GEOPERMIS = perm.state; })
// }

var MAX_CARACTERS = [{
  min_size: 993,
  title: 70,
  text: 220,
  titleVideo: 100
}, {
  min_size: 750,
  title: 70,
  text: 220,
  titleVideo: 100
}, {
  min_size: 550,
  title: 60,
  text: 140,
  titleVideo: 50,
  text_thumb_text: 100
}, {
  min_size: 321,
  title: 65,
  text: 145,
  text_thumb_text: 55,
  titleVideo: 40,
  text_thumb_text_img: 40,
  text_thumb_text_img_title: 30
}, {
  min_size: 0,
  title: 40,
  text: 40,
  titleVideo: 40,
  text_thumb_text: 40,
  text_thumb_text_img: 40,
  text_thumb_text_img_title: 22
}];

function getMaxCaracters() {
  var windowSize = $(window).width();

  for (var i = 0; i < MAX_CARACTERS.length; i++) {
    var breakP = MAX_CARACTERS[i];

    if (windowSize > breakP.min_size) {
      return breakP;
    }
  }

  ;
}

function strip(html) {
  var doc = new DOMParser().parseFromString(html, 'text/html');
  return doc.body.textContent || "";
}

function getUrlParam(variable) {
  var query = window.location.search.substring(1);
  var vars = query.split("&");

  for (var i = 0; i < vars.length; i++) {
    var pair = vars[i].split("=");

    if (pair[0] == variable) {
      return pair[1];
    }
  }

  return false;
}

function setFilter(pesquisa, modifierName, navigators) {
  return 'and(string("' + pesquisa + '", mode=simpleall, annotation_class="user")' + ',filter(' + setMultipleFilters(modifierName) + ')' + ')';
}

function setMultipleFilters(modifierName) {
  var filterLoop = modifierName.split("|");
  return filterLoop[0] == "Links" ? filterFormated = "not(" + setFilterExternalLinks(getInnactiveFilter($("li.filter:not(.active)")).split("|")) + ")" : filterFormated = setFilterExternalLinks(filterLoop);
}

function getInnactiveFilter(innactiveFilters) {
  innactiveFilters.each(function (index, filter) {
    if (index === 0) {
      filterConcat = $(filter).attr("data-filter");
    } else {
      filterConcat = filterConcat + "|" + $(filter).attr("data-filter");
    }
  });
  return filterConcat;
}

function setFilterExternalLinks(filterLoop) {
  var firstLoop = true;
  var filterFormated;
  filterLoop.forEach(function (filter) {
    if (firstLoop) {
      filterFormated = filter == "Documentos" ? "or(contenttype:%22application/pdf%22" : "or(stringnavigator0field:%22" + filter + "%22";
      firstLoop = false;
    } else {
      filterFormated = filter == "Documentos" ? filterFormated + "," + "contenttype:%22application/pdf%22" : filterFormated + "," + "stringnavigator0field:%22" + filter + "%22";
    }
  });
  filterFormated = filterFormated + ")";
  return filterFormated;
}

function generateURL(pesquisa, pageNum, newFilter) {
  modifierName = newFilter == undefined ? "%" : newFilter;
  return URL_FAST + "Pesquisa=" + setFilter(pesquisa, modifierName, "%") + "&Relevancia=" + Relevancia + "&strViewList=" + strViewList + "&ModifierName=" + modifierName + "&strModeList=" + strModeList + "&QtfLemmatize=" + QtfLemmatize + "&QtfSpellcheck=" + QtfSpellcheck + "&Dynteaser=" + Dynteaser + "&Pagina=" + pageNum + "&TamPagina=" + LIST_SIZE + "&DictionaryName=";
}

function limitCaractersResult(text, limit) {
  if (text && text.length > limit) {
    return text.substr(0, limit) + "...";
  }

  return text || '';
}

function thumbText(list, type) {
  var maxCaracters = getMaxCaracters();
  var clickEvent = type == undefined ? "Links" : type;
  var title = limitCaractersResult(strip(list.Title), maxCaracters.title);
  var desc = limitCaractersResult(list.Sumary, maxCaracters.text_thumb_text);
  return "<a href='" + list.Url + "' aria-label='" + title + " " + desc + "'><div aria-hidden='true' class='resultado-busca click" + clickEvent + "'>" + "<h3 aria-hidden='false'>" + title + "</h3>" + "<p>" + desc + "</p>" + "<div class='directPage'/>" + "</div></a>";
}

function thumbTextImg(list, menuLogo, isDoc) {
  var maxCaracters = getMaxCaracters();
  var eventClickClass = isDoc == true ? "clickDoc" : "clickAgenc";
  var icoImage = isDoc == true ? "icon-itaufonts_pdf" : "icon-itaufonts_agencia";
  var html = "<div class='thumb-resultado resultado-busca d-flex align-items-start justify-content-start'>" + "<span class='resultMenuLogo " + icoImage + "'></span>" + "<div class='resultado-img'>" + "<a href='" + linksBanksLocation(isDoc, list.Url) + "' class='" + eventClickClass + "'>" + "<h3>" + limitCaractersResult(strip(list.Title), maxCaracters.text_thumb_text_img_title || maxCaracters.title) + "</h3>" + "</a>" + "<h4>" + limitCaractersResult(list.Sumary, maxCaracters.text_thumb_text_img || maxCaracters.text_thumb_text) + "</h4>" + "<div>" + linksDocuments(isDoc, list.Url) + "</div>" + "</div>" + "</div>";
  return html;
}

function thumbVideos(list) {
  var maxCaracters = getMaxCaracters();
  var html = "<div class='thumb-resultado resultado-busca d-flex align-items-start justify-content-start videos'>" + "<div class='divVideo' data-video='" + list.Generic5 + "'" + "style='background-image: url(https://img.youtube.com/vi/" + list.Generic5 + "/hqdefault.jpg);'>" + "<span class='playVideo clickVideo play icon-itaufonts_video'></span>" + "</div>" + "<div class='videosDesc'>" + "<h3 class='playLink'>" + limitCaractersResult(list.Title, maxCaracters.titleVideo) + "</h3>" + "<a class='clickVideo playLink' tabindex='0'>assistir</a>" + "</div>" + "</div>";
  importYTApi();
  return html;
}

function linksDocuments(isDoc, url) {
  return !isDoc ? "" : "<ul class='linksDoc'>" + "<li><a href='" + url + "'  target='_blank' class='clickDoc'>Visualizar</a></li>" + "<li><a href='" + url + "' class='clickDoc' download='itau.pdf'>Download</a></li>" + "</ul>";
}

;

function linksBanksLocation(isDoc, url) {
  return !isDoc ? window.location.origin + "?agencia=" + url : url;
}

function goToElement(elementId, object) {
  var element = $(elementId);

  if (elementId && element && element.offset()) {
    var headerHeight = $('header').height();
    object != undefined ? $('html,body').animate({
      scrollTop: object.offset().top - headerHeight
    }) : $('html,body').animate({
      scrollTop: element.offset().top - headerHeight
    });
  }
}

var thumbTemplate = {
  'Videos': function Videos(list) {
    return thumbVideos(list);
  },
  'Noticias': function Noticias(list) {
    return thumbText(list);
  },
  'Agencias': function Agencias(list) {
    return thumbTextImg(list, "", false);
  },
  'Produto': function Produto(list) {
    return thumbText(list);
  },
  'Simuladores': function Simuladores(list) {
    return thumbText(list);
  },
  'FAQs': function FAQs(list) {
    return thumbText(list, "PerguntasFrequentes");
  },
  'Documentos': function Documentos(list) {
    return thumbTextImg(list, "", true);
  },
  'default': function _default(list) {
    return thumbText(list);
  }
};

function appendHTML(result) {
  var tt = result.ContentType == "application/pdf" ? thumbTemplate["Documentos"] : thumbTemplate[result.stringnavigator0field] || thumbTemplate['default'];
  $('#result-list').append(tt(result));
}

function setCountFilter(modify) {
  var modName = modify.ModifierName.trim() == "Adobe PDF" ? "Documentos" : modify.ModifierName.trim();
  $('.filter-list [data-filter="' + modify.ModifierName.trim() + '"] span').html(modify.Count);
  $('.filter-list [data-filter="' + modify.ModifierName.trim() + '"]').css('cursor', 'pointer');
  $('.newFilterList .filter[data-filter="' + modName + '"]').css('display', 'inline-block');
}

function verifyExternalPages(resp) {
  var totalPages;
  var formats;
  var string0;
  var totalFaqs;
  listNav = resp.ListaNavegadores;
  $(listNav).each(function (i, nav) {
    nav.DisplayName == "Formats" ? formats = nav.Modifiers : "";
    nav.DisplayName == "StringNavigator0" ? string0 = nav.Modifiers : "";
  });
  $(formats).each(function (i, elem) {
    elem.ModifierName == "Web Page" ? totalPages = elem.Count : "";
  });
  $(string0).each(function (i, elem) {
    elem.ModifierName == "FAQs" ? totalFaqs = elem.Count : "";
  });
  return totalFaqs == totalPages ? false : true;
}

function verifyLinksFilter(resp) {
  verifyExternalPages(resp) ? $('.newFilterList .filter[data-filter="Links"]').css('display', 'inline-block') : "";
  var countFilters = 0;
  $('li.filter').each(function (i, elem) {
    $(elem).css("display") == "inline-block" ? countFilters += 1 : "";
  });
  countFilters <= 1 ? $('.filterContainer').css("display", "none") : FILTERACTIVE = true;
}

function cleanFilters() {
  $('.filter-list li span').html('0');
  $('.filter-list li:not(.show-all)').css('cursor', 'inherit');
}

function setCountFilters(resp) {
  cleanFilters();
  var listN = resp.d.ListaNavegadores || []; // var modifies = ['StringNavigator0', 'StringNavigator1', 'Formats'];

  var modifies = ['StringNavigator0', 'Formats'];
  listN.forEach(function (filter) {
    (filter.Modifiers || []).forEach(function (modify) {
      if (modifies.indexOf(modify.NavigatorName) > -1) {
        setCountFilter(modify);
      }
    });
  });
  verifyLinksFilter(resp.d);
}

function paginationRows(totalPages) {
  return $(window).width() <= BREAKPOINT_MOBILE ? MOBILE_PAG_ROWS : DESK_PAG_ROWS;
}

function addClassShowFilter() {
  $(window).width() <= BREAKPOINT_MOBILE ? $(".collapse-menu").removeClass("show") : $(".collapse-menu").addClass("show");
}

function rotateIcon() {
  $(".icon-rotate").click(function () {
    $(this).toggleClass("down");
  });
}

function generatePagination(totalPages, startPage) {
  var visiblePages = paginationRows();
  var pg = $('#pagination');
  pg.twbsPagination('destroy');

  if (totalPages <= 1) {
    return;
  }

  var initiated = false;
  pg.twbsPagination({
    totalPages: totalPages,
    visiblePages: visiblePages,
    startPage: parseInt(startPage),
    prev: '<span class="icon-itaufonts_seta" aria-hidden="true"></span>',
    next: '<span class="icon-itaufonts_seta_right" aria-hidden="true"></span>',
    first: '',
    last: '',
    onPageClick: function onPageClick(event, page) {
      if (initiated) {
        initSearch(page, false, getActiveFilters());
      }

      initiated = true;
      zeroLeft();
    },
    onInit: function onInit() {
      zeroLeft();
    }
  });
}

function zeroLeft() {
  $('.page-item a').each(function (i, e) {
    var num = parseInt($(e).text());

    if (num && num < 10) {
      $(e).text("0" + num);
    }
  });
}

function setTotalResult(d) {
  TOTALRESULTS = d.Controle.TotalResultados;
  var resultText = "foram encontrados <<results>> resultados";

  if (TOTALRESULTS <= 1) {
    resultText = "";
  }

  $('.result-total').html(resultText.replace("<<results>>", TOTALRESULTS));
}

function successSearch(resp, updateFilter, param, isItemDefault) {
  resp.d.ListaResultados.forEach(function (result, i) {
    appendHTML(result);
  });

  if (updateFilter) {
    setCountFilters(resp);
  }

  setTotalResult(resp.d);
  $('.search-wrapper-container').hide();
  $('.container-seach').addClass('not-target');
  $('.searchResultHeader').focus();
  headerFormatControl(); // Funcao "searchResultAdobeEvents" definida no arquivo search-result-adobe.js

  searchResultAdobeEvents();
  $(".play").length >= 1 ? srcResultVideosEvents() : "";
  var decodedParam = decodeURI(param);
  $('.search-wrapper-container').css('display', 'none');
  FILTERACTIVE == true ? $('.filter').first().focus() : $('.resultado-busca a').first().focus();
  isItemDefault == "true" ? searchResultAdobePageLoadDefault(decodedParam) : searchResultAdobePageLoad(decodedParam);
}

function search(url, pageNum, updateFilter, param, isItemDefault) {
  $('.container-content').hide();
  $('.container-result-not-found').hide();
  $('.error-fast').hide();
  $(".searchResultHeader p").css("display", "none");
  $('.loader').show(); //url = "http://localhost:6060/getResults";

  $.ajax({
    type: "GET",
    //dataType: "text",
    dataType: "jsonp",
    url: url,
    success: function success(resp) {
      //resp = JSON.parse(resp);
      if (resp.d && resp.d.ListaResultados) {
        if (resp.d.DidYouMean != undefined && resp.d.DidYouMean != "" && resp.d.DidYouMean != null) {
          var didYMeanTemp = 'você quis dizer "<<sugestao>>"';
          $(".searchResultHeader p").text(didYMeanTemp.replace("<<sugestao>>", resp.d.DidYouMean));
          $(".searchResultHeader p").css("display", "flex");
        }

        $('.container-content').css('display', 'flex');
        var d = resp.d;
        successSearch(resp, updateFilter, param, isItemDefault);
        generatePagination(d.Controle.TotalPaginas, d.Controle.PaginaAtual); // Adicionando aria-label dinamicamento aos resultados de busca

        constructAriaLabel();
      } else {
        $('.container-result-not-found').show();
        var decodedParam = decodeURI(param);
        searchResultAdobeNoResult(decodedParam);
      }
    },
    complete: function complete(xhr, textStatus) {
      $('.loader').hide();
    },
    error: function error(e) {
      $('.error-fast').show();
    }
  });
}

;

function setTextResult(searchText) {
  $('.search-text').html(searchText);
  $('.search-form form [type="search"]').val(searchText);
}

function initSearch(pageNum, updateFilter, newFilter) {
  var param = getUrlParam(PARAMETER_NAME);
  var isItemDefault = getUrlParam(PARAMETER_NAME_DEFAULT);

  if (param) {
    $('#result-list').html('');
    var url = generateURL(param, pageNum, newFilter);
    search(url, pageNum, updateFilter, param, isItemDefault);
    setTextResult(decodeURIComponent(param).replace(/\+/g, ' ').replace(/</g, ' ').replace(/>/g, ' '));
  }
}

function listennerFilterClick() {
  ['.filter', '.segmentos'].forEach(function (filter) {
    $(filter + ' li').click(function () {
      var totalFilter = $(this).find('.result-number').html() == '0';

      if (!totalFilter) {
        $(filter + ' .active').removeClass('active');
        $(this).addClass('active');
        initSearch(PAGE_NUM_START);
      }
    });
  });
} // INICIO - DEMANDA NAO LOGADO - FILTRO CONTUDO


function newFilterClick() {
  $('.searchFilter li.filter').on("click", function () {
    if ($(this).hasClass("active")) {
      $(this).removeClass("active");
      newFilterAllClick($(this));
      filterCloseBtnEvent($(this));
      initSearch(PAGE_NUM_START, false, getActiveFilters());
    } else {
      $(this).addClass("active");
      newFilterAllClick($(this));
      filterCloseBtnEvent($(this));
      initSearch(PAGE_NUM_START, false, getActiveFilters());
    }
  });
}

function getActiveFilters() {
  var filterConcat;
  $(".filter.active").each(function (index, filter) {
    if (index === 0) {
      filterConcat = $(filter).attr("data-filter");
    } else {
      filterConcat = filterConcat + "|" + $(filter).attr("data-filter");
    }
  });
  return filterConcat;
}

function newFilterAllClick(filter) {
  if ($(filter).hasClass("active") === false && $(filter).siblings().hasClass('active') === false) {
    $(filter).siblings('.allResults').addClass('active');
  } else {
    $(filter).siblings('.allResults').removeClass("active");
  }
}

function filterCloseBtnEvent(filter) {
  if ($(filter).hasClass("active") === false) {
    $(filter).find("span").removeClass("closeFilter").addClass("closeFilterNoShow");
  } else {
    $(filter).find("span").removeClass("closeFilterNoShow").addClass("closeFilter");
  }
}

function newFilterEvents() {
  newFilterClick();
}

function importYTApi() {
  // adicionando o div principal de videos no inicio da tela
  var containerVideos = "<!-- BEGIN : Tela de VIDEO --><div id='lightboxvideo'><div class='fundoBranco'><div class='divFecharVideo'><a aria-label='fechar video,' id='fecharVideo' tabindex='0' role='button'>X</a></div><div id='playervideo'><div id='framevideo'></div></div></div></div><!-- END : Tela de VIDEO -->";
  $("body").find('#lightboxvideo').length >= 1 ? "" : $("body").prepend(containerVideos);
  var tag = document.createElement('script');
  tag.src = 'https://www.youtube.com/iframe_api';
  var firstScriptTag = document.getElementsByTagName('script')[0];
  firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
} //#1 -- Criando Aria-Label Dinamico


function constructAriaLabel() {
  //Contruindo aria resultado Busca
  var listResult = $('.resultado-busca');
  var qtdResult = listResult.length;
  var pageNum = parseInt($('.page-item.active').text() || 1);
  var listFistItem = pageNum * 10 - 10;
  $(listResult).each(function (i, res) {
    if ($(res).hasClass("clickLinks") || $(res).hasClass("clickPerguntasFrequentes")) {
      $(res).find('h3').attr("aria-label", "Item " + (i + 1 + parseInt(listFistItem)) + " de " + TOTALRESULTS + " " + $(this).find("h3").text());
    } else if ($(res).find('.playVideo').length >= 1) {
      $(res).find(".playLink").attr("aria-label", "Item " + (i + 1 + parseInt(listFistItem)) + " de " + TOTALRESULTS + " " + " Video: " + $(res).find("h3").text());
    } else if ($(res).find("a.clickAgenc").length == 1) {
      $(res).find("a.clickAgenc").attr("aria-label", "Item " + (i + 1 + parseInt(listFistItem)) + " de " + TOTALRESULTS + " Agencia: " + $(res).find("a.clickAgenc").children("h3").text());
    } else if ($(res).find("a.clickDoc").length > 1) {
      $(res).children(".resultado-img").children("a").attr("aria-label", "Item " + (i + 1 + parseInt(listFistItem)) + " de " + TOTALRESULTS + " " + $(res).children(".resultado-img").children("a").children("h3").text());
    }
  }); //Construindo aria filtro busca

  $('.filter').each(function (i, filter) {
    $(filter).hasClass('active') ? $(filter).find("button").attr("aria-label", "Filtro ativo: " + $(this).children('button').text()) : $(filter).find("button").attr("aria-label", "Filtro: " + $(this).children('button').text());
  }); //Construindo aria paginação

  $('.pagination li').each(function (i, e) {
    $(e).hasClass('active') ? $(e).children('a').attr('aria-label', 'Paginação: Pagina ' + $(e).children('a').text() + ' Ativo') : $(e).children('a').attr('aria-label', 'Paginação: Pagina ' + $(e).children('a').text());

    if ($(e).hasClass('disabled')) {
      $(e).children('a').attr("tabindex", "-1");
    }

    ;
  });
  $('.pagination .prev a').attr('aria-label', 'Paginacao: voltar');
  $('.pagination .next a').attr('aria-label', 'Paginacao: proxima pagina');
}

;

function hideSugestedSearchs() {
  $('.search-wrapper-container').on("click", function () {
    closeSearchContainerSrcResult();
  });
}

function closeSearchContainerSrcResult() {
  $('.search-wrapper-container').hide();
  $('.container-seach').addClass('not-target');
}

function headerFormatControl() {
  var resultHeader = $('.searchResultHeader');
  $(resultHeader).children('p').css('display') == "none" ? resultHeader.addClass("noSuggestion") : $('.searchHeader').addClass("doYMean");
  $(window).width() <= 576 ? $('.searchHeader').find('h1').addClass('smallsize') : "";
}

function redirectResultNotFound() {
  $('.footer-not-found a').on("click", function () {
    $(this).attr("href", "https://www.itau.com.br/atendimento-itau/para-voce/");
  });
}

$(document).ready(function () {
  newFilterEvents();
  redirectResultNotFound();
  listennerFilterClick();
  initSearch(PAGE_NUM_START, true, ALLRESULTS);
  addClassShowFilter();
  rotateIcon();
  hideSugestedSearchs();
}); // END - SEARCH RESULT
"use strict"; // INI - ADOBE SEARCH RESULT

var PAGELOAD = "pageLoad";
var CUSTOMLINK = "customLink";
var DEFAULTADOBE = getUrlParam("def");

function searchResultAdobeSite() {
  adobeDataLayer.pushSite("IT", "NL", "IN", "Web");
}

function searchResultAdobePage() {
  adobeDataLayer.pushPage("ResultadoDeBusca", document.URL, "", "", "", "", "", "", "IT:NL:IN:ResultadoDeBusca");
}

function searchResultAdobeVisitor() {
  adobeDataLayer.pushVisitor("NaoCorrentista", "", "", "", "");
}

function searchResultAdobeRule(rule) {
  adobeDataLayer.pushRule(rule);
}

function searchResultAdobeStartTrack(rule) {
  adobeDataLayer.init();
  searchResultAdobeSite();
  searchResultAdobePage();
  searchResultAdobeVisitor();
  searchResultAdobeRule(rule);
}

function searchResultAdobeVerifyCustomFilters() {
  var filtersActive = [];
  var i = 0;
  var filters = $("li.filter.active");
  filters.each(function (index, filter) {
    filtersActive[i] = removeAccents($(filter).text().replace("X", ""));
    i++;
  });
  return filters.length > 0 ? "BuscaNL|Conteudo:[" + filtersActive + "]" : "";
}

function searchResultCustomPageLoad(searchTerm) {
  adobeDataLayer.pushCustom("termoDeBusca", searchTerm);
  adobeDataLayer.pushCustom("events", "cliqueEmBotao");
  adobeDataLayer.pushCustom("itensFiltrados", searchResultAdobeVerifyCustomFilters());
}

function searchResultCustomPageLoadDefault(searchTerm) {
  adobeDataLayer.pushCustom("termoDeBusca", searchTerm);
  adobeDataLayer.pushCustom("itemClicado", "LNK:IN:BuscaNL:TermoSugerido:" + searchTerm);
  adobeDataLayer.pushCustom("events", "cliqueEmBotao");
  adobeDataLayer.pushCustom("itensFiltrados", searchResultAdobeVerifyCustomFilters());
}

function searchResultAdobeCustomNoResults(searchTerm) {
  adobeDataLayer.pushCustom("termoDeBusca", searchTerm);
  adobeDataLayer.pushCustom("tipoDeBusca", "ResultadoNaoEncontrado");
  adobeDataLayer.pushCustom("itensFiltrados", searchResultAdobeVerifyCustomFilters());
}

function searchResultAdobeCustomClicMenu(searchTerm, title, menuType) {
  adobeDataLayer.pushCustom("termoDeBusca", searchTerm);
  DEFAULTADOBE == "true" ? adobeDataLayer.pushCustom("itemClicado", "LNK:IN:BuscaNL:TermoSugerido:" + searchTerm) : "";
  adobeDataLayer.pushCustom("tipoDeBusca", menuType);
  adobeDataLayer.pushCustom("itemDeBusca", title);
  adobeDataLayer.pushCustom("events", "cliqueEmBotao");
  adobeDataLayer.pushCustom("itensFiltrados", searchResultAdobeVerifyCustomFilters());
}

function searchResultAdobePageLoad(searchTerm) {
  searchResultAdobeStartTrack(PAGELOAD);
  searchResultCustomPageLoad(removeAccents(searchTerm));
  adobeDataLayer.sendDataLayer();
}

function searchResultAdobePageLoadDefault(searchTerm) {
  searchResultAdobeStartTrack(PAGELOAD);
  searchResultCustomPageLoadDefault(removeAccents(searchTerm));
  adobeDataLayer.sendDataLayer();
}

function searchResultAdobeNoResult(searchTerm) {
  searchResultAdobeStartTrack(PAGELOAD);
  searchResultAdobeCustomNoResults(removeAccents(searchTerm));
  adobeDataLayer.sendDataLayer();
}

function searchResultAdobeClickMenus(title, searchTerm, menuType) {
  searchResultAdobeStartTrack(CUSTOMLINK);
  searchResultAdobeCustomClicMenu(removeAccents(searchTerm), removeAccents(title), menuType);
  adobeDataLayer.sendDataLayer();
}

function searchResultAdobeEvents() {
  //handler menus :
  //Videos
  $(".clickVideo").on("click", function () {
    var videoTitle = $(this).siblings("h3").text();
    videoTitle == "" ? videoTitle = $(this).parent().siblings("div").find("h3").text() : "";
    searchResultAdobeClickMenus(videoTitle, $(".itauSearch").val(), "VideoSugerido");
  }); //PDF's

  $(".clickDoc").on("click", function () {
    var docTitle = $(this).find("h3").text();
    docTitle == "" ? docTitle = $(this).parents("div.resultado-img").find("a h3").text() : "";
    searchResultAdobeClickMenus(docTitle, $(".itauSearch").val(), "PDF");
  }); //Agencias

  $(".clickAgenc").on("click", function () {
    var agencTitle = $(this).find("h3").text();
    searchResultAdobeClickMenus(agencTitle, $(".itauSearch").val(), "Agencia");
  }); //Faqs

  $(".clickPerguntasFrequentes").on("click", function () {
    var faqTitle = $(this).find("h3").text();
    searchResultAdobeClickMenus(faqTitle, $(".itauSearch").val(), "FaqSugerida");
  }); //LinksExternos

  $(".clickLinks").on("click", function () {
    var linkTitle = $(this).find("h3").text();
    searchResultAdobeClickMenus(linkTitle, $(".itauSearch").val(), "LinkExterno");
  });
}

; // BEGIN - FUNCOES GENERICAS ADOBE

var adobeDataLayer = {
  init: function init() {
    window.analyticsData = {};
  },
  pushSite: function pushSite(nome, ambiente, negocio, tipoDeCanal) {
    analyticsData.site = {};

    if (nome != "") {
      analyticsData.site.nome = nome;
    }

    if (ambiente != "") {
      analyticsData.site.ambiente = ambiente;
    }

    if (negocio != "") {
      analyticsData.site.negocio = negocio;
    }

    if (tipoDeCanal != "") {
      analyticsData.site.tipoDeCanal = tipoDeCanal;
    }
  },
  pushPage: function pushPage(secao, url, subSecao1, subSecao2, subSecao3, idTecnico, ambiente, partnerForm, nome, warnings, mantemDados) {
    if (mantemDados != "true") {
      analyticsData.page = {};
    }

    if (typeof nome != "undefined" && nome != "" && nome != " ") {
      if (nome !== "warnings-view") {
        analyticsData.page.nome = nome;
      }
    } else if (typeof pageNameAnalytics != "undefined" && pageNameAnalytics !== "" && pageNameAnalytics !== " ") {
      analyticsData.page.nome = pageNameAnalytics;
    }

    if (secao != "") {
      analyticsData.page.secao = secao;
    }

    if (url != "") {
      analyticsData.page.url = url;
    }

    if (subSecao1 != "") {
      analyticsData.page.subSecao1 = subSecao1;
    }

    if (subSecao2 != "") {
      analyticsData.page.subSecao2 = subSecao2;
    }

    if (subSecao3 != "") {
      analyticsData.page.subSecao3 = subSecao3;
    }

    if (idTecnico != "") {
      analyticsData.page.idTecnico = idTecnico;
    }

    if (ambiente != "") {
      analyticsData.page.ambiente = ambiente;
    }

    if (partnerForm != "") {
      analyticsData.page.partnerForm = partnerForm;
    }

    if (warnings != "" && warnings != null) {
      if ($.isArray(warnings)) {
        analyticsData.page.warnings = warnings;
      } else {
        analyticsData.page.warnings = [warnings];
      }
    }
    /*Observação​: ​APENAS PARA BANKLINE O nome da página será disponibilizado nas páginas em uma variável JavaScript definida pelo Core. Para páginas da ​Nova Internet​, essa variável irá receber o ​Nome Analytics​ das páginas. Para páginas da ​Universal​, essa variável irá receber o​ ID da Página​. O nome da variável será​ analyticsName
    */

  },
  pushVisitor: function pushVisitor(tipoCliente, segmento, iDPF, iDPJ, iDOperador) {
    analyticsData.visitor = {};

    if (tipoCliente != "") {
      analyticsData.visitor.tipoCliente = tipoCliente;
    }

    if (segmento != "") {
      analyticsData.visitor.segmento = segmento;
    }

    if (iDPF != "") {
      analyticsData.visitor.iDPF = iDPF;
    }

    if (iDPJ != "") {
      analyticsData.visitor.iDPJ = iDPJ;
    }

    if (iDOperador != "") {
      analyticsData.visitor.iDOperador = iDOperador;
    }
  },

  /**
   * Responsavel por criar o produto no objeto analyticsData
   * 
   * @param sku Identificador do produto
   * @param merchandising
   * @param incrementor
   * @param nome Nome do produto
   */
  pushProduct: function pushProduct(sku, merchandising, incrementor, nome) {
    analyticsData.product = {
      "items": [],
      "confirmacao": {
        "id": "",
        "tarifacao": {}
      }
    };
    var qtd = analyticsData.product.items.length; //verifico o len do arry items

    analyticsData.product.items = [{}];

    if (sku != undefined && sku != "") {
      analyticsData.product.items[qtd].sku = sku;
    }

    if (nome != undefined && nome != "") {
      analyticsData.product.items[qtd].nome = nome;
    }

    if (merchandising != undefined && merchandising != "") {
      analyticsData.product.items[qtd].merchandising = merchandising;
    }

    if (incrementor != undefined && incrementor != "") {
      if ($.isArray(incrementor)) {
        analyticsData.product.items[qtd].incrementor = incrementor;
      } else {
        analyticsData.product.items[qtd].incrementor = [incrementor];
      }
    }
  },
  pushProductDetalhes: function pushProductDetalhes(id, tarifa, adesao, event) {
    if (id != "") {
      analyticsData.product.confirmacao.id = id;
    }

    if (tarifa != "") {
      analyticsData.product.confirmacao.tarifacao.tarifa = tarifa;
    }

    if (adesao != "") {
      analyticsData.product.confirmacao.tarifacao.adesao = adesao;
    }

    if (event != "") {
      analyticsData.product.event = event;
    }
  },
  pushCustom: function pushCustom(chave, valor) {
    if (!analyticsData.custom) {
      analyticsData.custom = {};
    }

    if (chave == "events") {
      if ($.isArray(valor)) {
        analyticsData.custom[chave] = valor;
      } else {
        analyticsData.custom[chave] = [valor];
      }
    } else {
      if (valor != "") {
        analyticsData.custom[chave] = valor;
      }
    }
  },

  /**
   * Responsavel por limpar o custom no objeto analyticsData
   */
  clearCustom: function clearCustom() {
    analyticsData.custom = {};
  },
  pushRule: function pushRule(rule) {
    analyticsData.rule = {};

    if (rule != "") {
      analyticsData.rule = rule;
    }
  },
  sendDataLayer: function sendDataLayer() {
    try {
      if (window.console) {
        console.log("JSON dataLayer: " + JSON.stringify(analyticsData));
      }

      _satellite.track('async_content_load');
    } catch (err) {
      if (window.console) {
        console.log("Erro na chamada sendDataLayer");
      }
    }
  },
  pushProductTransferencia: function pushProductTransferencia(merchandising, produto, item, idConfirmacaoProduto) {
    analyticsData.product = new Object();

    if (produto != null && produto != undefined) {
      if (produto.categoria != null && produto.categoria != undefined) {
        analyticsData.product.categoria = produto.categoria;
      }

      if (produto.nome != null && produto.nome != undefined) {
        analyticsData.product.nome = produto.nome;
      }

      if (produto.event != null && produto.event != undefined) {
        analyticsData.product.event = produto.event;
      }
    }

    if (item != null && item != [] && item != undefined) {
      analyticsData.product.items = new Object();
      analyticsData.product.items.categoria = item.categoria;
      analyticsData.product.items.nome = item.nome;
      merchandising != null && merchandising != "" && merchandising != undefined ? analyticsData.product.items.merchandising = merchandising : "";
    }

    if (idConfirmacaoProduto != null && idConfirmacaoProduto != undefined && idConfirmacaoProduto != "") {
      analyticsData.product.confirmacao = new Object();
      analyticsData.product.confirmacao.id = idConfirmacaoProduto;
    }
  }
}; // FINISH - FUNCOES GENERICAS ADOBE
// BEGIN - TRATAR ACENTOS

function removeSpaces(param) {
  var listText = $.trim(param).toLowerCase().split(" ");
  var firstWord = true;

  for (var i = 0; i < listText.length; i++) {
    var primeira = listText[i];

    if (firstWord) {
      listText[i] = primeira[0].toLowerCase() + primeira.slice(1);
      firstWord = false;
    } else {
      listText[i] = primeira[0].toUpperCase() + primeira.slice(1);
    }
  }

  return listText.join("");
}

function removeAccents(param) {
  var newParam = removeSpaces(param);
  newParam = newParam.replace(/\u00e1|\u00e0|\u00e2|\u00e3|\u00e4/g, 'a');
  newParam = newParam.replace(/\u00e9|\u00e8|\u00ea|\u00ea/g, 'e');
  newParam = newParam.replace(/\u00ed|\u00ec|\u00ee|\u00ef/g, 'i');
  newParam = newParam.replace(/\u00f3|\u00f2|\u00f4|\u00f5|\u00f6/g, 'o');
  newParam = newParam.replace(/\u00fa|\u00f9|\u00fb|\u00fc/g, 'u');
  newParam = newParam.replace(/\u00c1|\u00c0|\u00c2|\u00c3|\u00c4/g, 'A');
  newParam = newParam.replace(/\u00c9|\u00c8|\u00ca|\u00cb/g, 'E');
  newParam = newParam.replace(/\u00cd|\u00cc|\u00ce|\u00cf/g, 'I');
  newParam = newParam.replace(/\u00d3|\u00d2|\u00d4|\u00d5|\u00d6/g, 'O');
  newParam = newParam.replace(/\u00da|\u00d9|\u00db/g, 'U');
  newParam = newParam.replace(/\u00e7/g, 'c');
  newParam = newParam.replace(/\u00c7/g, 'C');
  newParam = newParam.replace(/\u00f1/g, 'n');
  newParam = newParam.replace(/\u00d1/g, 'N');
  newParam = newParam.replace(/(\,|\?)/g, '');
  newParam = removeHtmlAccents(newParam);
  return newParam;
}

function removeHtmlAccents(palavra) {
  var newParam = palavra;

  while (newParam.indexOf("&") > 0) {
    newParam = newParam.replace('&acirc;', 'a');
    newParam = newParam.replace('&Agrave;', 'A');
    newParam = newParam.replace('&agrave;', 'a');
    newParam = newParam.replace('&Aring;', 'A');
    newParam = newParam.replace('&aring;', 'a');
    newParam = newParam.replace('&Atilde;', 'A');
    newParam = newParam.replace('&atilde;', 'a');
    newParam = newParam.replace('&Eacute;', 'E');
    newParam = newParam.replace('&eacute;', 'e');
    newParam = newParam.replace('&Ecirc;', 'E');
    newParam = newParam.replace('&ecirc;	', 'e');
    newParam = newParam.replace('&Egrave;', 'E');
    newParam = newParam.replace('&egrave;', 'e');
    newParam = newParam.replace('&Iacute;', 'I');
    newParam = newParam.replace('&iacute;', 'i');
    newParam = newParam.replace('&Icirc;', 'I');
    newParam = newParam.replace('&icirc;', 'i');
    newParam = newParam.replace('&Igrave;', 'I');
    newParam = newParam.replace('&igrave;', 'i');
    newParam = newParam.replace('&Oacute;', 'O');
    newParam = newParam.replace('&oacute;', 'o');
    newParam = newParam.replace('&Ocirc;', 'O');
    newParam = newParam.replace('&ocirc;', 'o');
    newParam = newParam.replace('&Ograve;', 'O');
    newParam = newParam.replace('&ograve;', 'o');
    newParam = newParam.replace('&otilde;', 'o');
    newParam = newParam.replace('&Uacute;', 'U');
    newParam = newParam.replace('&uacute;', 'u');
    newParam = newParam.replace('&Ucirc;', 'U');
    newParam = newParam.replace('&ucirc;', 'u');
    newParam = newParam.replace('&Ugrave;', 'U');
    newParam = newParam.replace('&ugrave;', 'u');
    newParam = newParam.replace('&Ccedil;', 'C');
    newParam = newParam.replace('&ccedil;', 'c');
    newParam = newParam.replace('&Ntilde;', 'N');
    newParam = newParam.replace('&ntilde;', 'n');
  }

  return newParam;
}

; // FINISH - TRATAR ACENTOS
// END - ADOBE SEARCH RESULT
"use strict";

function _defineProperty(obj, key, value) {
  if (key in obj) {
    Object.defineProperty(obj, key, {
      value: value,
      enumerable: true,
      configurable: true,
      writable: true
    });
  } else {
    obj[key] = value;
  }

  return obj;
} //Variaveis globais


var player,
    nomeVideo,
    videoAtual,
    done = false;

function srcResOpenVideo(codVideo, videoSpan) {
  var largura = window.innerWidth;
  var altura = window.innerHeight - 50;
  var videoSize = defineVideoSize();
  videoAtual = videoSpan;
  player = new YT.Player('framevideo', {
    videoId: codVideo,
    playerVars: _defineProperty({
      'autoplay': 1,
      'controls': 2,
      'rel': 0,
      'showinfo': 1
    }, "rel", 0),
    startSeconds: 10,
    events: {
      'onReady': evtVideoReady,
      'onStateChange': evtVideoStatus
    }
  });
  $("body").css("overflow", "hidden");
  goToElement("#lightboxvideo");
  $("#lightboxvideo").css("display", "flex");
  $("#fecharVideo").focus();
}

function evtVideoReady(event) {
  event.target.playVideo();
}

function evtVideoStatus() {
  var infoEvent = $.parseJSON(event.data).info;

  if (infoEvent == YT.PlayerState.ENDED) {
    player.destroy();
    $("#lightboxvideo").css("display", "none");
    $("body").css("overflow", "");
  }
}

function closeVideoEvents() {
  $("#fecharVideo").on("click", function () {
    $("#lightboxvideo").css("display", "none");
    $("body").css("overflow", "");
    player.destroy();
  });
  $("#fecharVideo").keypress(function (event) {
    if (event.keyCode == 13) {
      $("#lightboxvideo").css("display", "none");
      $("body").css("overflow", "");
      player.destroy();
    }
  });
}

function srcResultVideosEvents() {
  $(".play").on("click", function () {
    srcResOpenVideo($(this).parent(".divVideo").attr("data-video"), $(this));
    closeVideoEvents();
    $("#fecharVideo").focus();
  });
  $(".playLink").on("click", function () {
    srcResOpenVideo($(this).parent().siblings(".divVideo").attr("data-video"), $(this));
    closeVideoEvents();
    $("#fecharVideo").focus();
  });
}

function defineVideoSize() {
  screenWidth = $(window).width();
  screenHeight = $(window).height();
  var videoSize;

  if (screenWidth <= 840 && screenWidth > 655) {
    videoSize = [640, 410];
  } else if (screenWidth <= 655 && screenWidth > 380) {
    videoSize = [350, 200];
  } else {
    videoSize = [818, 460];
  }

  return videoSize;
}
"use strict";

var URL_FAST_SEACH = 'https://ww16.itau.com.br/ws/BuscaPeloFast.asmx/'; //Validação de servidor

var ORIGIN_AUTO = window.origin;
var URL_FAST_SEACH;

switch (ORIGIN_AUTO) {
  case "https://author-itau-sites-dev64b.adobecqms.net":
    URL_FAST_SEACH = 'https://ww33.itau/ws_ctmm/BuscaPeloFast.asmx/';
    break;

  case "https://bancoitau-stage64.adobecqms.net":
    URL_FAST_SEACH = 'https://ww33.itau/ws_ctmm/BuscaPeloFast.asmx/';
    break;

  default:
    URL_FAST_SEACH = 'https://ww16.itau.com.br/ws/BuscaPeloFast.asmx/';
    break;
}

var URL_FAST_AUTOCOMPLETE = URL_FAST_SEACH + 'AutoCompleteFast?Query=';
var PG_RESULT = '/content/itau/resultados-busca.html';
document.addEventListener("DOMContentLoaded", function () {
  document.referrer.includes('/content/itau/resultados-busca.html') ? "" : setCookie("closePage", document.referrer, 200);
  itauSearch.acessibilityInput(); // setTimeout(itauSearch.removeSearchTab, 150);

  function closeResultSearch() {
    if ($('.container-seach').hasClass('not-target')) {
      window.location.href = getCookie('closePage') || 'https://www.itau.com.br/';
    } else {
      $('.search-form .itauSearch').blur();
      $('.container-seach').addClass('not-target');
      $('.search-wrapper-container').hide();
      $('body').css('overflow-y', 'auto');
    }
  }

  $('.search-form-toggle').click(function () {
    if ($('.search-form .itauSearch').val() != '') {
      $('.search-form form:visible').submit();
    }
  });
  var existResultContainer = $('.container-result-seach').length;
  $('.search-toggle').on('click', function () {
    $(this).removeAttr('role').removeAttr('tabindex').removeAttr('aria-label');
    $(this).find('.itauSearch').removeAttr('aria-hidden').attr('tabindex', '0');
    itauSearch.openSearchContainer();

    if (window.location.pathname != '/content/itau/resultados-busca.html') {
      setCookie("closePage", window.location.href, 200);
      setTimeout(function () {
        $('.itauSearch').focus();
      }, 500);
    }

    $('.search-wrapper-container').show();
  });
  $('#collapseMenuMobile').prepend($('.search .search-wrapper').clone(true));
  $('.search-form .itauSearch').on('focus', function () {
    if ($('.navbar-wrapper-mobile .search-wrapper').css('position') != 'fixed') {
      $('.navbar-wrapper-mobile .search-wrapper').css('top', 'auto');
      $('.navbar-wrapper-mobile .search-wrapper').css('position', 'fixed');
      $('.navbar-wrapper-mobile .search-wrapper').animate({
        "top": 0
      });
    }

    $('.navbar-wrapper-mobile .search-wrapper .logo').show();
    $('.navbar-wrapper-mobile .search-wrapper .icon-itaufonts_busca_consulta').hide();
    $('.navbar-wrapper-mobile .close').show();
    $('.search-wrapper-container').show();
    $(".text_fechar").fadeOut(700);
    $('.icon-itaufonts_fechar').animate({
      left: '100px'
    }, 750);

    if (this.value === '') {
      itauSearch.clearListElements();
    }

    $('html').removeClass('mobile-overflow');
  }).on('keyup', function (e) {
    if (e.keyCode === 8 && $('.search-form .itauSearch').val() == '' || e.keyCode === 46 && $('.search-form .itauSearch').val() == '') {
      $('.search-form-toggle').hide();
    } else {
      setTimeout(function () {
        $('.search-form-toggle').fadeIn(700);
      }, 800);
      $('.container-seach').removeClass('not-target');
      $(this).next('.close').addClass('open');
    }
  });
  $('.search-form .close').on('click', function () {
    var textInput = $(this).closest('.navbar-wrapper-mobile').find('.itauSearch').attr('placeholder');
    $(this).closest('.navbar-wrapper-mobile').find('.itauSearch').attr('aria-hidden', 'true').removeAttr('tabindex');
    $(this).parent().find('.search-toggle').attr('role', 'button').attr('tabindex', '0').attr('aria-label', textInput); // itauSearch.removeSearchTab();

    if (existResultContainer) {
      closeResultSearch();
    } else {
      itauSearch.closeSearchContainer();
      $('.navbar-wrapper-mobile .search-wrapper').css('position', 'relative');
      $('.navbar-wrapper-mobile .search-wrapper .logo').hide();
      $('.navbar-wrapper-mobile .search-wrapper .icon-itaufonts_busca_consulta').show();
      $('.navbar-wrapper-mobile .close').hide();

      if ($(this).parents('.navbar-wrapper-mobile').length > 0) {
        $('html').addClass('mobile-overflow');
      }
    }

    $('.search-form-toggle').hide();
    $(".text_fechar").show();
    $('.text-key-up .text').html('');
    setTimeout(function () {
      if ($(window).innerWidth() >= 992) {
        $("#search_").focus();
      } else {
        $('.navbar-wrapper-mobile .search-toggle').attr('tabindex', '0');
        setTimeout(function () {
          $('.navbar-wrapper-mobile .search-toggle').focus();
        }, 100);
      }
    }, 250);
  }).on('keydown', function (e) {
    if ($(this).closest('[class*="navbar-wrapper"').find('.links-list:visible').children().length === 0) {
      if (e.keyCode === 9 || e.which === 9) {
        if (!e.shiftKey) {
          window.addEventListener('beforeunload', function (evt) {
            $('.search-content').focus();
            e.preventDefault();
            return false;
          });
        }
      }
    }
  });
  var searchOptions = $('.search-content-auto-complete .links-list, .search-content-default-links .links-list');
  itauSearch.acessibility(searchOptions);
  itauSearch.init();

  function addClassResultComponet() {
    if (existResultContainer) {
      $('.container-seach').parent().show();
      $('.container-seach').addClass('in-result-search');
    }

    $('.container-seach').addClass('not-target');
  }

  addClassResultComponet();
  notAllowedChars();
});

function notAllowedChars() {
  $('.itauSearch').on('input', function () {
    var c = this.selectionStart,
        r = /[<^]|[>^]/gi,
        v = $(this).val();

    if (r.test(v)) {
      $(this).val(v.replace(r, ''));
      c--;
    }

    this.setSelectionRange(c, c);
  });
}

var itauSearch = {
  INPUT: $('.itauSearch'),
  SEARCH_TIMEOUT: null,
  TEXT_KEY_UP: $('.text-key-up'),
  TEXT_KEY_UP_PARENT: $('.input-text-key-up'),
  init: function init() {
    $('.itauSearch').keyup(function (e) {
      itauSearch.INPUT = this;
      clearTimeout(itauSearch.SEARCH_TIMEOUT);
      itauSearch.SEARCH_TIMEOUT = setTimeout(function () {
        itauSearch.generateArrData();
      }, 500);
      itauSearch.setTextHelpToResult();
    });
    itauSearch.setTextHelpToResult();
  },
  setTextHelpToResult: function setTextHelpToResult() {
    var text = itauSearch.INPUT.value;
    !text || text.trim() == '' ? $('.text-key-up').parent().hide() : $('.text-key-up').parent().show();
    $('.text-key-up').attr('href', PG_RESULT + '?q=' + encodeURIComponent(text));
    $('.text-key-up .text').html(text);
  },
  generateArrData: function generateArrData() {
    var query = escapeHTML(itauSearch.INPUT.value);
    var ESC_MAP = {
      '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      "'": '&#39;'
    };

    function escapeHTML(s, forAttribute) {
      return s.replace(forAttribute ? /[&<>'"]/g : /[&<>]/g, function (c) {
        return ESC_MAP[c];
      });
    }

    $('.search-content').hide();
    $.ajax({
      url: URL_FAST_AUTOCOMPLETE + query + "&Context=itc",
      cache: false,
      dataType: 'jsonp',
      crossDomain: true,
      timeout: 500
    }).done(function (response) {
      var arrData = eval('(' + response.d + ')');
      var RETURN_ARR = [];
      $('.search-content').fadeIn();

      if (arrData != "not Found") {
        RETURN_ARR = arrData;
      }

      itauSearch.bindElements(RETURN_ARR);
    }).fail(function (jqXHR, textStatus, msg) {
      var RETURN_MOCK = ["car", "itc", "abrir conta personnalite", "abrir conta empresas", "abertura de conta", "abrir conta", "aplicativo computador", "aplicativo celular", "app computador", "app celular", "aposentados", "aprendiz", "boleto vencido", "boleto", "cartão de débito personnalite", "cartão de débito e crédito", "cartão de crédito", "cartão de débito", "carta de crédito", "cartão platinum", "cartão black", "cartão gold", "carreira", "cartão", "empréstimo consignado para aposentados e pensionistas do inss", "empréstimo com garantia personnalite", "empréstimo consignado personnalite", "empréstimo pessoal personnalité", "empréstimo em moeda estrangeira", "empréstimo com garantia", "empréstimo personnalite", "empréstimo para viajar", "empréstimo aposentados", "empréstimo consignado", "fale com a assessoria", "facebook", "família", "fatura", "inclusão de pessoas com deficiência", "informativo itaú uniclass", "informações aos cotistas", "investimentos", "internacional", "informais", "incêndio", "ingressos", "você mais digital", "internet", "inss", "projeto visão de sucesso", "pré pago internacional", "profissionais informais", "propósito private bank", "programa de pontos", "previdência", "private bank", "proteção", "propaganda", "programas", "responsabilidade social private bank", "revendedores de consorcio", "responsabilidade civil", "revista personnalité", "renda protegida", "representante", "rentabilidade", "residencial", "residência", "recebimento", "seja cliente private bank", "seminário itaú empresas", "serviços internacionais", "servidores públicos", "seja personnalité", "senha eletrônica", "sempre presente", "seu comprovante", "segunda via", "segurança"];
      itauSearch.bindElements(RETURN_MOCK);
    });
  },
  bindElements: function bindElements(arr) {
    var val = itauSearch.INPUT.value;
    itauSearch.clearListElements();
    var ulElement, linkElement, liElement;
    var parentEl = $('.search-wrapper');
    ulElement = $(parentEl).find('.search-content-auto-complete .links-list');
    var count = 0;

    for (var i = 3; i < arr.length; i = i + 2) {
      if (count < 5 && val.length > 0) {
        liElement = document.createElement("li");
        linkElement = document.createElement("a");
        linkElement.setAttribute('href', PG_RESULT + '?q=' + encodeURIComponent(arr[i]));
        linkElement.innerHTML += itauSearch.boldString(arr[i], val);
        liElement.append(linkElement);
        ulElement.append(liElement);
        $('#label_search').text('sugestões de pesquisa abaixo, use TAB para verifcar lista');
        count++;
      }
    }

    itauSearch.acessibility(ulElement);
    $('.search-content-default-links, .search-content-auto-complete').hide();

    if ($(ulElement).children().length == 0) {
      $('#label_search').text('sem sugestões, aperte ENTER para pesquisar');
    }

    if ($(ulElement).children().length > 0) {
      $('.search-content-auto-complete').show();
    }

    if (val === "") {
      $('.search-content-default-links').show();
    }
  },
  clearListElements: function clearListElements() {
    var x = $(".search-content-auto-complete .links-list li");

    for (var i = 0; i < x.length; i++) {
      x[i].parentNode.removeChild(x[i]);
    }
  },
  removeAccents: function removeAccents(text) {
    text = text.toLowerCase();
    text = text.replace(new RegExp('[ÁÀÂÃ]', 'gi'), 'a');
    text = text.replace(new RegExp('[ÉÈÊ]', 'gi'), 'e');
    text = text.replace(new RegExp('[ÍÌÎ]', 'gi'), 'i');
    text = text.replace(new RegExp('[ÓÒÔÕ]', 'gi'), 'o');
    text = text.replace(new RegExp('[ÚÙÜ]', 'gi'), 'u');
    text = text.replace(new RegExp('[Ç]', 'gi'), 'c');
    return text;
  },
  boldString: function boldString(str, val) {
    var re = itauSearch.removeAccents(val);
    var indexOf = itauSearch.removeAccents(str).indexOf(re);

    if (indexOf >= 0) {
      var res = str.substring(indexOf, re.length);
      return str.replace(res, "<strong>" + res + "</strong>");
    } else {
      return str.replace(re, "<strong>" + val + "</strong>");
    }
  },
  closeSearchContainer: function closeSearchContainer() {
    $('body').css('overflow-y', 'unset');
    $('.search-wrapper-container').hide();
    $('.search .search-wrapper').hide();
    $('.search-form .close').removeClass('open');
    $('.container-seach').addClass('not-target');
    $('.itauSearch').val("");
    $('.search-content-default-links').show();
    $('.search-content-auto-complete').hide();
    $('.navbar-wrapper').children().removeClass('container-fluid');
    $('.navbar-wrapper').children().addClass('container');
  },
  openSearchContainer: function openSearchContainer() {
    setTimeout(function () {
      $('.search-wrapper-container').offset({
        left: 0
      });
    }, 50);
    $('.search-wrapper').show();
    $('.search-form-toggle').hide();
    $('.navbar-wrapper').children().removeClass('container');
    $('.navbar-wrapper').children().addClass('container-fluid');
  },
  acessibility: function acessibility(searchOptions) {
    searchOptions.each(function (index, element) {
      $(element).children().on('keydown', function (e) {
        var optionsLength = $(this).parent().children().length;
        var keyCode = e.keyCode;

        if ($(this).index() === optionsLength - 1) {
          if (keyCode === 9 || e.which === 9) {
            if (!e.shiftKey) {
              $('.itauSearch').focus();
              e.preventDefault();
              return false;
            }
          }
        }
      });
    });
  },
  acessibilityInput: function acessibilityInput() {
    setTimeout(function () {
      $('header .itauSearch').each(function (index, element) {
        if (!$(element).closest('.navbar-wrapper-mobile').length > 0) {
          $(element).unwrap().removeAttr('tabindex');
        }
      });
    }, 750);
  }
};
"use strict";
"use strict";
"use strict";

document.addEventListener("DOMContentLoaded", function () {
  $(".login-body .acessible-login").empty();
  var newLogin = ""; // newLogin += '<div class="col-sm-9 inputCardNone">'; // {/* <div class="${properties.clickableCard ? 'col-sm-6 form-login' : 'col-sm-9 inputCardNone'}"> */}

  newLogin += '<div class="titleacc">';
  newLogin += '<h3 class="title-account">' + $('#menuTypeAccess').text().trim() + '</h3>';
  newLogin += '</div>';
  newLogin += '<div class="login-form">';
  newLogin += '<div class="input-container select">';
  newLogin += '<label class="form-label" for="inputSelectId">' + $('#menuTypeAccess').text().trim() + '</label>';
  newLogin += '<input class="form-control dropdown-select" role="combobox" id="inputSelectId" aria-expanded="false"><i class="input-icon"></i>';
  newLogin += '<p class="feedback-message" aria-live="assertive"></p>';
  newLogin += '<ul class="customized-select selected" role="listbox" id="collapseTypeAccessBody" aria-labelledby="menuTypeAccess" tabindex="-1">';
  $('#collapseTypeAccess').find('li').map(function (index, element) {
    if ($(element).attr('data-select-form')) {
      newLogin += '<li role="option" class="form-control ' + $(element).attr('class') + '" aria-pressed="false" id="option-' + $(element).attr('data-select-form') + '" data-select-form="' + $(element).attr('data-select-form') + '" tabindex="0">';
      newLogin += $(element).text().trim();
      newLogin += '</li>';
    }
  });
  newLogin += '</ul>';
  newLogin += '</div>';
  newLogin += '</div>';
  newLogin += '<div class="line-form">';
  newLogin += '<div class="formLogin">';
  newLogin += '<div class="loginFields">';
  $('#menuTypeAccess').parent().find('.line-form').children().map(function (index, element) {
    if ($(element).attr('data-related-form')) {
      // newLogin += '<div id="' + $(element).attr('id') + 'Mobile" class="' + $(element).attr('class') + '" data-related-form="' + $(element).attr('data-related-form') + '" style="' + $(element).attr('style') + '">';
      var input = $(element).find('input');

      if (input.length == 2) {
        newLogin += '<div id="formWrapperagenciaConta-mobile" data-related-form="' + $(element).attr('data-related-form').trim() + '">';
        newLogin += '<div class="input-container ' + input.attr('id') + '-Mobile">';
        newLogin += '<label class="form-label" id="agenciaLabelMobile" for="agencia-Mobile">agência</label>';
        newLogin += '<input id="agencia-Mobile"  type="' + input.attr('type') + '" required="' + input.attr('required') + '" maxlength="' + input.attr('maxlength') + '" class="form-control agencia ' + input.attr('class') + '" name="' + input.attr('name') + '">';
        newLogin += '<i class="input-icon"></i>';
        newLogin += '<p class="feedback-message" aria-live="assertive"></p>';
        newLogin += '</div>';
        newLogin += '<div class="input-container ' + input.attr('id') + '-Mobile">';
        newLogin += '<label class="form-label" id="contaLabelMobile" for="conta-Mobile">conta</label>';
        newLogin += '<input id="conta-Mobile"  type="' + input.attr('type') + '" required="' + input.attr('required') + '" maxlength="' + input.attr('maxlength') + '" class="form-control ' + input.attr('class') + '" name="' + input.attr('name') + '">';
        newLogin += '<i class="input-icon"></i>';
        newLogin += '<p class="feedback-message" aria-live="assertive"></p>';
        newLogin += '</div>';
        newLogin += '</div>';
      } else {
        newLogin += '<div class="input-container ' + input.attr('id') + '-Mobile" id="formWrapper' + input.attr('id') + '-Mobile" data-related-form="' + $(element).attr('data-related-form').trim() + '">';
        newLogin += '<label class="form-label" for="' + input.attr('id') + 'Mobile"> ' + $(element).find('label').text().trim() + '</label>';
        newLogin += '<input id="' + input.attr('id') + 'Mobile"  type="' + input.attr('type') + '" required="' + input.attr('required') + '" maxlength="' + input.attr('maxlength') + '" class="form-control ' + input.attr('class') + '" name="' + input.attr('name') + '">';
        newLogin += '<i class="input-icon"></i>';
        newLogin += '<p class="feedback-message" aria-live="assertive"></p>';
        newLogin += '</div>';
      } // newLogin += '</div>';

    }
  });
  newLogin += '<div class="input-container">';
  newLogin += '<div class="check-radio-handler">';
  newLogin += '<input type="checkbox" aria-label="checkbox aria label" value="value" id="checkbox1">';
  newLogin += '<label for="checkbox1">';
  newLogin += '<p class="rememberDat">lembrar meus dados</p>';
  newLogin += '</label>';
  newLogin += '<div class="container-btn">';
  newLogin += '<div class="button-acess">';
  newLogin += '<button id="btnLogin2" type="button" class="button-main">';
  newLogin += '<a>acessar</a>';
  newLogin += '</button>';
  newLogin += '</div>';
  newLogin += '</div>';
  newLogin += '</div>';
  newLogin += '</div>';
  newLogin += '</div>';
  newLogin += '</div>';
  newLogin += '</div>';
  $(".login-body .acessible-login").html(newLogin);
  $("#agenciaMobile");
  $(".codOp-Mobile").attr("style", "display: none");
  $(".cc-Mobile").attr("style", "display: none");
  $(".cpf-Mobile").attr("style", "display: none");
  $("#inputSelectId").on("change", function () {
    if ($(this).val() == "agência e conta") {
      $("#formWrapperagenciaConta-mobile").removeAttr("style");
      $(".codOp-Mobile").attr("style", "display: none");
      $(".cc-Mobile").attr("style", "display: none");
      $(".cpf-Mobile").attr("style", "display: none");
      $("#agenciaMobile");
    } else if ($(this).val() == "código do operador") {
      $(".codOp-Mobile").removeAttr("style");
      $(".cc-Mobile").attr("style", "display: none");
      $(".cpf-Mobile").attr("style", "display: none");
      $("#formWrapperagenciaConta-mobile").attr("style", "display: none");
      $("#codOpMobile");
    } else if ($(this).val() == "cartão de crédito") {
      $(".cc-Mobile").removeAttr("style");
      $(".codOp-Mobile").attr("style", "display: none");
      $(".cpf-Mobile").attr("style", "display: none");
      $("#formWrapperagenciaConta-mobile").attr("style", "display: none");
      $("#ccMobile");
    } else if ($(this).val() == "CPF") {
      $(".cpf-Mobile").removeAttr("style");
      $(".cc-Mobile").attr("style", "display: none");
      $(".codOp-Mobile").attr("style", "display: none");
      $("#formWrapperagenciaConta-mobile").attr("style", "display: none");
      $("#cpfMobile");
    }
  });
  $('.login-body').each(function (index, el) {
    login.init(el);
    var typeAccessOptions = $(el).find('.dropdown-select .option-access');
    $(typeAccessOptions).on('keydown', function (e) {
      login.acessibility(e, typeAccessOptions, $(this).index());
    });
  });
});
"use strict";

function _typeof(obj) {
  "@babel/helpers - typeof";

  if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") {
    _typeof = function _typeof(obj) {
      return typeof obj;
    };
  } else {
    _typeof = function _typeof(obj) {
      return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj;
    };
  }

  return _typeof(obj);
}

$(document).ready(function () {
  $('.access-control').each(function (index, el) {
    login.init(el);
    var typeAccessOptions = $(el).find('.dropdown-select .option-access');
    $(typeAccessOptions).on('keydown', function (e) {
      login.acessibility(e, typeAccessOptions, $(this).index());
    });
  });
});
var validUser = false;
var mensgaemRepetida = false;
var contador = 0;

var mensagemErroNaN = function mensagemErroNaN(el, identificador) {
  $(el).find(identificador).keyup(function (e) {
    if (identificarKeyCode(e.keyCode)) {
      if (identificador == '#agencia, .agencia, #agencia-Mobile') {
        $('#agenciaLabel, #agenciaLabelMobile').text("agência Inválida");
        setTimeout(function () {
          $('#agenciaLabel, #agenciaLabelMobile').text("agência");
        }, 1000);
      } else if (identificador == '#conta, .conta, #conta-Mobile') {
        $('#contaLabel, #contaLabelMobile').text("conta inválida");
        setTimeout(function () {
          $('#contaLabel, #contaLabelMobile').text("conta");
        }, 1000);
      }
    }
  });
};

var identificarKeyCode = function identificarKeyCode(keyCode) {
  console.log(keyCode);
  var keyCodeNumericos = [8, 9, 13, 16, 17, 18, 27, 32, 33, 34, 35, 36, 37, 38, 39, 40, 44, 45, 46, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 173, 174, 175, 193];
  keyCodeNumericos = keyCodeNumericos.filter(function (kcd) {
    return keyCode == kcd;
  });
  return keyCodeNumericos.length == 0 ? true : false;
};

var logonHipercard = function logonHipercard(cartao, parceiro) {
  $('form[name="banklinecartaoNI"] input[name="portal"]').val('003');
  $('form[name="banklinecartaoNI"]').submit();
};

var login = {
  IS_VALID: true,
  AGENCIA: '',
  CONTA: '',
  DAC: '',
  OPERADOR: '',
  USUARIO_CARTAO: '',
  USUARIO_CPF: '',
  init: function init(el) {
    $(el).find('button.options').click(function () {
      $(this).toggleClass('open');
    });
    login.placeholderResetOnFocus(el);
    $(document).click(function (e) {
      var clickIn = $(e.target);

      var _open = $(".dropdown-select").hasClass('show');

      if (_open === true && !clickIn.hasClass('option-access') && !clickIn.parents('.remember').length) {
        $(el).find('button.options').removeClass('open');
        $(el).find('.dropdown-select').removeClass('show collapse');
        $(el).find('.dropdown-select').addClass('collapsing');
        setTimeout(function () {
          $(el).find('.dropdown-select').removeClass('collapsing');
          $(el).find('.dropdown-select').addClass('collapse');
        }, 300);
      }
    });

    function manipulateForms(th, el) {
      $('#collapseTypeAccess .option-access[aria-pressed="true"]').attr('aria-pressed', 'false');
      $(th).attr('aria-pressed', 'true');
      $(th).siblings().removeClass('selected');
      $(th).addClass('selected');
      $(el).find('div[id^=formWrapper], div[class*=formWrapper]').hide();
      $(el).find('.' + $(th).data('select-form')).show();
      $(el).find($('.' + $(th).data('select-form')).find('input:first')).focus();
      $(el).find('button.options').click();
      login.setButtonState('disabled', el);
      $(el).find('.options.collapsed .text-btn').text($(th).text().trim());
      $(el).find($('#' + $(th).data('select-form')).find('input:first')).each(function () {
        var inputId = $(th).attr('id');
        var inputValue = $(th).val();
        var cookieObject = cookieLogin.parseObject();
        $.each(cookieObject, function (key, val) {
          if (inputId === key) {
            if (inputValue !== "") {
              login.setButtonState('enable', el);
            }

            $('.access-control #rememberData, .access-control .rememberDataModal').attr("checked", cookieObject[key] !== '');
          }
        });
      });
    }

    $(el).find('.dropdown-select .option-access:not(.more, .remember)').click(function () {
      manipulateForms(this, el);
    });
    $(el).find('.dropdown-select .option-access:not(.more, .remember)').keypress(function (e) {
      if (e.which == 13) {
        manipulateForms(this, el);
      }
    });
    var validateAgencia = $(el).find('#formWrapperAgenciaConta #agencia, .formWrapperAgenciaConta .agencia');
    $(validateAgencia).keyup(function (e) {
      e.currentTarget.maxLength = 4;

      if (this.value.length === this.maxLength && e.originalEvent.key >= 0 && e.originalEvent.key <= 9) {
        $(this).nextAll('input').first().focus();
      }
    });
    var validateOtherFields = $(el).find('#conta, #codOp, #cpf, .conta, .codOp, .cpf');
    validateOtherFields.bind("keydown", function (e) {
      if (e.which === 13) {
        login.validationType(login.getCurrentFieldset(el), el);
      }
    });
    var validateCreditCard = $(el).find('#cc, .cc');
    validateCreditCard.bind('keydown', function (e) {
      if (e.which === 13) {
        var creditCardField = validateCreditCard.val().replace(/ +/g, '');

        if (creditCardField.length > 12) {
          $(el).find('#btnLoginSubmit, .btnLoginSubmit').click();
        } else {
          alert('Por favor, informe um Número de Cartão válido');
        }
      }
    });
    login.setMask(el);
    $(el).find('#btnLoginSubmit, .btnLoginSubmit').click(function () {
      login.validationType(login.getCurrentFieldset(el), el);
      $('.line-form > div input').val('');
    });

    if ($('body').attr('data-segment') === 'cartoes') {
      $(el).find('div[id^=formWrapper], div[class*=formWrapper]').hide();
      $(el).find('[id^=formWrapperCartaoCredito], [class*=formWrapperCartaoCredito]').show();
      $(el).find('.option-access').removeClass('selected');
      $(el).find('.option-access[data-select-form="cartao-credito"]').addClass('selected');
      $(el).find('.text-btn').text("cartão de crédito");
    }

    if ($.cookie('ckTipoLogin')) {
      $(el).find('div[id^=formWrapper], div[class*=formWrapper]').hide();

      if ($.cookie('ckTipoLogin') === 'ag_conta') {
        $(el).find('#formWrapperAgenciaConta, .formWrapperAgenciaConta').show();
        $(el).find('.text-btn').text($(el).find('[data-select-form="agencia-conta"]').text());
      } else if ($.cookie('ckTipoLogin') === 'cod_operador') {
        $(el).find('#formWrapperCodigoOperador, .formWrapperCodigoOperador').show();
        $(el).find('.text-btn').text($(el).find('[data-select-form="codigo-operador"]').text());
      } else if ($.cookie('ckTipoLogin') === 'cartao_credito') {
        $(el).find('#formWrapperCartaoCredito, .formWrapperCartaoCredito').show();
        $(el).find('.text-btn').text($(el).find('[data-select-form="cartao-credito"]').text());
      } else if ($.cookie('ckTipoLogin') === 'cpf') {
        $(el).find('#formWrapperCpf, .formWrapperCpf').show();
        $(el).find('.text-btn').text($(el).find('[data-select-form="cpf"]').text());
      }
    }

    cookieLogin.setFieldsData(cookieLogin.parseObject(), el);
  },
  setMask: function setMask(el) {
    $(el).find('#agencia, .agencia').setMask({
      mask: '9999'
    });
    $(el).find('#conta, .conta, #conta-Mobile').setMask({
      mask: '99999-9',
      autoTab: false,
      onValid: function fn() {
        setTimeout(function (el) {
          if ($(el).find('#conta, .conta').is(':visible')) {
            var fieldLength = $.trim($(el).find('#conta, .conta').val()).replace('-', '').length;

            if (fieldLength >= 6 && $(el).find('#agencia, .agencia').val().length == 4) {
              login.setButtonState('enable', el);
            } else {
              login.setButtonState('disabled', el);
            }
          }
        }, 100, el);
        return fn;
      }()
    });
    $(el).find('#codOp, .codOp, #codOpMobile').setMask({
      mask: '999999999',
      autoTab: false,
      onValid: function fn() {
        setTimeout(function fn() {
          if ($(el).find('#codOp, .codOp').is(':visible')) {
            var fieldLength = $.trim($(el).find('#codOp, .codOp').val()).length;

            if (fieldLength >= 9) {
              login.setButtonState('enable', el);
            } else {
              login.setButtonState('disabled', el);
            }
          }
        }, 100);
        return fn;
      }()
    });
    $(el).find('#cc, .cc').setMask({
      mask: '9999 9999 9999 9999',
      autoTab: false,
      onValid: function onValid() {
        setTimeout(function () {
          var fieldLength = $.trim($(el).find('#cc, .cc').val()).length;

          if (fieldLength >= 16) {
            login.setButtonState('enable', el);
          } else {
            login.setButtonState('disabled', el);
          }
        }, 100);
      }
    });
    $(el).find('#cpf, input.cpf').setMask({
      mask: '999.999.999-99',
      autoTab: false,
      onValid: function fn() {
        setTimeout(function (el) {
          if ($(el).find('#cpf, input.cpf').is(':visible')) {
            var fieldLength = $.trim($(el).find('#cpf, input.cpf').val()).replace(/[^\d]+/g, '').length;

            if (fieldLength >= 11) {
              login.setButtonState('enable', el);
            } else {
              login.setButtonState('disabled', el);
            }
          }
        }, 100, el);
        return fn;
      }()
    });
  },
  validationType: function validationType(fieldsetObj, el) {
    if (fieldsetObj) {
      if (fieldsetObj[0].id === 'formWrapperAgenciaConta' || fieldsetObj[0].classList.contains('formWrapperAgenciaConta')) {
        // Agencia e Conta
        login.agencyAccountValidate(fieldsetObj, el);
      } else if (fieldsetObj[0].id === 'formWrapperCodigoOperador' || fieldsetObj[0].classList.contains('formWrapperCodigoOperador')) {
        // Cod Operador
        login.operatorCodeValidate(fieldsetObj, el);
      } else if (fieldsetObj[0].id === 'formWrapperCartaoCredito' || fieldsetObj[0].classList.contains('formWrapperCartaoCredito')) {
        // Cartao de Credito
        login.creditCardValidate(fieldsetObj, el);
      } else if (fieldsetObj[0].id === 'formWrapperCpf' || fieldsetObj[0].classList.contains('formWrapperCpf')) {
        // CPF
        login.cpfValidate(fieldsetObj, el);
      } else {
        return false;
      }
    } else {
      return false;
    }
  },
  agencyAccountValidate: function agencyAccountValidate(fsObj, el) {
    var agencyRegex = /^\d{4}$/;
    var accountRegex = /^\d{5}-\d{1}$/;
    login.AGENCIA = fsObj.children('input')[0].value;
    login.CONTA = fsObj.children('input')[1].value;

    if (!agencyRegex.test(login.AGENCIA) && !accountRegex.test(login.CONTA)) {
      login.AGENCIA = '';
      login.CONTA = '';
      fsObj.children('input')[0].focus();
      fsObj.children('input')[0].value = login.AGENCIA;
      fsObj.children('input')[1].value = login.CONTA;
      alert("Por favor, digite o número de sua agência e conta corretamente, \n(Exemplo agência: '9999') e (Exemplo conta: '99999-9')");
      login.IS_VALID = false;
    } else if (!agencyRegex.test(login.AGENCIA)) {
      login.AGENCIA = '';
      fsObj.children('input')[0].focus();
      fsObj.children('input')[0].value = login.AGENCIA;
      alert("Por favor, digite o número de sua agência corretamente. \n(Exemplo: '9999')");
      login.IS_VALID = false;
    } else if (!accountRegex.test(login.CONTA)) {
      login.CONTA = '';
      fsObj.children('input')[1].focus();
      fsObj.children('input')[1].value = login.CONTA;
      alert("Por favor, digite o número da sua conta corretamente, incluindo o dígito verificador. \n(Exemplo: '99999-9')");
      login.IS_VALID = false;
    } else {
      login.IS_VALID = true;
    }

    if (!login.IS_VALID) {
      login.IS_VALID = true;
      return false;
    }

    if (!login.IS_VALID) {
      login.IS_VALID = true;
      return false;
    }

    login.CONTA = fsObj.children('input')[1].value.split('-')[0];
    login.DAC = fsObj.children('input')[1].value.split('-')[1];
    $(login.getCurrentForm(el)).find('input#agc, input.agc').val(login.AGENCIA);
    $(login.getCurrentForm(el)).find('input#cnt, input.cnt').val(login.CONTA);
    $(login.getCurrentForm(el)).find('input#dac, input.dac').val(login.DAC);
    $.trim($(el).find('#cpf, input.cpf').val()).replace(/[^\d]+/g, '').length;
    login.manageData('ag_conta', login.getCurrentFieldset(el), el);
    login.submit(login.getCurrentForm(el));
  },
  operatorCodeValidate: function operatorCodeValidate(fsObj, el) {
    var opCodeRegex = /^\d{9}$/;
    login.OPERADOR = fsObj.children('input')[0].value;

    if (!opCodeRegex.test(login.OPERADOR)) {
      login.OPERADOR = '';
      alert("Por favor, digite o 'Código do Operador' corretamente.");
      login.IS_VALID = false;
    } else {
      login.IS_VALID = true;
    }

    if (!login.IS_VALID) {
      login.IS_VALID = true;
      return false;
    }

    $(login.getCurrentForm(el)).find('input#operador, input.operador').val(login.OPERADOR);
    login.manageData('cod_operador', login.getCurrentFieldset(el), el);
    login.submit(login.getCurrentForm(el));
  },
  creditCardValidate: function creditCardValidate(fsObj, el) {
    var ccRegex = /^(\d{16})$/;
    login.USUARIO_CARTAO = fsObj.children('input')[0].value.replace(/ +/g, '');

    if (!ccRegex.test(login.USUARIO_CARTAO)) {
      login.USUARIO_CARTAO = '';
      alert('Por favor, informe um Número de Cartão válido.');
      login.IS_VALID = false;
    } else {
      login.IS_VALID = true;
    }

    if (!login.IS_VALID) {
      login.IS_VALID = true;
      return false;
    }

    $(login.getCurrentForm(el)).find('input#usuariocartao, input.usuariocartao').val(login.USUARIO_CARTAO);
    login.manageData('cartao_credito', login.getCurrentFieldset(el), el);

    var _binCartao = login.USUARIO_CARTAO.substring(0, 6);

    switch (_binCartao) {
      default:
        login.submit(login.getCurrentForm(el));
    }
  },
  cpfValidate: function cpfValidate(fsObj, el) {
    login.USUARIO_CPF = fsObj.children('input')[0].value;
    login.USUARIO_CPF = login.USUARIO_CPF.replace(/[^\d]+/g, '');
    if (login.USUARIO_CPF == '') login.IS_VALID = false;
    if (login.USUARIO_CPF.length != 11 || login.USUARIO_CPF == "00000000000" || login.USUARIO_CPF == "11111111111" || login.USUARIO_CPF == "22222222222" || login.USUARIO_CPF == "33333333333" || login.USUARIO_CPF == "44444444444" || login.USUARIO_CPF == "55555555555" || login.USUARIO_CPF == "66666666666" || login.USUARIO_CPF == "77777777777" || login.USUARIO_CPF == "88888888888" || login.USUARIO_CPF == "99999999999") login.IS_VALID = false;
    add = 0;

    for (i = 0; i < 9; i++) {
      add += parseInt(login.USUARIO_CPF.charAt(i)) * (10 - i);
    }

    rev = 11 - add % 11;
    if (rev == 10 || rev == 11) rev = 0;
    if (rev != parseInt(login.USUARIO_CPF.charAt(9))) login.IS_VALID = false;
    add = 0;

    for (i = 0; i < 10; i++) {
      add += parseInt(login.USUARIO_CPF.charAt(i)) * (11 - i);
    }

    rev = 11 - add % 11;
    if (rev == 10 || rev == 11) rev = 0;
    if (rev != parseInt(login.USUARIO_CPF.charAt(10))) login.IS_VALID = false;

    if (!login.IS_VALID) {
      login.USUARIO_CPF = '';
      alert('Por favor, informe um CPF válido.');
      login.IS_VALID = true;
      return false;
    }

    $(login.getCurrentForm(el)).find('input#usuariocpf, input.usuariocpf').val(login.USUARIO_CPF);
    login.manageData('cpf', login.getCurrentFieldset(el), el);
    login.submit(login.getCurrentForm(el));
  },
  setButtonState: function setButtonState(state, el) {
    var sendButton = $(el).find('#btnLoginSubmit, .btnLoginSubmit');

    if (state === 'enable') {
      sendButton.addClass('active').removeAttr('disabled');
      if (!sendButton.hasClass("btnLoginSubmit")) sendButton.removeClass('icon-itaufonts_seguranca').addClass('icon-itaufonts_seta_right');
    } else if (state === 'disabled') {
      sendButton.removeClass('active').attr(state, state);
      if (!sendButton.hasClass("btnLoginSubmit")) sendButton.removeClass('icon-itaufonts_seta_right').addClass('icon-itaufonts_seguranca');
    }
  },
  getCurrentFieldset: function getCurrentFieldset(el) {
    return $(el).find('div[id^=formWrapper]:visible, div[class*=formWrapper]:visible')[0] ? $(el).find('div[id^=formWrapper]:visible, div[class*=formWrapper]:visible') : false;
  },
  getRelatedFormName: function getRelatedFormName(el) {
    return login.getCurrentFieldset(el) ? login.getCurrentFieldset(el).data('related-form') : false;
  },
  getCurrentForm: function getCurrentForm(el) {
    return $(el).find('form[name=' + login.getRelatedFormName(el) + ']')[0] ? $(el).find('form[name=' + login.getRelatedFormName(el) + ']') : false;
  },
  manageData: function manageData(type, formFieldset, el) {
    if ($(el).find('#rememberData, .rememberDataModal').is(':checked')) {
      $.cookie('ckTipoLogin', type, {
        path: '/',
        expires: 9999
      });
      cookieLogin.send(formFieldset);
    } else {
      cookieLogin["delete"](formFieldset);
    }
  },
  submit: function submit(form) {
    form.submit();
  },
  acessibility: function acessibility(e, typeAccessOptions, indexItem) {
    var keyCode = e.keyCode;
    var optionsLength = typeAccessOptions.length;
    typeAccessOptions.each(function (index, element) {
      if (indexItem === optionsLength - 1) {
        if (keyCode === 9 || e.which === 9) {
          if (!e.shiftKey) {
            $($(typeAccessOptions)[0]).focus();
            e.preventDefault();
            return false;
          }
        }
      }
    });
  },
  placeholderResetOnFocus: function placeholderResetOnFocus(el) {
    var focusTxt = "";
    $(el).find('input').focus(function () {
      if (_typeof($(this).attr('placeholder')) !== (typeof undefined === "undefined" ? "undefined" : _typeof(undefined)) && $(this).attr('placeholder') !== false) {
        focusTxt = $(this).attr('placeholder');
        $(this).attr('placeholder', '');
      } else {
        focusTxt = "";
      }
    });
    $(el).find('input').focusout(function () {
      $(this).attr('placeholder', focusTxt);
    });
  }
};
"use strict";

var cookieLogin = {
  name: "RMBRLOGIN",
  send: function send(targetForm) {
    cookieLogin.save(cookieLogin.name, cookieLogin.createObject(targetForm), 9999);
  },
  save: function save(name, jsonObj, days) {
    var value = JSON.stringify(jsonObj);
    $.cookie(name, value, {
      expires: days,
      path: "/"
    });
  },
  "delete": function _delete(targetForm) {
    var cookieObject = cookieLogin.parseObject();

    if (cookieObject) {
      $(targetForm).find('input').each(function () {
        var inputId = $(this).attr('id');
        var inputValue = $(this).val();
        $.each(cookieObject, function (key, val) {
          if (inputId === key) {
            cookieObject[key] = '';
          }
        });
      });
      var count = 0;

      for (propertie in cookieObject) {
        if (cookieObject[propertie]) count++;
      }

      if (count > 0) {
        cookieLogin.save(cookieLogin.name, cookieObject, 9999);
      } else {
        cookieLogin.save(cookieLogin.name, '', -1);
        $.cookie('ckTipoLogin', '', {
          path: '/',
          expires: -1
        });
      }
    }
  },
  setFieldsData: function setFieldsData(cookieObject, el) {
    if (cookieLogin.isValidObject(cookieObject)) {
      $(el).find("#formWrapperAgenciaConta #agencia, .formWrapperAgenciaConta .agencia").val(cookieObject.agencia);
      $(el).find("#formWrapperAgenciaConta #conta, .formWrapperAgenciaConta .conta").val(cookieObject.conta);
      $(el).find("#formWrapperCodigoOperador #codOp, .formWrapperCodigoOperador .codOp").val(cookieObject.codOp);
      $(el).find("#formWrapperCartaoCredito #cc, .formWrapperCartaoCredito .cc").val(cookieObject.cc);
      $(el).find("#formWrapperCpf #cpf, .formWrapperCpf .cpf").val(cookieObject.cpf);
      login.setButtonState('enable', el);
      $('.access-control #rememberData, .access-control .rememberDataModal').attr("checked", true);
    }
  },
  createObject: function createObject(targetForm) {
    var cookieObject = cookieLogin.parseObject();

    if (cookieObject === null) {
      cookieObject = {
        agencia: "",
        conta: "",
        codOp: "",
        cc: "",
        cpf: ""
      };
    }

    $(targetForm).find('input').each(function () {
      var inputId = $(this).attr('id') != null ? $(this).attr('id') : $(this).attr('class');
      var inputValue = $(this).val();
      $.each(cookieObject, function (key, val) {
        if (inputId === key) {
          cookieObject[key] = inputValue;
        }
      });
    });
    return cookieObject;
  },
  parseObject: function parseObject() {
    var strValuesCookie = $.cookie(cookieLogin.name);
    var cookieObject = null;

    if (strValuesCookie !== null && typeof strValuesCookie !== "undefined") {
      cookieObject = JSON.parse(strValuesCookie);
    }

    return cookieObject;
  },
  isValidObject: function isValidObject(cookieObject) {
    return cookieObject !== null && typeof cookieObject !== "undefined";
  }
};
"use strict";

$(document).ready(function () {
  removeAriaLabel();
  $(window).on('resize', function () {
    removeAriaLabel();
  });

  function removeAriaLabel() {
    var labelBuscaLogin = document.querySelector('.navbar-wrapper section.content-nav-end.float-right.d-flex.flex-row.align-items-center');

    if ($(window).width() < 992) {
      labelBuscaLogin.removeAttribute('aria-label');
    } else {
      labelBuscaLogin.setAttribute('aria-label', 'busca e login');
    }
  }

  if ($('body').data('segment') == 'private') {
    $('#mobile-access-button').unbind('click');
    $('#mobile-access-button').on('click', function () {
      if ($('#hamburguer-menu').attr('aria-expanded') == 'true') {
        $('#hamburguer-menu').trigger('click');
      }
    });
  }

  $('#hamburguer-menu').on('click', function () {
    $('.section-navigation-cta').toggleClass('show');

    if (!$('.navbar-wrapper-mobile').hasClass('show')) {
      $('#body').attr('aria-hidden', 'true').css('display', 'none');
      $('.footer-itau').attr('aria-hidden', 'true').css('display', 'none');
      $('.skip').attr('aria-hidden', 'true').css('display', 'none');
    }

    if ($('.navbar-wrapper-mobile').hasClass('show')) {
      $('#body').attr('aria-hidden', 'false').css('display', 'block');
      $('.footer-itau').attr('aria-hidden', 'false').css('display', 'block');
      $('.skip').attr('aria-hidden', 'false').css('display', 'block');
      $('body').css('overflow', '');
    }
  });
  var mainHeader = {
    init: function init() {
      $('.navbar-wrapper-mobile').on('shown.bs.collapse', function () {
        //mainHeader.navMobileHeight();
        $('body').css('overflow', 'hidden');
      });
      $('.smart-banner-app').on('show.bs.collapse', function () {
        mainHeader.updatePaddingBody();
      });
      $('.smart-banner-app').on('hide.bs.collapse', function () {
        mainHeader.updatePaddingBody();
      });
    },
    bodyAnchor: function bodyAnchor() {
      $('.responsivegrid').attr({
        id: 'body',
        role: 'main'
      });
    },
    // Set padding-top body site
    setPaddingBody: function setPaddingBody() {
      var heigthHeader = $('header').height();
      $('body').css('padding-top', heigthHeader);
      $('.main-banner .banner .image.fixed-image').css('background-position-y', heigthHeader);
    },
    // Update padding-top body site
    updatePaddingBody: function updatePaddingBody() {
      var interval = setInterval(mainHeader.setPaddingBody, 10);
      setTimeout(function () {
        clearInterval(interval);
      }, 3000);
    },
    // Set height nav mobile
    navMobileHeight: function navMobileHeight() {
      var headerHeight = $('header').height();
      var sectionNavigationHeight = $('.section-navigation-cta').length ? $('.section-navigation-cta').height() : 0;
      var heightWindow = $(window).height();
      var totalHeight = headerHeight + sectionNavigationHeight;

      if (isSafari && window.orientation == 0) {
        $('.navbar-wrapper-mobile').css('height', heightWindow - totalHeight + 'px');
      }

      if (!isSafari && $('.smart-banner-app').hasClass('show') && window.orientation == 0) {
        $('.navbar-wrapper-mobile').css('height', heightWindow - totalHeight + 124 + 'px');
      }

      if (!isSafari && $('.smart-banner-app').hasClass('show')) {
        $('.navbar-wrapper-mobile').css('height', heightWindow - totalHeight + 80 + 'px');
      }

      if (!isSafari && !$('.smart-banner-app').hasClass('show') && !window.orientation == 0) {
        $('.navbar-wrapper-mobile').css('height', heightWindow - totalHeight + 63 + 'px');
      }
    }
  };
  mainHeader.init();
  mainHeader.bodyAnchor();
  mainHeader.setPaddingBody();
  $(window).resize(function () {
    mainHeader.setPaddingBody(); //mainHeader.navMobileHeight();
  });
});
"use strict";

$(document).ready(function ($) {
  var metaTitleCookie = $("meta[name='pageTitleCookie']");
  var metaSubtitleCookie = $("meta[name='pageSubtitleCookie']");
  var metaIconCookie = $("meta[name='iconCookie']");

  if (metaTitleCookie && metaTitleCookie.length) {
    var settings = {
      getTitle: metaTitleCookie.attr('content'),
      getSubtitle: metaSubtitleCookie.attr('content'),
      getIcon: metaIconCookie.attr('content'),
      setDomain: window.location.hostname,
      expires: 365,
      expireRecord: 7,
      createCard: false,
      excludeFinalPath: [],
      acceptOnly: [],
      clearAll: false
    };
    var getUrl = (window.location.href.indexOf("?") < 0 ? window.location.href : window.location.href.split("?").shift()).replace("#", "");
    var dataList = [];
    var viewTime = 0;
    var found = false;

    var setViewTime = function setViewTime() {
      setInterval(function () {
        viewTime++;
      }, 1000);
    };

    if (!getCookie('pageStatsCookies')) {
      dataList.push({
        url: getUrl,
        title: settings.getTitle,
        subtitle: settings.getSubtitle,
        icon: settings.getIcon,
        views: 1,
        viewTime: viewTime,
        createTime: new Date(),
        cleared: settings.clearAll
      });
      setCookie('pageStatsCookies', JSON.stringify(dataList), settings.expires);
      setViewTime();
      $(window).on('beforeunload', function () {
        dataList = JSON.parse(getCookie('pageStatsCookies'));
        dataList.map(function (e) {
          if (e.url === getUrl) {
            e.viewTime += viewTime;
            return;
          }
        });
        setCookie('pageStatsCookies', JSON.stringify(dataList), settings.expires);
      });
    } else {
      dataList = JSON.parse(getCookie('pageStatsCookies'));
      dataList.map(function (e) {
        if (e.url === getUrl) {
          found = true;
          e.title = settings.getTitle;
          e.subtitle = settings.getSubtitle;
          e.icon = settings.getIcon;
          e.views += 1;
          e.viewTime = viewTime;
          e.createTime = new Date();
          e.cleared = settings.clearAll;
          return;
        }
      });

      if (!found) {
        dataList.push({
          url: getUrl,
          title: settings.getTitle,
          subtitle: settings.getSubtitle,
          icon: settings.getIcon,
          views: 1,
          viewTime: viewTime,
          createTime: new Date(),
          cleared: settings.clearAll
        });
      }

      setCookie('pageStatsCookies', JSON.stringify(dataList), settings.expires);
      setViewTime();
      $(window).on('beforeunload', function () {
        dataList.map(function (e) {
          if (e.url === getUrl) {
            e.viewTime += viewTime;
            return;
          }
        });
        setCookie('pageStatsCookies', JSON.stringify(dataList), settings.expires);
      });
    }
  }
});
"use strict";
/* $('.middle-footer .contact a').each(function () {
    var phone = $(this).attr('data-phone');
    $(this).attr('href', 'tel:' + phone);
}); */

document.addEventListener('DOMContentLoaded', function () {
  $('.links-footer .common-links-shared').each(function (index) {
    var linksFooterMobile = '';
    var title = $(this).find('.column-title').text();
    var navLinks = $(this).find('ul').html();
    linksFooterMobile += '<div class="card">';
    linksFooterMobile += '<div class="card-header" id="headingFooter' + index + '">';
    linksFooterMobile += '<div class="container">';
    linksFooterMobile += '<span class="mb-0">';
    linksFooterMobile += '<button class="btn btn-link p-0 collapsed" type="button" data-toggle="collapse" data-target="#collapseFooter' + index + '" aria-expanded="false" aria-controls="collapseFooter' + index + '">';
    linksFooterMobile += title;
    linksFooterMobile += '</button>';
    linksFooterMobile += '</span>';
    linksFooterMobile += '</div>'; // .container

    linksFooterMobile += '</div>'; // .card-header

    linksFooterMobile += '<div id="collapseFooter' + index + '" class="card-collapse collapse" aria-labelledby="headingFooter' + index + '" data-parent="#links-footer-mobile">';
    linksFooterMobile += '<div class="card-body">';
    linksFooterMobile += '<div class="container">';
    linksFooterMobile += '<div class="common-links">';
    linksFooterMobile += '<nav>';
    linksFooterMobile += '<ul>';
    linksFooterMobile += navLinks;
    linksFooterMobile += '</ul>';
    linksFooterMobile += '</nav>';
    linksFooterMobile += '</div>'; // .common-links

    linksFooterMobile += '</div>'; // .container

    linksFooterMobile += '</div>'; // .card-body

    linksFooterMobile += '</div>'; // .card-collapse

    linksFooterMobile += '</div>'; // .card

    $('#links-footer-mobile').append(linksFooterMobile);
  });
});
$(document).ready(function(){
    var duration = parseInt($('.video-carousel-container__list').data('slide-duration'), 10) * 1000.0;
    var isAuthor = $('.video-carousel-container__list').hasClass('authoring-mode'); 
    if(!isAuthor){
    $('.video-carousel-container__list').lightSlider({
        slideMargin: 0,
        speed: 1000,
        pause:duration,
        auto: true,
        loop:true,
        currentPagerPosition: 'middle',
        enableDrag: false,
        pauseOnHover: true,
        pager: true,
        responsive: [
            {
                breakpoint:8000,
                settings: {
                    item:1
                }
            },
            {
                breakpoint: 992,
                settings: {
                    controls: false,
                    item:1
                }
            },
            {
                breakpoint: 768,
                    settings: {
                        controls: false,
                        item: 1
                    }
            },
            {
                breakpoint: 576,
                settings: {
                    controls: false,
                    item: 1
                }
            },
            {
                breakpoint: 320,
                settings: {
                    controls: false,
                    item: 1
                }
            }
        ],
        onSliderLoad: function (el){
        $('.video-carousel-container .counter').remove();
        var duration = parseInt(el.data('slide-duration'), 10) * 1000.0;
        $('.video-carousel-container__inner .lSPager .timeline-track').attr('style',"transition-duration: " + duration + 'ms; -webkit-transition-duration: ' + duration + 'ms;');
        var videos = $(el).find('video');

            videos.each(function() {
                this.play();
            });
            function setDesktopVideosSources(el) {
                        if (window.outerWidth < 768) return;
                        
                        var videos = $(el).find('video');
                        var iframes = $(el).find('iframe');
                
                        iframes.each(function() {
                            var src = $(this).attr('data-src');
                            $(this).attr('src', src);
                        });
                
                        videos.each(function() {
                            var src = $(this).attr('data-src');
                            $(this).find('source').attr('src', src);
                        });
                    }
                    setDesktopVideosSources(el);
                },
                onBeforeSlide: function (el, scene){
                    function restartVideos(el) {
                                var videos = $(el).find('.lslide:not(.active) video');
                                var iframes = $(el).find('.lslide:not(.active) iframe');
                        
                                iframes.each(function() {
                                    var iframe = $(this)[0];
                                    iframe.contentWindow.postMessage('{ "event": "command", "func": "seekTo", "args": [1, true] }', '*');
                                });
                        
                                videos.each(function() {
                                    var video = $(this)[0];
                                    video.currentTime = 1;
                                });
                            }
                    restartVideos(el);
        }
    });
    }
});
"use strict";

$(document).ready(function () {
  var cards = $('.text-icon__list').find('.text-icon__list-item').length;

  if (cards > 4 || window.outerWidth <= 768 && cards > 3 || window.outerWidth < 576) {
    var buildDotsPercentage = function buildDotsPercentage(el) {
      var dots = el.parent().parent().find('.lSPager li');
      var totalDots = dots.length;
      dots.each(function () {
        var index = $(this).find('a').data('index');
        var percentage = 100 * index / totalDots;
        var element = $(this).find('.timeline-track').css('width', percentage + '%');
      });
    };

    $('.text-icon__list').lightSlider({
      loop: false,
      slideMargin: 0,
      speed: 600,
      currentPagerPosition: 'middle',
      enableDrag: false,
      responsive: [{
        breakpoint: 8000,
        settings: {
          item: 3,
          slideMove: 3
        }
      }, {
        breakpoint: 992,
        settings: {
          item: 3,
          slideMove: 3,
          slideMargin: 30
        }
      }, {
        breakpoint: 768,
        settings: {
          item: 3,
          slideMove: 2,
          slideMargin: 0,
          controls: false
        }
      }, {
        breakpoint: 576,
        settings: {
          item: 2,
          slideMove: 1,
          controls: false
        }
      }],
      onSliderLoad: function onSliderLoad(el) {
        //resize(el);
        $('.text-icon__list').css('height', parseInt($('.text-icon__list').css('height'), 10) + 70 + 'px');
        buildDotsPercentage(el);
      }
    });

    if (isBreakPoint(576) || isBreakPoint(768)) {
      $('.text-icon section').children().removeClass('container');
      $('.text-icon section').children().addClass('container-fluid');
      $('.container-fluid .text-icon__title').addClass('text-icon__title--fluid');
    } else {
      $('.text-icon__list').addClass('row');
    }
  }

  ;
});
"use strict";

document.addEventListener("DOMContentLoaded", function () {
  $("section[data-component='text-icon-v2'] .text-icon__list-item a").click(function () {
    var linkTitle = $(this).closest("section[data-component='text-icon-v2']").find(".text-icon__title h2.title-d-container__title").text();
    var linkText = $(this).text();
    var itemClicado = 'LNK' + ':TextIconV2:' + linkTitle + ':' + linkText;
    itemClicado = PascalCase(itemClicado);
    setAnalyticsData(itemClicado);
  });
  $("section[data-component='text-icon-v2'] .text-icon__title .itau-button-container a.itau-button-container__a").click(function () {
    var linkTitle = $(this).closest("section[data-component='text-icon-v2']").find(".text-icon__title h2.title-d-container__title").text();
    var linkText = $(this).text();
    var itemClicado = 'BTN' + ':TextIconV2:' + linkTitle + ':' + linkText;
    itemClicado = PascalCase(itemClicado);
    setAnalyticsData(itemClicado);
  });
});
$(document).ready(function(){
    var cards = $('.text-icon__list').find('.text-icon__list-item').length;
     if ((cards > 4 ) || (window.outerWidth <=768 && cards > 3) || (window.outerWidth < 576)){
        $('.text-icon__list').lightSlider({
            loop: false,
            slideMargin: 0,
            speed: 600,
            currentPagerPosition: 'middle',
            enableDrag: false,
            responsive: [
                {
                    breakpoint: 8000,
                    settings: {
                        item: 3,
                        slideMove: 3,
                    }
                },
                {
                    breakpoint: 992,
                    settings: {
                        item: 3,
                        slideMove: 3,
                        slideMargin: 30
                    }
                },
                {
                    breakpoint: 768,
                    settings: {
                        item: 3,
                        slideMove: 2,
                        slideMargin: 0,
                        controls: false
                    }
                },
                {
                    breakpoint: 576,
                    settings: {
                        item: 2,
                        slideMove: 1,
                        controls: false
                    }
                }

            ],
            onSliderLoad: function (el) {
                //resize(el);
                $('.text-icon__list').css('height',parseInt($('.text-icon__list').css('height'), 10) + 70 + 'px');
                buildDotsPercentage(el);
            }
        });
        buildDotsPercentage:function buildDotsPercentage(el) {
            var dots = el.parent().parent().find('.lSPager li');
            var totalDots = dots.length;

            dots.each(function() {
                var index = $(this).find('a').data('index');
                var percentage = (100 * index) / totalDots;
                var element = $(this).find('.timeline-track').css('width', percentage + '%'); 
            });
        }
        if((isBreakPoint(576)||isBreakPoint(768))){
            $('.text-icon section').children().removeClass('container');
            $('.text-icon section').children().addClass('container-fluid');
            $('.container-fluid .text-icon__title').addClass('text-icon__title--fluid');
        }else{
            $('.text-icon__list').addClass('row');
        }
     };
});

"use strict";

$(document).ready(function () {
  if ($('#carouselWithCards').length) {
    var carouselCards = {
      elCarousel: $('#carouselWithCards'),
      init: function init() {
        this.elCarousel.carousel({
          interval: false,
          wrap: false
        });
        $('#carouselImage00').addClass('show');
      },
      changeImage: function changeImage() {
        if ($(window).width() > 991) {
          this.elCarousel.on('slide.bs.carousel', function (e) {
            var nextIndex = e.to;
            $('.carousel-image').removeClass('show');
            $('.carousel-image span').attr('aria-hidden', true);
            $('#carouselImage0' + nextIndex).addClass('show');
            $('#carouselImage0' + nextIndex + ' span').attr('aria-hidden', false);
          });
        }
      },
      swipeCarousel: function swipeCarousel() {
        this.elCarousel.swiperight(function () {
          $(this).carousel('prev');
        });
        this.elCarousel.swipeleft(function () {
          $(this).carousel('next');
        });
      },
      resize: function resize() {
        if ($(window).width() > 991) {
          var elContainer = $('.carousel-with-cards .container');
          var marginContainer = elContainer.offset().left;
          $('.carousel-image').css('left', -marginContainer);
        }
      },
      equalHeightItemCarousel: function equalHeightItemCarousel() {
        var maxHeight = 0;
        var diff = $(window).width() > 767 ? 96 : 64;
        $('#carouselWithCards .carousel-item').each(function (i) {
          if ($(this).height() > maxHeight) {
            maxHeight = $(this).height();
          }
        });
        $('#carouselWithCards .carousel-inner').css('height', maxHeight + diff);
      },
      accessibilily: function accessibilily() {
        $('#carouselWithCards .carousel-indicators > div, #carouselWithCards .control-prev, #carouselWithCards .control-next').click(function () {
          setTimeout(function () {
            if ($('#carouselWithCards .carousel-item.active .item-footer a').length) {
              $('#carouselWithCards .carousel-item.active .item-footer a')[0].focus();
            }
          }, 1000);
        });
      },
      controlArrow: function controlArrow() {
        this.elCarousel.children('.control-prev').addClass('disable-arrow').attr('aria-hidden', true);
        this.elCarousel.on('slid.bs.carousel', function (e) {
          var $this = $(this);
          $this.children('.control').removeClass('disable-arrow').attr('aria-hidden', false);

          if ($('.carousel-inner .carousel-item:last').hasClass('active')) {
            $this.children('.control-next').addClass('disable-arrow').attr('aria-hidden', true);
            ;
          } else if ($('.carousel-inner .carousel-item:first').hasClass('active')) {
            $this.children('.control-prev').addClass('disable-arrow').attr('aria-hidden', true);
            ;
          }
        });
      },
      timeline: function timeline() {
        var indicators = $('#carouselWithCards .indicator-item');
        var totalIndicators = indicators.length;
        indicators.each(function (i) {
          $(this).find('.timeline-progress').css('width', 100 / totalIndicators * (i + 1) + '%');
        });
      }
    }; //Init carousel

    carouselCards.init(); // Image resize

    carouselCards.resize(); // Init event swipe in carousel

    carouselCards.swipeCarousel(); // Change image when slide change

    carouselCards.changeImage(); // Set same haight Carousel item

    carouselCards.equalHeightItemCarousel();
    carouselCards.accessibilily(); // Enable/Disable arrows 

    carouselCards.controlArrow(); // Animate timeline

    carouselCards.timeline();
    $(window).resize(function () {
      carouselCards.resize();
      carouselCards.changeImage();
      carouselCards.swipeCarousel();
      carouselCards.equalHeightItemCarousel();
    });
  }
});
"use strict";

$(document).ready(function () {
  checkLoginModalShared();
});

function checkLoginModalShared() {
  $('.shared-button-container').each(function () {
    var spanValue = $(this).find('span').attr('value');
    var aElement = $(this).find('a');

    if (aElement.attr('target') == 'login' && $(window).width() >= 992) {
      aElement.attr('data-toggle', 'modal').attr('data-target', spanValue);
    }
  });
}
"use strict";

function _toConsumableArray(arr) {
  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();
}

function _nonIterableSpread() {
  throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
}

function _unsupportedIterableToArray(o, minLen) {
  if (!o) return;
  if (typeof o === "string") return _arrayLikeToArray(o, minLen);
  var n = Object.prototype.toString.call(o).slice(8, -1);
  if (n === "Object" && o.constructor) n = o.constructor.name;
  if (n === "Map" || n === "Set") return Array.from(n);
  if (n === "Arguments" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);
}

function _iterableToArray(iter) {
  if (typeof Symbol !== "undefined" && Symbol.iterator in Object(iter)) return Array.from(iter);
}

function _arrayWithoutHoles(arr) {
  if (Array.isArray(arr)) return _arrayLikeToArray(arr);
}

function _arrayLikeToArray(arr, len) {
  if (len == null || len > arr.length) len = arr.length;

  for (var i = 0, arr2 = new Array(len); i < len; i++) {
    arr2[i] = arr[i];
  }

  return arr2;
}

var resultSearchInvestmentDocuments = {
  resultCard: function resultCard(item, accord) {
    var documentsList = "";
    jQuery.each(item, function (i, doc) {
      documentsList += resultSearchInvestmentDocuments.documentItem(doc);
    });
    return "\n        <div class=\"search-investment-documents__accordion\">\n            <div role=\"heading\" aria-level=\"3\">\n              <button aria-controls=\"accord-".concat(accord, "\" class=\"search-investment-documents__btn-accord search-investment-documents__btn-accord--expanded\" aria-label=\"").concat(item[0].NMFMT.trim(), "\" aria-expanded=\"false\" tabindex=\"0\">\n                <div class=\"search-investment-documents__title-group\">\n                  <div class=\"search-investment-documents__title-group__title-accord\" aria-hidden=\"true\">").concat(item[0].NMFMT.trim(), "</div>\n                  <span class=\"search-investment-documents__icon-accord  icon-itaufonts_seta_down\" aria-hidden=\"true\"></span>\n                </div>\n              </button>\n            </div>\n          <div class=\"search-investment-documents__content-accord collapse\" id=\"accord-").concat(accord, "\" aria-live=\"off\">\n            <ul class=\"search-investment-documents__list-accord\">\n              ").concat(documentsList, "\n            </ul>\n          </div>\n        </div>");
  },
  documentItem: function documentItem(doc) {
    var url = "https://ww16.itau.com.br/ws/consultalaminageral.asmx/ConsultaDocumentosFundo?canal=01&CDFDO=".concat(doc.CDFDO, "&DOCFDO=").concat(doc.COD_DOCM_FUND);
    return "<li class=\"search-investment-documents__list-item\">\n        <a class=\"search-investment-documents__link-accord\" href=\"".concat(url, "\" role=\"link\">\n          ").concat(doc.NOM_DOCM_FUND, "\n        </a>\n      </li>");
  }
};
var searchInvestment = {
  results: [],
  init: function init() {
    specFormer.init('.search-investment-documents');
    searchInvestment.addFilterEventListeners();
    paginationSearchInvestment.init();
  },
  addFilterEventListeners: function addFilterEventListeners() {
    jQuery('#search-investment-documents-search-form').submit(function (event) {
      event.preventDefault();
      event.stopPropagation();
    });
    jQuery(document).on('keypress', ".search-investment-documents__btn-accord", function (event) {
      event.preventDefault();
      event.stopPropagation();
    });
    jQuery(document).on('click', ".search-investment-documents__btn-accord", function (event) {
      var target = event.target;

      if (!jQuery(event.target).is('button')) {
        target = jQuery(event.target).closest('.search-investment-documents__btn-accord');
      }

      searchInvestment.openAccordeonOnClick(target);
    });
    jQuery('#search-input').on('input', function () {
      searchInvestment.closeErrorMessage();
      specFormer.clearFieldsWithErrors();
    });
    jQuery('#search-input').on('keypress', function (event) {
      if ((event.keyCode || event.which) == 13 && jQuery(event.target).hasClass('--error')) {
        event.preventDefault();
      }
    });
    jQuery('#search-input').on('blur', function () {
      var searchInvestmentsInput = jQuery('.spec-former__form-input');
      searchInvestmentsInput.removeClass('--filled');

      if (jQuery('.spec-former__form-input__input').val()) {
        searchInvestmentsInput.addClass('--filled');
      }
    });
    jQuery('#search-investment-documents_search-button').click(function (event) {
      event.stopPropagation();
      event.preventDefault();

      if (!searchInvestment.validateForm()) {
        return;
      }

      searchInvestment.queryInvestmentDocuments();
    });
    jQuery(document).on('click', "#search-select-focus", function (event) {
      jQuery('#search-input').focus();
    });
  },
  closeErrorMessage: function closeErrorMessage() {
    jQuery('.search-investment-documents__select-error-message').html('');
    jQuery('.search-investment-documents__select-error-message').hide();
  },
  createErrorMessage: function createErrorMessage() {
    var targets = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
    var type = [{
      name: "search",
      link: "digite a razão social do fundo:",
      text: "informe o investimento para prosseguir"
    }]; //TODO: Refatorar e transformar em componente

    var errorsCount = 0;
    var errorMessages = '';
    var firstErrorToFocus = '';
    type.forEach(function (item) {
      if (targets.includes(item.name)) {
        errorsCount++;
        currentError = "#".concat(item.name, "-select-focus");

        if (errorsCount == 1) {
          firstErrorToFocus = "#".concat(item.name, "-select-focus");
        }

        errorMessages += "\n        <div class=\"search-investment-documents__select-error-message__description\" id=\"".concat(item.name, "-error\">\n          <p class=\"search-investment-documents__select-error-message__description__text\">\n            <span class=\"search-investment-documents__select-error-message__description__text--number\">0").concat(errorsCount, ".</span>\n            <a class=\"search-investment-documents__select-error-message__description__text--link\" role=\"link\" tabindex=\"0\" id=\"").concat(item.name, "-select-focus\" aria-describedby=\"mensagem-erro\">").concat(item.link, "</a>\n            <span class=\"search-investment-documents__select-error-message__description__text--complement\" id=\"mensagem-erro\">\n              ").concat(item.text, "\n            </span>\n          </p>\n        </div>");
        jQuery(".search-investment-documents__select-error-message").show();
      }
    });
    var html = "\n    <div class=\"search-investment-documents__select-error-message__title\">\n      <div class=\"search-investment-documents__select-error-message__title--icon icon-itaufonts_exclamacao\" aria-hidden=\"true\"></div>\n      <h3 class=\"search-investment-documents__select-error-message__title--text\" role=\"alert\" id=\"search-investment-documents--alert\">".concat(targets.length == 1 ? "Existe 1 erro que precisa ser corrigido" : "Existem ".concat(targets.length, " erros que precisam ser corrigidos"), "</h3>\n      <div class=\"search-investment-documents__select-error-message__title__close-button\">\n        <label for=\"search-investment-documents__error-message-close-button\" aria-hidden=\"true\" hidden>Fechar</label>\n          <button role=\"button\" aria-label=\"fechar\" class=\"search-investment-documents__select-error-message__title__close-button__style\" id=\"search-investment-documents__error-message-close-button\">\n            <div  class=\"search-investment-documents__select-error-message__title__close-button__style--icon icon-itaufonts_fechar\"></div>\n          </button>\n      </div>\n    </div>\n    ").concat(errorMessages);
    jQuery(".search-investment-documents__select-error-message").html(html);
    jQuery(firstErrorToFocus).focus();
    jQuery("#search-investment-documents__error-message-close-button").click(function () {
      searchInvestment.closeErrorMessage();
      jQuery('.spec-former__form-input__input').focus();
    });
  },
  openAccordeonOnClick: function openAccordeonOnClick(target) {
    jQuery("#search-investment-documents__container-result-box").attr('aria-live', 'off');
    jQuery(target).parent().siblings(".search-investment-documents__content-accord").toggleClass('--expanded');
    jQuery(target).attr('aria-expanded', jQuery(target).attr('aria-expanded') == 'true' ? false : true);
    jQuery(target).siblings(".search-investment-documents__container-result-box__result__help-text__info").toggleClass("search-investment-documents__container-result-box__result__help-text__info--flex");

    if (jQuery(target).siblings(".search-investment-documents__content-accord").hasClass('--expanded')) {
      searchInvestment.addTabIndexToDocumentsList(target);
    } else {
      searchInvestment.removeTabIndexToDocumentsList(target);
    }

    searchInvestment.toggleAriaLiveOfAccordions();
  },
  toggleAriaLiveOfAccordions: function toggleAriaLiveOfAccordions() {
    jQuery('.search-investment-documents__btn-accord').attr('aria-live', 'off');
  },
  addTabIndexToDocumentsList: function addTabIndexToDocumentsList(target) {
    var links = jQuery(target).siblings('.search-investment-documents__content-accord').find('.search-investment-documents__link-accord');
    jQuery.each(links, function (i, link) {
      jQuery(link).attr('tabindex', '0');
    });
  },
  removeTabIndexToDocumentsList: function removeTabIndexToDocumentsList(target) {
    var links = jQuery(target).siblings('.search-investment-documents__content-accord').find('.search-investment-documents__link-accord');
    jQuery.each(links, function (i, link) {
      jQuery(link).removeAttr('tabindex');
    });
  },
  queryInvestmentDocuments: function queryInvestmentDocuments() {
    searchInvestment.toggleFeedbackCard();
    var formValues = specFormer.getFormValues("#search-investment-documents-search-form");
    jQuery("#search-investment-documents__container-result-box").attr('aria-live', 'polite');
    jQuery.jsonp({
      url: "https://ww16.itau.com.br/ws/consultalaminageral.asmx/ListaFundosCotistas?CANAL=01&NMFDO=".concat(formValues.searchInput),
      dataType: 'jsonp',
      callbackParameter: 'callback',
      beforeSend: function beforeSend() {
        if (jQuery('.search-investment-documents__container-result-box').find('div.search-investment-documents__loader').length === 0) {
          jQuery('.search-investment-documents__container-result-box').prepend("<div class=\"search-investment-documents__loader\">\n          <div class=\"search-investment-documents__iconLoader\" aria-hidden=\"true\"></div>\n          <p class=\"search-investment-documents__textLoader\">carregando os resultados</p>\n      </div>");
        } else {
          jQuery('.search-investment-documents__container-result-box').find('div.search-investment-documents__loader').removeClass('--hidden');
        }
      },
      success: function success(response) {
        if (!response.d) {
          searchInvestment.toggleFeedbackCard("error");
        } else if (response.d.includes('error The remote server returned an error: (404) Not Found.')) {
          searchInvestment.toggleFeedbackCard("not-found");
        } else {
          jQuery('.search-investment-documents__container-result-box').find('div.search-investment-documents__loader').addClass('--hidden');
          var jsonResponse = JSON.parse(response.d.replace('<?xml version="1.0" encoding="utf-8"?>', '').replace('<string xmlns="http://tempuri.org/">', '').replace('</string>', ''));
          paginationSearchInvestment.initPaginator(jsonResponse);
          paginationSearchInvestment.loadTopPagination();
        }
      }
    });
  },
  toggleFeedbackCard: function toggleFeedbackCard() {
    var card = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
    jQuery("#search-investment-documents__container-result-box__results").html("");
    jQuery('#search-investment-documents--welcome').addClass('--hidden');
    jQuery(".search-investment-documents__feedback-card").addClass("--hidden");
    jQuery("#search-investment-documents__header").addClass("--fake-hidden");
    jQuery("#search-investment-documents__bottom-pagination").addClass("--hidden");

    switch (card) {
      case 'not-found':
        jQuery("#search-investment-documents--not-found").removeClass("--hidden");
        jQuery(".search-investment-documents__loader").remove();
        break;

      case 'error':
        jQuery("#search-investment-documents--error").removeClass("--hidden");
        jQuery(".search-investment-documents__loader").remove();
        break;
    }
  },
  validateForm: function validateForm() {
    var formValues = specFormer.getFormValues("#search-investment-documents-search-form");
    var hasError = false;
    var errorList = [];
    searchInvestment.closeErrorMessage();
    specFormer.clearFieldsWithErrors();
    jQuery('.search-investment-documents-filter').removeClass('search-investment-documents-alert');

    if (formValues.searchInput == '') {
      errorList.push('search');
      specFormer.showFieldsWithErrors([{
        id: 'search-input',
        message: 'informe o investimento para prosseguir'
      }]);
      error.displayInput('search-input');
      hasError = true;
      jQuery('.search-investment-documents__btn-search--button').addClass('form-input-error');
    }

    if (hasError) {
      searchInvestment.createErrorMessage(errorList);
      return false;
    } else {
      jQuery("#search-investment-documents--welcome").addClass('search-investment-documents-error__container--hidden');
      return true;
    }
  }
};
var paginationSearchInvestment = {
  results: [],
  dataToShow: [],
  itemsPerPage: 4,
  currentPage: 1,
  maxPages: 1,
  target: ".search-investment-documents__container-accord",
  init: function init() {
    paginationSearchInvestment.addEventListeners();
  },
  initPaginator: function initPaginator(results) {
    paginationSearchInvestment.results = results;
    paginationSearchInvestment.itemsPerPage = 4;
    paginationSearchInvestment.currentPage = 1;
    paginationSearchInvestment.maxPages = 0;
    paginationSearchInvestment.groupResults(results);
    paginationSearchInvestment.showPage();
  },
  addEventListeners: function addEventListeners() {
    jQuery("#search-investment-documents__top-pagination__select").change(function (event) {
      jQuery("#search-investment-documents__container-result-box").attr('aria-live', 'off');
      paginationSearchInvestment.changeItemsPerPage(jQuery(event.target).val());
    });
    jQuery("#search-investment-documents__bottom-pagination__page-select").change(function (event) {
      jQuery("#search-investment-documents__container-result-box").attr('aria-live', 'off');
      paginationSearchInvestment.goToPage(jQuery(event.target).val());
    });
    jQuery("#search-investment-documents__bottom-pagination__previous").click(function () {
      jQuery("#search-investment-documents__container-result-box").attr('aria-live', 'off');
      paginationSearchInvestment.previousPage();
    });
    jQuery("#search-investment-documents__bottom-pagination__first").click(function () {
      jQuery("#search-investment-documents__container-result-box").attr('aria-live', 'off');
      paginationSearchInvestment.firstPage();
    });
    jQuery("#search-investment-documents__bottom-pagination__last").click(function () {
      jQuery("#search-investment-documents__container-result-box").attr('aria-live', 'off');
      paginationSearchInvestment.lastPage();
    });
    jQuery("#search-investment-documents__bottom-pagination__next").click(function () {
      jQuery("#search-investment-documents__container-result-box").attr('aria-live', 'off');
      paginationSearchInvestment.nextPage();
    });
  },
  groupResults: function groupResults(results) {
    var groupResults = results.reduce(function (r, a) {
      r[a.CDFDO] = [].concat(_toConsumableArray(r[a.CDFDO] || []), [a]);
      return r;
    }, {});
    paginationSearchInvestment.results = Array.from(Object.keys(groupResults), function (k) {
      return [groupResults[k]];
    });
  },
  firstPage: function firstPage() {
    paginationSearchInvestment.currentPage = 1;
    paginationSearchInvestment.showPage();
  },
  lastPage: function lastPage() {
    paginationSearchInvestment.currentPage = parseInt(paginationSearchInvestment.maxPages);
    paginationSearchInvestment.showPage();
  },
  previousPage: function previousPage() {
    paginationSearchInvestment.currentPage = parseInt(paginationSearchInvestment.currentPage) - 1;
    paginationSearchInvestment.showPage();
  },
  goToPage: function goToPage(page) {
    paginationSearchInvestment.currentPage = page;
    paginationSearchInvestment.showPage();
  },
  nextPage: function nextPage() {
    paginationSearchInvestment.currentPage = parseInt(paginationSearchInvestment.currentPage) + 1;
    paginationSearchInvestment.showPage();
  },
  changeItemsPerPage: function changeItemsPerPage(newItemsPerPage) {
    paginationSearchInvestment.itemsPerPage = newItemsPerPage;
    paginationSearchInvestment.showPage();
  },
  refreshPagination: function refreshPagination() {
    jQuery('#search-investment-documents__bottom-pagination').removeClass('--hidden');
    jQuery('#search-investment-documents__header').removeClass('--fake-hidden');
    jQuery('#search-investment-documents__top-pagination__select').attr('tabindex', '0');
    jQuery('#search-investment-documents__header').attr('aria-hidden', 'false');
    var currentMaxPages = paginationSearchInvestment.maxPages;
    var resultsItems = paginationSearchInvestment.results.length;
    var itemsCalc = paginationSearchInvestment.currentPage * paginationSearchInvestment.itemsPerPage;
    var itemsCount = itemsCalc > resultsItems ? resultsItems : itemsCalc;
    paginationSearchInvestment.maxPages = Math.ceil(resultsItems / paginationSearchInvestment.itemsPerPage);
    var maxPage = resultsItems > 1 ? "".concat(resultsItems, " items") : "".concat(resultsItems, " item");
    var itemsShow = "".concat(itemsCalc - (paginationSearchInvestment.itemsPerPage - 1), "-").concat(itemsCount);
    jQuery("#search-investment-documents__top-pagination__max-pages").html(maxPage);
    jQuery("#search-investment-documents__top-pagination__items-show").html(itemsShow);
    jQuery("#search-investment-documents__top-pagination__select").attr('aria-label', "Exibindo p\xE1gina ".concat(paginationSearchInvestment.currentPage, " de ").concat(paginationSearchInvestment.maxPages, ". Itens por p\xE1gina: ").concat(itemsShow, " de ").concat(maxPage));

    if (currentMaxPages != paginationSearchInvestment.maxPages) {
      jQuery("#search-investment-documents__bottom-pagination__page-select").html("");

      for (i = 1; i <= paginationSearchInvestment.maxPages; i++) {
        jQuery("#search-investment-documents__bottom-pagination__page-select").append("<option value=".concat(i, ">").concat(i, "</option>"));
      }

      return paginationSearchInvestment.goToPage("1");
    }

    jQuery("#search-investment-documents__bottom-pagination__page-select").val("".concat(paginationSearchInvestment.currentPage));
    jQuery("#search-investment-documents__bottom-pagination__page-select").attr('aria-label', "exibindo p\xE1gina ".concat(paginationSearchInvestment.currentPage, " de ").concat(paginationSearchInvestment.maxPages));
    jQuery("#search-investment-documents__bottom-pagination__total-pages").html("de ".concat(paginationSearchInvestment.maxPages, " ").concat(paginationSearchInvestment.maxPages == "1" ? 'página' : 'páginas'));

    if (paginationSearchInvestment.currentPage == "1") {
      jQuery("#search-investment-documents__bottom-pagination__previous").addClass("button--disabled");
      jQuery("#search-investment-documents__bottom-pagination__previous").attr("aria-disabled", "true");
      jQuery("#search-investment-documents__bottom-pagination__previous").attr("tabindex", "-1");
      jQuery("#search-investment-documents__bottom-pagination__first").addClass("button--disabled");
      jQuery("#search-investment-documents__bottom-pagination__first").attr("aria-disabled", "true");
      jQuery("#search-investment-documents__bottom-pagination__first").attr("tabindex", "-1");
    } else {
      jQuery("#search-investment-documents__bottom-pagination__previous").removeClass("button--disabled");
      jQuery("#search-investment-documents__bottom-pagination__previous").attr("aria-disabled", "false");
      jQuery("#search-investment-documents__bottom-pagination__previous").attr("tabindex", "0");
      jQuery("#search-investment-documents__bottom-pagination__first").removeClass("button--disabled");
      jQuery("#search-investment-documents__bottom-pagination__first").attr("aria-disabled", "false");
      jQuery("#search-investment-documents__bottom-pagination__first").attr("tabindex", "0");
    }

    ;

    if (paginationSearchInvestment.currentPage == paginationSearchInvestment.maxPages) {
      jQuery("#search-investment-documents__bottom-pagination__next").addClass("button--disabled");
      jQuery("#search-investment-documents__bottom-pagination__next").attr("aria-disabled", "true");
      jQuery("#search-investment-documents__bottom-pagination__next").attr("tabindex", "-1");
      jQuery("#search-investment-documents__bottom-pagination__last").addClass("button--disabled");
      jQuery("#search-investment-documents__bottom-pagination__last").attr("aria-disabled", "true");
      jQuery("#search-investment-documents__bottom-pagination__last").attr("tabindex", "-1");
    } else {
      jQuery("#search-investment-documents__bottom-pagination__next").removeClass("button--disabled");
      jQuery("#search-investment-documents__bottom-pagination__next").attr("aria-disabled", "false");
      jQuery("#search-investment-documents__bottom-pagination__next").attr("tabindex", "0");
      jQuery("#search-investment-documents__bottom-pagination__last").removeClass("button--disabled");
      jQuery("#search-investment-documents__bottom-pagination__last").attr("aria-disabled", "false");
      jQuery("#search-investment-documents__bottom-pagination__last").attr("tabindex", "0");
    }

    ;

    if (paginationSearchInvestment.currentPage == "1" && paginationSearchInvestment.maxPages == "1") {
      jQuery("#search-investment-documents__bottom-pagination__previous").addClass("display--none");
      jQuery("#search-investment-documents__bottom-pagination__first").addClass("display--none");
      jQuery("#search-investment-documents__bottom-pagination__next").addClass("display--none");
      jQuery("#search-investment-documents__bottom-pagination__last").addClass("display--none");
      jQuery("#search-investment-documents__bottom-pagination__page-select").addClass("display--none");
      jQuery("#search-investment-documents__bottom-pagination .divisor").addClass("display--none");
      jQuery("#search-investment-documents__bottom-pagination__total-pages").html("1 de 1 página");
      jQuery("#search-investment-documents__bottom-pagination__total-pages").attr("aria-hidden", "false");
    } else {
      jQuery("#search-investment-documents__bottom-pagination__previous").removeClass("display--none");
      jQuery("#search-investment-documents__bottom-pagination__first").removeClass("display--none");
      jQuery("#search-investment-documents__bottom-pagination__next").removeClass("display--none");
      jQuery("#search-investment-documents__bottom-pagination__last").removeClass("display--none");
      jQuery("#search-investment-documents__bottom-pagination__page-select").removeClass("display--none");
      jQuery("#search-investment-documents__bottom-pagination .divisor").removeClass("display--none");
      jQuery("#search-investment-documents__bottom-pagination__total-pages").attr("aria-hidden", "true");
    }
  },
  loadTopPagination: function loadTopPagination() {
    jQuery("#search-investment-documents__top-pagination__select").html("");
    var itens = paginationSearchInvestment.results.length;
    var selectId = "#search-investment-documents__top-pagination__select";

    if (itens) {
      if (itens >= 1) {
        jQuery(selectId).append("<option value=\"4\">04</option>");
      }

      ;

      if (itens > 4) {
        jQuery(selectId).append("<option value=\"10\">10</option>");
      }

      ;

      if (itens > 10) {
        jQuery(selectId).append("<option value=\"20\">20</option>");
      }

      ;

      if (itens > 20) {
        jQuery(selectId).append("<option value=\"30\">30</option>");
      }

      ;

      if (itens > 30) {
        jQuery(selectId).append("<option value=\"40\">40</option>");
      }

      ;

      if (itens > 40) {
        jQuery(selectId).append("<option value=\"50\">50</option>");
      }

      ;
    }
  },
  showPage: function showPage() {
    // jQuery("#search-investment-documents__container-result-box__results").attr('aria-live', 'polite')
    var html = '';
    var accord = 1;
    jQuery('#search-investment-documents__container-result-box__results').html("");
    paginationSearchInvestment.dataToShow = paginationSearchInvestment.results.slice(paginationSearchInvestment.currentPage * paginationSearchInvestment.itemsPerPage - paginationSearchInvestment.itemsPerPage, paginationSearchInvestment.currentPage * paginationSearchInvestment.itemsPerPage);
    jQuery.each(paginationSearchInvestment.dataToShow, function (i, item) {
      html += resultSearchInvestmentDocuments.resultCard(item[0], accord++);
    });
    jQuery("#search-investment-documents__container-result-box__results").show();
    jQuery('#search-investment-documents__container-result-box__results').html(html);
    paginationSearchInvestment.refreshPagination(); // jQuery("#search-investment-documents__container-result-box__results").attr('aria-live', 'off')
    // paginationSearchInvestment.toggleAriaLiveOfAccordions();
  }
};
var error = {
  displayInput: function displayInput(target) {
    $("#".concat(target)).siblings('.spec-former__form-input__error-message').removeClass('--hidden');
    $("#".concat(target)).siblings('.spec-former__form-input__error-icon').removeClass('--hidden');
    $("#".concat(target)).siblings('.spec-former__form-input__select__icon').addClass('--hidden');
    $("#".concat(target)).addClass('select-input-error');
    $("#".concat(target)).attr("aria-describedby", "mensagem-erro");
    $("#".concat(target)).attr("aria-invalid", "true");
    $(".select-error-message").attr("aria-live", "polite");
  },
  resetDisplayInput: function resetDisplayInput(target) {
    $(".select-error-message").removeAttr("aria-live");
    $("#".concat(target)).removeAttr("aria-describedby");
    $("#".concat(target)).removeAttr("aria-invalid");
    $("#".concat(target)).siblings('.spec-former__form-input__error-icon').addClass('--hidden');
    $("#".concat(target)).siblings('.spec-former__form-input__select__icon').removeClass('--hidden');
    $('.spec-former__form-input__error-message').addClass('--hidden');
    $(".spec-former__form-input__select__input").removeClass('select-input-error');
    $(".select-error-message").removeAttr("aria-live");
  }
};
jQuery(function () {
  if (jQuery(".search-investment-documents").length > 0) {
    console.log("Search Investment Documents Init");
    searchInvestment.init();
  }
});
jQuery(".search-investment-documents__help-button-link").click(function () {
  window.location.href = "https://www.itau.com.br/atendimento-itau/para-voce/";
});
'use strict';

const picComponents = {
  planTypeInfo: {},
  accordeonId: 0,

  init: () => {
    picComponents.planTypeInfo = {
      '2360': jQuery(`.pic-numbers__data`).data(`help-varejo-pic`),
      '1552': jQuery(`.pic-numbers__data`).data(`help-uniclass-pic`),
      '2493': jQuery(`.pic-numbers__data`).data(`help-person-multisorte-pu`),
      '2535': jQuery(`.pic-numbers__data`).data(`help-person-multisorte`),
      '2279': jQuery(`.pic-numbers__data`).data(`help-empresas-pic`),
      '1180': jQuery(`.pic-numbers__data`).data(`help-mini-pic`),
      '1529': jQuery(`.pic-numbers__data`).data(`help-super-pic`),
      '1545': jQuery(`.pic-numbers__data`).data(`help-seven-pic`),
      '1560': jQuery(`.pic-numbers__data`).data(`help-super-pic-second`),
      '2261': jQuery(`.pic-numbers__data`).data(`help-pic-second`),
    };
  },

  resultsContainer: (name, results, raffleDate) => {
    let resultsHTML = "";
    let resultsToShow = [];

    if (results.RESULTADO != null) {
      resultsToShow.push({
        'result': (raffleDate === 'atuais' ? results.RESULTADO.splice(0, 1) : results.RESULTADO.slice(1)),
        'date': results['@DT_REALIZACAO'],
        'peridiocity': results['@PERIODICIDADE']
      });
    } else if (Array.isArray(results)) {
      jQuery.each(results, (i, result) => {
        if (!Array.isArray(result.RESULTADO) && raffleDate !== 'atuais') {
          return;
        }

        resultsToShow.push({
          'result': (raffleDate === 'atuais' ? (Array.isArray(result.RESULTADO) ? result.RESULTADO.splice(0, 1) : [result.RESULTADO]) : result.RESULTADO.slice(1)),
          'date': result['@DT_REALIZACAO'],
          'peridiocity': result['@PERIODICIDADE']
        });
      });
    }
    resultsToShow.forEach((singleResult) => {
      resultsHTML += picComponents.singleResult(singleResult.result, singleResult.date, singleResult.peridiocity, name, (
        '@PLANO' in results ? results['@PLANO'] : results[0]['@PLANO']
      ));
    });

    if (resultsToShow.length == 0) {
      return '';
    }

    return (
      `<div class="pic-numbers__result-box__results__container" role="region" aria-labelledby="pic-number_result_${picComponents.accordeonId}">
        <h3 class="pic-numbers__result-box__results__container__title" id="pic-number_result_${picComponents.accordeonId}" aria-label="resultados de ${(raffleDate === 'atuais' ? 'sorteios atuais' : 'sorteios anteriores') + ` ${name}`}">${name}</h3>
        ${resultsHTML}
      </div>`
    );
  },

  singleResult: (result, date, peridiocity, name, plan) => {
    picComponents.accordeonId++;

    let numbersHTML = "";

    result.forEach((number) => {
      numbersHTML += `<p class="pic-numbers__text--small">${number['#text']}</p>`;
    });
    return (
      `<div class="pic-numbers__result-box__result">
        <div class="pic-numbers__result-box__result__data">
          <div class="pic-numbers__result-box__result__data__info">
              <div class="pic-numbers__flex-container">
                <p class="pic-numbers__text--bold">data</p>
                <p class="pic-numbers__text--small">${date.replace(/\./g, "/")}</p>
              </div>
              <div class="pic-numbers__flex-container">
                <p class="pic-numbers__text--bold">tipo de sorteio</p>
                <p class="pic-numbers__text--small">${peridiocity.toLowerCase()}</p>
              </div>
          </div>
          <div class="pic-numbers__result-box__result__data__numbers">
            <p class="pic-numbers__text--bold">números sorteados</p>
            <div class="pic-numbers__result-box__result__data__numbers__container">
              ${numbersHTML}
            </div>
          </div>
        </div>
        <div class="pic-numbers__result-box__result__help-text">
          <div class="pic-numbers__result-box__result__help-text__accordeon" id="pic-numbers__accordeon__${picComponents.accordeonId}" data-type="${peridiocity}" tabindex="0" role="button" aria-expanded="false" aria-live="off" aria-label="como funciona esse sorteio da data ${date.replace(/\./g, "/")}">
            <p class="pic-numbers__text--small-bold pic-numbers--no-pointer-events" aria-hidden="true">como funciona esse sorteio?</p>
            <i class="pic-numbers__result-box__result__help-text__accordeon__arrow icon-itaufonts_seta_down" aria-hidden="true" tabindex="-1"></i>
          </div>
          <div class="pic-numbers__result-box__result__help-text__info" aria-labelledby="pic-numbers__accordeon__${picComponents.accordeonId}" aria-live="off">
            ${picComponents.planTypeInfo[plan]}
          </div>
        </div>
      </div>`
    )
  }
};

const picNumbers = {
  //GLOBAL VARIABLES//
  planosTabelaURL: "https://ww18.itau.com.br/wsinvestnet/tabelasorteio.asmx/ListaPlanosTabelaSorteio",
  listarResultadosURL: "https://ww18.itau.com.br/wsinvestnet/tabelasorteio.asmx/ListarResultadosTabelaSorteioMultiplusCD",
  planParams: {
    all: {
      CT: "",
      SG: "",
      CP: "",
      VD: "",
      IP: "2360;1552;2493;2535;2279;1180;1529;1545;1560;2261"
    },
    varejo: {
      CT: "",
      SG: "",
      CP: "",
      VD: "",
      IP: "2360"
    },
    uniclass: {
      CT: "",
      SG: "",
      CP: "",
      VD: "",
      IP: "1552"
    },
    person: {
      CT: "",
      SG: "",
      CP: "",
      VD: "",
      IP: "2493;2535"
    },
    empresas: {
      CT: "",
      SG: "",
      CP: "",
      VD: "",
      IP: "2279;1180;1529;1545;1560;2261"
    }
  },
  planInfo: [],
  planCodes: [],
  searchResults: "",
  selectedPlans: [],
  formValues: [],

  //INITIALIZATION//
  init: function init() {
    picNumbers.addFilterEventListeners();
    specFormer.init('.pic-numbers');
  },

  //ADDS EVENT LISTENERS TO PIC FILTERS//
  addFilterEventListeners: function () {
    jQuery('.pic-numbers__form').bind('keypress keydown keyup', function (event) {
      if (event.keyCode == 13 && jQuery(event.target).hasClass('pic-numbers__radio-button__input')) { event.preventDefault(); }
    });

    //SEGMENT FILTER//
    jQuery("#service-select").change(() => {
      picNumbers.clearErrorMessages();
      picNumbers.formValues = specFormer.getFormValues('.pic-numbers__form');
      picNumbers.getPlans();
      picNumbers.clearFeedback();
    });

    jQuery("#service-select").focusout(() => {
      picNumbers.clearFeedback();
    });

    //BOND FILTER//
    jQuery("#bond-select").change(() => {
      picNumbers.clearErrorMessages();
    });

    jQuery(".pic-numbers__radio-button__input").on('click', (event) => {
      picNumbers.clearFeedback();
      if ((event.keyCode || event.which) == 13) {
        event.preventDefault();
      }
    });

    //CLEAR BUTTON//
    jQuery("#clear-button").click((event) => {
      picNumbers.clearForm();
      jQuery('#service-select').focus();
    });

    //SEARCH BUTTON//
    jQuery(".pic-numbers__search-button").click((event) => {
      event.preventDefault();
      picNumbers.clearFeedback();

      if (picNumbers.validateForm()) {
        jQuery(".pic-numbers__result-box").attr('aria-live','polite');
        picNumbers.formValues = specFormer.getFormValues('.pic-numbers__form');
        picNumbers.getResults(picNumbers.formValues['bond']);
      }
    });

    jQuery('#pic-numbers-error-message-close-button').click(() => {
      jQuery(`.pic-numbers__error-message`).addClass('--hidden');
      jQuery(`.pic-numbers__error-message`).attr('aria-hidden', true);
    });

    jQuery(document).on('click', '.pic-numbers__error-message__error-link', (ev) => {
      $('html, body').animate({
        scrollTop: 0
      }, 2000);

      jQuery(`#${jQuery(ev.target).attr('data-target')}`).focus();
    });
  },

  addResultsEventListeners: () => {
    jQuery(".pic-numbers__result-box__result__help-text__accordeon").click((event) => {
      picNumbers.openAccordeonOnClick(event.target);
    });
    jQuery(".pic-numbers__result-box__result__help-text__accordeon__arrow").click((event) => {
      jQuery(event.target).parent().focus().click();
    });
  },

  toggleRadioAriaChecked: () => {
    let radioInputs = jQuery(".pic-numbers__radio-button");
    jQuery.each(radioInputs, (index, input) => {
      jQuery(input).attr('aria-checked', jQuery(input).children('.pic-numbers__radio-button__input').is(':checked'))
    });
  },

  clearForm: function () {
    jQuery("#resultsBox").html('');

    picNumbers.clearErrorMessages();

    jQuery(".pic-numbers__radio-button__input").prop("checked", false);
    jQuery("#check-atual").prop("checked", true);
    picNumbers.toggleRadioAriaChecked();

    specFormer.clearInput("#service-select");
    specFormer.clearInput("#bond-select");

    jQuery("#bond-select").prop("disabled", true);
    jQuery("#bond-select").attr("aria-disabled", true);
    jQuery("#bond-select").siblings("#bond-select-label").addClass("--disabled");
    jQuery("#bond-select").siblings(".spec-former__form-input__select__icon").addClass("--disabled");

    jQuery("#clear-button").prop("disabled", true);
    jQuery("#clear-button").attr("aria-disabled", true);

    jQuery("#feedback-intro").removeClass("pic-numbers--hidden");
    jQuery("#feedback-error").addClass("pic-numbers--hidden");
    jQuery("#feedback-notfound").addClass("pic-numbers--hidden");
    jQuery(".pic-numbers__footnote").addClass("pic-numbers--hidden");

    jQuery("#pic-numbers__form-feedback").html('<p>limpo</p>');
  },

  clearFeedback: () => {
    jQuery("#pic-numbers__form-feedback").html('');
  },

  getPlans: function (plan) {
    try {
      jQuery.ajax({
        url: picNumbers.planosTabelaURL,
        callback: "?",
        data: picNumbers.planParams[picNumbers.formValues['service']],
        dataType: "jsonp",
        success: (response) => {
          picNumbers.planInfo = JSON.parse(response.d);
          picNumbers.loadPlansOnSegmentSelect();
        },
        error: (error) => {
          console.log("Erro ao buscar planos:", error);
          jQuery("#resultsBox").html('');
          jQuery("#feedback-intro").addClass("pic-numbers--hidden");
          jQuery("#feedback-error").removeClass("pic-numbers--hidden");
        }
      });
    }
    catch (error) {
      jQuery("#feedback-intro").toggleClass("pic-numbers--hidden");
      jQuery("#feedback-error").toggleClass("pic-numbers--hidden");
      console.log("Erro ao buscar planos:", error);
    }

  },

  getResults: function (plan) {
    picNumbers.selectedPlans = plan === 'all' ? picNumbers.planCodes : new Array(plan);

    jQuery.ajax({
      url: picNumbers.listarResultadosURL,
      callback: "?",
      data: {
        CD: picNumbers.selectedPlans.toString().replace(/([\,])+/g, ';'),
        TS: "",
        CP: "",
        VD: ""
      },
      dataType: "jsonp",
      beforeSend: () => {
        picNumbers.toggleFeedbackCard();
        if (jQuery("#resultsBox").find('div.iconLoader').length === 0) {
          jQuery("#resultsBox").html('<div class="pic-numbers__icon-loader"></div>');
        }
      },
      success: (response) => {
        picNumbers.searchResults = JSON.parse(response.d);
        picNumbers.showResults();
      },
      error: (error) => {
        console.log("Erro ao buscar sorteios:", error);
        jQuery("#resultsBox").html('');
        jQuery("#feedback-intro").addClass("pic-numbers--hidden");
        jQuery("#feedback-error").removeClass("pic-numbers--hidden");
      }
    });
  },

  loadPlansOnSegmentSelect: function () {
    let optionsArray = [{
      name: 'todos',
      value: 'all'
    }];
    picNumbers.planCodes = [];
    picNumbers.planInfo.forEach(item => {
      optionsArray.push({
        name: item.Nome,
        value: item.Codigo
      });
      picNumbers.planCodes.push(item.Codigo);
    });
    specFormer.populateSelect('#bond-select', optionsArray);

    jQuery("#bond-select").siblings("#bond-select-label").removeClass("--disabled");
    jQuery("#bond-select").siblings(".spec-former__form-input__select__icon").removeClass("--disabled");

    jQuery("#bond-select").prop("disabled", false);
    jQuery("#bond-select").attr("aria-disabled", false);

    jQuery("#clear-button").prop("disabled", false);
    jQuery("#clear-button").attr("aria-disabled", false);
  },

  openAccordeonOnClick: (target) => {
    if (jQuery(target).is('h3')) {
      target = jQuery(target).parent('.pic-numbers__result-box__result__help-text__accordeon');
    }
    jQuery(".pic-numbers__result-box").attr('aria-live','off');
    //jQuery(target).find(".pic-numbers__result-box__result__help-text__accordeon__arrow").toggleClass("icon-itaufonts_seta_up");
    //jQuery(target).find(".pic-numbers__result-box__result__help-text__accordeon__arrow").toggleClass("icon-itaufonts_seta_down");
    jQuery(target).parent().find(".pic-numbers__result-box__result__help-text__info").toggleClass("pic-numbers--flex");
    jQuery(target).attr('aria-expanded', (
      jQuery(target).parent().find(".pic-numbers__result-box__result__help-text__info").hasClass("pic-numbers--flex")
    ));
  },

  toggleFeedbackCard: function (card = "") {
    jQuery(".pic-numbers__result-box__feedback-card").addClass("pic-numbers--hidden");
    switch (card) {
      case 'not-found':
        jQuery("#feedback-notfound").removeClass("pic-numbers--hidden");
        break;
      case 'error':
        jQuery("#feedback-error").removeClass("pic-numbers--hidden");
        break;
    }
  },

  showResults: function () {
    let raffleDate = jQuery(".pic-numbers__radio-button__input:checked").val();

    let html = `<h2 class="pic-numbers__result-box__results__title">${raffleDate === 'atuais' ? 'sorteios atuais' : 'sorteios anteriores'}</h2>`;
    let results = ``;

    jQuery.each(picNumbers.selectedPlans, (i, code) => {
      let planName = picNumbers.planInfo.find((plan) => {
        return plan.Codigo === code;
      }).Nome;
      let filteredResults = [];
      if (Array.isArray(picNumbers.searchResults.ROOT.SORTEIOS.SORTEIO)) {
        jQuery.each(picNumbers.searchResults.ROOT.SORTEIOS.SORTEIO, (i, item) => {
          if (item['@PLANO'] == code) {
            filteredResults.push(item);
          }
        });
      } else {
        filteredResults = picNumbers.searchResults.ROOT.SORTEIOS.SORTEIO;
      }
      results += picComponents.resultsContainer(planName, filteredResults, raffleDate);
    });

    if (results.length == 0) {
      jQuery("#resultsBox").html('');
      picNumbers.toggleFeedbackCard('not-found');
      return;
    }

    jQuery("#resultsBox").html(html + results);
    jQuery(".pic-numbers__footnote").removeClass("pic-numbers--hidden");
    picNumbers.addResultsEventListeners();
  },

  validateForm: function () {
    picNumbers.clearErrorMessages();

    let formValues = specFormer.getFormValues('.pic-numbers__form');
    if (formValues.service == null || formValues.service == "") {
      picNumbers.showErrorMessage('service');
      picNumbers.showErrorMessagesContainer('<a class="pic-numbers__error-message__error-link" data-target="service-select" tabindex="0" role="link" aria-describedby="pic-error-message__item">segmento:</a> <span id="pic-error-message__item">selecione um segmento para prosseguir</span>');
      return false;
    }

    if (formValues.bond == null || formValues.bond == "") {
      picNumbers.showErrorMessage('bond');
      picNumbers.showErrorMessagesContainer('<a class="pic-numbers__error-message__error-link" data-target="bond-select" tabindex="0" role="link" aria-describedby="pic-error-message__item">plano de capitalização:</a> <span id="pic-error-message__item">selecione um plano de capitalização para prosseguir</span>');
      return false;
    }

    return true;
  },

  showErrorMessage: function (target) {
    specFormer.showFieldsWithErrors([{
      'id': `${target}-select`,
      'message': 'você esqueceu esse item'
    }]);
  },

  showErrorMessagesContainer: (message) => {
    jQuery(`.pic-numbers__error-message__error-list`).html('');
    jQuery(`.pic-numbers__error-message__intro`).attr('role', 'alert');
    jQuery(`.pic-numbers__error-message`).removeClass('--hidden').attr('aria-hidden', false);
    jQuery(`.pic-numbers__error-message__error-list`).append(`<p class="pic-numbers__error-message__item">01. ${message}</p>`);
    jQuery('.pic-numbers__error-message__error-link').focus();
  },

  clearErrorMessages: () => {
    jQuery(`.pic-numbers__error-message`).addClass('--hidden').attr('aria-hidden', true);
    jQuery(`.pic-numbers__icon-loader`).addClass('--hidden');
    jQuery(`.pic-numbers__error-message__intro`).removeAttr('role');
    specFormer.clearFieldsWithErrors();
  }
};

jQuery(document).ready(() => {
  if (jQuery(".pic-numbers").length > 0) {
    picNumbers.init();
    picComponents.init();
  }
});

"use strict";

$(document).ready(function () {
  if (isBreakPoint(576)) {
    $('.partner-container-static .partner-container__inner').children().removeClass('container');
    $('.partner-container-static .partner-container__inner').children().addClass('container-fluid'); // $('.container-fluid .partner-container__title').addClass('partner-container__title--fluid');
  }

  var partners = $('.partner-container-static .partner-container-static__list').find('.partner-item').length;

  if (partners > 5 || window.outerWidth <= 992 && partners >= 2) {
    var buildDotsPercentage = function buildDotsPercentage(el) {
      var dots = el.parent().parent().find('.lSPager li');
      var totalDots = dots.length;
      dots.each(function () {
        var index = $(this).find('a').data('index');
        var percentage = 100 * index / totalDots;
        var element = $(this).find('.timeline-track').css('width', percentage + '%');
      });
    };

    $('.partner-container-static .partner-container-static__list').lightSlider({
      loop: false,
      slideMargin: 0,
      speed: 600,
      currentPagerPosition: 'middle',
      enableDrag: false,
      responsive: [{
        breakpoint: 8000,
        settings: {
          item: 6,
          slideMove: 1
        }
      }, {
        breakpoint: 992,
        settings: {
          item: 4,
          slideMove: 1,
          slideMargin: 30
        }
      }, {
        breakpoint: 768,
        settings: {
          item: 4,
          slideMove: 1,
          slideMargin: 0
        }
      }, {
        breakpoint: 576,
        settings: {
          item: 2,
          slideMove: 2
        }
      }],
      onSliderLoad: function onSliderLoad(el) {
        $('.partner-container-static .lSPager.lSpg').each(function (index, element) {
          $(element).attr('aria-hidden', 'true');
          $('.partner-container-static .lSPrev').attr('aria-hidden', 'true');
          $('.partner-container-static .lSNext').attr('aria-hidden', 'true');
        });
        buildDotsPercentage(el);
      }
    });
  }
});
"use strict";

$(document).ready(function () {
  var mosaic = $('.mosaic');
  mosaic.map(function (i, elemnt) {
    $(elemnt).mouseenter(function () {
      $(elemnt).click(function () {
        var linkTitle = $(this).closest("section[data-component='mosaic']").find(".mosaic__inner-content h3").text();
        var itemClicado = 'LNK' + ':Mosaic:' + linkTitle;
        itemClicado = PascalCase(itemClicado);
        setAnalyticsData(itemClicado);
        var url = $(elemnt).attr('link');
        window.location.href = url;
      });
    });
    $(elemnt).mouseleave(function () {
      $(elemnt).off("click");
    });
  });
});
'use strict'; 

const moreAccess = {
  //Global Variables
  currentModal:"",
  numberOfErrors: 0,
  modalFirstElement: "",
  modalLastElement: "",
  errorMessages: [],
  //Recaptcha
  EXPECTED_ACTION: 'MOREACCESS',
  SITE_KEY: '6LcPMJUaAAAAAM3Sg6XMtSzrteBSYR4joGdD1DBJ',
  API_KEY: 'AIzaSyDPTGneSc6TaSi7hUvJIGunyT0CywUxQUs',
  PROJECT_ID: 'prj-lab-bd-redisign-id',

  init: ()=> {
    specFormer.init('.more-access');
    moreAccess.setMasks();
    moreAccess.addEventListeners();
    moreAccess.addSubmitListeners();
    moreAccess.addModalLinksListeners();
  },

  addEventListeners: () => {
    jQuery('.more-access-modal, .more-access__duo-text-link').bind('keypress keydown keyup', function (event) {
      if (event.keyCode == 13 && !jQuery(event.target).hasClass('spec-former__form-input__select__input') ){
        event.preventDefault(); 
      }
    });

    jQuery('.more-access-modal__container').bind('keydown', function (event) {   
           
      if (event.keyCode == 27) { 
        moreAccess.closeModalOnClick();
      }
    });

    jQuery(`.more-access-modal,.more-access-container`).bind('keydown', function (event) {      
      if (event.keyCode == 9) {     
        if(document.activeElement == jQuery(`#${moreAccess.currentModal}-container`)[0] && event.shiftKey){
          jQuery(`#${moreAccess.currentModal}`).find(`.more-access-modal__button`)[0].focus();
          event.preventDefault();
        }
        
        if(document.activeElement == jQuery(`#${moreAccess.currentModal} .more-access-modal__header__close-button__button`)[0] && event.shiftKey){
          jQuery(`#${moreAccess.currentModal}`).find(`.more-access-modal__button`)[0].focus();
          event.preventDefault();
        }
  
        if(document.activeElement == jQuery(`#${moreAccess.currentModal} .more-access-modal__button`)[0] && !event.shiftKey){
            jQuery(`#${moreAccess.currentModal}`).find(`.more-access-modal__header__close-button__button`).focus();
            event.preventDefault();
        }

      }
    });

    // jQuery('.more-access-modal__container').bind('keydown', function (event) {
      
    //   const target = jQuery(event.target).children('.more-access-modal');
      
    //   if (event.keyCode == 27) { 
    //     moreAccess.closeModalOnClick(target);
    //   }

    //   if (event.keyCode == 9 && event.shiftKey) {
    //     jQuery(`#${moreAccess.currentModal}`).find(`.more-access-modal__button`)[0].focus();
    //     event.preventDefault();
    //   }

    // });

    //MODAL
    jQuery('.more-access__duo-text-link__content__button').click((ev)=>{
      moreAccess.openModalOnClick(ev);
    });

    jQuery('.more-access-modal__header__close-button__button').click((ev)=>{
      moreAccess.closeModalOnClick(ev.target);
    });

    //Att Password Link
    jQuery('#socialSecurity-att-pass-link').unbind('click').click((ev)=> {
      let modal = jQuery(ev.target).closest('form').attr('id').replace('-form','');
      let form = '#socialSecurity-form';

      moreAccess.filterAttPasswordFields(modal,form);
      jQuery('#socialSecurity-header-title').text('atualizar senha');
      jQuery('#socialSecurity-input-cpf').focus();

    });

    //Back from att password to Submit Form
    jQuery('#socialSecurity-modal-back-button').unbind('click').click((ev)=> {
      let modal = jQuery(ev.target).parents().attr('id').replace('-form','');
      let form = '#socialSecurity-form';
      
      moreAccess.filterAttPasswordFields(modal, form);
      jQuery('#socialSecurity-header-title').text('acessar conta');
      jQuery('#socialSecurity-login-type').focus();
    });

    //Att Password submit
    jQuery('#socialSecurity-modal-new-password').click((ev)=> {
      let modal = jQuery(ev.target).parents().attr('id').replace('-form','');
      let form = '#socialSecurity-form';
      let values = specFormer.getFormValues("#socialSecurity-form");
      jQuery(`#${ modal }-error-container`).empty();

      specFormer.clearFieldsWithErrors();
      moreAccess.validateInputs(modal);
      
      if(moreAccess.numberOfErrors == 0){
        moreAccess.trocaSenhaOpRh(values);
        specFormer.clearInput('#socialSecurity-form spec-former__form-input__input');
        moreAccess.filterAttPasswordFields(modal, form);
        jQuery('#socialSecurity-login-type').focus();

      }
    });

    //MODAL SUBMIT
    jQuery('.more-access-modal__button').click((ev)=> {
      let modal = jQuery(ev.target).parents().attr('id').replace('-form','');
      jQuery(`#${ modal }-error-container`).empty();
      specFormer.clearFieldsWithErrors();
      moreAccess.validateInputs(modal);
    });

    //DYNAMIC FIELDS SELECTS
    //Consortium
    jQuery('#consortium-login-type').change((ev)=>{
      moreAccess.filterShowItens("#consortium-login-itens", ev.target.value);
      ev.target.value == "Credline" ? 
      jQuery("#consortium-access-type-itens > .spec-former__form-input, .seccond-select, .more-access-modal__forgot-password").addClass('--hidden') :
      jQuery("#consortium-access-type-itens > .spec-former__form-input, .seccond-select, .more-access-modal__forgot-password").removeClass('--hidden') ;
    });

    jQuery('#consortium-access-type-select').change((ev)=>{
      moreAccess.filterShowItens("#consortium-access-type-itens", ev.target.value);
    });

    //Vehicle Financial and Leasing
    jQuery('#vehicleFinancingAndLeasing-login-type').change((ev)=>{
      let loginTypeContainer = '#vehicleFinancingAndLeasing-login-itens';
      moreAccess.filterShowItens(loginTypeContainer, ev.target.value);
      moreAccess.clearIframe();

      jQuery('#vehicleFinancingAndLeasing-inline-fields').addClass('--hidden')
      jQuery('#vehicleFinancingAndLeasing-inline-fields').children('.spec-former__form-input').addClass('--hidden');

      switch (ev.target.value) {
        case 'Financiamento e Leasing':
          jQuery(loginTypeContainer).find(`[data-filter="keyField"]`).removeClass('--hidden');
          jQuery(loginTypeContainer).find(`[data-filter="Plate"]`).removeClass("--hidden");
        break;
        
        case 'Finame':
          moreAccess.filterShowItens('#vehicleFinancingAndLeasing-inline-fields', ev.target.value)

          jQuery('#vehicleFinancingAndLeasing-inline-fields').removeClass('--hidden')
          jQuery(loginTypeContainer).find(`[data-filter="keyField"]`).removeClass('--hidden');
          jQuery(loginTypeContainer).find(`[data-filter="Plate"]`).addClass("--hidden");
        break;

        case 'Contratos Unibanco':
          jQuery(loginTypeContainer).find(`[data-filter="keyField"]`).removeClass('--hidden');
          jQuery(loginTypeContainer).find(`[data-filter="Plate"]`).removeClass("--hidden");

        break;

        case 'Credline':
          jQuery(loginTypeContainer).find(`[data-filter="keyField"]`).addClass('--hidden') ;
          jQuery(loginTypeContainer).find(`[data-filter="Plate"]`).addClass("--hidden");
        break;

        case 'Cobrança Itaucred':
          jQuery(loginTypeContainer).find(`[data-filter="keyField"]`).addClass('--hidden');
          jQuery(loginTypeContainer).find(`[data-filter="Plate"]`).addClass("--hidden");
        break;
      }

    });

    //Social Security
    jQuery('#socialSecurity-login-type').change((ev)=>{
      console.log(`@@__value do select = ${ev.target.value}`)
      ev.target.value == "Não correntista" ?
      jQuery("#socialSecurity-login-itens").find(`[data-filter="att-pass"]`).addClass("--hidden"):
      jQuery("#socialSecurity-login-itens").find(`[data-filter="att-pass"]`).removeClass("--hidden");

    });

    //Real State Loans
    jQuery('#realEstateLoans-login-type').change((ev)=>{
      
      ev.target.value == "Despachante" || ev.target.value == "Avaliador" ?
      moreAccess.filterShowItens("#realEstateLoans-login-itens", "eBusinessID"):
      moreAccess.filterShowItens("#realEstateLoans-login-itens", ev.target.value);

    });

    //Itaú Solutions
    jQuery('#itauSolutions-login-type').change((ev)=>{
      moreAccess.filterShowItens("#itauSolutions-login-itens", ev.target.value);
    });

  },

  filterAttPasswordFields:(modal, form)=> {
    jQuery(form).toggleClass('--att-pass');
    jQuery(form).find(`[data-filter="new-pass"]`).toggleClass('--hidden');
    jQuery(form).find(`[data-filter="att-pass"]`).toggleClass('--hidden');
    jQuery(form).find(`[data-filter="submit"]`).toggleClass('--hidden');

    jQuery(`#${ modal }-error-container`).empty();
    jQuery(`#${ modal }-error-container`).addClass('--hidden');

     specFormer.clearFieldsWithErrors();
     specFormer.clearAllInputs(['#socialSecurity-input-cpf', '#socialSecurity-input-rg', '#socialSecurity-input-pass', '#socialSecurity-new-pass', '#socialSecurity-confirm-new-pass']);
  },

  filterShowItens: (container, filter) => {
    jQuery(container).children().addClass('--hidden');
    jQuery(container).children(`[data-filter="${filter}"]`).removeClass('--hidden');
  },

  setMasks: ()=> {
    jQuery('[data-mask="CPF"]').setMask("999.999.999-99");
    jQuery('[data-mask="CNPJ"]').setMask("99.999.999/9999-99");
    jQuery('[data-mask="access-code"]').setMask("9999");
    // jQuery('[data-mask="installments"]').setMask("99");
    // jQuery('[data-mask="due-date"]').setMask("99");

    //CPF / CNPJ Field
    jQuery('[data-mask="CPF/CNPJ"]').keyup((ev)=> {
      let cpfCnpjInputedValue = jQuery(ev.target).val().replace(/[^0-9A-Za-z]/g, '').length;
  
      if (cpfCnpjInputedValue <= 11) {
        jQuery(ev.target).setMask("999.999.999-999");
      } else if (cpfCnpjInputedValue > 11) {
        jQuery(ev.target).setMask("99.999.999/9999-99");
      }
    });
  },

  openModalOnClick: (ev)=> {
    jQuery(".header, header, .more-access-logins__container, .footer, #footer").attr('aria-hidden', true);
    jQuery(".more-access").siblings("*").attr('aria-hidden', true); 
    jQuery("body").css("overflow-y","hidden");

    let targetModal = jQuery(ev.target).parents('.more-access-login').attr('data-modal');
    moreAccess.currentModal= jQuery(`#${targetModal}-modal`).attr('id');
    moreAccess.modalFirstElement = jQuery(`#${moreAccess.currentModal} *:input:visible:first`)[0];
    moreAccess.modalLastElement = jQuery(`#${moreAccess.currentModal} *:input:visible:last`)[0];
    
    jQuery(`#${moreAccess.currentModal}-container`).attr('aria-hidden','false');
    jQuery(`#${moreAccess.currentModal}-container`).toggleClass('--hide');
    jQuery(`#${moreAccess.currentModal}-container`).find('*[tabindex=-1]').attr('tabindex','0');
    jQuery(`#${moreAccess.currentModal}`).attr('tabindex','-1');
    jQuery(`#${moreAccess.currentModal}-container`).focus();
    
    jQuery(`#${moreAccess.currentModal}-container`).find('.spec-former__form-input__counter-label').each((i, item) => {
      jQuery(item).removeClass('--hidden');
    });
  },

  closeModalOnClick: (target)=> {
    let targetModal = jQuery(`#${moreAccess.currentModal}-container`);
    let targetButton = moreAccess.currentModal.slice(0,-6);

    jQuery(targetModal).toggleClass('--hide');
    jQuery(targetModal).attr('aria-hidden','true');
    jQuery(targetModal).find('*[tabindex=0]').attr('tabindex','-1');
    jQuery(`[data-modal=${targetButton}]`).find('.more-access__duo-text-link__content__button').focus();    

    jQuery(".header, header, .more-access-logins__container, .footer, #footer").attr('aria-hidden', false);
    jQuery(".more-access").siblings("*").attr('aria-hidden', false);


    jQuery("body").css("overflow-y","auto");
    jQuery(targetModal).find('.spec-former__form-input__counter-label').each((i, item) => {
      jQuery(item).addClass('--hidden');
    });
  },

  //OLD
  duoTextClick: ()=> {
    $('.more-access-login .shared-button__a').click((elem)=>{ 
      moreAccess.currentModal = $(elem.target).closest('.more-access-login').data('modal');
      $(`#${ moreAccess.currentModal }-modal-container`).show();     
    });
  },

  createErrorMessages: (modal, errorId, linkId, linkText, errorComplement)=> {
    let errorMessage = `
    <div class="more-access-modal__error-container__error" id="${errorId}-error">
      <p class="more-access-modal__error-container__error__text">
        <span class="more-access-modal__error-container__error__text__number">0${moreAccess.errorMessages.length + 1}.</span>
          <a class="more-access-modal__error-container__error__text__link" role="link" aria-describedby="error-message-${errorId}" tabindex="0" id="${linkId}-field-focus">${linkText}:</a>
        <span class="more-access-modal__error-container__error__text__complement" id="error-message-${errorId}">
          ${errorComplement}
        </span>
      </p>
    </div>`;

    moreAccess.numberOfErrors++;
    moreAccess.errorMessages.push(errorMessage);
  },
  
  addErrorContainer: (modal, errorList)=> {
    let errormessagesToAppend = ``;

    errorList.forEach((error, errorIndex)=> {
      errormessagesToAppend += `${error}`;
    });

    let errorContainer = `
    <div class="more-access-modal__error-container__title">
      <div class="more-access-modal__error-container__title__icon icon-itaufonts_exclamacao" aria-hidden="true"></div>
      <h4 class="more-access-modal__error-container__title__text" role="alert" id="${modal}-error-alert">${ moreAccess.numberOfErrors == 1 ? `Existe 1 erro que precisa ser corrigido` : `Existem ${moreAccess.numberOfErrors} erros que precisam ser corrigidos`}</h4>
      <div class="more-access-modal__error-container__title__close-button">
        <label for="error-message-close-button" aria-hidden="true" hidden>Fechar</label>
        <button class="more-access-modal__error-container__title__close-button__button" role="button" aria-label="Fechar caixa de mensagem de erro">
          <div  class="more-access-modal__error-container__title__close-button__button__icon icon-itaufonts_fechar"></div>
        </button>
      </div>
    </div>
    ${errormessagesToAppend}`;

    jQuery(`#${ modal }-error-container`).append(errorContainer);

    //Error Message Link
    jQuery(`#${ modal }-error-container .more-access-modal__error-container__error__text__link`)[0].focus();
    jQuery('.more-access-modal__error-container__error__text__link').click((ev)=> {
      let target = jQuery(ev.target).attr('id').replace('-field-focus','');
  
      moreAccess.errorMessageLink(target);
    });

    //Error Message Close Button Funcionality
    jQuery('.more-access-modal__error-container__title__close-button__button').click((ev)=> {
      let modalToClose = jQuery(ev.target).closest('.more-access-modal__error-container');
      jQuery(modalToClose).addClass('--hidden');
      jQuery(modalToClose).parent('.more-access-modal').find('.more-access-modal__form').find('.spec-former__form-input__select__input,.spec-former__form-input__input').eq(0).focus();
    });
  },

  errorMessageLink: (target)=> {    
    jQuery(`#${ target }`).focus();

  },

  //Validations 
  validateInputs: ( modal )=> {
    moreAccess.numberOfErrors = 0;
    moreAccess.errorMessages = [];

    jQuery(`#${ modal }-form`).find('.spec-former__form-input').not('.--hidden').each( (index, element)=> {
      let fieldTarget = jQuery(element).find('.spec-former__form-input__input').attr('id');
      let targetValue = jQuery(`#${ fieldTarget }`).val();

      switch (fieldTarget) {
        case `${ modal }-input-cpf`:
          moreAccess.cpfFiefdsValidation(modal, targetValue, fieldTarget);
        break;

        //CNPJ fields
        case `${ modal }-input-cnpj`:
          moreAccess.cnpjFieldsValidation(modal, targetValue, fieldTarget);
        break;

        case `${ modal }-input-pass`:
          let pass = targetValue.replace(/([\.-\/-])+/g, '');

          if(pass.length < 6 && modal != "socialSecurity") {
            console.log('pass', pass)
            moreAccess.passwordFieldsValidation(modal, targetValue, fieldTarget);
          }

          break;

        //social security
        case `${ modal }-input-pass-security`:
          moreAccess.passwordFieldsValidation(modal, targetValue, fieldTarget);

          break;

        case `${ modal }-new-pass`:
          moreAccess.newPasswordFieldsValidation(modal, targetValue, fieldTarget);

          break;

        case `${ modal }-confirm-new-pass`:
          moreAccess.confirmPasswordFieldsValidation(modal, targetValue, fieldTarget);

          break;
        
        //CPF/CNPJ fields
        case `${ modal }-input-cpf-and-cnpj`:
          let cleanCpfCnpj = targetValue.replace(/[^0-9]/g, '');
          
          if (cleanCpfCnpj.length <= 11) {
            moreAccess.cpfFiefdsValidation(modal, targetValue, fieldTarget);

          } else {
            moreAccess.cnpjFieldsValidation(modal, targetValue, fieldTarget);
            
          }
        break;

        //Other fields
        default: //Case for empty fields
          let linkErrorMessage = jQuery(element).find('.spec-former__form-input__label').text();
          let fieldErrorMessage = jQuery(element).find('.spec-former__form-input__error-message').text().toLowerCase();

          moreAccess.genericFieldsValidation(modal, targetValue, fieldTarget, linkErrorMessage, fieldErrorMessage);
        break;
      }

      //Error container visibility
      moreAccess.numberOfErrors == 0 ?
      jQuery(`#${ modal }-error-container`).addClass('--hidden') :
      jQuery(`#${ modal }-error-container`).removeClass('--hidden');
      
      //Hide/Show Links
      jQuery(`#${fieldTarget}`).hasClass('--error') ?
      jQuery(`#${fieldTarget}`).siblings('.more-access-modal__forgot-password__link').addClass('--hidden'):
      jQuery(`#${fieldTarget}`).siblings('.more-access-modal__forgot-password__link').removeClass('--hidden');      
    });

    if(moreAccess.numberOfErrors > 0) {
      moreAccess.addErrorContainer(modal, moreAccess.errorMessages); 
    } else {
      return
    }

  },

  cpfFiefdsValidation: (modal, targetValue, fieldTarget)=> {
    let cleanCpf = targetValue.replace(/([\.-])+/g, '');
    
    if (moreAccess.validaCPF(cleanCpf) == true) {
      jQuery(`#${ fieldTarget }-error`).remove();

    } else {
      moreAccess.createErrorMessages(modal, fieldTarget, fieldTarget, 'CPF', 'digite um CPF válido para prosseguir.');

      specFormer.showFieldsWithErrors([{
        'id': `${fieldTarget}`,
        'message': `digite um Cpf válido para prosseguir.`
      }]);
    }

  },

  cnpjFieldsValidation: (modal, targetValue, fieldTarget,)=> {
    let cleanCnpj = targetValue.replace(/[^0-9]/g, '');
        
    if (moreAccess.validaCNPJ(cleanCnpj) == true ) {
      jQuery(`#${ fieldTarget }-error`).remove();

    } else {
      moreAccess.createErrorMessages(modal, fieldTarget, fieldTarget, 'CNPJ', 'digite um CNPJ válido para prosseguir.');
      specFormer.showFieldsWithErrors([{
        'id': `${fieldTarget}`,
        'message': `digite um Cnpj válido para prosseguir.`
      }]);
    }
  },

  passwordFieldsValidation: (modal, targetValue, fieldTarget)=> {
    if(targetValue == 0 || targetValue.length < 6) {
      moreAccess.createErrorMessages(modal, fieldTarget, fieldTarget, 'senha', 'digite uma senha com no mínimo 6 digitos para continuar');

      //Add Error Class on fields
      specFormer.showFieldsWithErrors([{
        'id': `${fieldTarget}`,
        'message': `digite uma senha com no mínimo 6 digitos para continuar`
      }]);

    } else {
      jQuery(`#${ fieldTarget }-error`).remove();

    }
  },
  
  newPasswordFieldsValidation: (modal, targetValue, fieldTarget)=> {

    if(targetValue.length == 0) {
      moreAccess.createErrorMessages(modal, fieldTarget, fieldTarget, 'senha', 'digite uma nova senha para continuar');

      //Add Error Class on fields
      specFormer.showFieldsWithErrors([{
        'id': `${fieldTarget}`,
        'message': `digite uma nova senha para continuar`
      }]);

    } else {
      jQuery(`#${ fieldTarget }-error`).remove();
    }
  },

  confirmPasswordFieldsValidation: (modal, targetValue, fieldTarget)=> {

    let values = specFormer.getFormValues("#socialSecurity-form");

    if(targetValue.length == 0) {
      moreAccess.createErrorMessages(modal, fieldTarget, fieldTarget, 'confirmação de senha', 'digite uma confirmação de senha para continuar');

      //Add Error Class on fields
      specFormer.showFieldsWithErrors([{
        'id': `${fieldTarget}`,
        'message': `digite uma confirmação de senha para continuar`
      }]);

    } else if(values['socialSecurity-new-pass'] != values['socialSecurity-confirm-new-pass']){
      moreAccess.createErrorMessages(modal, fieldTarget, fieldTarget, 'confirmação de senha', 'as senhas precisam combinar');

      //Add Error Class on fields
      specFormer.showFieldsWithErrors([{
        'id': `${fieldTarget}`,
        'message': `as senhas precisam combinar`
      }]);
    } else {
      jQuery(`#${ fieldTarget }-error`).remove();
    }
  },

  genericFieldsValidation: (modal, targetValue, fieldTarget, linkErrorMessage, contentErrorMessage)=> {
    if(targetValue == '') {
      moreAccess.createErrorMessages(modal, fieldTarget, fieldTarget, linkErrorMessage, contentErrorMessage);

      //Add Error Class on fields
      specFormer.showFieldsWithErrors([{
        'id': `${fieldTarget}`,
        'message': `${contentErrorMessage}`
      }]);

    } else {
      jQuery(`#${ fieldTarget }-error`).remove();

    }
  },

  validaCPF: (valor)=> {
    var value = valor;
    value = value.replace('.', '');
    value = value.replace('.', '');
    cpf = value.replace('-', '');

    while (cpf.length < 11) {
      cpf = "0" + cpf;
    }

    var expReg = /^0+$|^1+$|^2+$|^3+$|^4+$|^5+$|^6+$|^7+$|^8+$|^9+$/;
    var a = [];
    var b = new Number();
    var c = 11;

    for (i = 0; i < 11; i++) {
      a[i] = cpf.charAt(i);
      if (i < 9) b += a[i] * --c;
    }

    if ((x = b % 11) < 2) {
      a[9] = 0;
    } else {
      a[9] = 11 - x;
    }

    b = 0;
    c = 11;

    for (y = 0; y < 10; y++) {
      b += a[y] * c--;
    }

    if ((x = b % 11) < 2) {
      a[10] = 0;
    } else {
      a[10] = 11 - x;
    }

    if (cpf.charAt(9) != a[9] || cpf.charAt(10) != a[10] || cpf.match(expReg)) return false;
    return true;
  },

  validaCNPJ: (umCNPJ)=> {
    var mask = new String("99.999.999/9999-99");
    var temp = new String(umCNPJ);
    var cnpj = new String(); // Verifica o tamanho

    if (temp.length != 14 && temp.length != 18) {
      return false;
    } // Verifica m\341scara, se foi digitado com a m\341scara


    if (temp.length != 14) {
      for (var i = 0; i < mask.length; i++) {
        if (mask.charAt(i) != "9" && mask.charAt(i) != temp.charAt(i)) {
          return false;
        }
      }
    } // Cria uma nova string, somente com os n\372meros do CNPJ


    for (i = 0; i < temp.length; i++) {
      if (!isNaN(temp.charAt(i)) && temp.charAt(i) != " ") {
        cnpj += temp.charAt(i);
      }
    }

    if (cnpj.length != 14) {
      return false;
    } // Verifica se o valor do CNPJ \351 v\341lido


    var total1 = cnpj.charAt(0) * 5 + cnpj.charAt(1) * 4 + cnpj.charAt(2) * 3 + cnpj.charAt(3) * 2 + cnpj.charAt(4) * 9 + cnpj.charAt(5) * 8 + cnpj.charAt(6) * 7 + cnpj.charAt(7) * 6 + cnpj.charAt(8) * 5 + cnpj.charAt(9) * 4 + cnpj.charAt(10) * 3 + cnpj.charAt(11) * 2;
    var dv1;

    if (total1 % 11 > 1) {
      dv1 = 11 - total1 % 11;
    } else {
      dv1 = 0;
    }

    var total2 = cnpj.charAt(0) * 6 + cnpj.charAt(1) * 5 + cnpj.charAt(2) * 4 + cnpj.charAt(3) * 3 + cnpj.charAt(4) * 2 + cnpj.charAt(5) * 9 + cnpj.charAt(6) * 8 + cnpj.charAt(7) * 7 + cnpj.charAt(8) * 6 + cnpj.charAt(9) * 5 + cnpj.charAt(10) * 4 + cnpj.charAt(11) * 3 + dv1 * 2;
    var dv2;

    if (total2 % 11 > 1) {
      dv2 = 11 - total2 % 11;
    } else {
      dv2 = 0;
    }

    if (dv1 == cnpj.charAt(12) && dv2 == cnpj.charAt(13)) {
      return true;
    } else {
      return false;
    }
  },

  addModalLinksListeners: ()=>{
    jQuery("#consortium-code-access-forgot-pass").click(()=>{
      moreAccess.consortiumForgotPassword();
    });

    jQuery('#realEstateLoans-forwarding-agent-and-evaluator-forgot-code').click(()=> {
      moreAccess.realEstateLoansForwardingAgentForgotPass();
    });

    jQuery('#itauSolutions-code-access-forgot-pass').click(()=> {
      moreAccess.itauSolutionsOperatorCodeForgotPassword();
    });
  },

  addSubmitListeners: () => {
    jQuery('.more-access-modal__button').click((ev)=>{
      grecaptcha.enterprise.ready(function() {
        grecaptcha.enterprise.execute(moreAccess.SITE_KEY, {action: moreAccess.EXPECTED_ACTION}).then(function(token) {
            jQuery.ajax({
              url: `https://recaptchaenterprise.googleapis.com/v1beta1/projects/${moreAccess.PROJECT_ID}/assessments?key=${moreAccess.API_KEY}`,
              method: "POST",
              contentType: "application/json; charset=utf-8",
              data: JSON.stringify({
                "event": {
                  "token": token,
                  "siteKey": moreAccess.SITE_KEY,
                  "expectedAction": moreAccess.EXPECTED_ACTION
                }
              }),
            }).done((response) => {
              if(response.tokenProperties.action != moreAccess.EXPECTED_ACTION && !response.tokenProperties.action){
                let modal = moreAccess.currentModal.replace('-modal', '');
                moreAccess.createErrorMessages(modal, '', '', 'reCAPTCHA', 'verificação a validação do reCaptcha.');
                moreAccess.addErrorContainer(modal, moreAccess.errorMessages); 
                jQuery(`#${modal}-error-container`).removeClass('--hidden');
              }else{
                if (moreAccess.numberOfErrors == 0) {
                  switch(moreAccess.currentModal){
                    case "consortium-modal":
                      moreAccess.consortiumSubmit();
                      break;
                    case "realEstateLoans-modal":
                      moreAccess.realEstateLoansSubmit();
                      break;
                    case "vehicleFinancingAndLeasing-modal":
                      moreAccess.vehicleSubmit();
                      break;
                    case "propertySecuredCredit-modal":
                      moreAccess.propertySecuredCreditSubmit();
                      break;
                    case "socialSecurity-modal":
                      moreAccess.socialSecuritySubmit();
                      break;
                    case "insurance-modal":
                      moreAccess.insuranceSubmit();
                      break;
                    case "itauSolutions-modal":
                      moreAccess.itauSolutionsSubmit();
                      break;
                  }
                }
              }
            });
        });
      });
    });
  },

  //Submit type selectors
  consortiumSubmit: ()=>{
    let values = specFormer.getFormValues("#consortium-form");
    
    switch(values['login-type-consortium-select']){
      case "CPF":
      case "CNPJ":
        moreAccess.consortiumCpfCnpjSubmit(values);
        break;
      case "Credline":
        moreAccess.consortiumCredlineSubmit(values);
        break;
    }
  },

  realEstateLoansSubmit: ()=>{
    let values = specFormer.getFormValues("#realEstateLoans-form");

    switch(values['login-type-realEstateLoans-select']){
      case "Contrato":
        moreAccess.realEstateLoansContractSubmit(values);
        break;
      case "Avaliador":
        moreAccess.realEstateLoansEvaluatorSubmit(values);
        break;
      case "Despachante":
        moreAccess.realEstateLoansForwardingAgentSubmit(values);
        break;
      case "Vendedor":
        moreAccess.realEstateLoansSellerSubmit(values);
        break;
    };
  },

  vehicleSubmit: ()=>{
    let values = specFormer.getFormValues("#vehicleFinancingAndLeasing-form");

    switch(values['vehicleFinancingAndLeasing-login-type']){
      case "Financiamento e Leasing":
        moreAccess.vehicleFinancingAndLeasingSubmit(values);
        break;
      case "Finame":
        moreAccess.vehicleFinancingAndLeasingFinameSubmit(values);
        break;
      case "Contratos Unibanco":
        moreAccess.vehicleFinancingAndLeasingUnibancoSubmit(values);
        break;
      case "Credline":
        moreAccess.vehicleFinancingAndLeasingCredlineSubmit(values);
        break;
      case "Cobrança Itaucred":
        moreAccess.vehicleFinancingAndLeasingItaucredSubmit(values);
        break;
    };
  },

  insuranceSubmit: ()=>{

    let values = specFormer.getFormValues("#insurance-form");

    switch(values['login-type-insurance-select']){
      case "Portal do Segurado":
        moreAccess.insuranceSecured();
        break;
      case "Portal do Corretor":
        moreAccess.insuranceRealtor();
        break;
      case "Portal do Estipulante":
        moreAccess.insuranceStipulating();
        break;
    };

  },

  socialSecuritySubmit: ()=>{
    let values = specFormer.getFormValues("#socialSecurity-form");

    switch(values['login-type-socialSecurity-select']){
      case "Não correntista":
        moreAccess.socialSecurityNonAccontantSubmit(values);
        break;
      case "Operador de RH":
        moreAccess.socialSecurityOperatorSubmit(values);
        break;
    };

  },

  itauSolutionsSubmit: ()=>{
    let values = specFormer.getFormValues("#itauSolutions-form");

    switch(values['itauSolutions-login-type']){
      case "Código de Operador":
        moreAccess.itauSolutionsOperatorCodeSubmit(values);
        break;
      case "CPF":
        moreAccess.itauSolutionsCpfSubmit(values);
        break;
      case "Código de convite":
        moreAccess.itauSolutionsInviteCode(values);
        break;
      case "Código de controle":
        moreAccess.itauSolutionsControlCode(values);
        break;
    };
  },

  //Submits
  consortiumCpfCnpjSubmit: (values)=> {
    $('#more-access-form-container').append(`<form type="hidden" action="https://bankline.itau.com.br/GRIPNET/bklcom.dll" method="post" target="_blank" id="form-consorcio"><input type="hidden" name="id" value="U2Y6"><input type="hidden" name="op" value="A308789401047674BF30D15B9A426501AC8126BD8630359C"><input type="hidden" name="ag" value="9999"><input type="hidden" name="cc" value="99999"><input type="hidden" name="dc" value="9"><input type="hidden" name="tu" value="H"><input type="hidden" name="tp" value=""><input type="hidden" name="canal" value="T"><input type="hidden" name="Trn3" value="UA44"><input type="hidden" name="cpfcnpj" value=""><input type="hidden" name="codacesso" value=""><input type="hidden" name="proposta" value=""></form>`);
    var consortiumTpAccesSubmit = values['login-type-consortium-select'];
    var consortiumAcSubmit = values['consortium-access-type-select'];
    $("#form-consorcio input[name='tp']").val(consortiumTpAccesSubmit == "CPF" ? "F" : "J");
    $("#form-consorcio input[name='cpfcnpj']").val(consortiumTpAccesSubmit == "CPF" ? values['consortium-input-cpf'].replace(/[^0-9A-Za-z]/g, '') : values['consortium-input-cnpj'].replace(/[^0-9A-Za-z]/g, ''));
    $("#form-consorcio input[name='codacesso']").val(consortiumAcSubmit == "acesso" ? values['consortium-input-code-access'] : "P");
    $("#form-consorcio input[name='proposta']").val(consortiumAcSubmit == "Proposta" ? "9999" : "");
    $("#form-consorcio").submit();
    $('#form-consorcio').remove();
  },

  consortiumCredlineSubmit: (values)=> {
    $('#more-access-form-container').append(`<form action="https://www.itaucred.com.br/qn-consorcio-web/usuario.do" method="post" target="_blank" id="form-consorcio-credline"><input type="hidden" name="m" value="login"><input type="hidden" name="usuario.sistema" value="c"><input type="hidden" name="usuario.usuario"><input type="hidden" name="usuario.senha"><input type="hidden" name="res" value="9"><input type="hidden" name="cli" value="H"><input type="hidden" name="site" value="Consorcio_Parceiros"></form>`);
    $("#form-consorcio-credline input[name='usuario.usuario']").val(values['consortium-input-credline-user']);
    $("#form-consorcio-credline input[name='usuario.senha']").val(values['consortium-input-credline-pass']);
    $("#form-consorcio-credline").submit();
    $('#form-consorcio-credline').remove();
  },

  consortiumForgotPassword: ()=> {
    let values = specFormer.getFormValues("#consortium-form");
    $('#more-access-form-container').append(`<form action="https://bankline.itau.com.br/GRIPNET/bklcom.dll" method="post" target="_blank" id="form-consorcio"><input type="hidden" name="id" value="U2Y6"><input type="hidden" name="op" value="A308789401047674BF30D15B9A426501AC8126BD8630359C"><input type="hidden" name="ag" value="9999"><input type="hidden" name="cc" value="99999"><input type="hidden" name="dc" value="9"><input type="hidden" name="tu" value="H"><input type="hidden" name="tp" value=""><input type="hidden" name="canal" value="T"><input type="hidden" name="Trn3" value="UA44"><input type="hidden" name="cpfcnpj" value=""><input type="hidden" name="codacesso" value=""><input type="hidden" name="proposta" value=""></form>`);
    var consortiumTpAccesSubmit = values['login-type-consortium-select'];
    $("#form-consorcio input[name='tp']").val(consortiumTpAccesSubmit == "CPF" ? "F" : "J");
    $("#form-consorcio input[name='cpfcnpj']").val(consortiumTpAccesSubmit == "CPF" ? values['consortium-input-cpf'].replace(/[^0-9A-Za-z]/g, '') : values['consortium-input-cnpj'].replace(/[^0-9A-Za-z]/g, ''));
    $("#form-consorcio input[name='codacesso']").val("E");
    $("#form-consorcio input[name='proposta']").val("");
    $("#form-consorcio").submit();
    $('#form-consorcio').remove();
  },

  realEstateLoansContractSubmit: (values)=> {
    $('#more-access-form-container').append(`<form action="https://ww3.itau.com.br/imobline/novolayout/maisAcesso/maisacesso.aspx" method="post" target="_blank" id="form-credito-contrato"><input type="hidden" name="tipoAcesso" value="contrato"><input type="hidden" name="CPFContrato" value="CPF"><input type="hidden" name="Senha" value="Senha"></form>`);
    $("#form-credito-contrato input[name='CPFContrato']").val(values['realEstateLoans-input-cpf']);
    $("#form-credito-contrato input[name='Senha']").val(values['realEstateLoans-input-pass']);
    $("#form-credito-contrato").submit();
    $('#form-credito-contrato').remove();
  },

  realEstateLoansForwardingAgentSubmit: (values)=> {
    $('#more-access-form-container').append(`<form action="https://ww3.itau.com.br/imobline/novolayout/maisAcesso/maisacesso.aspx" method="post" target="_blank" id="form-credito-despachante"><input type="hidden" name="tipoAcesso" value="despachante"><input type="hidden" name="Usuario" value="eBusinessID"><input type="hidden" name="Senha" value="Senha"></form>`);
    $("#form-credito-despachante input[name='Usuario']").val(values['realEstateLoans-input-ebusinessid-user']);
    $("#form-credito-despachante input[name='Senha']").val(values['realEstateLoans-input-ebusinessid-access-code']);
    $("#form-credito-despachante").submit();
    $('#form-credito-despachante').remove();
  },

  realEstateLoansEvaluatorSubmit: (values)=> {
    $('#more-access-form-container').append(`<form action="https://ww3.itau.com.br/imobline/novolayout/maisAcesso/maisacesso.aspx" method="post" target="_blank" id="form-credito-avaliador"><input type="hidden" name="tipoAcesso" value="avaliador"><input type="hidden" name="Usuario" value="eBusinessID"><input type="hidden" name="Senha" value="Senha"></form>`);
    $("#form-credito-avaliador input[name='Usuario']").val(values['realEstateLoans-input-ebusinessid-user']);
    $("#form-credito-avaliador input[name='Senha']").val(values['realEstateLoans-input-ebusinessid-access-code']);
    $("#form-credito-avaliador").submit();
    $('#form-credito-avaliador').remove();
  },

  realEstateLoansForwardingAgentForgotPass: (values)=> {   
    window.open("https://ww3.itau.com.br/imobline/novolayout/maisAcesso/maisacesso.aspx?tipoAcesso=trocaSenha");    
  },

  realEstateLoansSellerSubmit: ()=> {
    window.open("http://www.itau.com.br/portal-vendedor/", "_blank");
    $("#form-credito-vendedor").submit();
    $('#form-credito-vendedor').remove();
  },


  //iFrame Submit Vehicle Financing

  //Função para realizar append de um campo especifico
	appendToForm: (form, name, val)=> {
		$(form).append(`<input type="hidden" name="${name}" value="${val}" />`);	
	},
	
	clearIframe: ()=> {
    jQuery('.more-access-modal__form__iframe').addClass('--hidden');
    jQuery('#vehicleFinancingAndLeasing-iframe').html('');
    $("#vehicleFinancingAndLeasing-iframe").closest('.more-access-modal').removeClass('--iframe');
  },

	//Função submitGeneric para post de todos os forms
	submitGeneric: (form, action, target, show)=> {
    moreAccess.clearIframe();

    jQuery(form).attr('action', action);
    
    //seta o target para o iframe contendo segunda etapa
    jQuery(form).attr('target', target);
    
    //realiza o append de campos hidden ao formulário para submit
    
    moreAccess.appendToForm(form, 'BROWSER', navigator.appName);
    moreAccess.appendToForm(form, 'RESOLUCAO', screen.width+"X"+screen.height);
    
    //exibe iframe para preenchimento da segunda etapa
    if(show == true){
      $("#vehicleFinancingAndLeasing-iframe").closest('.more-access-modal').addClass('--iframe');
      $(".more-access-modal__form__iframe").removeClass('--hidden');
    }
    
    //submete o formulário
    jQuery(form).submit();			
    
	},

  vehicleFinancingAndLeasingSubmit: (values)=> {
    $('#more-access-form-container').append(`<form action="" method="post" target="" id="form-financiamento-leasing"><input type="hidden" name="cpf_cnpj"><input type="hidden" name="placa"></form>`);
    $("#form-financiamento-leasing input[name='cpf_cnpj']").val(values["vehicleFinancingAndLeasing-input-cpf-and-cnpj"].replace(/[^0-9A-Za-z]/g, ''));
    $("#form-financiamento-leasing input[name='placa']").val(values["vehicleFinancingAndLeasing-input-plate"]);
    moreAccess.appendToForm('#form-financiamento-leasing', 'selCpfCnpj', '');
    moreAccess.appendToForm('#form-financiamento-leasing', 'selOpcao', 'Financiamento e Leasing');
    moreAccess.appendToForm('#form-financiamento-leasing', 'rdPessoa', values["vehicleFinancingAndLeasing-input-cpf-and-cnpj"].replace(/[^0-9A-Za-z]/g, '').length <= 11 ? 'F' : 'J');
    moreAccess.submitGeneric('#form-financiamento-leasing', 'https://www.itaucred.com.br/itaucred/posvenda_id_positiva_010maisacessos.jsp', 'finanNivel2', true);
    $("#form-financiamento-leasing").remove();
  },

  vehicleFinancingAndLeasingFinameSubmit: (values)=> {
    $('#more-access-form-container').append(`<form action="" method="post" target="" id="form-financiamento-finame"><input type="hidden" name="cpf_cnpj"><input type="hidden" name="qtdeParcelas"><input type="hidden" name="diaVencParcelas"></form>`);
    $("#form-financiamento-finame input[name='cpf_cnpj']").val(values["vehicleFinancingAndLeasing-input-cpf-and-cnpj"].replace(/[^0-9A-Za-z]/g, ''));
    $("#form-financiamento-finame input[name='qtdeParcelas']").val(values['vehicleFinancingAndLeasing-input-numberOfInstallments']);
    $("#form-financiamento-finame input[name='diaVencParcelas']").val(values['vehicleFinancingAndLeasing-input-dueDate']);
    moreAccess.appendToForm('#form-financiamento-finame', 'selCpfCnpj', '');
    moreAccess.appendToForm('#form-financiamento-finame', 'selOpcao', 'Finame');
    moreAccess.appendToForm('#form-financiamento-finame', 'rdPessoa', values["vehicleFinancingAndLeasing-input-cpf-and-cnpj"].replace(/[^0-9A-Za-z]/g, '').length <= 11 ? 'F' : 'J');
    moreAccess.submitGeneric('#form-financiamento-finame', 'https://www.itaucred.com.br/itaucred/finame_id_positiva_010.jsp', '_blank', false);
    $("#form-financiamento-finame").remove();
  },

  vehicleFinancingAndLeasingUnibancoSubmit: (values)=> {
    $('#more-access-form-container').append(`<form action="" method="post" target="" id="form-financiamento-unibanco"><input type="hidden" name="cpf_cnpj"><input type="hidden" name="placa"></form>`);
    $("#form-financiamento-unibanco input[name='cpf_cnpj']").val(values["vehicleFinancingAndLeasing-input-cpf-and-cnpj"].replace(/[^0-9A-Za-z]/g, ''));
    $("#form-financiamento-unibanco input[name='placa']").val(values["vehicleFinancingAndLeasing-input-plate"]);
    moreAccess.appendToForm('#form-financiamento-unibanco', 'selCpfCnpj', '');
    moreAccess.appendToForm('#form-financiamento-unibanco', 'selOpcao', 'Contratos Unibanco');
    moreAccess.appendToForm('#form-financiamento-unibanco', 'rdPessoa', values["vehicleFinancingAndLeasing-input-cpf-and-cnpj"].replace(/[^0-9A-Za-z]/g, '').length <= 11 ? 'F' : 'J');
    moreAccess.submitGeneric('#form-financiamento-unibanco','https://www.itaucred.com.br/itaucred/posvenda_id_positiva_010maisacessos.jsp', 'finanNivel2', true);
    $("#form-financiamento-unibanco").remove();
  },

  vehicleFinancingAndLeasingCredlineSubmit: (values)=> {
    $('#more-access-form-container').append(`<form action="" method="post" target="" id="form-financiamento-credline"><input type="hidden" name="EBUSINESSID"><input type="hidden" name="PASSWORD"></form>`);
    $("#form-financiamento-credline input[name='EBUSINESSID']").val(values["vehicleFinancingAndLeasing-input-credline-user"]);
    $("#form-financiamento-credline input[name='PASSWORD']").val(values["vehicleFinancingAndLeasing-input-credline-pass"]);
    moreAccess.appendToForm('#form-financiamento-credline', 'selOpcao', 'Credline');
    moreAccess.appendToForm('#form-financiamento-credline','nomeSessaoAplicacao','');	
		moreAccess.appendToForm('#form-financiamento-credline','nomeArquivoAplicacao','');	
    moreAccess.appendToForm('#form-financiamento-credline','mapeamento','loginSite.do');
    moreAccess.appendToForm('#form-financiamento-credline','TRANSACAO','GOAI');	
    moreAccess.appendToForm('#form-financiamento-credline','FILLER','');
    moreAccess.appendToForm('#form-financiamento-credline','PASSO','6');	
    moreAccess.appendToForm('#form-financiamento-credline','CDSITE','CREDLINE');
    moreAccess.appendToForm('#form-financiamento-credline','VERSAO','');
    moreAccess.appendToForm('#form-financiamento-credline','IDIOMA','');
    moreAccess.appendToForm('#form-financiamento-credline','IP','');
    moreAccess.appendToForm('#form-financiamento-credline','SO','');
    moreAccess.appendToForm('#form-financiamento-credline','CDSERVID','');
    moreAccess.appendToForm('#form-financiamento-credline','CANAL','IC');
    moreAccess.appendToForm('#form-financiamento-credline','selcanal','IC');
    moreAccess.submitGeneric('#form-financiamento-credline','https://www.itaucred.com.br/icredline/action.screen', 'icl', false);
    // $("#form-financiamento-credline").remove();
  },

  vehicleFinancingAndLeasingItaucredSubmit: (values)=> {
    $('#more-access-form-container').append(`<form action="" method="post" target="" id="form-financiamento-itaucred"><input type="hidden" name="usuario"><input type="hidden" name="senha"></form>`);
    $("#form-financiamento-itaucred input[name='usuario']").val(values['vehicleFinancingAndLeasing-input-itaucred-user']);
    $("#form-financiamento-itaucred input[name='senha']").val(values['vehicleFinancingAndLeasing-input-itaucred-pass']);
    moreAccess.appendToForm('#form-financiamento-itaucred', 'cli', navigator.appName);
    moreAccess.appendToForm('#form-financiamento-itaucred', 'res', `${screen.width}X${screen.height}`);
    moreAccess.appendToForm('#form-financiamento-itaucred', 'txtUsuario','');
		moreAccess.appendToForm('#form-financiamento-itaucred', 'txtSenha','');
    moreAccess.submitGeneric('#form-financiamento-itaucred', 'https://www.itaucred.com.br/cobranca/logon', 'icl', false);
    $("#form-financiamento-itaucred").remove();
  },

  propertySecuredCreditSubmit: ()=> {
    let values = specFormer.getFormValues("#propertySecuredCredit-form");

    $('#more-access-form-container').append(`<form action="https://ww3.itau.com.br/imobline/novolayout/maisAcesso/maisacesso.aspx" method="post" target="_blank" id="form-garantia-imovel"><input type="hidden" name="tipoAcesso" value="contrato"><input type="hidden" name="CPFContrato" value="CPF"><input type="hidden" name="Senha" value="Senha"></form>`);
    $("#form-garantia-imovel input[name='CPFContrato']").val(values['propertySecuredCredit-input-cpf'].replace(/[^0-9A-Za-z]/g, ''));
    $("#form-garantia-imovel input[name='Senha']").val(values['propertySecuredCredit-input-pass']);
    $("#form-garantia-imovel").submit();
    $("#form-garantia-imovel").remove();
  },

  propertySecuredForgotPassword: ()=> {
    $('#propertySecuredCredit-forgot-pass').click( ()=> {
      window.open("http://ww3.itau.com.br/imobline/novolayout/maisAcesso/maisacesso.aspx?tipoAcesso=novoCadastro&tit=2");
    });
  },

  socialSecurityNonAccontantSubmit: (values)=> {
    var cpfSubstring = values["socialSecurity-input-cpf"];
    cpfSubstring = cpfSubstring.replace(/[^0-9A-Za-z]/g, '');
    $('#more-access-form-container').append(`<form action="https://bankline.itau.com.br/GRIPNET/bklcom.dll" method="post" target="_blank" id="form-previdencia-nao-correntista"><input type="hidden" name="id" value="U2Z6"><input type="hidden" name="op" value="7C1F3A5F00F3FB5655FD70B429763300903A62313690A2E3"><input type="hidden" name="ag" value=""><input type="hidden" name="cc" value=""><input type="hidden" name="dc" value=""><input type="hidden" name="tu" value="H"><input type="hidden" name="cpf" value=""><input type="hidden" name="daccpf" value=""><input type="hidden" name="rg" value=""><input type="hidden" name="Trn3" value="W015"><input type="hidden" name="acessocpf" value=""><input type="hidden" name="novoacessocpf" value=""><input type="hidden" name="confacessocpf" value=""><input type="hidden" name="OKcpf" value="Processar"></form>`);
    $("#form-previdencia-nao-correntista input[name='ag']").val(cpfSubstring.substring(0, 4));
    $("#form-previdencia-nao-correntista input[name='cc']").val(cpfSubstring.substring(4, 9));
    $("#form-previdencia-nao-correntista input[name='dc']").val(cpfSubstring.substring(0, 1));
    $("#form-previdencia-nao-correntista input[name='cpf']").val(cpfSubstring.substring(0, 9));
    $("#form-previdencia-nao-correntista input[name='daccpf']").val(cpfSubstring.substring(9, 11));
    $("#form-previdencia-nao-correntista input[name='rg']").val(values["socialSecurity-input-rg"].replace(/[^0-9A-Za-z]/g, ''));
    $("#form-previdencia-nao-correntista input[name='acessocpf']").val(values["socialSecurity-input-pass"]);
    $("#form-previdencia-nao-correntista").submit();
    $("#form-previdencia-nao-correntista").remove();

  },

  socialSecurityOperatorSubmit: (values)=> {
    var cpfSubstring = values["socialSecurity-input-cpf"];
    cpfSubstring = cpfSubstring.replace(/[^0-9A-Za-z]/g, '');
    $('#more-access-form-container').append(`<form action="https://ww28.itau.com.br/prevweb/net/login.aspx" method="post" target="_blank" id="form-previdencia-operador"><input type="hidden" name="id" value="U2Z6"><input type="hidden" name="op" value="7C1F3A5F00F3FB5655FD70B429763300903A62313690A2E3"><input type="hidden" name="ag" value=""><input type="hidden" name="cc" value=""><input type="hidden" name="dc" value=""><input type="hidden" name="tu" value="H"><input type="hidden" name="Trn3" value="W015"><input type="hidden" name="cpf" value=""><input type="hidden" name="daccpf" value=""><input type="hidden" name="rg" value=""><input type="hidden" name="acessocpf" value=""><input type="hidden" name="novoacessocpf" value=""><input type="hidden" name="confacessocpf" value=""></form>`);
    $("#form-previdencia-operador input[name='ag']").val(cpfSubstring.substring(0, 4));
    $("#form-previdencia-operador input[name='cc']").val(cpfSubstring.substring(4, 9));
    $("#form-previdencia-operador input[name='dc']").val(cpfSubstring.substring(0, 1));
    $("#form-previdencia-operador input[name='cpf']").val(cpfSubstring.substring(0, 9));
    $("#form-previdencia-operador input[name='daccpf']").val(cpfSubstring.substring(9, 11));
    $("#form-previdencia-operador input[name='rg']").val(values["socialSecurity-input-rg"].replace(/[^0-9A-Za-z]/g, ''));
    $("#form-previdencia-operador input[name='acessocpf']").val(values["socialSecurity-input-pass"]);
    $("#form-previdencia-operador").submit();
    $("#form-previdencia-operador").remove();
  },

  trocaSenhaOpRh: (values)=> {
    var prevOpRhCpf = values['socialSecurity-input-cpf'].replace(/[.]/g, "").replace("-", "");
		var prevOpRhRg = values['socialSecurity-input-rg'].replace(/[.]/g, "").replace("-", "");
		var prevOpRhSenha = values['socialSecurity-input-pass'];
		var prevOpRhNovaSenha = values['socialSecurity-new-pass'];
		var prevOpRhConfirNovaSenha = values['socialSecurity-confirm-new-pass'];

    $('#more-access-form-container').append(`<form name="PrevidenciaTrocaSenhaForm" id="PrevidenciaTrocaSenhaForm" method="post" target="_blank" action="https://bankline.itau.com.br/GRIPNET/bklcom.dll"><input name="id" value="U2Z6" type="hidden"><input name="op" value="000DA914FDEDA5D4E9B15F9E65858214903A62313690A2E3" type="hidden"><input name="ag" value="4705" type="hidden"><input name="cc" value="34748" type="hidden"><input name="dc" value="4" type="hidden"><input name="tu" value="H" type="hidden"><input name="Trn1" value="W023" type="hidden"><input name="cpf" value="470534748" type="hidden"><input name="daccpf" value="01" type="hidden"><input name="rg" value="391126908" type="hidden"><input name="acessocpf" value="1234ab" type="hidden"><input name="novoacessocpf" value="1234" type="hidden"><input name="confacessocpf" value="1234" type="hidden"></form>`);

    $('#PrevidenciaTrocaSenhaForm').removeAttr("action");
    $('#PrevidenciaTrocaSenhaForm').attr({ action: "https://bankline.itau.com.br/GRIPNET/bklcom.dll" });

    $("#PrevidenciaTrocaSenhaForm input[name='cpf']").val(prevOpRhCpf.substring(0, 9));
    $("#PrevidenciaTrocaSenhaForm input[name='daccpf']").val(prevOpRhCpf.substring(9, 11));
    $("#PrevidenciaTrocaSenhaForm input[name='rg']").val(prevOpRhRg);
    $("#PrevidenciaTrocaSenhaForm input[name='acessocpf']").val(prevOpRhSenha);
    $("#PrevidenciaTrocaSenhaForm input[name='novoacessocpf']").val(prevOpRhNovaSenha);
    $("#PrevidenciaTrocaSenhaForm input[name='confacessocpf']").val(prevOpRhConfirNovaSenha);			
    $("#PrevidenciaTrocaSenhaForm input[name='ag']").val(prevOpRhCpf.substring(0, 4));
    $("#PrevidenciaTrocaSenhaForm input[name='cc']").val(prevOpRhCpf.substring(4, 9));
    $("#PrevidenciaTrocaSenhaForm input[name='dc']").val(prevOpRhCpf.substring(0, 1));
    $("#PrevidenciaTrocaSenhaForm input[name='Trn1']").val("W023");
    $("#PrevidenciaTrocaSenhaForm input[name='op']").val("000DA914FDEDA5D4E9B15F9E65858214903A62313690A2E3");
    
    $("#PrevidenciaTrocaSenhaForm").submit();
    $("#PrevidenciaTrocaSenhaForm").remove();
  },

  insuranceSecured: ()=> {
    window.open("https://www.itau.com.br/portal-segurado/", "_blank");
  },

  insuranceRealtor: ()=> {
    window.open("https://mais.itauseguros.com.br/operacional/appmanager/portais/login?_nfls=false", "_blank");
  },

  insuranceStipulating: ()=> {
    window.open("https://mais.itauseguros.com.br/operacional/appmanager/portais/login?_nfls=false", "_blank");
  },

  itauSolutionsOperatorCodeSubmit: (values)=> {
    var codeUser = values['itauSolutions-input-operator-code'];
    $('#more-access-form-container').append(`<form target="_blank" action="https://banklineplus.itau.com.br/GRIPNET/bklcom.dll" method="post" id="form-solution-operador">
                                              <input type="hidden" name="id" value="U2TJ5000005">
                                              <input type="hidden" name="op" value="138EA60B4AFC7B7D2097ABE53F049FC7FB12A73930A19E799F0D35E79591B570">
                                              <input type="hidden" name="operador" value="${codeUser}">
                                              <input type="hidden" name="Produto" value="J">
                                              <input type="hidden" name="ControleSessao" value="N">
                                              <input type="hidden" name="Sessao" value="">
                                              <input type="hidden" name="Reso">
                                              <input type="hidden" name="Engine" value="3">
                                              <input type="hidden" name="Tira" value="5000005">
                                              <input type="hidden" name="CodConvite">
                                              </form>`);
    // $("#form-solution-operador input[name='operador']").val(values['itauSolutions-input-operator-code']);
    $("#form-solution-operador").submit();
    $("#form-solution-operador").remove();
  },

  itauSolutionsOperatorCodeForgotPassword: ()=> {  
    $('#more-access-form-container').append(`<form target="_blank" action="https://bankline.itau.com.br/GRIPNET/bklcom.dll" method="post" id="solution-cod-esqueci-senha">
                                              <input type="hidden" name="id" value="U2YJ">
                                              <input type="hidden" name="op" value="A480DF036B3FC646B93E5DD1EEC75C07685F8546C8A8C0CB5E9F392490B91D3E37AB8319400D953E">
                                              <input type="hidden" name="operador" value="999999999">
                                              <input type="hidden" name="Produto" value="J">
                                              <input type="hidden" name="ControleSessao" value="N">
                                              <input type="hidden" name="Sessao" value="">
                                              <input type="hidden" name="Reso" value="">
                                              <input type="hidden" name="Engine" value="">
                                              <input type="hidden" name="Tira" value="5000005">
                                              <input type="hidden" name="CodConvite" value="">
                                              <input type="submit" value="acessar" class="visibility-hidden">
                                            </form>`);

    $("#solution-cod-esqueci-senha").submit();
    $("#solution-cod-esqueci-senha").remove();    
  },

  itauSolutionsCpfSubmit: (values)=> {
    var cpfNoMask = values['itauSolutions-input-cpf'].replace(/[^0-9A-Za-z]/g, '');
    $('#more-access-form-container').append(`<form target="_blank" action="https://banklineplus.itau.com.br/GRIPNET/bklcom.dll" method="post" id="form-solution-cpf">
                                              <input type="hidden" name="id" value="U2TJ5000005">
                                              <input type="hidden" name="op" value="EB6AC0D6B0F864F0F879A6FF5983FA624C5E194B87792AD7DDCF0FF9B9BF17CD1C9F79B6B8685B34948CDED922A2A052">
                                              <input type="hidden" name="operador" value="${cpfNoMask.substring(0,9)}">
                                              <input type="hidden" name="dac" value="${cpfNoMask.substring(9,12)}">
                                              <input type="hidden" name="Produto" value="J">
                                              <input type="hidden" name="Campo3" value="N">
                                              <input type="hidden" name="Reso" value="">
                                              <input type="hidden" name="Engine" value="">
                                              <input type="hidden" name="IdMenuSen" value="">
                                              <input type="hidden" name="Parametros" value="">
                                              <input type="hidden" name="M30HC" value="V0ILTVTR00000">
                                              </form>`);
    $("#form-solution-cpf").submit();
    $("#form-solution-cpf").remove();
    console.log('@@__submit CPF', finalValue)
    console.log('@@__Cod dac', codDac)
  },

  itauSolutionsInviteCode: ()=> {
    $('#more-access-form-container').append(`<form target="_blank" action="https://bankline.itau.com.br/GRIPNET/bklcom.dll" method="post" id="solution-cod-convite">
                                              <input type="hidden" name="id" value="U2YJ">
                                              <input type="hidden" name="op" value="EE483C49E57BBD47B93E5DD1EEC75C07C69D6A0901CB516801A39F596DCF2EB7903A62313690A2E3">
                                              <input type="hidden" name="operador" value="999999999">
                                              <input type="hidden" name="Produto" value="J">
                                              <input type="hidden" name="ControleSessao" value="N">
                                              <input type="hidden" name="Sessao" value="">
                                              <input type="hidden" name="Reso" value="">
                                              <input type="hidden" name="Engine" value="">
                                              <input type="hidden" name="Tira" value="5000005">
                                              <input type="hidden" name="CodConvite" value="">
                                              </form>`);
    $("#solution-cod-convite").submit();
    $("#solution-cod-convite").remove();
  },

  itauSolutionsControlCode: (values)=> {
    $('#more-access-form-container').append(`<form target="_blank" action="https://bankline.itau.com.br/GRIPNET/bklcom.dll" method="post" id="solution-cod-controle">
                                              <input type="hidden" name="id" value="U2YJ"><input type="hidden" name="op" value="A3C54FC03014724D7B168A353F84B639E68A4D785AC0611F">
                                              <input type="hidden" name="codigoacesso" value="999999999">
                                              <input type="hidden" name="NumControle" value="${values['itauSolutions-input-control-code']}">
                                              </form>`);
    $("#solution-cod-controle").submit();
    $("#solution-cod-controle").remove();
  },

  //TODO
  closeModalAfterSubmit: ()=> {
    $(`#${ moreAccess.currentModal }-modal-container`).find('.more-access-input__container input').val('');
    $(`#${ moreAccess.currentModal }-modal-container`).find('.more-access__input--style').removeClass('select-input-error');
    $(`#${ moreAccess.currentModal }-modal-container`).find('.more-access-input-error__text--style').hide();
    $(`#${ moreAccess.currentModal }-modal-container`).find('.more-access-input__label--style').removeClass('error-color');
    $(`#${ moreAccess.currentModal }-modal-container`).find('.more-access-counter--style').removeClass('error-color');
    $(`#${ moreAccess.currentModal }-modal-container`).find('.more-access-counter-value').text('0');
    $(`#${ moreAccess.currentModal }-modal-container`).hide();
  },
}

$(document).ready(()=>{
     if($('.more-access').length > 0){
      console.log("More Access Init");
      moreAccess.init();
    } 
  })
const moreAccessDuoTextLink = {
    //Global Variables
    screenWidth: "",
    items: "",

    init: ()=> {
        moreAccessDuoTextLink.getScreenWidth();
        moreAccessDuoTextLink.addModalNameToDuoText();
        moreAccessDuoTextLink.createAccordion(moreAccessDuoTextLink.screenWidth);
        moreAccessDuoTextLink.createRow(moreAccessDuoTextLink.screenWidth);
    },

    getScreenWidth: ()=> {
        moreAccessDuoTextLink.screenWidth = screen.width;
    },

    createAccordion: ( screenWidth )=> {
        if ( screenWidth <= 575 ) {
            jQuery('.more-access__duo-text-link__header__title').attr('aria-hidden', true);
            jQuery('.more-access__duo-text-link__header__title.--accordion-button').removeAttr('aria-hidden');
            jQuery('.more-access__duo-text-link__content').attr('aria-hidden', true);

            let accordionTriggerButton = ".more-access__duo-text-link__header__title";
            let accordionContent = ".more-access__duo-text-link__content";
            let accordionContentButton = ".more-access__duo-text-link__content__button";
            
            jQuery(document).on('keypress', accordionTriggerButton, (event) => {
                event.preventDefault();
            });

            jQuery( accordionTriggerButton ).click((elem)=>{
                jQuery(elem.target).closest(".more-access__duo-text-link").toggleClass("--active");
                jQuery(elem.target).attr("aria-expanded", jQuery(elem.target).attr("aria-expanded") == "true" ? "false" : "true");

                jQuery(elem.target).closest(".more-access__duo-text-link").children( accordionContent ).toggleClass("--expanded");
                
                if(jQuery(elem.target).closest(".more-access__duo-text-link").children( accordionContent ).hasClass("--expanded")){
                    jQuery(elem.target).closest(".more-access__duo-text-link").find( accordionContentButton ).attr("tabindex", "0");
                    jQuery(elem.target).closest(".more-access__duo-text-link").children( accordionContent ).removeAttr("aria-hidden");
                }else{
                    jQuery(elem.target).closest(".more-access__duo-text-link").find( accordionContentButton ).attr("tabindex", "-1");
                    jQuery(elem.target).closest(".more-access__duo-text-link").children( accordionContent ).attr("aria-hidden", true);
                }
            });
        }
    },

    createRow: ( screenWidth )=> {
        if ( screenWidth > 575 ) {
            // jQuery(".more-access__duo-text-link__header").attr("tabindex", "-1");
            // jQuery(".more-access__duo-text-link__content").attr("tabindex", "-1");
            jQuery(".more-access__duo-text-link__content__button").attr("tabindex", "0");
        }
    },

    addModalNameToDuoText: ()=> {
        for(var i=0; i < jQuery(".more-access__duo-text-link").length; i++) {
            let idToButton = jQuery(".more-access__duo-text-link").eq(i).closest(".more-access-login").data("modal");
            
            jQuery(".more-access__duo-text-link").eq(i).find( ".more-access__duo-text-link__content__button").attr("id",`more-access-${ idToButton }-modal-button`);
        }
    },
}

jQuery(()=> {
    if ( jQuery(".more-access__duo-text-link").length > 0 ) {
        console.log("More Access Duo Text Link Init");
        moreAccessDuoTextLink.init();
    }
});
"use strict";

window.onload = function () {
  checkTermo();
}

function closeTermo() {

  var divMarcoCivil = document.getElementById("marcoCivil");
  if (divMarcoCivil.parentNode) {
    divMarcoCivil.setAttribute('aria-hidden', 'true');
    divMarcoCivil.setAttribute('aria-live', 'off');
    divMarcoCivil.setAttribute('aria-expanded', 'false');
    divMarcoCivil.parentNode.removeChild(divMarcoCivil);
  }

  calculaHeader();

  $("header > a:eq(0)").focus();
}

function checkTermo() {

  var assinaturaLocal = localStorage.getItem("dataAssinaturaTermo");

  // Data ATUALIZACAO
  var day_atualizacao = 21;
  var month_atualizacao = 08;
  var year_atualizacao = 2019;

  // Data DE HOJE (SISTEMA)
  var today = new Date();
  var day_system = today.getDate();
  var months = ["01", "02", "03", "04", "05", "06", "07", "08", "09", "10", "11", "12"];
  var month_system = months[today.getMonth()];
  var year_system = today.getFullYear();

  // Data ASSINATURA

  var day_assinatura;
  var month_assinatura;
  var year_assinatura;
  var dataAssinaturaAtual = day_system + '/' + month_system + '/' + year_system;

  if (assinaturaLocal == null) {

    var divMarcoCivil = document.getElementById("marcoCivil");
    if (divMarcoCivil.parentNode) {
      divMarcoCivil.setAttribute('aria-hidden', 'false');
      divMarcoCivil.setAttribute('aria-expanded', 'true');
      divMarcoCivil.style.display = "block";
    }
    calculaHeader();
    var btOk = document.getElementById("btOk");

    btOk.onclick = function () {
      localStorage.setItem("dataAssinaturaTermo", dataAssinaturaAtual);
      closeTermo();
    }

    link.onclick = function () {
      localStorage.setItem("dataAssinaturaTermo", dataAssinaturaAtual);
      closeTermo();
    }

  } else {
    day_assinatura = assinaturaLocal.substring(0, 2);
    month_assinatura = assinaturaLocal.substring(3, 5);
    year_assinatura = assinaturaLocal.substring(6);

    if (year_assinatura <= year_atualizacao) {
      if (month_assinatura <= month_atualizacao) {
        if (day_assinatura < day_atualizacao) {
          document.getElementById("marcoCivil").style.display = "block";
          var btOk = document.getElementById("btOk");
          btOk.onclick = function () {
            localStorage.setItem("dataAssinaturaTermo", dataAssinaturaAtual);
          }
          link.onclick = function () {
            localStorage.setItem("dataAssinaturaTermo", dataAssinaturaAtual);
          }
          closeTermo();
        } else {
          document.getElementById("marcoCivil").style.display = "none";
          document.getElementById("marcoCivil").style.height = "0px";
        }
      } else {
        document.getElementById("marcoCivil").style.display = "none";
        document.getElementById("marcoCivil").style.height = "0px";
      }
    } else {
      document.getElementById("marcoCivil").style.display = "none";
      document.getElementById("marcoCivil").style.height = "0px";
    }
  }
}

function calculaHeader() {
  var heigthHeader = $('header').height();
  $('body').css('padding-top', heigthHeader);
  $('.main-banner .banner .image.fixed-image').css('background-position-y', heigthHeader);
}


"use strict";

const magaluCards = {
  error: false,
  continueSubmit: false,

  init: () => {
    magaluCards.inputMask();
    magaluCards.addEventListeners();
    specFormer.init('.magalu-cards__container');
  },

  inputMask: () => {
    jQuery('#magalu-card-number').setMask("9999 9999 9999 9999");
  },

  addEventListeners: () => {
    jQuery('#magalu-card-button').click(() => {
      magaluCards.validateInput('#magalu-card-number');
    });

    jQuery(document).on(`click`, `#magalu-card-number-field-focus`, (ev) => {
      ev.stopPropagation();
      ev.preventDefault();
      jQuery('#magalu-card-number').focus();
    });

    jQuery(document).on(`keypress`, `#magalu-card-number-field-focus`, (ev) => {
      ev.stopPropagation();
      ev.preventDefault();
      jQuery('#magalu-card-number').focus();
    });

    jQuery(document).keyup((ev) => {
      const navbarHeight = $(".magalu-cards-header__navbar").outerHeight() + 30;
    
      if(ev.code === 'Tab' || ev.shiftKey && ev.code === 'Tab') {
        const focusedElem = jQuery(document.activeElement);

        jQuery('html, body').animate({ 
          scrollTop: focusedElem.offset().top - navbarHeight
        }, 500);
      }
    });

    jQuery(document).on(`click`, `.magalu-cards__container__error-container__title__close-button__button`, (ev) => {
      magaluCards.clearErrorMessages();
      magaluCards.focusOnFirstInput();
    });

    jQuery('#magalu-cards-form').submit((ev) => {
      if(jQuery('#magalu-card-number').val().length < 18 && jQuery('#magalu-card-number').hasClass('--error')){
        ev.stopPropagation();
        ev.preventDefault();
        return;
      }

      if (!magaluCards.continueSubmit) {
        ev.stopPropagation();
        ev.preventDefault();
        magaluCards.validateInput('#magalu-card-number');
        return;
      }

      magaluCards.continueSubmit = false;
    });

    magaluCards.fixContentHeightIOS();
  },

  createErrorMessages: (errorComplement) => {
    const bannerIsHidden = jQuery('.magalu-cards__container__content__banner').is(":hidden");

    let target = bannerIsHidden ? '#magalu-cards-mobile-error-container' : '#magalu-cards-desk-error-container';

    let errorMessage = `
    <li class="magalu-cards__container__error-container__error" id="magalu-card-error">
      <p class="magalu-cards__container__error-container__error__text">01.
      <a class="magalu-cards__container__error-container__error__text__link" role="link" aria-describedby="error-message-magalu-cards" tabindex="0" id="magalu-card-number-field-focus">número do cartão:</a>
        <span class="magalu-cards__container__error-container__error__text__complement" id="error-message-magalu-cards">
          ${errorComplement}
        </span>
      </p>
    </li>`;

    let html = `
    <div class="magalu-cards__container__error-container__title">
      <div class="magalu-cards__container__error-container__title__icon icon-itaufonts_exclamacao" aria-hidden="true"></div>
      <p class="magalu-cards__container__error-container__title__text" id="magalu-error-alert" tabindex="-1">Existe 1 erro que precisa ser corrigido:</p>
      <div class="magalu-cards__container__error-container__title__close-button">
        <label for="magalu-cards__container__error-container__title__close-button__button" aria-hidden="true" hidden>Fechar</label>
        <button class="magalu-cards__container__error-container__title__close-button__button" role="button" aria-label="fechar" tabindex="0">
          <div  class="magalu-cards__container__error-container__title__close-button__button__icon icon-itaufonts_fechar"></div>
        </button>
      </div>
    </div>
    <ol>
      ${errorMessage}
    </ol>`;

    jQuery(".magalu-cards__container__content__login").addClass("--withErrorMessage");
    jQuery(target).append(html);
    jQuery(target).removeClass('--hidden');

    jQuery('#magalu-error-alert').focus();
  },

  clearErrorMessages: () => {
    jQuery('#magalu-cards-mobile-error-container, #magalu-cards-desk-error-container').addClass('--hidden');
    jQuery('#magalu-cards-mobile-error-container, #magalu-cards-desk-error-container').empty();
  },

  focusOnFirstInput: () => {
    const firstInput = jQuery('.spec-former__form-input__input')[0];

    firstInput.focus();
  },

  fixContentHeightIOS: () => {
    let vh = window.innerHeight * 0.01;

    document.documentElement.style.setProperty('--vh', `${vh}px`);
  },

  validateInput: (fieldToVerify) => {
    magaluCards.error = false;

    magaluCards.clearErrorMessages();

    let fieldLength = jQuery(fieldToVerify).val().replace(/[^0-9]/g, "").length;

    if (fieldLength == 0) {
      specFormer.showFieldsWithErrors([{
        'id': 'magalu-card-number',
        'message': 'digite o número do seu cartão'
      }]);
      magaluCards.error = true;
      magaluCards.createErrorMessages('digite o número do seu cartão');
      magaluCards.displayErrorOnInput('magalu-card-number');

    } else if (fieldLength < 16) {
      specFormer.showFieldsWithErrors([{
        'id': 'magalu-card-number',
        'message': 'cartão incompleto'
      }]);
      magaluCards.error = true;
      magaluCards.createErrorMessages('cartão incompleto');
      magaluCards.displayErrorOnInput('magalu-card-number');

    } else {
      magaluCards.error = false;
      magaluCards.continueSubmit = true;
      specFormer.clearFieldsWithErrors();
      magaluCards.resetErrorOnInput('magalu-card-number');
      magaluCards.cardSubmit();
    }
  },

  displayErrorOnInput: (element) => {
    $(`#${element}`).attr("aria-describedby", "error-message-magalu-cards");
  },

  resetErrorOnInput: (element) => {
    $(`#${element}`).removeAttr("aria-describedby");
  },

  cardSubmit: () => {
    jQuery("#magalu-hidden-card-number").val(jQuery("#magalu-card-number").val().replace(/[^0-9]/g, ""));
    jQuery('#magalu-cards-form').submit();
  }
};

jQuery(document).ready(() => {
  if ($('.magalu-cards').length > 0) {
    magaluCards.init();
  }
});

"use strict";

document.addEventListener('DOMContentLoaded', function () {
  $('#inputTaxaDeJurosContratual').on('focus', function () {
    $(this).setMask({
      mask: '99,99',
      type: 'reverse',
      defaultValue: '+000',
      textAlign: false
    });
  });
  $('#inputSaldoUtilizado').setMask({
    mask: '99,999.999.999.999',
    type: 'reverse',
    textAlign: false
  });
  $('#inputTaxaDeJurosContratual').on('keyup change', function () {
    validateInterest();
    calculateInterest();
    screenReaderPercent();
  });
  $('#inputDiasUteisUtilizado').on('keyup change', function () {
    calculateInterest();
  });
  $('#inputSaldoUtilizado').on('keyup change', function () {
    calculateInterest();
    screenReaderCurrency('#inputSaldoUtilizado');
  });
  setTimeout(function () {
    $('#body').css({
      "overflow": "visible"
    });
  }, 150);

  function validateInterest() {
    var lisInterest = $('#inputTaxaDeJurosContratual');
    lisInterestVal = lisInterest.val().replace(',', '.');

    if (parseFloat(lisInterestVal) > 8.00) {
      lisInterest.parent().addClass('has-error');
      $('.bank-slip-underwrite').text('taxa máxima de 08,00%');
      $(document).find('.itau-form .has-error .feedback-message').eq(0).focus();
    }

    if (parseFloat(lisInterestVal) <= 8.00) {
      if (lisInterest.parent().hasClass('has-error')) {
        lisInterest.parent().removeClass('has-error');
        $('.bank-slip-underwrite').text('consulte no extrato da sua conta corrente');
      }
    }
  }

  function calculateInterest() {
    var lisInterest2 = parseFloat($('#inputTaxaDeJurosContratual').val().replace(',', '.'));
    var weekDays = parseFloat($('#inputDiasUteisUtilizado').val());
    var usedBalance = $('#inputSaldoUtilizado').val().replace(/\./g, '').replace(',', '.');

    if (lisInterest2 > 8 || lisInterest2 < 0.01 || weekDays < 1 || usedBalance < 1) {
      $('#inputValorDosJuros').val('');
      return;
    }

    var usedBalance = parseFloat(usedBalance);
    var result = weekDays * usedBalance * lisInterest2 / 21;

    if (result > 0) {
      result = parseFloat(result);
      total = result / 100;
      total = total.toFixed(2);
      $('#inputValorDosJuros').val(total).setMask({
        mask: '99,999.999.999.999',
        type: 'reverse',
        textAlign: false
      });
      $('#inputValorDosJuros').parent().addClass('focused');
      screenReaderCurrency('#inputValorDosJuros');
    }

    return result;
  } //+ Carlos R. L. Rodrigues
  //@ http://jsfromhell.com/string/extenso [rev. #3]


  String.prototype.extenso = function (c) {
    var ex = [["zero", "um", "dois", "três", "quatro", "cinco", "seis", "sete", "oito", "nove", "dez", "onze", "doze", "treze", "quatorze", "quinze", "dezesseis", "dezessete", "dezoito", "dezenove"], ["dez", "vinte", "trinta", "quarenta", "cinqüenta", "sessenta", "setenta", "oitenta", "noventa"], ["cem", "cento", "duzentos", "trezentos", "quatrocentos", "quinhentos", "seiscentos", "setecentos", "oitocentos", "novecentos"], ["mil", "milhão", "bilhão", "trilhão", "quadrilhão", "quintilhão", "sextilhão", "setilhão", "octilhão", "nonilhão", "decilhão", "undecilhão", "dodecilhão", "tredecilhão", "quatrodecilhão", "quindecilhão", "sedecilhão", "septendecilhão", "octencilhão", "nonencilhão"]];
    var a,
        n,
        v,
        i,
        n = this.replace(c ? /[^,\d]/g : /\D/g, "").split(","),
        e = " e ",
        $ = "real",
        d = "centavo",
        sl;

    for (var f = n.length - 1, l, j = -1, r = [], s = [], t = ""; ++j <= f; s = []) {
      j && (n[j] = (("." + n[j]) * 1).toFixed(2).slice(2));
      if (!(a = (v = n[j]).slice((l = v.length) % 3).match(/\d{3}/g), v = l % 3 ? [v.slice(0, l % 3)] : [], v = a ? v.concat(a) : v).length) continue;

      for (a = -1, l = v.length; ++a < l; t = "") {
        if (!(i = v[a] * 1)) continue;
        i % 100 < 20 && (t += ex[0][i % 100]) || i % 100 + 1 && (t += ex[1][(i % 100 / 10 >> 0) - 1] + (i % 10 ? e + ex[0][i % 10] : ""));
        s.push((i < 100 ? t : !(i % 100) ? ex[2][i == 100 ? 0 : i / 100 >> 0] : ex[2][i / 100 >> 0] + e + t) + ((t = l - a - 2) > -1 ? " " + (i > 1 && t > 0 ? ex[3][t].replace("ão", "ões") : ex[3][t]) : ""));
      }

      a = (sl = s.length) > 1 ? (a = s.pop(), s.join(" ") + e + a) : s.join("") || (!j && n[j + 1] * 1 > 0 || r.length ? "" : ex[0][0]);
      a && r.push(a + (c ? " " + (v.join("") * 1 > 1 ? j ? d + "s" : (/0{6,}$/.test(n[0]) ? "de " : "") + $.replace("l", "is") : j ? d : $) : ""));
    }

    return r.join(e);
  };

  function screenReaderCurrency(id) {
    var typingMoney = $(id).val();
    $(id).attr("title", typingMoney.extenso(true));
  }

  function screenReaderPercent() {
    var typingPercentage = $('#inputTaxaDeJurosContratual').val();
    $('#inputTaxaDeJurosContratual').attr("aria-label", 'taxa de juros contratual(a.m) ' + typingPercentage + ' % ');
  }
});
(function ($, $document) {
    'use strict';

    function updateImageWidth() {
        $('.image-with-text-container').each(function() {
            
            var currentElement = $(this);
            var currentImage = currentElement.find('.image-with-text__image');
            var opacity = currentElement.find('.image-with-text__image .video-opacity');
            var imageWidth = currentImage.outerWidth();
            var containerOffset = currentElement.find('.container').offset().left;
            var currentRootImg = currentElement.find('.image-with-text__image img');
            
            if($(window).width() < 768) {
                currentRootImg.css('width', '100%');
                opacity.css('width', currentRootImg.width()).css('height', currentRootImg.height());

            } else {
                currentRootImg.css('width', imageWidth + containerOffset);
                opacity.css('width', imageWidth + containerOffset).css('height', currentRootImg.height());
                if(currentElement.find('.image-with-text__image--right').length == 0) {
                    opacity.css('width', imageWidth + containerOffset).css('height', currentRootImg.height()).css('right', '0px');
                }
            }
        });
    }

    $(window).resize(function () {
        updateImageWidth();
    });

    updateImageWidth();

})($, $(document));


(function ($, $document) {
    'use strict';

    function updateImageWidth() {
        $('.image-with-text-container').each(function() {
            
            var currentElement = $(this);
            var currentImage = currentElement.find('.image-with-text__image');
            var opacity = currentElement.find('.image-with-text__image .video-opacity');
            var imageWidth = currentImage.outerWidth();
            var containerOffset = currentElement.find('.container').offset().left;
            var currentRootImg = currentElement.find('.image-with-text__image img');
            
            if($(window).width() < 768) {
                currentRootImg.css('width', '100%');
                opacity.css('width', currentRootImg.width()).css('height', currentRootImg.height());

            } else {
                currentRootImg.css('width', imageWidth + containerOffset);
                opacity.css('width', imageWidth + containerOffset).css('height', currentRootImg.height());
                if(currentElement.find('.image-with-text__image--right').length == 0) {
                    opacity.css('width', imageWidth + containerOffset).css('height', currentRootImg.height()).css('right', '0px');
                }
            }
        });
    }

    $(window).resize(function () {
        updateImageWidth();
    });

    updateImageWidth();

})($, $(document));


"use strict";

//function anchor links:
$('.item-footer a').not('[href="#"]').not('[href="#0"]').click(function (event) {
  if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
    var target = $(this.hash);
    var headerHeightpage = $('header').outerHeight();
    target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');

    if (target.length) {
      $('html, body').stop().animate({
        scrollTop: target.offset().top - headerHeightpage
      }, 1000);
    }
  }
}); //resize image left:

function resizeLeft() {
  if ($(window).width() > 991) {
    var elContainer = $('.static-image-left-with-cards-and-icons .container');
    var marginContainer = elContainer.offset().left;
    $('.static-image-left').css('left', -marginContainer);
  }
}

$(document).ready(function () {
  resizeLeft();
});
"use strict";

(function ($, $document) {
  'use strict';

  function updateImageWidth() {
    if (window.innerWidth <= 992) return;
    $('.image-icon-v2').each(function () {
      var currentElement = $(this);
      var currentImage = currentElement.find('.image-icon-v2__image');
      var imageWidth = currentImage.width();
      var isFill = currentImage.hasClass('image-icon__image--fill');
      var containerOffset = currentElement.find('.col.d-flex').offset().left;

      if (isFill) {
        $('.image-icon-v2__image.image-icon__image--fill img').css('height', '100%');
      }

      if (!isFill) return;
      currentElement.find('.image-icon-v2__image img').css('width', imageWidth + containerOffset);
    });
  }

  $(window).resize(function () {
    updateImageWidth();
  });
  updateImageWidth();
})($, $(document));

$(document).ready(function () {
  function enableImageAnimation() {
    var scrollTop = $(document).scrollTop();
    var element = $('.image-icon-v2__inner');
    element.each(function (i, elmnt) {
      if (scrollTop >= $(elmnt).offset().top - $('header').outerHeight()) {
        $(elmnt).find('.scrollImage').addClass('animation');
      }
    });
  }

  window.onscroll = function (elmnt) {
    enableImageAnimation();
  };

  enableImageAnimation();
});
"use strict";

document.addEventListener("DOMContentLoaded", function () {
  $("section[data-component='image-icon-v2'] .itau-button-container a.itau-button-container__a").click(function () {
    var linkTitle = $("section[data-component='image-icon-v2']").find(".image-icon-v2__content h2.title-d-container__title").text();
    var linkText = $(this).text();
    var itemClicado = 'BTN' + ':ImageIconV2' + ':' + linkTitle + ':' + linkText;
    itemClicado = PascalCase(itemClicado);
    setAnalyticsData(itemClicado);
  });
  $("section[data-component='image-icon-v2'] li.image-icon-v2__list-item a").click(function () {
    var linkTitle = $(this).find("p.image-icon-title").text();
    var itemClicado = 'LNK' + ':ImageIconV2' + ':' + linkTitle;
    itemClicado = PascalCase(itemClicado);
    setAnalyticsData(itemClicado);
  });
});
"use strict";

const iframeAlert = {
  init: () => {
    iframeAlert.addEventListeners();
  },

  addEventListeners: () => {
    jQuery(document).ready(() => {
      const messageContainer = jQuery('.iframe-alert__message');
      const mobileMessage = messageContainer.data('message-mobile');
      const deskMessage = messageContainer.data('message-desk');
      const screenWidth = jQuery(window).outerWidth();

      if (screenWidth >= 1440)
        return
      else if (screenWidth >= 992) {
        messageContainer.append(`<p class="iframe-alert__text" role="alert">${deskMessage}</p>`);
      }
      else {
        messageContainer.append(`<p class="iframe-alert__text" role="alert">${mobileMessage}</p>`);
      }
    });

    jQuery('.iframe-alert__btn-close').on('click', () => {
      jQuery('.iframe-alert').addClass('iframe-alert--hidden');
    });
  }
};

jQuery(() => {
  if (jQuery('.iframe-alert').length > 0) {
    console.log('Iframe Alert Init');
    iframeAlert.init();
  }
});



"use strict";

$(document).ready(function () {
  checkLoginModal();
});

function checkLoginModal() {
  $('.itau-button-container').each(function () {
    var spanValue = $(this).find('span').attr('value');
    var aElement = $(this).find('a');

    if (aElement.attr('target') == 'login' && $(window).width() >= 992) {
      aElement.attr('data-toggle', 'modal').attr('data-target', spanValue);
    }
  });
  $('.itau-button-container a').on('click keydown', function (e) {
    var clickedButton = $(this);

    if (e.type == "click" || e.type == "keydown" && (e.keyCode == 13 || e.keyCode == 32)) {
      // check if url has parameters, link wasn't already fixed and contains a valid link        
      if (!clickedButton.hasClass('is-anchor') && window.location.href.includes("?") && $(this).attr('data-fixed') != "true" && $(this).attr('href')) {
        var currentLink = $(this).attr('href');
        var newLink = window.location.href.split("?")[1].replace("?", "");
        $(this).attr('data-fixed', 'true'); // check if button link parameter exists and it's not empty

        if (currentLink.includes("?") && typeof currentLink.split("?")[1] != "undefined" && currentLink.split("?")[1] != "") {
          $(this).attr('href', currentLink + "&" + newLink);
        } else {
          $(this).attr('href', currentLink.replace("?", "") + "?" + newLink);
        }
      }
    }
  });
}
"use strict";

var cnpjValidado = false;
var cpfValidado = false;
$(window).on('load', function () {
  localStorage.removeItem("abreConta_cnpj");
  $("#btn-form-openaccount-plan").attr("aria-label", "abrir minha conta");
  $("#btn-form-openaccount-plan").attr("tabindex", "-1");
  $("#btn-form-openaccount-plan").attr("aria-disabled", "true");
});

function validationBorderBottom() {
  $(".formulario_open_account_pj_input").on('change', function () {
    var ThisValue = $(this).val();

    if (ThisValue == '') {
      $(this).addClass('border-invalid').removeClass('border-valid');
    } else {
      $(this).addClass('border-valid').removeClass('border-invalid');
    }
  });
}

function validateAccountCNPJ() {
  this.cnpjValidado = false;
  var cnpjValue = $('#form_account_cnpj').val().replace(/[.-/]/g, '');
  cnpjValidado = TestaCNPJ(cnpjValue);

  if (!cnpjValidado) {
    localStorage.removeItem("abreConta_cnpj");
    $("#form_account_cnpj").tooltip('enable');
    $("#form_account_cnpj").tooltip('show');
    $("#form_account_cnpj").attr("data-original-title", "Digite um CNPJ válido");
    $("#btn-form-openaccount-plan").attr("aria-disabled", "true");
    $("#btn-form-openaccount-plan").addClass("btnDisable");
    return false;
  } else {
    localStorage.setItem("abreConta_cnpj", cnpjValue);
    $("#form_account_cnpj").tooltip('disable');
    $("#form_account_cnpj").tooltip('hide');
    $("#form_account_cnpj").removeAttr("title");
  }
}

function validateAccountCPF() {
  this.cpfValidado = false;
  var cpfValue = $('#form_account_cpf').val().replace(/[.-]/g, '');
  cpfValidado = TestaCPF(cpfValue);

  if (!cpfValidado) {
    $("#form_account_cpf").tooltip('enable');
    $("#form_account_cpf").tooltip('show');
    $("#form_account_cpf").attr("data-original-title", "Digite um CPF válido");
    $("#btn-form-openaccount-plan").attr("aria-disabled", "true");
    $("#btn-form-openaccount-plan").addClass("btnDisable");
    return false;
  } else {
    $("#form_account_cpf").removeAttr("title");
    $("#form_account_cpf").tooltip('hide');
    $("#form_account_cpf").tooltip('disable');
  }
}

function habilitaBotao() {
  if (cnpjValidado && cpfValidado && checkVerify() == true) {
    $("#btn-form-openaccount-plan").attr("aria-label", "abrir minha conta");
    $("#btn-form-openaccount-plan").removeClass("btnDisable");
    $("#btn-form-openaccount-plan").attr("aria-disabled", "false");
    $("#btn-form-openaccount-plan").attr("tabindex", "0");
  } else {
    $("#btn-form-openaccount-plan").attr("aria-label", "abrir minha conta");
    $("#btn-form-openaccount-plan").addClass("btnDisable");
    $("#btn-form-openaccount-plan").attr("aria-disabled", "true");
  }
}

function checkVerify() {
  if ($('#choice1').is(':checked') || $('#choice2').is(':checked')) {
    return true;
  } else {
    return false;
  }
}

function TestaCPF(cpfValue) {
  var value = cpfValue;
  value = value.replace('.', '');
  value = value.replace('.', '');
  var cpf = value.replace('-', '');

  while (cpf.length < 11) {
    cpf = "0" + cpf;
  }

  var expReg = /^0+$|^1+$|^2+$|^3+$|^4+$|^5+$|^6+$|^7+$|^8+$|^9+$/;
  var a = [];
  var b = new Number();
  var c = 11;
  var x = 0;

  for (var i = 0; i < 11; i++) {
    a[i] = cpf.charAt(i);
    if (i < 9) b += a[i] * --c;
  }

  if ((x = b % 11) < 2) {
    a[9] = 0;
  } else {
    a[9] = 11 - x;
  }

  b = 0;
  c = 11;

  for (var y = 0; y < 10; y++) {
    b += a[y] * c--;
  }

  if ((x = b % 11) < 2) {
    a[10] = 0;
  } else {
    a[10] = 11 - x;
  }

  if (cpf.charAt(9) != a[9] || cpf.charAt(10) != a[10] || cpf.match(expReg)) return false;
  return true;
}

function TestaCNPJ(cnpjValue) {
  cnpjValue = cnpjValue.replace(/[^\d]+/g, '');
  if (cnpjValue.length != 14) return false;
  if (cnpjValue == "00000000000000" || cnpjValue == "11111111111111" || cnpjValue == "22222222222222" || cnpjValue == "33333333333333" || cnpjValue == "44444444444444" || cnpjValue == "55555555555555" || cnpjValue == "66666666666666" || cnpjValue == "77777777777777" || cnpjValue == "88888888888888" || cnpjValue == "99999999999999") return false;
  tamanho = cnpjValue.length - 2;
  numeros = cnpjValue.substring(0, tamanho);
  digitos = cnpjValue.substring(tamanho);
  soma = 0;
  pos = tamanho - 7;

  for (i = tamanho; i >= 1; i--) {
    soma += numeros.charAt(tamanho - i) * pos--;
    if (pos < 2) pos = 9;
  }

  resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;
  if (resultado != digitos.charAt(0)) return false;
  tamanho = tamanho + 1;
  numeros = cnpjValue.substring(0, tamanho);
  soma = 0;
  pos = tamanho - 7;

  for (i = tamanho; i >= 1; i--) {
    soma += numeros.charAt(tamanho - i) * pos--;
    if (pos < 2) pos = 9;
  }

  resultado = soma % 11 < 2 ? 0 : 11 - soma % 11;
  if (resultado != digitos.charAt(1)) return false;
  return true;
}

$(document).ready(function () {
  $('#form_account_cpf').setMask({
    mask: '999.999.999-99',
    autoTab: false
  });
  $('#form_account_cnpj').setMask({
    mask: '99.999.999/9999-99',
    autoTab: false
  });
  $('#form_account_cnpj').on("focusout change", function () {
    if ($('#form_account_cnpj').val() == "") {
      $("#form_account_cnpj").tooltip('hide');
      $("#form_account_cnpj").tooltip('disable');
    } else {
      validateAccountCNPJ();
      habilitaBotao();
    }
  });
  $('#form_account_cpf').on("focusout change", function () {
    if ($('#form_account_cpf').val() == "") {
      $("#form_account_cpf").tooltip('hide');
      $("#form_account_cpf").tooltip('disable');
    } else {
      validateAccountCPF();
      habilitaBotao();
    }
  });
  $("#form_account_cpf").focus(function () {
    if ($('#form_account_cpf').val() == "") {
      $("#btn-form-openaccount-plan").attr("aria-disabled", "true");
      $("#btn-form-openaccount-plan").addClass("btnDisable");
      $("#form_account_cpf").tooltip('disable');
      $("#form_account_cpf").tooltip('hide');
    } else {
      validateAccountCPF();
    }
  });
  $("#form_account_cnpj").focus(function () {
    if ($('#form_account_cpf').val() == "") {
      $("#btn-form-openaccount-plan").attr("aria-disabled", "true");
      $("#btn-form-openaccount-plan").addClass("btnDisable");
      $("#form_account_cnpj").tooltip('disable');
      $("#form_account_cnpj").tooltip('hide');
    } else {
      validateAccountCNPJ();
    }
  });
  validationBorderBottom();
  $('#btn-form-openaccount-plan').on('click', function (event) {
    event.preventDefault();

    if ($('#choice1').is(':checked') && cnpjValidado && cpfValidado) {
      $("#formAberturaConta").attr("action", "https://internet.itau.com.br/router-app/router");
      $('#formAberturaConta').submit();
    }

    if ($('#choice2').is(':checked') && cnpjValidado && cpfValidado) {
      $("#formAberturaConta").attr("action", "https://www.itau.com.br/empresas/abra-sua-conta/formulario-simples/");
      $('#formAberturaConta').submit();
    }
  });
});
$("#choice1").focus(function () {
  $("#form_radio_yes p").css("outline-style", "solid");
  $("#form_radio_yes p").css("outline-color", "$color-preto");
  $("#form_radio_yes p").css("outline-width", "2px");
});
$("#choice2").focus(function () {
  $("#form_radio_no p").css("outline-style", "solid");
  $("#form_radio_no p").css("outline-color", "$color-preto");
  $("#form_radio_no p").css("outline-width", "2px");
});
$("#choice1").on("click", function () {
  habilitaBotao();
});
$("#choice2").on("click", function () {
  habilitaBotao();
});
$("#choice1").focusout(function () {
  $("#form_radio_yes p").css("outline-style", "none");
});
$("#choice2").focusout(function () {
  $("#form_radio_no p").css("outline-style", "none");
});
function validationBorderBottom() {
    $(".formulario_economico_input").on('change', function() {
        var ThisValue = $(this).val();

        if (ThisValue == '') {
            $(this).addClass('border-invalid').removeClass('border-valid');
        }
        else {
            $(this).addClass('border-valid').removeClass('border-invalid');
        }
    });
}

function validate(){

    var tamanhoNome = $('#form_economico_nome').val().length;
    var tamanhoTelefone = $('#form_economico_telefone').val().length;
    var cpfValue = $('#form_economico_cpf').val().replace(/[.-]/g,'');
    var cpfValidado;

    if(cpfValue.length == 11) {
        cpfValidado = TestaCPF(cpfValue)
        if(!cpfValidado) {
            $("#form_economico_cpf").tooltip('show');
        }
        else {
            $("#form_economico_cpf").tooltip('hide');
        }
    }
        
    if (tamanhoNome > 0 && tamanhoTelefone >= 14 && cpfValidado) {
        $("#btn-form-economic-plan").attr("aria-label", "ativado");
        $("#btn-form-economic-plan").css("cursor", "pointer");
        $("#btn-form-economic-plan").css("background-color", "#EC7000");
    }

    else {
        $("#btn-form-economic-plan").attr("aria-label", "desativado");
        $("#btn-form-economic-plan").css("cursor", "not-allowed");
        $("#btn-form-economic-plan").css("background-color", "rgb(248, 198, 153)");
    }
}

function TestaCPF(strCPF) {
    var Soma;
    var Resto;
    Soma = 0;

    if (strCPF.match(/\b(\d)\1+\b/)) return false;
        
    for (i=1; i<=9; i++) Soma = Soma + parseInt(strCPF.substring(i-1, i)) * (11 - i);
    Resto = (Soma * 10) % 11;
    
        if ((Resto == 10) || (Resto == 11))  Resto = 0;
        if (Resto != parseInt(strCPF.substring(9, 10)) ) return false;
    
    Soma = 0;
        for (i = 1; i <= 10; i++) Soma = Soma + parseInt(strCPF.substring(i-1, i)) * (12 - i);
        Resto = (Soma * 10) % 11;
    
        if ((Resto == 10) || (Resto == 11))  Resto = 0;
        if (Resto != parseInt(strCPF.substring(10, 11) ) ) return false;
        return true;
}
var strCPF = "12345678909";

$(document).ready(function (){

    $('#form_economico_telefone').setMask({
        mask: '(99) 9999-99999',
        autoTab: false
    });

    $('#form_economico_telefone').focusout(function() {
        if($(this).val().length == 15){
            $('#form_economico_telefone').setMask({
                mask: '(99) 99999-9999',
                autoTab: false
            });
        }
        else {
            $('#form_economico_telefone').setMask({
                mask: '(99) 9999-99999',
                autoTab: false
            });
        }
    });

    $('#form_economico_cpf').setMask({
        mask: '999.999.999-99',
        autoTab: false
    });

    $('#form_economico_nome, #form_economico_telefone, #form_economico_cpf').keyup(validate);

    validationBorderBottom();

    $('#btn-form-economic-plan').on('click',function(e){

        var assunto = "";
        var msg = " - Nome: " + $("#form_economico_nome").val() + "\n" +
                " - CPF: " + $("#form_economico_cpf").val() + "\n" +
                " - Telefone: " + $("#form_economico_telefone").val().replace(/[^0-9.]/g, "");

        var emailDestino = "contato-itau@correio.itau.com.br";
        var url = "https://ww16.itau.com.br/ws/sendMail.asmx/Send?emailDestino="+emailDestino+"&assunto="+assunto+"&mensagem="+msg;

        $.jsonp({
            url:url,
            callbackParameter: "callback", 
            dataType:'jsonp',
            timeout: 10000,
            success: function(data) {
                $(".form_economic_plan_error").hide();
                $(".form_economic_plan_success").fadeIn(500);
                $("#formulario_economico input").val("");
                $(".form-economic-plan").css("margin-bottom","0");
            },
            error: function (xOptions, textStatus) {
                $(".form_economic_plan_error").fadeIn(500);
                $(".form-economic-plan").css("margin-bottom","0");
            }
        });
    });
});
"use strict";

(function ($, $document) {
  /**
   * Checks if find-agency component exist and is visible in page before tryng to load the map
   */
  $('.button-search').click(function () {
    $('.find-agency__map-element').click();
  });
  $('.find-agency__map-element').click(function () {
    if ($('.find-agency').length > 0 && isVisible('.find-agency')) {
      /**
       * Bind Events
       */
      var bindEvents = function bindEvents() {
        mapListeners();
        eventListeners();
        checkGeolocationPermission();
      };
      /**
       * Map Listeners
       */


      var mapListeners = function mapListeners() {
        /**
         * On map drag update lat/lng to map center and search for nearby agencies
         */
        google.maps.event.addListener(MAP, 'dragend', function () {
          if (DRAG_ON) {
            MAP_LATITUDE = MAP.getCenter().lat();
            MAP_LONGITUDE = MAP.getCenter().lng();
            findAgenciesNearby(false);
          }
        });
      };
      /**
       * Event Listeners
       */


      var eventListeners = function eventListeners() {
        /**
         * Request user geolocation
         */
        $('.js-activate-geolocation').on('click', function () {
          requestGeolocation();
        });
        /**
         * Search for agency or location
         */

        $('.button-search').on('click', function () {
          var value = $('.js-map-search').val();
          var icon = $('.js-map-search').siblings('i');
          clearTimeout(SEARCH_TIMEOUT);
          if (icon.hasClass('icon-itaufonts_busca_consulta')) icon.removeClass().addClass('icon-itaufonts_atualizando rotating');
          SEARCH_TIMEOUT = setTimeout(function () {
            icon.removeClass().addClass('icon-itaufonts_busca_consulta');
            if (value.length === 4 && !isNaN(value)) searchAgencyByNumber(value);else if (value.length) searchAgencyByAddress(value);else {
              centerMapAtPoint();
              findAgenciesNearby(true);
            }
            validationFeedbackAccessibility(value);
          }, 800);
        });
        $('.js-map-search').on('keyup', function () {
          var value = $.trim(this.value);
          var icon = $(this).siblings('i');
          var valueValidation = $(this).val();
          validationFeedbackAccessibility(valueValidation);
          clearTimeout(SEARCH_TIMEOUT);
          if (icon.hasClass('icon-itaufonts_busca_consulta')) icon.removeClass().addClass('icon-itaufonts_atualizando rotating');
          SEARCH_TIMEOUT = setTimeout(function () {
            icon.removeClass().addClass('icon-itaufonts_busca_consulta');
            if (value.length === 4 && !isNaN(value)) searchAgencyByNumber(value);else if (value.length) searchAgencyByAddress(value);else {
              centerMapAtPoint();
              findAgenciesNearby(true);
            }
          }, 800);
        });

        function validationFeedbackAccessibility(valueValidation) {
          var inputField = $('.js-map-search');

          if (!valueValidation) {
            inputField.attr('aria-invalid', 'true');
            inputField.attr('aria-labelledby', 'feedbackAccessibility');
            $('.button-search').attr('aria-labelledby', 'feedbackAccessibility');
          } else {
            inputField.attr('aria-labelledby', 'buscarAgenciaLabel');
            inputField.attr('aria-invalid', 'false');
            $('.button-search').removeAttr('aria-labelledby');
          }
        }

        ;
        /**
         * Go to suggested search location
         */

        $('body').on('click', '.js-suggested-places-item', function () {
          var latitude = $(this).data('latitude');
          var longitude = $(this).data('longitude');
          var point = new google.maps.LatLng(latitude, longitude);
          $SUGGESTED_PLACES_CONTAINER.html('');
          centerMapAtPoint(point);
          findAgenciesNearby(true);
        });
        /**
         * Hide location content
         */

        $('body').on('click', '.find-agency__toggle', function () {
          $(this).closest('.find-agency__info').removeClass('find-agency__info--active');
        });
        $('body').on('click', '#subordAgency', function () {
          refresh($(this).text());
        });
      };
      /**
       * Request user geolocation
       */


      var requestGeolocation = function requestGeolocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function (position) {
            notify(FEEDBACK_MESSAGES.locationActive);
            MAP_LATITUDE = position.coords.latitude;
            MAP_LONGITUDE = position.coords.longitude;
            centerMapAtPoint();
            addUserMarker();
            findAgenciesNearby(true);
            $('.button-search').click();
          }, function (errorCode) {
            console.error('requestGeolocation error: ', errorCode);
            notify(FEEDBACK_MESSAGES.locationNotAvailable);
          });
        } else {
          notify(FEEDBACK_MESSAGES.locationNotAvailable);
        }
      };
      /**
       * Center map at given lat/lng points
       */


      var centerMapAtPoint = function centerMapAtPoint(point) {
        var point = point || new google.maps.LatLng(MAP_LATITUDE, MAP_LONGITUDE); // TODO: Check if we need to add/remove user marker here

        MAP.setCenter(point);
        MAP.setZoom(MAP_ZOOM);
      };
      /**
       * Sets the map on all markers in the array
       */


      var setMapOnAll = function setMapOnAll(map) {
        for (var i = 0; i < MAP_MARKERS.length; i++) {
          MAP_MARKERS[i].setMap(map);
        }
      };
      /**
       * Removes the markers from the map, but keeps them in the array
       */


      var clearMarkers = function clearMarkers() {
        setMapOnAll(null);
      };
      /**
       * Deletes all markers in the array by removing references to them
       */


      var deleteMarkers = function deleteMarkers() {
        clearMarkers();
        MAP_MARKERS = [];
      };
      /**
       * Add Cash Machines/Agencies Markers
       */


      var addMarker = function addMarker(latitude, longitude, icon, id) {
        var latitude = latitude || MAP_LATITUDE;
        var longitude = longitude || MAP_LONGITUDE;
        var marker = new google.maps.Marker({
          id: id,
          position: new google.maps.LatLng(latitude, longitude),
          map: MAP,
          icon: {
            url: icon,
            scaledSize: new google.maps.Size(48, 48),
            origin: new google.maps.Point(0, 0),
            anchor: new google.maps.Point(0, 0)
          }
        });
        google.maps.event.addListener(marker, 'click', function () {
          MAP.panTo(this.getPosition());
          $('.find-agency__info').removeClass('find-agency__info--active');
          $('.find-agency__info--' + this.id).addClass('find-agency__info--active');
        });

        if (FLAG_SUBORDINATE) {
          FLAG_SUBORDINATE = false;
          $('.find-agency__info').removeClass('find-agency__info--active');
          $('.find-agency__info--' + this.id).addClass('find-agency__info--active');
        }

        return marker;
      };
      /**
       * Add user Marker
       */


      var addUserMarker = function addUserMarker(latitude, longitude) {
        var latitude = latitude || MAP_LATITUDE;
        var longitude = longitude || MAP_LONGITUDE;
        return new google.maps.Marker({
          position: new google.maps.LatLng(latitude, longitude),
          map: MAP,
          icon: {
            url: MARKER_ICONS.user,
            scaledSize: new google.maps.Size(24, 32),
            origin: new google.maps.Point(0, 0),
            anchor: new google.maps.Point(0, 32)
          }
        });
      };
      /**
       * Find agencies nearby user location
       */


      var findAgenciesNearby = function findAgenciesNearby(showFeedback) {
        DRAG_ON = true;
        var url = 'https://ww16.itau.com.br/ws/BuscadorAgencias.asmx/BuscaAgencias?lati=' + MAP_LATITUDE + '&longi=' + MAP_LONGITUDE + '&filtroCaixas=true&filtroDisp=true&filtroItau=true&filtroUniclass=true&filtroPers=true&filtroEmpresas=true&filtroCaixasExc=false&filtroHorarios=false&filtroHAbertura=00h:00&filtroHFechamento=00h:00';

        switch (window.location.hash) {
          case '#AGINST':
            url = 'https://ww16.itau.com.br/ws/BuscadorAgencias.asmx/BuscaAgencias?lati=' + MAP_LATITUDE + '&longi=' + MAP_LONGITUDE + '&filtroCaixas=false&filtroDisp=false&filtroItau=true&filtroUniclass=true&filtroPers=false&filtroEmpresas=false&filtroCaixasExc=false&filtroHorarios=false&filtroHAbertura=00h:00&filtroHFechamento=00h:00';
            break;

          case '#AGPERSON':
            url = 'https://ww16.itau.com.br/ws/BuscadorAgencias.asmx/BuscaAgencias?lati=' + MAP_LATITUDE + '&longi=' + MAP_LONGITUDE + '&filtroCaixas=false&filtroDisp=false&filtroItau=false&filtroUniclass=false&filtroPers=true&filtroEmpresas=false&filtroCaixasExc=false&filtroHorarios=false&filtroHAbertura=00h:00&filtroHFechamento=00h:00';
            break;

          case '#AGPJ':
            url = 'https://ww16.itau.com.br/ws/BuscadorAgencias.asmx/BuscaAgencias?lati=' + MAP_LATITUDE + '&longi=' + MAP_LONGITUDE + '&filtroCaixas=false&filtroDisp=false&filtroItau=false&filtroUniclass=false&filtroPers=false&filtroEmpresas=true&filtroCaixasExc=false&filtroHorarios=false&filtroHAbertura=00h:00&filtroHFechamento=00h:00';
            break;

          case '#CAIXAS':
            url = 'https://ww16.itau.com.br/ws/BuscadorAgencias.asmx/BuscaAgencias?lati=' + MAP_LATITUDE + '&longi=' + MAP_LONGITUDE + '&filtroCaixas=true&filtroDisp=false&filtroItau=false&filtroUniclass=false&filtroPers=false&filtroEmpresas=false&filtroCaixasExc=false&filtroHorarios=false&filtroHAbertura=00h:00&filtroHFechamento=00h:00';
            break;

          case '#DISPENSADOR':
            url = 'https://ww16.itau.com.br/ws/BuscadorAgencias.asmx/BuscaAgencias?lati=' + MAP_LATITUDE + '&longi=' + MAP_LONGITUDE + '&filtroCaixas=false&filtroDisp=true&filtroItau=false&filtroUniclass=false&filtroPers=false&filtroEmpresas=false&filtroCaixasExc=false&filtroHorarios=false&filtroHAbertura=00h:00&filtroHFechamento=00h:00';
            break;
        }

        $.ajax({
          url: url,
          cache: false,
          dataType: 'jsonp',
          crossDomain: true,
          timeout: 5000,
          success: function success(response) {
            MAP_PANORAMA = MAP.getStreetView();
            if (MAP_PANORAMA) MAP_PANORAMA.setVisible(false);
            var agencies = response.d[0];
            var cashMachines = response.d[1];
            deleteMarkers();
            $INFO_CONTAINER.html('');
            if (cashMachines !== null) addCashMachines(cashMachines);
            if (agencies !== null) addAgencies(agencies);
            if (!agencies.length && !cashMachines.length && showFeedback) notify(FEEDBACK_MESSAGES.agenciesNearbyNotFound);
          },
          error: function error(err) {
            console.error('BuscadorAgencias error: ', err);
            if (showFeedback) notify(FEEDBACK_MESSAGES.agenciesNearbyNotAvailable);
          }
        });
      };
      /**
       *  Search agency by number
       */


      var searchAgencyByNumber = function searchAgencyByNumber(value) {
        DRAG_ON = false;
        $.ajax({
          url: 'https://ww16.itau.com.br/ws/BuscadorAgencias.asmx/BuscaAgenciaPorNumero?numero=' + value,
          cache: false,
          dataType: 'jsonp',
          crossDomain: true,
          success: function success(response) {
            MAP_PANORAMA = MAP.getStreetView();
            if (MAP_PANORAMA) MAP_PANORAMA.setVisible(false);
            var agency = response.d;
            var point = new google.maps.LatLng(agency.Latitude, agency.Longitude);

            if (agency !== null) {
              if (agency.Longitude === 0 || agency.Latitude === 0) {
                var geo = new google.maps.Geocoder();
                geo.geocode({
                  'address': agency.Endereco + ', ' + agency.Cidade
                }, function (response, status) {
                  if (status === google.maps.GeocoderStatus.OK) {
                    if (response.length > 1) {
                      notify(FEEDBACK_MESSAGES.agencyNotFound);
                      return;
                    } else {
                      agency.Longitude = response[0].geometry.location.lng();
                      agency.Latitude = response[0].geometry.location.lat();
                    }

                    deleteMarkers();
                    addAgencies([agency]);
                    centerMapAtPoint(point);
                  }
                });
              } else {
                deleteMarkers();
                addAgencies([agency]);
                centerMapAtPoint(point);
              }
            } else {
              notify(FEEDBACK_MESSAGES.agencyNotFound);
            }

            notify(FEEDBACK_MESSAGES.agencyFound);
          },
          error: function error(e) {
            notify(FEEDBACK_MESSAGES.agencyNotFound);
          }
        });
      };
      /**
       *  Search agency by address
       */


      var searchAgencyByAddress = function searchAgencyByAddress(value) {
        var geo = new google.maps.Geocoder();
        geo.geocode({
          'address': value,
          'region': 'br'
        }, function (response, status) {
          if (status === google.maps.GeocoderStatus.OK) {
            if (response.length > 1) {
              suggestedPlaces(response);
            } else {
              var point = new google.maps.LatLng(response[0].geometry.location.lat(), response[0].geometry.location.lng());
              centerMapAtPoint(point);
              findAgenciesNearby(true);
            }
          } else {
            $SUGGESTED_PLACES_CONTAINER.html('');
            notify(FEEDBACK_MESSAGES.addressNotFound);
          }
        });
      };
      /**
         *  check closed agency
         * @param value objecet Agency
         */


      var checkClosedAgency = function checkClosedAgency(value) {
        var messagemAgenciaSubordinada = "";

        if (value.Aberta != null && (value.Aberta == "N" || value.Aberta == "n")) {
          messagemAgenciaSubordinada = 'Dê preferência aos <a href="https://www.itau.com.br/canais-itau" target="blank"><u>nossos canais digitais</u></a> para acompanhar sua conta e o cartão. Se você precisar ir até uma agência, consulte a mais próxima.';

          if (value.Subordinadora != null && value.Subordinadora != "") {
            messagemAgenciaSubordinada = 'Dê preferência aos <a href="https://www.itau.com.br/canais-itau" target="blank"><u>nossos canais digitais</u></a> para acompanhar sua conta e o cartão. Se precisar ir até uma agência, consulte a mais próxima ou, se a transação só puder ser feita na agência da sua conta corrente, a agência <a href="javascript:;" id="subordAgency"><u>' + value.Subordinadora + '</u></a> poderá te atender neste momento.';
          }

          if (value.Imagem === 'buscaPers.png' || value.Nome.toLowerCase().indexOf('personn') > -1) {
            messagemAgenciaSubordinada = 'Conte com o atendimento do gerente por e-mail ou telefone. E você também pode realizar suas transações nos  <a href="https://www.itau.com.br/canais-itau" target="blank"><u>nossos canais digitais</u></a>';
          }

          return messagemAgenciaSubordinada;
        } else {
          return null;
        }
      };

      var refresh = function refresh(value) {
        FLAG_SUBORDINATE = true;
        $('.find-agency__toggle').click();
        $('.js-map-search').val(value);
        setTimeout(function () {
          $('.button-search').click();
        }, 1000);
      };
      /**
       *  Address search suggested places
       */


      var suggestedPlaces = function suggestedPlaces(places) {
        $SUGGESTED_PLACES_CONTAINER.html('<li><span>Você quis dizer:</span></li>');

        for (var i = 0; i < places.length; i++) {
          var place = places[i];
          var latitude = place.geometry.location.lat();
          var longitude = place.geometry.location.lng();
          $SUGGESTED_PLACES_CONTAINER.append('<li><a href="javascript:;" data-latitude="' + latitude + '" data-longitude="' + longitude + '" class="js-suggested-places-item">' + place.formatted_address + '</a></li>');
        }
      };
      /**
       * Add Cash Machines markers
       */


      var addCashMachines = function addCashMachines(machines) {
        for (var i = 0; i < machines.length; i++) {
          var machine = machines[i];
          var id = uid();

          if (machine) {
            buildCashMachinesHTMLContent(machine, id);
            var marker = addMarker(machine.Latitude, machine.Longitude, MARKER_ICONS.cash, id);
            MAP_MARKERS.push(marker);
          }
        }
      };
      /**
       * Add Agencies markers
       */


      var addAgencies = function addAgencies(agencies) {
        for (var i = 0; i < agencies.length; i++) {
          var agency = agencies[i];
          var id = uid();
          var icon = agency.Imagem === 'buscaPers.png' || agency.Nome.toLowerCase().indexOf('personn') > -1 ? MARKER_ICONS.person : MARKER_ICONS.varejo;

          if (agency.Aberta != null && (agency.Aberta == "N" || agency.Aberta == "n")) {
            icon = MARKER_ICONS.varejo_fechada;

            if (agency.Imagem === 'buscaPers.png' || agency.Nome.toLowerCase().indexOf('personn') > -1) {
              icon = MARKER_ICONS.person_fechada;
            }
          }

          if (agency) {
            buildAgenciesHTMLContent(agency, id);
            var marker = addMarker(agency.Latitude, agency.Longitude, icon, id);
            MAP_MARKERS.push(marker);
          }
        }
      };
      /**
       * Build Cash Machines HTML content
       */


      var buildCashMachinesHTMLContent = function buildCashMachinesHTMLContent(machine, id) {
        var title = machine.Nome;
        var address = machine.Endereco && machine.Endereco + ' - ' + machine.Bairro;
        var dispenser = machine.PossuiDispensador;
        var infoHTML = '';
        infoHTML += '<div class="find-agency__info find-agency__info--machine find-agency__info--' + id + '">';
        infoHTML += '    <a href="javascript:;" class="find-agency__toggle"><i class="icon-itaufonts_seta_down"></i></a>';
        infoHTML += '    <i class="icon-itaufonts_full_agencia"></i>';
        infoHTML += '    <span>' + title + '</span>';
        infoHTML += '    <p class="find-agency__info-description"><strong>Caixa Eletrônico</strong></p>';
        if (address) infoHTML += '    <p>' + address + '</p>';
        if (dispenser) infoHTML += '    <p class="find-agency__info-dispenser"><strong>*Possui dispenser de cheques</strong></p>';
        infoHTML += '</div>';
        $INFO_CONTAINER.append(infoHTML);
      };
      /**
       * Build Agencies HTML content
       */


      var buildAgenciesHTMLContent = function buildAgenciesHTMLContent(agency, id) {
        var title = agency.Id ? agency.Id + ' - ' + agency.Nome : agency.Nome;
        var address = agency.Endereco && agency.Endereco + ' ' + agency.Bairro;
        var city = agency.Cidade && agency.Cidade + ' - ' + agency.Cep;
        var oppeningPlusOne = (parseInt(agency.Abertura.split("h:")) + 1).toString().concat("h:00");
        var operatingHours = 'Das ' + agency.Abertura + ' às ' + oppeningPlusOne + ' para aposentados e beneficiários do INSS. Das ' + oppeningPlusOne + ' às ' + agency.Fechamento + ': público em geral.';
        var message = agency.Mensagem && agency.Mensagem;
        var attendance = ['Itaú'];
        var exclusive = agency.Caixa_exclusivo && agency.Caixa_exclusivo !== '0';
        var closedAgency = checkClosedAgency(agency);
        var checkPersonAgency = agency.Nome.toLowerCase().indexOf('personn') > -1;
        if (agency.Segmento === 'UBB') attendance.push('Uniclass');
        if (agency.AtendePJ === true) attendance.push('Empresas');
        if (closedAgency != null) operatingHours = closedAgency;
        if (checkPersonAgency) if (attendance.length > 1) {
          attendance = attendance.join(', ');
          if (attendance.indexOf(',') > 0) attendance = attendance.substr(0, attendance.lastIndexOf(',')) + ' e' + attendance.substr(attendance.lastIndexOf(',') + 1);
        }
        var infoHTML = '';
        infoHTML += '<div class="find-agency__info find-agency__info--agency find-agency__info--' + id + '">';
        infoHTML += '    <a href="javascript:;" class="find-agency__toggle"><i class="icon-itaufonts_seta_down"></i></a>';
        infoHTML += '    <i class="icon-itaufonts_full_agencia"></i>';
        infoHTML += '    <span>' + title + '</span>';
        if (address) infoHTML += '    <p class="find-agency__info-address">' + address + ' ' + city + '</p>';
        if (!checkPersonAgency) infoHTML += '    <p><strong>Telefone: </strong>4004 4828 – Capitais e regiões metropolitanas</br>0800 970 4828 – Demais localidades</p>';
        if (checkPersonAgency) infoHTML += '    <p><strong>Telefone: </strong>3003 7377 - Capitais e regiões metropolitanas</br>0800 722 7377 – Demais localidades</p>';
        if (operatingHours && closedAgency == null) infoHTML += '    <p><strong>Funcionamento: </strong>' + operatingHours + '</p>';
        if (closedAgency != null) infoHTML += '    <p><strong>Funcionamento: </strong><font class="tempClosed">Temporariamente Fechada. </font>' + operatingHours + '</p>';
        if (message) infoHTML += '    <p>' + message + '</p>';
        if (typeof attendance === 'string') infoHTML += '    <p class="find-agency__info-attendance"><strong>Atendimento: </strong>' + attendance + '</p>';
        if (exclusive) infoHTML += '    <a href="https://www.itau.com.br/conveniencia/#content4" target="blank"><strong>Fila exclusiva Uniclass e Personnalité<strong></a>';
        infoHTML += '</div>';
        $INFO_CONTAINER.append(infoHTML);
      };
      /**
       * Notification messages helper
       * 
       * Receives a message object, if used without parameters reset
       * the element initial state
       */


      var notify = function notify(message) {
        var $geolocationEl = $('.js-activate-geolocation');
        var $messageEl = $('.js-feedback-message');

        if (message) {
          $geolocationEl.addClass('d-none');
          $messageEl.find('i').removeClass().addClass(message.icon);
          $messageEl.find('span').text(message.text);
          $messageEl.removeClass('d-none');
        } else {
          $messageEl.addClass('d-none');
          $geolocationEl.removeClass('d-none');
        }
      };
      /**
       * Unique ID generator helper
       */


      var uid = function uid() {
        return Math.random().toString(36).substring(2) + new Date().getTime().toString(36);
      };
      /**
       * Format phone number helper
       */


      var formatPhone = function formatPhone(ddd, fone) {
        ddd = ddd.replace(/\D/g, "");
        fone = fone.replace(/\D/g, "");
        fone = fone.length === 8 ? fone.replace(/(\d{4})(\d)/, "$1-$2") : fone.replace(/(\d{5})(\d)/, "$1-$2");
        return '(' + ddd + ')' + ' ' + fone;
      };
      /**
       * Check for initial geolocation permissions
       */


      var checkGeolocationPermission = function checkGeolocationPermission() {
        if (navigator.permissions) {
          navigator.permissions.query({
            name: 'geolocation'
          }).then(function (result) {
            if (result.state == 'granted') {
              requestGeolocation();
            } else if (result.state == 'denied') {
              notify(FEEDBACK_MESSAGES.locationDenied);
            } else if (result.state == 'prompt') {
              notify();
            }
          });
        } else {
          notify();
        }
      };

      'use strict';
      /**
       * General Values
       */


      var $INFO_CONTAINER = $('.find-agency__map-info');
      var $SUGGESTED_PLACES_CONTAINER = $('.find-agency__suggested-places');
      var MAP;
      var MAP_PANORAMA;
      var MAP_ZOOM = 17;
      var MAP_LOADED = false;
      var MAP_LATITUDE = -23.5588622;
      var MAP_LONGITUDE = -46.65902449999999;
      var MAP_MARKERS = [];
      var DRAG_ON = true;
      var SEARCH_TIMEOUT = null;
      var RESOURCES_BASE_PATH = '/etc.clientlibs/itau/components/content/find-agency/clientlib/resources/images/';
      var FEEDBACK_MESSAGES = {
        locationNotAvailable: {
          icon: 'icon-itaufonts_exclamacao',
          text: 'não foi possível obter a localização atual do dispositivo'
        },
        locationDenied: {
          icon: 'icon-itaufonts_exclamacao',
          text: 'a localização atual do dispositivo está bloqueada'
        },
        locationActive: {
          icon: 'icon-itaufonts_agencia',
          text: 'a localização atual do dispositivo está ativada'
        },
        agenciesNearbyNotAvailable: {
          icon: 'icon-itaufonts_exclamacao',
          text: 'ocorreu um erro ao buscar as agências próximas'
        },
        agenciesNearbyNotFound: {
          icon: 'icon-itaufonts_exclamacao',
          text: 'nenhuma agência ou caixa eletrônico próximo foi encontrado'
        },
        agencyNotAvailable: {
          icon: 'icon-itaufonts_exclamacao',
          text: 'ocorreu um erro ao localizar a agência'
        },
        agencyNotFound: {
          icon: 'icon-itaufonts_exclamacao',
          text: 'agência não encontrada'
        },
        agencyFound: {
          icon: 'icon-itaufonts_agencia',
          text: 'agência encontrada'
        },
        addressNotFound: {
          icon: 'icon-itaufonts_exclamacao',
          text: 'endereço não encontrado'
        }
      };
      var MARKER_ICONS = {
        user: RESOURCES_BASE_PATH + 'marker-user.png',
        varejo: RESOURCES_BASE_PATH + 'marker-varejo.png',
        person: RESOURCES_BASE_PATH + 'marker-person.png',
        cash: RESOURCES_BASE_PATH + 'marker-caixa.png',
        varejo_fechada: RESOURCES_BASE_PATH + 'marker-varejo-fechada.png',
        person_fechada: RESOURCES_BASE_PATH + 'marker-person-fechada.png'
      };
      var FLAG_SUBORDINATE = false;
      /**
       * Dynamically loads the map
       */

      window.gMapsCallback = function () {
        MAP_LOADED = true;
        $(window).trigger('MAP_LOADED');
      };

      window.loadGoogleMaps = function () {
        if (MAP_LOADED) return window.gMapsCallback();
        var script_tag = document.createElement('script');
        script_tag.setAttribute('type', 'text/javascript');
        script_tag.setAttribute('src', 'https://maps.googleapis.com/maps/api/js?key=AIzaSyAWRJjsEiB4XXg33DlL_OZt-Vss7NyFp20&callback=gMapsCallback');
        (document.getElementsByTagName('head')[0] || document.documentElement).appendChild(script_tag);
      };
      /**
       * Initialize map when document is ready
       */


      $(document).ready(function () {
        $('.find-agency__map-element').unbind("click");

        function initialize() {
          var MAP_OPTIONS = {
            zoom: MAP_ZOOM,
            mapTypeId: google.maps.MapTypeId.ROADMAP,
            mapTypeControl: true,
            mapTypeControlOptions: {
              style: google.maps.MapTypeControlStyle.HORIZONTAL_BAR,
              position: google.maps.ControlPosition.TOP_RIGHT
            },
            panControl: true,
            panControlOptions: {
              position: google.maps.ControlPosition.RIGHT_CENTER
            },
            zoomControl: true,
            zoomControlOptions: {
              style: google.maps.ZoomControlStyle.LARGE,
              position: google.maps.ControlPosition.RIGHT_CENTER
            },
            scaleControl: false,
            scaleControlOptions: {
              position: google.maps.ControlPosition.RIGHT_CENTER
            },
            streetViewControl: true,
            streetViewControlOptions: {
              position: google.maps.ControlPosition.RIGHT_CENTER
            }
          };
          var PANORAMA_OPTIONS = {
            addressControlOptions: {
              position: google.maps.ControlPosition.RIGHT_CENTER
            },
            zoomControlOptions: {
              position: google.maps.ControlPosition.RIGHT_CENTER
            },
            panControlOptions: {
              position: google.maps.ControlPosition.RIGHT_CENTER
            },
            enableCloseButton: true,
            imageDateControl: true,
            visible: false //set to false so streetview is not triggered on the initial map load

          };
          MAP = new google.maps.Map(document.getElementById('itau-mapa'), MAP_OPTIONS);
          MAP.setZoom(MAP_ZOOM);
          MAP.setCenter(new google.maps.LatLng(MAP_LATITUDE, MAP_LONGITUDE));
          MAP_PANORAMA = MAP.getStreetView();
          MAP_PANORAMA.setOptions(PANORAMA_OPTIONS);
          bindEvents();
        }

        ;
        $(window).bind('MAP_LOADED', initialize);
        window.loadGoogleMaps();
      });
      ;
    }
  });
  $('.js-map-search').keydown(function (e) {
    var value = $.trim(this.value);

    if (e.keyCode === 13) {
      if ($('.js-map-search') != "") {
        $('.find-agency__map-element').click();
        setTimeout(function () {
          $('.button-search').click();
        }, 1000);
      }

      ;
    }

    ;
  });
})($, $(document));
"use strict";

var _this = void 0;

var exchangeForm = specFormer;
exchangeForm.init("#exchange-agency-search-form");
var exchangeComponents = {
  selectOption: function selectOption(item) {
    return "<option value=\"".concat(item['@nome'], "\">").concat(item['@nome'], "</option>");
  },
  resultCard: function resultCard(item) {
    var agenciesHTML = "";
    item.agencia.forEach(function (agencia) {
      agenciesHTML += exchangeComponents.resultCardSingleResult(agencia);
    });
    return "<div class=\"exchange-agency-search__container-result-box__results__container\">\n        <h3 class=\"exchange-agency-search__container-result-box__results__container__title\" aria-label=\"Resultados de ag\xEAncias de c\xE2mbio ".concat(item.nome, "\">").concat(item.nome, "</h3>\n        ").concat(agenciesHTML, "\n      </div>");
  },
  resultCardMoreInfo: function resultCardMoreInfo(agencyData) {
    return "<div class=\"exchange-agency-search__container-result-box__result__help-text__info\" aria-live=\"off\">\n      <div class=\"exchange-agency-search__container-result-box__result__help-text__info__map-container\">\n         <div id=\"map-exchange-".concat(agencyData.Id, "\" class=\"exchange-agency-search__container-result-box__result__help-text__info__map-container__map\"></div>\n      </div>\n      <div class=\"exchange-agency-search__container-result-box__result__help-text__info__info-container\">\n          <h4 class=\"exchange-agency-search__container-result-box__result__help-text__info__info-container__title\">").concat(agencyData.Id, " - ").concat(agencyData.Nome, "</h4>\n          <p class=\"exchange-agency-search__container-result-box__result__help-text__info__info-container__paragraph\">").concat(agencyData.Endereco, " - ").concat(agencyData.Cep, "</p>\n          <p class=\"exchange-agency-search__container-result-box__result__help-text__info__info-container__paragraph\">Telefone: (").concat(agencyData.DDD, ") ").concat(agencyData.Telefone, "</p>\n          <p class=\"exchange-agency-search__container-result-box__result__help-text__info__info-container__paragraph\">Funcionamento: ").concat(agencyData.Abertura, " - ").concat(agencyData.Fechamento, "</p>\n          ").concat(agencyData.Caixa_exclusivo ? '<p class="exchange-agency-search__container-result-box__result__help-text__info__info-container__paragraph">Fila exclusiva Uniclass e Personnalité</p>' : '', "\n      </div>\n    </div>");
  },
  resultCardSingleResult: function resultCardSingleResult(agencia) {
    return "<div class=\"exchange-agency-search__container-result-box__result\">\n        <div class=\"exchange-agency-search__container-result-box__result__data\">\n            <div class=\"exchange-agency-search__container-result-box__result__data__info\">\n                <div class=\"exchange-agency-search__flex-container\">\n                    <p class=\"exchange-agency-search__text--bold\">ag\xEAncia</p>\n                    <p class=\"exchange-agency-search__text--small\">".concat(agencia.numero, " - ").concat(agencia.nome, "</p>\n                </div>\n            </div>\n            <div class=\"exchange-agency-search__container-result-box__result__data__numbers\">\n                <div class=\"exchange-agency-search__flex-container\">\n                    <p class=\"exchange-agency-search__text--bold\">tipo de ag\xEAncia</p>\n                    <p class=\"exchange-agency-search__text--small\">").concat(agencia.tipo, "</p>\n                </div>\n                <div class=\"exchange-agency-search__flex-container\">\n                  <p class=\"exchange-agency-search__text--bold\">esp\xE9cie(s)</p>\n                  <div class=\"exchange-agency-search__result-box__result__data__numbers__container\">\n                      <p class=\"exchange-agency-search__text--small\">").concat(agencia.dolar === 'S' && agencia.euro === 'S' ? "dólar/euro" : agencia.dolar === "S" ? "dólar" : "euro", "</p>\n                  </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"exchange-agency-search__container-result-box__result__help-text\">\n            <button role=\"button\" aria-expanded=\"false\" aria-label=\"mais informa\xE7\xF5es da ag\xEAncia ").concat(agencia.numero, " - ").concat(agencia.nome, "\" class=\"exchange-agency-search__container-result-box__result__help-text__accordeon\" data-agencia='").concat(agencia.numero, "' id='").concat(agencia.numero, "' aria-live=\"off\" tabindex=\"0\">\n              <span class=\"exchange-agency-search__container-result-box__result__help-text__accordeon__agencia icon-itaufonts_agencia\" aria-hidden=\"true\"></span>\n              <p aria-hidden=\"true\">mais informa\xE7\xF5es da ag\xEAncia</p>\n              <span class=\"exchange-agency-search__container-result-box__result__help-text__accordeon__arrow icon-itaufonts_seta_down\" aria-hidden=\"true\"></span>\n            </button>\n        </div>\n      </div>");
  }
};
var exchangeAgencies = {
  agenciasCambioURL: "https://ww18.itau.com.br/wsInvestnet/AgenciaCambio.asmx/ConsultaAgenciaCambio",
  agenciasData: [],
  cityData: [],
  neighborhoodData: [],
  searchParams: {},
  results: [],
  init: function init() {
    exchangeAgencies.loadPlanData();
    exchangeAgencies.inputsDisabled();
    exchangeAgencies.addFilterEventListeners();
    exchangeAgencies.initMapAPI();
    exchangeAgencies.accessibilityDolarCheck();
    exchangeAgencies.accessibilityEuroCheck();
    exchangeAgencies.btnErrorSelectFocus();
    pagination.init();
  },
  accessibilityDolarCheck: function accessibilityDolarCheck() {
    jQuery("#checkDolar").click(function () {
      jQuery("#checkDolar").parent('.exchange-agency__checkbox').attr('aria-checked', jQuery("#checkDolar").prop('checked'));
      jQuery("#checkDolarLabel").focus();
    });
  },
  accessibilityEuroCheck: function accessibilityEuroCheck() {
    jQuery("#checkEuro").click(function () {
      jQuery("#checkEuro").parent('.exchange-agency__checkbox').attr('aria-checked', jQuery("#checkEuro").prop('checked'));
      jQuery("#checkEuroLabel").focus();
    });
  },
  btnErrorSelectFocus: function btnErrorSelectFocus() {
    jQuery(document).on('click', '.exchange-agency__select-error-message__description__text--link', function (ev) {
      var focus = jQuery(ev.target).attr('id');

      if (focus == 'state-select-focus') {
        jQuery('#select-state').focus();
      } else if (focus == 'city-select-focus') {
        jQuery('#select-city').focus();
      } else if (focus == 'neighborhood-select-focus') {
        jQuery('#select-neighborhood').focus();
      } else if (focus == 'agency-select-focus') {
        jQuery('#select-agency').focus();
      } else if (focus == 'currency-select-focus') {
        jQuery('#checkDolarLabel').focus();
      }
    });
  },
  inputsDisabled: function inputsDisabled() {
    exchangeAgencies.disabledInputs(["#select-city", "#select-neighborhood", "#select-agency"]);
  },
  addFilterEventListeners: function addFilterEventListeners() {
    jQuery("#select-state").change(function (event) {
      exchangeAgencies.clearFeedback();
      var selected = specFormer.getFormValues("#exchange-agency-search-form").state;
      exchangeAgencies.loadCitySelect(selected);
      jQuery('.exchange-agency__btn-area__btn-container > .exchange-agency__clear-button').prop("disabled", false);
      jQuery('.exchange-agency__btn-area__btn-container > .exchange-agency__clear-button').attr('aria-disabled', 'false');
      accessibility.removeDisabled("city");
      accessibility.change("state");
      exchangeAgencies.closeErrorMessage();
      specFormer.clearFieldsWithErrors();
      specFormer.clearAllInputs(["#select-city", "#select-neighborhood", "#select-agency"]);
      exchangeAgencies.disabledInputs(["#select-neighborhood", "#select-agency"]);
    });
    jQuery("#select-state").focusout(function () {
      exchangeAgencies.clearFeedback();
    });
    jQuery("#select-city").change(function (event) {
      var selected = specFormer.getFormValues("#exchange-agency-search-form").city;
      exchangeAgencies.loadNeighborhoodSelect(selected);
      accessibility.removeDisabled("neighborhood");
      accessibility.change("city");
      exchangeAgencies.closeErrorMessage();
      specFormer.clearFieldsWithErrors();
      specFormer.clearAllInputs(["#select-neighborhood", "#select-agency"]);
      exchangeAgencies.disabledInputs(["#select-agency"]);
    });
    jQuery("#select-neighborhood").change(function (event) {
      accessibility.removeDisabled("agency");
      exchangeAgencies.loadAgencySelect();
      accessibility.change("neighborhood");
      exchangeAgencies.closeErrorMessage();
      specFormer.clearFieldsWithErrors();
      specFormer.clearAllInputs(["#select-agency"]);
    });
    jQuery("#select-agency").change(function (event) {
      jQuery("#checkDolar").prop("disabled", false);
      jQuery("#checkEuro").prop("disabled", false);
      exchangeAgencies.closeErrorMessage();
      specFormer.clearFieldsWithErrors();
    });
    jQuery('.exchange-agency__btn-area__btn-container > .exchange-agency__clear-button').click(function () {
      exchangeAgencies.clearForm();
      exchangeAgencies.closeRecommendationMessage();
    });
    jQuery('.exchange-agency__btn-area__btn-container > .exchange-agency__search-button').click(function () {
      if (!exchangeAgencies.validateForm()) {
        return;
      }

      exchangeAgencies.searchAgenciesOnClick();
    });
    jQuery(document).on('keypress', ".exchange-agency-search__container-result-box__result__help-text__accordeon", function (event) {
      event.preventDefault();
      event.stopPropagation();
    }), jQuery(document).on('click', ".exchange-agency-search__container-result-box__result__help-text__accordeon", function (event) {
      var target = event.target;

      if (!jQuery(event.target).is('button')) {
        target = jQuery(event.target).closest('.exchange-agency-search__container-result-box__result__help-text__accordeon');
      }

      event.stopPropagation();
      exchangeAgencies.openAccordeonOnClick(target);
    });
  },
  applyDisabled: function applyDisabled(target) {
    if (target == "input-name") {
      jQuery("#exchange-agency-".concat(target)).prop("disabled", false);
      jQuery("#exchange-agency-".concat(target)).addClass('disabled');
      jQuery("#exchange-agency-".concat(target)).parent().addClass('disabled');
      jQuery("#exchange-agency-".concat(target)).siblings('label').addClass('disabled');
    } else {
      jQuery("#".concat("select", target)).prop("disabled", false);
      jQuery("#".concat("select", target)).addClass('disabled');
      jQuery("#".concat("select", target)).parent().addClass('disabled');
      jQuery("#".concat("select", target)).siblings('label').addClass('disabled');
    }
  },
  clearForm: function clearForm() {
    specFormer.clearAllInputs(["#select-state", "#select-city", "#select-neighborhood", "#select-agency"]);
    exchangeAgencies.disabledInputs(["#select-city", "#select-neighborhood", "#select-agency"]);
    exchangeAgencies.toggleCheckBoxerrorMessage('hide');
    jQuery('#exchange-agency--welcome').removeClass('exchange-agency-error__container--hidden');
    jQuery('#exchange-agency--not-found').addClass('exchange-agency-error__container--hidden');
    jQuery('#exchange-agency--error').addClass('exchange-agency-error__container--hidden');
    jQuery('#exchange-agency__select-error-message').hide();
    jQuery('#select-state').focus();
    jQuery('.exchange-agency__btn-area__btn-container > .exchange-agency__clear-button').prop("disabled", true);
    jQuery('#exchange-agency-search__container-result-box').hide();
    jQuery('#exchange-agency-search__container-result-box__results').html('');
    jQuery("#exchange-agency__form-feedback").html('<p>limpo</p>');
  },
  clearFeedback: function clearFeedback() {
    jQuery("#exchange-agency__form-feedback").html('');
  },
  closeRecommendationMessage: function closeRecommendationMessage() {
    jQuery('#exchange-agency__recommendation-message').html('');
    jQuery('#exchange-agency__recommendation-message').hide();
  },
  closeErrorMessage: function closeErrorMessage() {
    jQuery('.exchange-agency__select-error-message').html('');
    jQuery('.exchange-agency__select-error-message').hide();
  },
  createRecommendationMessage: function createRecommendationMessage(component, msg) {
    var html = "\n      <div class=\"".concat(component, "__recommendation-message__description\">\n        <div class=\"").concat(component, "__recommendation-message__description--icon icon-itaufonts_exclamacao\" aria-hidden=\"true\"></div>\n        <p class=\"").concat(component, "__recommendation-message__description--text\" role=\"alert\">").concat(msg, "</p>\n        <div class=\"").concat(component, "__recommendation-message__close-button\">\n          <label for=\"").concat(component, "__recommendation-message__close-button--style\" aria-hidden=\"true\" hidden>Fechar</label>\n            <button role=\"button\" \n                    aria-label=\"Fechar caixa de mensagem de recomenda\xE7\xE3o\" \n                    class=\"").concat(component, "__recommendation-message__close-button--style\" \n                    id=\"").concat(component, "__recommendation-message__close-button--style\">\n              <div  class=\"").concat(component, "__recommendation-message__close-button--style--icon icon-itaufonts_fechar\"></div>\n            </button>\n        </div>\n      </div>\n    ");
    jQuery(".exchange-agency__recommendation-message").html(html);
    jQuery('#' + component + '__recommendation-message__close-button--style').click(function () {
      exchangeAgencies.closeRecommendationMessage();
    });
    jQuery("#exchange-agency__recommendation-message").show();
  },
  createErrorMessage: function createErrorMessage() {
    var targets = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];
    var type = [{
      name: "state",
      article: "um",
      text: "estado"
    }, {
      name: "city",
      article: "uma",
      text: "cidade"
    }, {
      name: "neighborhood",
      article: "um",
      text: "bairro"
    }, {
      name: "agency",
      article: "uma",
      text: "agência"
    }, {
      name: "currency",
      article: "uma",
      text: "espécie"
    }]; //TODO: Refatorar e transformar em componente

    var errorsCount = 0;
    var errorMessages = '';
    var firstErrorToFocus = '';
    type.forEach(function (item) {
      if (targets.includes(item.name)) {
        errorsCount++;

        if (errorsCount == 1) {
          firstErrorToFocus = "#".concat(item.name, "-select-focus");
        }

        errorMessages += "\n        <div class=\"exchange-agency__select-error-message__description\" id=\"".concat(item.name, "-error\">\n          <p class=\"exchange-agency__select-error-message__description__text\">\n            <span class=\"exchange-agency__select-error-message__description__text--number\">0").concat(errorsCount, ".</span>\n            <a class=\"exchange-agency__select-error-message__description__text--link\" role=\"link\" tabindex=\"0\" id=\"").concat(item.name, "-select-focus\" aria-describedby=\"mensagem-erro\">").concat(item.text, ":</a>\n            <span class=\"exchange-agency__select-error-message__description__text--complement\" id=\"mensagem-erro\">\n              selecione ").concat(item.article, " ").concat(item.text, " para prosseguir.\n            </span>\n          </p>\n        </div>");
        jQuery(".exchange-agency__select-error-message").show();
      }
    });
    var html = "\n    <div class=\"exchange-agency__select-error-message__title\">\n      <div class=\"exchange-agency__select-error-message__title--icon icon-itaufonts_exclamacao\" aria-hidden=\"true\"></div>\n      <h3 class=\"exchange-agency__select-error-message__title--text\" role=\"alert\" id=\"exchange-agency--alert\">".concat(targets.length == 1 ? "Existe 1 erro que precisa ser corrigido" : "Existem ".concat(targets.length, " erros que precisam ser corrigidos"), "</h3>\n      <div class=\"exchange-agency__select-error-message__title__close-button\">\n        <label for=\"error-message-close-button\" aria-hidden=\"true\" hidden>Fechar</label>\n          <button role=\"button\" aria-label=\"Fechar caixa de mensagem de erro\" class=\"exchange-agency__select-error-message__title__close-button__style\" id=\"error-message-close-button\">\n            <div  class=\"exchange-agency__select-error-message__title__close-button__style--icon icon-itaufonts_fechar\"></div>\n          </button>\n      </div>\n    </div>\n    ").concat(errorMessages);
    jQuery(".exchange-agency__select-error-message").html(html);
    jQuery('#error-message-close-button').click(function () {
      exchangeAgencies.closeErrorMessage();
    });
    jQuery(firstErrorToFocus).focus();
  },
  toggleCheckBoxerrorMessage: function toggleCheckBoxerrorMessage(action) {
    if (action == 'show') {
      jQuery('.exchange-agency__period-select').children('.spec-former__form-input__error-message').removeClass('--hidden');
    } else {
      jQuery('.exchange-agency__period-select').children('.spec-former__form-input__error-message').addClass('--hidden');
    }

    jQuery('.exchange-agency__period-select').children('.spec-former__form-input__error-message').attr('aria-hidden', action == 'show' ? false : true);
  },
  initMapAPI: function initMapAPI() {
    var script = document.createElement('script');
    script.src = 'https://maps.googleapis.com/maps/api/js?key=AIzaSyCz2wKKzSJdomhfg9JJ06O0UixI8dnI30A&callback=initAgenciasCambioMap';
    script.defer = true;

    window.initAgenciasCambioMap = function () {// JS API is loaded and available
    }; // Append the 'script' element to 'head'


    document.head.appendChild(script);
  },
  loadStateSelect: function loadStateSelect() {
    var html = [];
    exchangeAgencies.agenciasData.forEach(function (item) {
      //html += exchangeComponents.selectOption(item);
      html.push({
        name: item['@nome'],
        value: item['@nome']
      });
    });
    exchangeForm.populateSelect('#select-state', html);
  },
  loadCitySelect: function loadCitySelect(state) {
    var selectedState = state;
    var html = [];
    exchangeAgencies.cityData = exchangeAgencies.agenciasData.find(function (item) {
      return item['@nome'] === selectedState;
    }).cidade;
    exchangeAgencies.cityData = [].concat(exchangeAgencies.cityData || []);
    exchangeAgencies.cityData.forEach(function (item) {
      html.push({
        name: item['@nome'],
        value: item['@nome']
      });
    });
    exchangeForm.populateSelect('#select-city', html); //exchangeAgencies.removeDisabled("City");
  },
  loadNeighborhoodSelect: function loadNeighborhoodSelect(neighborhood) {
    var selectedNeighborhood = neighborhood;
    var html = [];
    exchangeAgencies.neighborhoodData = exchangeAgencies.cityData.find(function (item) {
      return item['@nome'] === selectedNeighborhood;
    }).bairro;
    exchangeAgencies.neighborhoodData = [].concat(exchangeAgencies.neighborhoodData || []);
    html.push({
      name: 'Todos',
      value: 'all'
    });
    exchangeAgencies.neighborhoodData.forEach(function (item) {
      html.push({
        name: item['@nome'],
        value: item['@nome']
      });
    });
    exchangeForm.populateSelect('#select-neighborhood', html); //exchangeAgencies.removeDisabled("Neighborhood");
  },
  loadAgencySelect: function loadAgencySelect() {
    var html = [];
    html.push({
      name: 'Todas',
      value: 'all'
    });
    html.push({
      name: 'Pab',
      value: 'PAB'
    });
    html.push({
      name: 'Itaú',
      value: 'ITAU'
    });
    html.push({
      name: 'Itaú Personnalité',
      value: 'PERSONNALITE'
    });
    exchangeForm.populateSelect('#select-agency', html);
  },
  loadAccordeonData: function loadAccordeonData(target) {
    var agencia = jQuery(target).data("agencia");
    jQuery.jsonp({
      url: "https://ww16.itau.com.br/ws/BuscadorAgencias.asmx/BuscaAgenciaPorNumero?numero=".concat(agencia),
      dataType: 'jsonp',
      callbackParameter: 'callback',
      beforeSend: function beforeSend() {
        if (jQuery(target).parent().find('div.exchange-agency__iconLoader').length === 0) {
          jQuery(target).parent().append('<div class="exchange-agency__iconLoader"></div>');
        }
      },
      success: function success(response) {
        if (!response.d) {
          console.log("Ocorreu um erro na chamada de Agência Câmbio - Mais Informações");
          exchangeAgencies.toggleFeedbackCard("error");
        } else {
          jQuery(target).parent().find('div.exchange-agency__iconLoader').hide();
          exchangeAgencies.showAccordeonInfo(target, response.d);
        }
      }
    });
  },
  showAccordeonInfo: function showAccordeonInfo(accordeon, agencyData) {
    jQuery(accordeon).parent().append(exchangeComponents.resultCardMoreInfo(agencyData));
    exchangeAgencies.loadAccordeonMap(accordeon, agencyData);
  },
  loadAccordeonMap: function loadAccordeonMap(accordeon, agencyData) {
    var agencia = {
      lat: agencyData.Latitude,
      lng: agencyData.Longitude
    };
    var map = new google.maps.Map(document.getElementById("map-exchange-".concat(agencyData.Id)), {
      zoom: 15,
      center: agencia
    });
    var marker = new google.maps.Marker({
      position: agencia,
      map: map,
      icon: {
        url: '/etc.clientlibs/itau/components/content/find-agency/clientlib/resources/images/marker-varejo.png',
        scaledSize: new google.maps.Size(48, 48),
        origin: new google.maps.Point(0, 0),
        anchor: new google.maps.Point(0, 0)
      }
    });
    jQuery(accordeon).siblings(".exchange-agency-search__container-result-box__result__help-text__info").toggleClass("exchange-agency-search__container-result-box__result__help-text__info--flex");
  },
  loadPlanData: function loadPlanData() {
    jQuery.jsonp({
      url: "https://ww18.itau.com.br/wsInvestnet/AgenciaCambio.asmx/ConsultaAgenciaCambio",
      dataType: 'jsonp',
      callbackParameter: 'callback',
      success: function success(response) {
        exchangeAgencies.agenciasData = JSON.parse(response.d).root.itauAgenciaCambio.estado;
        exchangeAgencies.loadStateSelect();
      },
      error: function error(response) {
        exchangeAgencies.toggleFeedbackCard('error');
      }
    });
  },
  openAccordeonOnClick: function openAccordeonOnClick(target) {
    jQuery("#exchange-agency-search__container-result-box").attr('aria-live', 'off');
    jQuery(target).attr('aria-expanded', jQuery(target).attr('aria-expanded') == 'true' ? false : true);

    if (!jQuery(target).siblings(".exchange-agency-search__container-result-box__result__help-text__info").length) {
      return exchangeAgencies.loadAccordeonData(target);
    } else {
      jQuery(target).siblings(".exchange-agency-search__container-result-box__result__help-text__info").remove();
    }

    jQuery(target).siblings(".exchange-agency-search__container-result-box__result__help-text__info").toggleClass("exchange-agency-search__container-result-box__result__help-text__info--flex");
  },
  removeDisabled: function removeDisabled(target) {
    if (target == "input-name") {
      jQuery("#exchange-agency-".concat(target)).prop("disabled", false);
      jQuery("#exchange-agency-".concat(target)).removeClass("disabled");
      jQuery("#exchange-agency-".concat(target)).parent().removeClass("disabled");
      jQuery("#exchange-agency-".concat(target)).siblings('label').removeClass("disabled");
    } else {
      jQuery("#".concat("select", target)).prop("disabled", false);
      jQuery("#".concat("select", target)).removeClass("disabled");
      jQuery("#".concat("select", target)).parent().removeClass("disabled");
      jQuery("#".concat("select", target)).siblings('label').removeClass("disabled");
    }
  },
  disabledInputs: function disabledInputs(targets) {
    targets.forEach(function (target) {
      jQuery(target).attr('disabled', 'disabled');
      jQuery(target).siblings().addClass('--disabled');
      jQuery(target).removeClass('--open');
    });
  },
  searchAgenciesOnClick: function searchAgenciesOnClick() {
    var values = specFormer.getFormValues("#exchange-agency-search-form");
    jQuery("#exchange-agency-search__container-result-box").attr('aria-live', 'polite');
    exchangeAgencies.searchParams = {
      bairro: values.neighborhood,
      agencia: values.agency,
      dolar: values.dolar ? "S" : "N",
      euro: values.euro ? "S" : "N"
    };
    exchangeAgencies.createRecommendationMessage('exchange-agency', 'Recomendamos entrar em contato com a agência para confirmar a disponibilidade das espécies.');
    exchangeAgencies.toggleFeedbackCard();
    var filterByNeighborhood = exchangeAgencies.searchParams.bairro === "all" ? exchangeAgencies.neighborhoodData : exchangeAgencies.neighborhoodData.find(function (item) {
      return item['@nome'] === exchangeAgencies.searchParams.bairro;
    });
    filterByNeighborhood = [].concat(filterByNeighborhood || []);
    var filterByAgency = filterByNeighborhood.map(function (bairro) {
      bairro["agencia"] = [].concat(bairro["agencia"] || []);
      return {
        nome: bairro["@nome"],
        agencia: exchangeAgencies.searchParams.agencia === 'all' ? bairro["agencia"] : bairro["agencia"].filter(function (agencia) {
          return agencia.tipo === exchangeAgencies.searchParams.agencia;
        })
      };
    });
    var filterByCurrency = filterByAgency.map(function (item) {
      return {
        nome: item["nome"],
        agencia: item["agencia"].filter(function (agencia) {
          return agencia.dolar === exchangeAgencies.searchParams.dolar || agencia.euro === exchangeAgencies.searchParams.euro;
        })
      };
    });

    if (filterByCurrency[0].agencia[0]) {
      var removeEmptyResults = filterByCurrency.filter(function (neighborhood) {
        return neighborhood.agencia.length > 0;
      });
      exchangeAgencies.results = removeEmptyResults;
      pagination.initPaginator(exchangeAgencies.results);
      pagination.loadTopPagination();
      jQuery("#exchange-agency--not-found").addClass("exchange-agency-error__container--hidden");
      jQuery("#exchange-agency--error").addClass("exchange-agency-error__container--hidden");
    } else {
      jQuery("#exchange-agency--not-found").removeClass("exchange-agency-error__container--hidden");
      jQuery("#exchange-agency--welcome").addClass("exchange-agency-error__container--hidden");
      jQuery("#exchange-agency--error").addClass("exchange-agency-error__container--hidden");
    }
  },
  toggleFeedbackCard: function toggleFeedbackCard() {
    var card = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "";
    jQuery('#exchange-agency-search__container-result-box').hide();
    jQuery('#exchange-agency--welcome').addClass('exchange-agency-error__container--hidden');
    jQuery(".exchange-agency__feedback-card").addClass("exchange-agency-error__container--hidden");

    switch (card) {
      case 'not-found':
        jQuery("#exchange-agency-search__container-result-box__results").html("");
        jQuery("#exchange-agency--not-found").removeClass("exchange-agency-error__container--hidden");
        break;

      case 'error':
        jQuery("#exchange-agency-search__container-result-box__results").html("");
        jQuery("#exchange-agency--error").removeClass("exchange-agency-error__container--hidden");
        break;
    }
  },
  validateForm: function validateForm() {
    var values = specFormer.getFormValues("#exchange-agency-search-form");
    var stateSelectValue = values.state;
    var citySelectValue = values.city;
    var neighborhoodSelectValue = values.neighborhood;
    var agencySelectValue = values.agency;
    var hasError = false;
    var errorList = [];
    exchangeAgencies.closeErrorMessage();
    exchangeAgencies.closeRecommendationMessage();
    specFormer.clearFieldsWithErrors();
    accessibility.remove();
    exchangeAgencies.toggleCheckBoxerrorMessage('hide');
    jQuery('.exchange-agency-filter').removeClass('exchange-agency-alert');

    if (stateSelectValue == undefined || stateSelectValue == '') {
      errorList.push('state');
      specFormer.showFieldsWithErrors([{
        id: 'select-state',
        message: 'selecione um estado.'
      }]);
      accessibility.add('state');
      hasError = true;
    } else if (citySelectValue == undefined || citySelectValue == '') {
      selectValuesErrorDisplay("city");
      errorList.push('city');
      specFormer.showFieldsWithErrors([{
        id: 'select-city',
        message: 'selecione uma cidade.'
      }]);
      accessibility.add('city');
      hasError = true;
    } else if (neighborhoodSelectValue == undefined || neighborhoodSelectValue == '') {
      errorList.push('neighborhood');
      specFormer.showFieldsWithErrors([{
        id: 'select-neighborhood',
        message: 'selecione um bairro.'
      }]);
      accessibility.add('neighborhood');
      hasError = true;
    } else if (agencySelectValue == undefined || agencySelectValue == '') {
      errorList.push('agency');
      specFormer.showFieldsWithErrors([{
        id: 'select-agency',
        message: 'selecione uma agência.'
      }]);
      accessibility.add('agency');
      hasError = true;
    }

    if (!jQuery('#checkDolar').is(':checked') && !jQuery('#checkEuro').is(':checked')) {
      errorList.push('currency');
      exchangeAgencies.toggleCheckBoxerrorMessage('show');
      hasError = true;
    }

    if (hasError) {
      exchangeAgencies.createErrorMessage(errorList);
      return false;
    } else {
      jQuery("#exchange-agency--welcome").addClass('exchange-agency-error__container--hidden');
      return true;
    }
  }
};
var pagination = {
  results: [],
  dataToShow: [],
  itemsPerPage: 4,
  currentPage: 1,
  maxPages: 1,
  target: "#exchange-agency-search__container-result-box__results",
  init: function init() {
    pagination.addEventListeners();
  },
  initPaginator: function initPaginator(results) {
    pagination.results = results;
    pagination.itemsPerPage = 4;
    pagination.currentPage = 1;
    pagination.maxPages = 0;
    pagination.showPage();
  },
  addEventListeners: function addEventListeners() {
    jQuery("#exchange-agency-search__top-pagination__select").change(function (event) {
      jQuery("#exchange-agency-search__container-result-box").attr('aria-live', 'off');
      pagination.changeItemsPerPage(jQuery(event.target).val());
    });
    jQuery("#exchange-agency-search__bottom-pagination__page-select").change(function (event) {
      jQuery("#exchange-agency-search__container-result-box").attr('aria-live', 'off');
      pagination.goToPage(jQuery(event.target).val()); // document.getElementById('#exchange-agency-search__bottom-pagination__page-select').scrollIntoView();

      jQuery([document.documentElement, document.body]).animate({
        scrollTop: jQuery("#exchange-agency-search__bottom-pagination__page-select").offset().top - 200
      }, 500);
    });
    jQuery("#exchange-agency-search__bottom-pagination__previous").click(function () {
      jQuery("#exchange-agency-search__container-result-box").attr('aria-live', 'off');
      pagination.previousPage();
    });
    jQuery("#exchange-agency-search__bottom-pagination__first").click(function () {
      jQuery("#exchange-agency-search__container-result-box").attr('aria-live', 'off');
      pagination.firstPage();
    });
    jQuery("#exchange-agency-search__bottom-pagination__last").click(function () {
      jQuery("#exchange-agency-search__container-result-box").attr('aria-live', 'off');
      pagination.lastPage();
    });
    jQuery("#exchange-agency-search__bottom-pagination__next").click(function () {
      jQuery("#exchange-agency-search__container-result-box").attr('aria-live', 'off');
      pagination.nextPage();
    });
  },
  firstPage: function firstPage() {
    pagination.currentPage = 1;
    pagination.showPage();
  },
  lastPage: function lastPage() {
    pagination.currentPage = parseInt(pagination.maxPages);
    pagination.showPage();
  },
  previousPage: function previousPage() {
    pagination.currentPage = parseInt(pagination.currentPage) - 1;
    pagination.showPage();
  },
  goToPage: function goToPage(page) {
    pagination.currentPage = page;
    pagination.showPage();
  },
  nextPage: function nextPage() {
    pagination.currentPage = parseInt(pagination.currentPage) + 1;
    pagination.showPage();
  },
  changeItemsPerPage: function changeItemsPerPage(newItemsPerPage) {
    pagination.itemsPerPage = newItemsPerPage;
    pagination.showPage();
  },
  refreshPagination: function refreshPagination() {
    var currentMaxPages = pagination.maxPages;
    var resultsItems = pagination.results.length;
    var itemsCalc = pagination.currentPage * pagination.itemsPerPage;
    var itemsCount = itemsCalc > resultsItems ? resultsItems : itemsCalc;
    pagination.maxPages = Math.ceil(resultsItems / pagination.itemsPerPage);
    var maxPage = resultsItems > 1 ? "".concat(resultsItems, " items") : "".concat(resultsItems, " item");
    var itemsShow = "".concat(itemsCalc - (pagination.itemsPerPage - 1), "-").concat(itemsCount);
    jQuery("#exchange-agency-search__top-pagination__max-pages").html(maxPage);
    jQuery("#exchange-agency-search__top-pagination__items-show").html(itemsShow);
    jQuery("#exchange-agency-search__top-pagination__select").attr('aria-label', "Exibindo p\xE1gina ".concat(pagination.currentPage, " de ").concat(pagination.maxPages, ". Itens por p\xE1gina: ").concat(itemsShow, " de ").concat(maxPage));

    if (currentMaxPages != pagination.maxPages) {
      jQuery("#exchange-agency-search__bottom-pagination__page-select").html("");

      for (i = 1; i <= pagination.maxPages; i++) {
        jQuery("#exchange-agency-search__bottom-pagination__page-select").append("<option value=".concat(i, ">").concat(i, "</option>"));
      }

      return pagination.goToPage("1");
    }

    jQuery("#exchange-agency-search__bottom-pagination__page-select").val("".concat(pagination.currentPage));
    jQuery("#exchange-agency-search__bottom-pagination__page-select").attr('aria-label', "exibindo p\xE1gina ".concat(pagination.currentPage) + ' de ' + "".concat(pagination.maxPages));
    jQuery("#exchange-agency-search__bottom-pagination__total-pages").html("de ".concat(pagination.maxPages, " ").concat(pagination.maxPages == "1" ? 'página' : 'páginas'));

    if (pagination.currentPage == "1") {
      jQuery("#exchange-agency-search__bottom-pagination__previous").addClass("button--disabled");
      jQuery("#exchange-agency-search__bottom-pagination__previous").attr("aria-disabled", "true");
      jQuery("#exchange-agency-search__bottom-pagination__previous").attr("tabindex", "-1");
      jQuery("#exchange-agency-search__bottom-pagination__first").addClass("button--disabled");
      jQuery("#exchange-agency-search__bottom-pagination__first").attr("aria-disabled", "true");
      jQuery("#exchange-agency-search__bottom-pagination__first").attr("tabindex", "-1");
    } else {
      jQuery("#exchange-agency-search__bottom-pagination__previous").removeClass("button--disabled");
      jQuery("#exchange-agency-search__bottom-pagination__previous").attr("aria-disabled", "false");
      jQuery("#exchange-agency-search__bottom-pagination__previous").attr("tabindex", "0");
      jQuery("#exchange-agency-search__bottom-pagination__first").removeClass("button--disabled");
      jQuery("#exchange-agency-search__bottom-pagination__first").attr("aria-disabled", "false");
      jQuery("#exchange-agency-search__bottom-pagination__first").attr("tabindex", "0");
    }

    ;

    if (pagination.currentPage == pagination.maxPages) {
      jQuery("#exchange-agency-search__bottom-pagination__next").addClass("button--disabled");
      jQuery("#exchange-agency-search__bottom-pagination__next").attr("aria-disabled", "true");
      jQuery("#exchange-agency-search__bottom-pagination__next").attr("tabindex", "-1");
      jQuery("#exchange-agency-search__bottom-pagination__last").addClass("button--disabled");
      jQuery("#exchange-agency-search__bottom-pagination__last").attr("aria-disabled", "true");
      jQuery("#exchange-agency-search__bottom-pagination__last").attr("tabindex", "-1");
    } else {
      jQuery("#exchange-agency-search__bottom-pagination__next").removeClass("button--disabled");
      jQuery("#exchange-agency-search__bottom-pagination__next").attr("aria-disabled", "false");
      jQuery("#exchange-agency-search__bottom-pagination__next").attr("tabindex", "0");
      jQuery("#exchange-agency-search__bottom-pagination__last").removeClass("button--disabled");
      jQuery("#exchange-agency-search__bottom-pagination__last").attr("aria-disabled", "false");
      jQuery("#exchange-agency-search__bottom-pagination__last").attr("tabindex", "0");
    }

    ;

    if (pagination.currentPage == "1" && pagination.maxPages == "1") {
      jQuery("#exchange-agency-search__bottom-pagination__previous").addClass("display--none");
      jQuery("#exchange-agency-search__bottom-pagination__first").addClass("display--none");
      jQuery("#exchange-agency-search__bottom-pagination__next").addClass("display--none");
      jQuery("#exchange-agency-search__bottom-pagination__last").addClass("display--none");
      jQuery("#exchange-agency-search__bottom-pagination__page-select").addClass("display--none");
      jQuery("#exchange-agency-search__bottom-pagination .divisor").addClass("display--none");
      jQuery("#exchange-agency-search__bottom-pagination__total-pages").html("1 de 1 página");
      jQuery("#exchange-agency-search__bottom-pagination__total-pages").attr("aria-hidden", "false");
    } else {
      jQuery("#exchange-agency-search__bottom-pagination__previous").removeClass("display--none");
      jQuery("#exchange-agency-search__bottom-pagination__first").removeClass("display--none");
      jQuery("#exchange-agency-search__bottom-pagination__next").removeClass("display--none");
      jQuery("#exchange-agency-search__bottom-pagination__last").removeClass("display--none");
      jQuery("#exchange-agency-search__bottom-pagination__page-select").removeClass("display--none");
      jQuery("#exchange-agency-search__bottom-pagination .divisor").removeClass("display--none");
      jQuery("#exchange-agency-search__bottom-pagination__total-pages").attr("aria-hidden", "true");
    }
  },
  loadTopPagination: function loadTopPagination() {
    jQuery("#exchange-agency-search__top-pagination__select").html("");
    var itens = pagination.results.length;
    var selectId = "#exchange-agency-search__top-pagination__select";

    if (itens) {
      if (itens >= 1) {
        jQuery(selectId).append("<option value=\"4\">04</option>");
      }

      ;

      if (itens > 4) {
        jQuery(selectId).append("<option value=\"10\">10</option>");
      }

      ;

      if (itens > 10) {
        jQuery(selectId).append("<option value=\"20\">20</option>");
      }

      ;

      if (itens > 20) {
        jQuery(selectId).append("<option value=\"30\">30</option>");
      }

      ;

      if (itens > 30) {
        jQuery(selectId).append("<option value=\"40\">40</option>");
      }

      ;

      if (itens > 40) {
        jQuery(selectId).append("<option value=\"50\">50</option>");
      }

      ;
    }
  },
  showPage: function showPage() {
    var html = '';
    jQuery(pagination.target).html("");
    pagination.dataToShow = pagination.results.slice(pagination.currentPage * pagination.itemsPerPage - pagination.itemsPerPage, pagination.currentPage * pagination.itemsPerPage);
    pagination.dataToShow.forEach(function (item) {
      html += exchangeComponents.resultCard(item);
    });
    jQuery("#exchange-agency-search__container-result-box").show();
    jQuery(pagination.target).html(html);
    pagination.refreshPagination();
  }
};
var accessibility = {
  add: function add(target) {
    $("#".concat("select-", target)).attr("aria-describedby", "mensagem-erro");
    $("#".concat("select-", target)).attr("aria-invalid", "true");
    $(".select-error-message").attr("aria-live", "polite");
    $("#".concat(target, "-select-focus")).focus();
  },
  remove: function remove() {
    steps = ['state', 'city', 'neighborhood', 'agency'];
    steps.forEach(function (step) {
      $("#".concat("select-", step)).removeAttr("aria-describedby");
      $("#".concat("select-", step)).removeAttr("aria-invalid");
    });
    $(".select-error-message").removeAttr("aria-live");
  },
  change: function change(target) {
    isAlert = jQuery('#' + target + '-exchange-agency-filter').hasClass("exchange-agency-alert");

    if (isAlert) {
      jQuery('#' + target + '-exchange-agency-filter').removeClass('exchange-agency-alert');
      exchangeAgencies.closeErrorMessage();

      _this.remove();
    }
  },
  addDisabled: function addDisabled(target) {
    jQuery("#select-" + target).Attr("disabled", "disabled");
    jQuery("#select-" + target).Attr("aria-disabled", "true");
  },
  removeDisabled: function removeDisabled(target) {
    jQuery("#select-" + target).removeAttr("disabled");
    jQuery("#select-" + target).removeAttr("aria-disabled");
    jQuery("#select-".concat(target)).siblings('.spec-former__form-input__label').removeClass('--disabled');
    jQuery("#select-".concat(target)).siblings('.spec-former__form-input__select__icon').removeClass('--disabled');
    jQuery("#select-".concat(target)).siblings('.spec-former__form-input__select__options').removeClass('--disabled');
  }
};
jQuery(function () {
  if (jQuery(".exchange-agency").length > 0) {
    console.log("Exchange Agency Init");
    exchangeAgencies.init();
  }
});
jQuery(".exchange-agency__help-button--link").click(function () {
  window.location.href = "https://www.itau.com.br/atendimento-itau/para-voce/";
});
"use strict";

$(function () {
  $('.card-box-insurance-company').click(function () {
    $('.card-box-insurance-company').removeClass('active');
    $('.card-box-insurance-company').attr('aria-pressed', 'false');
    $(this).toggleClass('active');

    if ($(this).hasClass('active')) {
      $(this).attr('aria-pressed', 'true');
    }

    $('#financing-simulator-send').prop('disabled', false);
  });
  $("#step5 .card-box-insurance-company").keypress(function (e) {
    if (e.key === ' ' || e.key === 'Spacebar') {
      e.preventDefault();
      $('.card-box-insurance-company').removeClass('active');
      $('.card-box-insurance-company').attr('aria-pressed', 'false');
      $(this).toggleClass('active');

      if ($(this).hasClass('active')) {
        $(this).attr('aria-pressed', 'true');
      }

      $('#financing-simulator-send').prop('disabled', false);
    }
  });
});
$(".card-box-insurance-company").change(function () {});
"use strict";

$(document).ready(function () {
  $(".dateInput").val("");
  $(".floating-label .dateInput").change(function () {
    if ($(this).val() != "") {
      $(this).siblings("label").addClass("active");
    } else {
      $(this).siblings("label").removeClass("active");
    }
  });
  jQuery(function ($) {
    $.datepicker.regional['pt-BR'] = {
      showButtonPanel: true,
      closeText: 'Fechar',
      // onClose:"",
      prevText: '&#x3c;Anterior',
      nextText: 'Pr&oacute;ximo&#x3e;',
      currentText: 'Hoje',
      monthNames: ['janeiro', 'fevereiro', 'mar&ccedil;o', 'abril', 'maio', 'junho', 'julho', 'agosto', 'setembro', 'outubro', 'novembro', 'dezembro'],
      monthNamesShort: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
      dayNames: ['Domingo', 'Segunda-feira', 'Ter&ccedil;a-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'Sabado'],
      dayNamesShort: ['dom', 'seg', 'ter', 'qua', 'qui', 'sex', 'sab'],
      dayNamesMin: ['dom', 'seg', 'ter', 'qua', 'qui', 'sex', 'sab'],
      weekHeader: 'Sm',
      dateFormat: 'dd/mm/yy',
      firstDay: 0,
      isRTL: false,
      showMonthAfterYear: false,
      showOtherMonths: true,
      selectOtherMonths: false,
      yearSuffix: '',
      showOn: "button",
      buttonImage: "",
      buttonImageOnly: false,
      buttonText: "calendario"
    };
    $.datepicker.setDefaults($.datepicker.regional['pt-BR']);
    $.fn.dataTable.moment('DD/MM/YYYY');
    tableDollarTax = $('#taxTable').DataTable({
      "language": {
        "lengthMenu": "",
        "zeroRecords": "Nenhum resultado encontrado. Por favor, selecione outra data.",
        "info": "Mostrando página _PAGE_ de _PAGES_",
        "infoEmpty": "Nenhum resultado encontrado. Por favor, selecione outra data.",
        "infoFiltered": "(filtrando do total de _MAX_ registros)",
        "paginate": {
          "previous": '',
          "next": ''
        }
      },
      "drawCallback": function drawCallback(settings) {
        $('.paginate_button').each(function (index, el) {
          if (index == 0) {
            $(el).attr("aria-label", "página anterior");
          } else if (index == $('.paginate_button').length - 1) {
            $(el).attr("aria-label", "próxima página");
          } else {
            $(el).attr("aria-label", "página " + $(el).text());

            if ($(el).hasClass("current")) {
              $(el).attr("aria-pressed", "true");
            } else {
              $(el).attr("aria-pressed", "false");
            }
          }

          $(el).attr("role", "button");

          if ($(el).hasClass("disabled")) {
            $(el).attr('disabled', 'disabled');
          } else {
            $(el).removeAttr('disabled');
          }

          if (index == $('.paginate_button').length - 2 && !($('.paginate_button').length == 3 && $("#taxTable").find("tbody").eq(0).find("tr").length <= 5)) {
            $(el).attr("href", "#filtro-dolar");
          }
        });
      }
    });
  });
  $("#dateinitial").setMask("39/19/2099");
  $("#datefinal").setMask("39/19/2099");
  $("#dateinitial").change(function () {
    checkDate('initial');
    $("#datefinal").attr('disabled', false);
    $(document).find(".last .date button").prop('disabled', false);
    $("#btnClean").attr('disabled', false);

    if ($("#btnClean").prop('disabled') == false) {
      $(".fake-btnClean").removeClass('show');
      $(".fake-btnCalendar").removeClass('show');
    }
  });
  $("#dateinitial").on("keydown", function (e) {
    if (e.which != 8 && e.which != 9 && e.which != 13) {
      if (setMaskType(e.which, $(this).val().length, $(this).val())) {} else {
        e.preventDefault();
      }
    }
  });
  $("#datefinal").on("keydown", function (e) {
    if (e.which != 8 && e.which != 9 && e.which != 13) {
      if (setMaskType(e.which, $(this).val().length, $(this).val())) {} else {
        e.preventDefault();
      }
    }
  });
  $("#datefinal").change(function () {
    if ($("#btn").prop('disabled') == true) {
      $(".fake-btn").removeClass('show');
    }

    if (validateDate(this.value) && validMinimumPeriod(this.value)) {
      $("#btn").attr("enabled", true);
      $("#btn").attr('disabled', false);
    }
  });
  $("#btn").siblings().click(function () {
    if (checkDate('initial')) {
      checkDate('final');
    }
  });
  $(document).find(".last .date button").siblings().click(function () {
    if (checkDate('initial')) {
      checkDate('final');
    }
  });
  $("#datefinal").parent().click(function () {
    checkDate('initial');
  });
  $("#btnClean").click(function () {
    $("#dateinitial").val("");
    $("#datefinal").val("");
    $("#datefinal").attr('disabled', true);
    $(".fake-btnCalendar").addClass('show');
    $(".error-initial").html('&nbsp;');
    $(".data-initial-text").removeClass('color-roxo');
    $(".error-final").html('&nbsp;');
    $(".data-final-text").removeClass('color-roxo');
    $(".table-container").hide();
    $(".fake-btn").addClass('show');
    $("#btn").attr('disabled', true);
  });
  $("#btnClean").on("focus", function () {
    $("#btnClean").attr("enabled", true);
  });
  $("#btn").click(function () {
    filterPeriod();
  });
  var returnService = [];
  var tableDollarTax;
  $("#btn").siblings().click(function () {
    filterPeriod();
  });

  function filterPeriod() {
    var dinicio = $("#dateinitial").val();
    var diaIni = dinicio.split("/")[0];
    var mesIni = dinicio.split("/")[1];
    var anoIni = dinicio.split("/")[2];
    var dtInicioService = anoIni + "-" + mesIni + "-" + diaIni;
    var dfim = $("#datefinal").val();
    var diaFim = dfim.split("/")[0];
    var mesFim = dfim.split("/")[1];
    var anoFim = dfim.split("/")[2];
    var dtFimService = anoFim + "-" + mesFim + "-" + diaFim;
    var listDolar = [];
    $.ajax({
      url: "/bin/itaudollartaxservlet",
      type: "GET",
      data: "dataInicio=" + dtInicioService + "&dataFim=" + dtFimService,
      success: function success(res) {
        returnService = [];
        listDolar = JSON.parse(res);

        for (var count = 0; count < listDolar.data.length; count++) {
          var ret = [];
          var dataApi = listDolar.data[count].data_cotacao.split("-");
          var data = dataApi[2] + '/' + dataApi[1] + '/' + dataApi[0];
          ret.push(data);
          ret.push(listDolar.data[count].valor_cotacao.replace(".", ","));
          returnService.push(ret);
        }

        updateTable();
        setTimeout(function () {
          if (listDolar.data.length == 0) $('.next').addClass('disabled');
        }, 100);
      }
    });
  }

  function updateTable() {
    tableDollarTax.clear();
    tableDollarTax.rows.add(returnService).draw();
    $(".table-container").show();
  }

  $(function () {
    $("#datefinal").prop("disabled", true);
    var dateFormat = "dd-mm-yy",
        dIni = $("#dateinitial").datepicker({
      defaultDate: "dateNow",
      dateFormat: "dd/mm/yy",
      minDate: new Date(2020, 3 - 1, 1),
      maxDate: "-1d",
      changeMonth: false,
      numberOfMonths: 1,
      onChangeMonthYear: function onChangeMonthYear() {
        setTimeout(function () {
          setAriaLabelCalendar();
          eventClickOnEnter();
          calendarKeyboardListener();
          $(".ui-datepicker-next").focus();
        }, 100);
      }
    }).on("change", function () {
      dFim.datepicker("option", "minDate", $("#dateinitial").datepicker('getDate'));
      dFim.datepicker("option", "defaultDate", $("#dateinitial").datepicker('getDate'));
      dFim.datepicker("option", "maxDate", subDate(this));
      setTimeout(function () {
        if (checkDate('initial')) {
          $(".dataTexto.first").find("button")[0].focus();
        } else if (checkDate('initial')) {
          $(".dataTexto.last").find("input")[0].focus();
        } else {
          setTimeout(function () {
            $(".error-initial").focus();
          }, 100);
        }

        eventClickOnEnter();
        calendarKeyboardListener();
      }, 250);
    }).on("focus", function () {
      setAriaLabelCalendar();
      setTimeout(function () {
        $("button.ui-state-hover,button.ui-state-active").focus();
        eventClickOnEnter();
        calendarKeyboardListener();
        eventsListeners();
      }, 100);
    }),
        dFim = $("#datefinal").datepicker({
      dateFormat: "dd/mm/yy",
      changeMonth: false,
      numberOfMonths: 1,
      onChangeMonthYear: function onChangeMonthYear() {
        setTimeout(function () {
          setAriaLabelCalendar();
          eventClickOnEnter();
          calendarKeyboardListener();
          $(".ui-datepicker-next").focus();
        }, 100);
      }
    }).on("change", function () {
      setTimeout(function () {
        if (checkDate('final')) {
          $(".dataTexto.last").find("button")[0].focus();
        } else {
          setTimeout(function () {
            $(".error-final").focus();
          }, 100);
        }

        eventClickOnEnter();
        calendarKeyboardListener();
      }, 200);
    }).on("focus", function () {
      setAriaLabelCalendar();
      setTimeout(function () {
        $("button.ui-state-hover,button.ui-state-active").focus();
        eventClickOnEnter();
        calendarKeyboardListener();
      }, 100);
    });
    setTimeout(function () {
      $(document).find(".last .date button").prop('disabled', true);
    }, 100);
    $('#ui-datepicker-div').addClass("datepicker-dolar-valor");

    function subDate(element) {
      var dtInicio = Date.parse($("#dateinitial").datepicker('getDate'));
      var today = new Date();
      var date = new Date(dtInicio);
      var msDiff = Math.abs(today.getTime() - date.getTime());
      var days = Math.ceil(msDiff / (1000 * 60 * 60 * 24));
      var diffDays = Math.floor(days) - 60;

      if (diffDays > 0) {
        return -diffDays;
      } else {
        return -1;
      }
    }

    ;
  });

  function eventClickOnEnter() {
    $(".ui-datepicker-next").attr("tabindex", "0");
    $('button.ui-datepicker-prev').focus();

    if (!$(".ui-datepicker-next").hasClass("ui-state-disabled")) {
      $(".ui-datepicker-next").keyup(function (event) {
        if (event.keyCode == 13) {
          $(".ui-datepicker-next").trigger('click');
        }
      });
    }

    $(".ui-datepicker-prev").attr("tabindex", "0");

    if (!$(".ui-datepicker-prev").hasClass("ui-state-disabled")) {
      $(".ui-datepicker-prev").keyup(function (event) {
        if (event.keyCode == 13) {
          $(".ui-datepicker-prev").trigger('click');
        }
      });
    }
  }
});

function setAriaLabelCalendar() {
  $("a.ui-datepicker-prev").attr('aria-label', 'mês anterior');
  $("a.ui-datepicker-next").attr('aria-label', 'próximo mês');
  $("a.ui-state-default").each(function (index, day) {
    var buttonEl = "<button type='button'";
    buttonEl += "aria-label='" + "dia " + $(this).text() + " de " + $(".ui-datepicker-month").text() + " de " + $(".ui-datepicker-year").text() + " - selecionar data'";
    buttonEl += "class='" + $(this).attr('class') + "'>";
    buttonEl += "<a class='" + $(this).attr('class') + "'>" + $(this).text() + "</a>";
    buttonEl += "</button>";

    if ($(this).parent().is('button')) {
      $(this).parent().replaceWith(buttonEl);
    } else {
      $(this).replaceWith(buttonEl);
    }
  });
}

function checkDate(type) {
  if (type == 'initial' || type == 'final') {
    var date = $("#date" + type).val();

    if (typeof date == null || date == '') {
      $(".error-" + type).removeAttr('aria-hidden');
      $(".error-" + type).html('<i class="icon-itaufonts_exclamacao"></i> escolha uma data');
      $(".data-" + type + "-text").addClass('color-roxo');
      return false;
    } else if (validateDate(date) && !validMinimumPeriod(date)) {
      $(".error-" + type).removeAttr('aria-hidden');
      $(".error-" + type).html('<i class="icon-itaufonts_exclamacao"></i> insira uma data a partir de 01/03/2020');
      $(".data-" + type + "-text").addClass('color-roxo');
      return false;
    } else if (!validateDate(date)) {
      $(".error-" + type).removeAttr('aria-hidden');
      $(".error-" + type).html('<i class="icon-itaufonts_exclamacao"></i> insira uma data válida');
      $(".data-" + type + "-text").addClass('color-roxo');
      return false;
    } else if (checkDateInitialGreaterThanFinal() && type != 'initial') {
      $(".error-" + type).removeAttr('aria-hidden');
      $(".error-final").html('<i class="icon-itaufonts_exclamacao"></i> a data final não pode ser anterior a data inicial');
      $(".data-final-text").addClass('color-roxo');
      $(".filterTabela").attr('disabled', true);
      return false;
    } else {
      $(".error-" + type).removeAttr('tabindex');
      $(".error-" + type).attr('aria-hidden', true);
      $(".error-" + type).html('&nbsp;');
      $(".data-" + type + "-text").removeClass('color-roxo');
      return true;
    }
  } else {
    return false;
  }
}

function validateDate(date) {
  var RegExPattern = /^((((0?[1-9]|[12]\d|3[01])[\.\-\/](0?[13578]|1[02])[\.\-\/]((1[6-9]|[2-9]\d)?\d{2}))|((0?[1-9]|[12]\d|30)[\.\-\/](0?[13456789]|1[012])[\.\-\/]((1[6-9]|[2-9]\d)?\d{2}))|((0?[1-9]|1\d|2[0-8])[\.\-\/]0?2[\.\-\/]((1[6-9]|[2-9]\d)?\d{2}))|(29[\.\-\/]0?2[\.\-\/]((1[6-9]|[2-9]\d)?(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00)|00)))|(((0[1-9]|[12]\d|3[01])(0[13578]|1[02])((1[6-9]|[2-9]\d)?\d{2}))|((0[1-9]|[12]\d|30)(0[13456789]|1[012])((1[6-9]|[2-9]\d)?\d{2}))|((0[1-9]|1\d|2[0-8])02((1[6-9]|[2-9]\d)?\d{2}))|(2902((1[6-9]|[2-9]\d)?(0[48]|[2468][048]|[13579][26])|((16|[2468][048]|[3579][26])00)|00))))$/;

  if (!(date.match(RegExPattern) && date != '')) {
    return false;
  } else {
    return true;
  }
}

function validMinimumPeriod(date) {
  var cutDate = date.split('/');
  var day = Number(cutDate[0]);
  var month = Number(cutDate[1] - 1);
  var year = Number(cutDate[2]);
  var minDate = new Date(2020, 3 - 1, 1);
  var today = new Date(year, month, day);
  if (today.getTime() < minDate.getTime()) return false;else return true;
}

function checkDateInitialGreaterThanFinal() {
  var date_inicio = $('#dateinitial').val().split('/');
  var date_final = $('#datefinal').val().split('/');
  date_inicio = new Date(date_inicio[2], date_inicio[1] - 1, date_inicio[0]).getTime();
  date_final = new Date(date_final[2], date_final[1] - 1, date_final[0]).getTime();
  return date_inicio > date_final;
}

function setMaskType(keyCode, inputValueLength, inputValue) {
  var isValid = true; // dia

  if (inputValueLength == 0 && (keyCode == 48 && keyCode == 96 || keyCode == 49 && keyCode == 97 || keyCode == 50 && keyCode == 98 || keyCode == 51)) isValid = true;

  if (inputValueLength == 1) {
    if (inputValue[0] == 0 && keyCode == 48 && keyCode == 96) isValid = false;
    if (inputValue[0] == 3 && keyCode != 48 && keyCode != 96 && keyCode != 49 && keyCode != 97) isValid = false;
  } // mes


  if (inputValueLength == 3 && (keyCode == 48 && keyCode == 96 || keyCode == 49 && keyCode == 97)) isValid = false;

  if (inputValueLength == 4) {
    if (inputValue[3] == 0 && keyCode == 48 && keyCode != 96) isValid = false;
    if (inputValue[3] == 1 && keyCode != 48 && keyCode != 96 && keyCode != 49 && keyCode != 97 && keyCode != 50 && keyCode != 98) isValid = false;
  } // ano


  var currentYear = new Date().getFullYear().toString();
  if (inputValueLength == 5 && keyCode != 50 && keyCode != 98) isValid = false;
  if (inputValueLength == 7 && keyCode != 48 && keyCode != 96) isValid = false;

  if (inputValueLength == 8) {
    var getKeyCode = {
      "2": {
        "valueNum": "50",
        "valuePad": "98"
      },
      "3": {
        "valueNum": "51",
        "valuePad": "99"
      },
      "4": {
        "valueNum": "52",
        "valuePad": "100"
      }
    };
    if (keyCode != getKeyCode[currentYear[2]].valueNum && keyCode != getKeyCode[currentYear[2]].valuePad) isValid = false;
  }

  if (inputValueLength == 9 && keyCode != 48 && keyCode != 96) isValid = false;
  return isValid;
}

function eventsListeners() {
  window.addEventListener('mousedown', function (e) {
    e.stopPropagation();
  }, true);
  $(document).on('keydown', function (e) {
    if (27 === e.which) {
      e.stopPropagation();
      closeDatepicker();
    }
  });
}

function calendarKeyboardListener() {
  var container = document.getElementById('ui-datepicker-div'); // $(container).on('keydown', function (keyVent) {

  container.setAttribute('role', 'application');
  container.addEventListener("keydown", function (keyVent) {
    var which = keyVent.which;
    var target = keyVent.target;

    if (which === 9 && keyVent.shiftKey) {
      // SHIFT + TAB
      keyVent.preventDefault();

      if ($(target).find('a').eq(0).hasClass('ui-state-default')) {
        $('.ui-datepicker-next').focus();
      } else if ($(target).hasClass('ui-datepicker-next')) {
        $('.ui-datepicker-prev').focus();
      } else if ($(target).hasClass('ui-datepicker-prev')) {
        //$('button.ui-state-default').eq($('button.ui-state-default').length - 1).focus();
        $('button.ui-datepicker-close').focus();
      } else if ($(target).hasClass('ui-datepicker-close')) {
        $('button.ui-state-default').first().focus();
      }
    } else if (which === 9) {
      // TAB
      keyVent.preventDefault();

      if ($(target).hasClass('ui-datepicker-prev')) {
        $('.ui-datepicker-next').focus();
      } else if ($(target).hasClass('ui-datepicker-next')) {
        $('button.ui-state-default').first().focus();
      } else if ($(target).hasClass('ui-datepicker-close')) {
        $('.ui-datepicker-prev').focus();
      } else if ($(target).hasClass('ui-state-default')) {
        $('button.ui-datepicker-close').focus();
      }
    } else if (which === 37) {
      // LEFT arrow key
      if (!$(target).hasClass('.ui-state-default')) {
        keyVent.preventDefault();
        keyVent.Handled = true;
        diaAnterior(target);
      }
    } else if (which === 39) {
      // RIGHT arrow key
      if (!$(target).hasClass('.ui-state-default')) {
        keyVent.preventDefault();
        keyVent.Handled = true;
        proximoDia(target);
      }
    } else if (which === 38) {
      // UP arrow key
      if (!$(target).hasClass('.ui-state-default')) {
        keyVent.preventDefault();
        keyVent.Handled = true;
        handlerCima(target, container);
      }
    } else if (which === 40) {
      // DOWN arrow key
      if (!$(target).hasClass('.ui-state-default')) {
        keyVent.preventDefault();
        keyVent.Handled = true;
        handlerBaixo(target, container);
      }
    }

    $(".ui-datepicker-current").hide();
  });
}

function diaAnterior(dateLink) {
  var container = document.getElementById('ui-datepicker-div');

  if (!dateLink) {
    return;
  }

  var td = $(dateLink).closest('td');

  if (!td) {
    return;
  }

  var prevTd = $(td).prev(),
      prevDateLink = $('button.ui-state-default', prevTd)[0];

  if (prevTd && prevDateLink) {
    $(prevDateLink).focus();
  } else {
    handleAnterior(dateLink);
  }
}

function handleAnterior(target) {
  var container = document.getElementById('ui-datepicker-div');

  if (!target) {
    return;
  }

  var currentRow = $(target).closest('tr');

  if (!currentRow) {
    return;
  }

  var previousRow = $(currentRow).prev();

  if (!previousRow || previousRow.length === 0) {} else {
    var prevRowDates = $('button.ui-state-default', previousRow);
    var prevRowDate = prevRowDates[prevRowDates.length - 1];

    if (prevRowDate) {
      setTimeout(function () {
        prevRowDate.focus();
      }, 0);
    }
  }
}

function proximoDia(dateLink) {
  var container = document.getElementById('ui-datepicker-div');

  if (!dateLink) {
    return;
  }

  var td = $(dateLink).closest('td');

  if (!td) {
    return;
  }

  var nextTd = $(td).next(),
      nextDateLink = $('button.ui-state-default', nextTd)[0];

  if (nextTd && nextDateLink) {
    nextDateLink.focus();
  } else {
    handleProximo(dateLink);
  }
}

function handleProximo(target) {
  var container = document.getElementById('ui-datepicker-div');

  if (!target) {
    return;
  }

  var currentRow = $(target).closest('tr'),
      nextRow = $(currentRow).next();

  if (!nextRow || nextRow.length === 0) {
    proximoMes();
  } else {
    var nextRowFirstDate = $('button.ui-state-default', nextRow)[0];

    if (nextRowFirstDate) {
      nextRowFirstDate.focus();
    }
  }
}

function handlerBaixo(target, cont, nextLink) {
  var targetRow = $(target).closest('tr');

  if (!targetRow) {
    return;
  }

  var targetCells = $('td', targetRow),
      cellIndex = $.inArray(target.parentNode, targetCells),
      // the td (parent of target) index
  nextRow = $(targetRow).next(),
      nextRowCells = $('td', nextRow),
      nextWeekTd = nextRowCells[cellIndex],
      nextWeekCheck = $('button.ui-state-default', nextWeekTd)[0];

  if (nextRow && nextWeekTd && nextWeekCheck) {
    nextWeekCheck.focus();
  }
}

function handlerCima(target, cont, prevLink) {
  var rowContext = $(target).closest('tr');

  if (!rowContext) {
    return;
  }

  var rowTds = $('td', rowContext),
      rowLinks = $('button.ui-state-default', rowContext),
      targetIndex = $.inArray(target, rowLinks),
      prevRow = $(rowContext).prev(),
      prevRowTds = $('td', prevRow),
      parallel = prevRowTds[targetIndex],
      linkCheck = $('button.ui-state-default', parallel)[0];

  if (prevRow && parallel && linkCheck) {
    linkCheck.focus();
  }
}

function closeDatepicker() {
  if ($("#ui-datepicker-div").is(":visible")) {
    $("#ui-datepicker-div").toggle();
    $(".dataTexto").find("input").focus();
  }
}
//! moment.js

;
(function(global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
        typeof define === 'function' && define.amd ? define(factory) :
        global.moment = factory()
}(this, (function() {
    'use strict';

    var hookCallback;

    function hooks() {
        return hookCallback.apply(null, arguments);
    }

    // This is done to register the method called with moment()
    // without creating circular dependencies.
    function setHookCallback(callback) {
        hookCallback = callback;
    }

    function isArray(input) {
        return input instanceof Array || Object.prototype.toString.call(input) === '[object Array]';
    }

    function isObject(input) {
        // IE8 will treat undefined and null as object if it wasn't for
        // input != null
        return input != null && Object.prototype.toString.call(input) === '[object Object]';
    }

    function isObjectEmpty(obj) {
        if (Object.getOwnPropertyNames) {
            return (Object.getOwnPropertyNames(obj).length === 0);
        } else {
            var k;
            for (k in obj) {
                if (obj.hasOwnProperty(k)) {
                    return false;
                }
            }
            return true;
        }
    }

    function isUndefined(input) {
        return input === void 0;
    }

    function isNumber(input) {
        return typeof input === 'number' || Object.prototype.toString.call(input) === '[object Number]';
    }

    function isDate(input) {
        return input instanceof Date || Object.prototype.toString.call(input) === '[object Date]';
    }

    function map(arr, fn) {
        var res = [],
            i;
        for (i = 0; i < arr.length; ++i) {
            res.push(fn(arr[i], i));
        }
        return res;
    }

    function hasOwnProp(a, b) {
        return Object.prototype.hasOwnProperty.call(a, b);
    }

    function extend(a, b) {
        for (var i in b) {
            if (hasOwnProp(b, i)) {
                a[i] = b[i];
            }
        }

        if (hasOwnProp(b, 'toString')) {
            a.toString = b.toString;
        }

        if (hasOwnProp(b, 'valueOf')) {
            a.valueOf = b.valueOf;
        }

        return a;
    }

    function createUTC(input, format, locale, strict) {
        return createLocalOrUTC(input, format, locale, strict, true).utc();
    }

    function defaultParsingFlags() {
        // We need to deep clone this object.
        return {
            empty: false,
            unusedTokens: [],
            unusedInput: [],
            overflow: -2,
            charsLeftOver: 0,
            nullInput: false,
            invalidMonth: null,
            invalidFormat: false,
            userInvalidated: false,
            iso: false,
            parsedDateParts: [],
            meridiem: null,
            rfc2822: false,
            weekdayMismatch: false
        };
    }

    function getParsingFlags(m) {
        if (m._pf == null) {
            m._pf = defaultParsingFlags();
        }
        return m._pf;
    }

    var some;
    if (Array.prototype.some) {
        some = Array.prototype.some;
    } else {
        some = function(fun) {
            var t = Object(this);
            var len = t.length >>> 0;

            for (var i = 0; i < len; i++) {
                if (i in t && fun.call(this, t[i], i, t)) {
                    return true;
                }
            }

            return false;
        };
    }

    function isValid(m) {
        if (m._isValid == null) {
            var flags = getParsingFlags(m);
            var parsedParts = some.call(flags.parsedDateParts, function(i) {
                return i != null;
            });
            var isNowValid = !isNaN(m._d.getTime()) &&
                flags.overflow < 0 &&
                !flags.empty &&
                !flags.invalidMonth &&
                !flags.invalidWeekday &&
                !flags.weekdayMismatch &&
                !flags.nullInput &&
                !flags.invalidFormat &&
                !flags.userInvalidated &&
                (!flags.meridiem || (flags.meridiem && parsedParts));

            if (m._strict) {
                isNowValid = isNowValid &&
                    flags.charsLeftOver === 0 &&
                    flags.unusedTokens.length === 0 &&
                    flags.bigHour === undefined;
            }

            if (Object.isFrozen == null || !Object.isFrozen(m)) {
                m._isValid = isNowValid;
            } else {
                return isNowValid;
            }
        }
        return m._isValid;
    }

    function createInvalid(flags) {
        var m = createUTC(NaN);
        if (flags != null) {
            extend(getParsingFlags(m), flags);
        } else {
            getParsingFlags(m).userInvalidated = true;
        }

        return m;
    }

    // Plugins that add properties should also add the key here (null value),
    // so we can properly clone ourselves.
    var momentProperties = hooks.momentProperties = [];

    function copyConfig(to, from) {
        var i, prop, val;

        if (!isUndefined(from._isAMomentObject)) {
            to._isAMomentObject = from._isAMomentObject;
        }
        if (!isUndefined(from._i)) {
            to._i = from._i;
        }
        if (!isUndefined(from._f)) {
            to._f = from._f;
        }
        if (!isUndefined(from._l)) {
            to._l = from._l;
        }
        if (!isUndefined(from._strict)) {
            to._strict = from._strict;
        }
        if (!isUndefined(from._tzm)) {
            to._tzm = from._tzm;
        }
        if (!isUndefined(from._isUTC)) {
            to._isUTC = from._isUTC;
        }
        if (!isUndefined(from._offset)) {
            to._offset = from._offset;
        }
        if (!isUndefined(from._pf)) {
            to._pf = getParsingFlags(from);
        }
        if (!isUndefined(from._locale)) {
            to._locale = from._locale;
        }

        if (momentProperties.length > 0) {
            for (i = 0; i < momentProperties.length; i++) {
                prop = momentProperties[i];
                val = from[prop];
                if (!isUndefined(val)) {
                    to[prop] = val;
                }
            }
        }

        return to;
    }

    var updateInProgress = false;

    // Moment prototype object
    function Moment(config) {
        copyConfig(this, config);
        this._d = new Date(config._d != null ? config._d.getTime() : NaN);
        if (!this.isValid()) {
            this._d = new Date(NaN);
        }
        // Prevent infinite loop in case updateOffset creates new moment
        // objects.
        if (updateInProgress === false) {
            updateInProgress = true;
            hooks.updateOffset(this);
            updateInProgress = false;
        }
    }

    function isMoment(obj) {
        return obj instanceof Moment || (obj != null && obj._isAMomentObject != null);
    }

    function absFloor(number) {
        if (number < 0) {
            // -0 -> 0
            return Math.ceil(number) || 0;
        } else {
            return Math.floor(number);
        }
    }

    function toInt(argumentForCoercion) {
        var coercedNumber = +argumentForCoercion,
            value = 0;

        if (coercedNumber !== 0 && isFinite(coercedNumber)) {
            value = absFloor(coercedNumber);
        }

        return value;
    }

    // compare two arrays, return the number of differences
    function compareArrays(array1, array2, dontConvert) {
        var len = Math.min(array1.length, array2.length),
            lengthDiff = Math.abs(array1.length - array2.length),
            diffs = 0,
            i;
        for (i = 0; i < len; i++) {
            if ((dontConvert && array1[i] !== array2[i]) ||
                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {
                diffs++;
            }
        }
        return diffs + lengthDiff;
    }

    function warn(msg) {
        if (hooks.suppressDeprecationWarnings === false &&
            (typeof console !== 'undefined') && console.warn) {
            console.warn('Deprecation warning: ' + msg);
        }
    }

    function deprecate(msg, fn) {
        var firstTime = true;

        return extend(function() {
            if (hooks.deprecationHandler != null) {
                hooks.deprecationHandler(null, msg);
            }
            if (firstTime) {
                var args = [];
                var arg;
                for (var i = 0; i < arguments.length; i++) {
                    arg = '';
                    if (typeof arguments[i] === 'object') {
                        arg += '\n[' + i + '] ';
                        for (var key in arguments[0]) {
                            arg += key + ': ' + arguments[0][key] + ', ';
                        }
                        arg = arg.slice(0, -2); // Remove trailing comma and space
                    } else {
                        arg = arguments[i];
                    }
                    args.push(arg);
                }
                warn(msg + '\nArguments: ' + Array.prototype.slice.call(args).join('') + '\n' + (new Error()).stack);
                firstTime = false;
            }
            return fn.apply(this, arguments);
        }, fn);
    }

    var deprecations = {};

    function deprecateSimple(name, msg) {
        if (hooks.deprecationHandler != null) {
            hooks.deprecationHandler(name, msg);
        }
        if (!deprecations[name]) {
            warn(msg);
            deprecations[name] = true;
        }
    }

    hooks.suppressDeprecationWarnings = false;
    hooks.deprecationHandler = null;

    function isFunction(input) {
        return input instanceof Function || Object.prototype.toString.call(input) === '[object Function]';
    }

    function set(config) {
        var prop, i;
        for (i in config) {
            prop = config[i];
            if (isFunction(prop)) {
                this[i] = prop;
            } else {
                this['_' + i] = prop;
            }
        }
        this._config = config;
        // Lenient ordinal parsing accepts just a number in addition to
        // number + (possibly) stuff coming from _dayOfMonthOrdinalParse.
        // TODO: Remove "ordinalParse" fallback in next major release.
        this._dayOfMonthOrdinalParseLenient = new RegExp(
            (this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) +
            '|' + (/\d{1,2}/).source);
    }

    function mergeConfigs(parentConfig, childConfig) {
        var res = extend({}, parentConfig),
            prop;
        for (prop in childConfig) {
            if (hasOwnProp(childConfig, prop)) {
                if (isObject(parentConfig[prop]) && isObject(childConfig[prop])) {
                    res[prop] = {};
                    extend(res[prop], parentConfig[prop]);
                    extend(res[prop], childConfig[prop]);
                } else if (childConfig[prop] != null) {
                    res[prop] = childConfig[prop];
                } else {
                    delete res[prop];
                }
            }
        }
        for (prop in parentConfig) {
            if (hasOwnProp(parentConfig, prop) &&
                !hasOwnProp(childConfig, prop) &&
                isObject(parentConfig[prop])) {
                // make sure changes to properties don't modify parent config
                res[prop] = extend({}, res[prop]);
            }
        }
        return res;
    }

    function Locale(config) {
        if (config != null) {
            this.set(config);
        }
    }

    var keys;

    if (Object.keys) {
        keys = Object.keys;
    } else {
        keys = function(obj) {
            var i, res = [];
            for (i in obj) {
                if (hasOwnProp(obj, i)) {
                    res.push(i);
                }
            }
            return res;
        };
    }

    var defaultCalendar = {
        sameDay: '[Today at] LT',
        nextDay: '[Tomorrow at] LT',
        nextWeek: 'dddd [at] LT',
        lastDay: '[Yesterday at] LT',
        lastWeek: '[Last] dddd [at] LT',
        sameElse: 'L'
    };

    function calendar(key, mom, now) {
        var output = this._calendar[key] || this._calendar['sameElse'];
        return isFunction(output) ? output.call(mom, now) : output;
    }

    var defaultLongDateFormat = {
        LTS: 'h:mm:ss A',
        LT: 'h:mm A',
        L: 'MM/DD/YYYY',
        LL: 'MMMM D, YYYY',
        LLL: 'MMMM D, YYYY h:mm A',
        LLLL: 'dddd, MMMM D, YYYY h:mm A'
    };

    function longDateFormat(key) {
        var format = this._longDateFormat[key],
            formatUpper = this._longDateFormat[key.toUpperCase()];

        if (format || !formatUpper) {
            return format;
        }

        this._longDateFormat[key] = formatUpper.replace(/MMMM|MM|DD|dddd/g, function(val) {
            return val.slice(1);
        });

        return this._longDateFormat[key];
    }

    var defaultInvalidDate = 'Invalid date';

    function invalidDate() {
        return this._invalidDate;
    }

    var defaultOrdinal = '%d';
    var defaultDayOfMonthOrdinalParse = /\d{1,2}/;

    function ordinal(number) {
        return this._ordinal.replace('%d', number);
    }

    var defaultRelativeTime = {
        future: 'in %s',
        past: '%s ago',
        s: 'a few seconds',
        ss: '%d seconds',
        m: 'a minute',
        mm: '%d minutes',
        h: 'an hour',
        hh: '%d hours',
        d: 'a day',
        dd: '%d days',
        M: 'a month',
        MM: '%d months',
        y: 'a year',
        yy: '%d years'
    };

    function relativeTime(number, withoutSuffix, string, isFuture) {
        var output = this._relativeTime[string];
        return (isFunction(output)) ?
            output(number, withoutSuffix, string, isFuture) :
            output.replace(/%d/i, number);
    }

    function pastFuture(diff, output) {
        var format = this._relativeTime[diff > 0 ? 'future' : 'past'];
        return isFunction(format) ? format(output) : format.replace(/%s/i, output);
    }

    var aliases = {};

    function addUnitAlias(unit, shorthand) {
        var lowerCase = unit.toLowerCase();
        aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;
    }

    function normalizeUnits(units) {
        return typeof units === 'string' ? aliases[units] || aliases[units.toLowerCase()] : undefined;
    }

    function normalizeObjectUnits(inputObject) {
        var normalizedInput = {},
            normalizedProp,
            prop;

        for (prop in inputObject) {
            if (hasOwnProp(inputObject, prop)) {
                normalizedProp = normalizeUnits(prop);
                if (normalizedProp) {
                    normalizedInput[normalizedProp] = inputObject[prop];
                }
            }
        }

        return normalizedInput;
    }

    var priorities = {};

    function addUnitPriority(unit, priority) {
        priorities[unit] = priority;
    }

    function getPrioritizedUnits(unitsObj) {
        var units = [];
        for (var u in unitsObj) {
            units.push({ unit: u, priority: priorities[u] });
        }
        units.sort(function(a, b) {
            return a.priority - b.priority;
        });
        return units;
    }

    function zeroFill(number, targetLength, forceSign) {
        var absNumber = '' + Math.abs(number),
            zerosToFill = targetLength - absNumber.length,
            sign = number >= 0;
        return (sign ? (forceSign ? '+' : '') : '-') +
            Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) + absNumber;
    }

    var formattingTokens = /(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;

    var localFormattingTokens = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;

    var formatFunctions = {};

    var formatTokenFunctions = {};

    // token:    'M'
    // padded:   ['MM', 2]
    // ordinal:  'Mo'
    // callback: function () { this.month() + 1 }
    function addFormatToken(token, padded, ordinal, callback) {
        var func = callback;
        if (typeof callback === 'string') {
            func = function() {
                return this[callback]();
            };
        }
        if (token) {
            formatTokenFunctions[token] = func;
        }
        if (padded) {
            formatTokenFunctions[padded[0]] = function() {
                return zeroFill(func.apply(this, arguments), padded[1], padded[2]);
            };
        }
        if (ordinal) {
            formatTokenFunctions[ordinal] = function() {
                return this.localeData().ordinal(func.apply(this, arguments), token);
            };
        }
    }

    function removeFormattingTokens(input) {
        if (input.match(/\[[\s\S]/)) {
            return input.replace(/^\[|\]$/g, '');
        }
        return input.replace(/\\/g, '');
    }

    function makeFormatFunction(format) {
        var array = format.match(formattingTokens),
            i, length;

        for (i = 0, length = array.length; i < length; i++) {
            if (formatTokenFunctions[array[i]]) {
                array[i] = formatTokenFunctions[array[i]];
            } else {
                array[i] = removeFormattingTokens(array[i]);
            }
        }

        return function(mom) {
            var output = '',
                i;
            for (i = 0; i < length; i++) {
                output += isFunction(array[i]) ? array[i].call(mom, format) : array[i];
            }
            return output;
        };
    }

    // format date using native date object
    function formatMoment(m, format) {
        if (!m.isValid()) {
            return m.localeData().invalidDate();
        }

        format = expandFormat(format, m.localeData());
        formatFunctions[format] = formatFunctions[format] || makeFormatFunction(format);

        return formatFunctions[format](m);
    }

    function expandFormat(format, locale) {
        var i = 5;

        function replaceLongDateFormatTokens(input) {
            return locale.longDateFormat(input) || input;
        }

        localFormattingTokens.lastIndex = 0;
        while (i >= 0 && localFormattingTokens.test(format)) {
            format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);
            localFormattingTokens.lastIndex = 0;
            i -= 1;
        }

        return format;
    }

    var match1 = /\d/; //       0 - 9
    var match2 = /\d\d/; //      00 - 99
    var match3 = /\d{3}/; //     000 - 999
    var match4 = /\d{4}/; //    0000 - 9999
    var match6 = /[+-]?\d{6}/; // -999999 - 999999
    var match1to2 = /\d\d?/; //       0 - 99
    var match3to4 = /\d\d\d\d?/; //     999 - 9999
    var match5to6 = /\d\d\d\d\d\d?/; //   99999 - 999999
    var match1to3 = /\d{1,3}/; //       0 - 999
    var match1to4 = /\d{1,4}/; //       0 - 9999
    var match1to6 = /[+-]?\d{1,6}/; // -999999 - 999999

    var matchUnsigned = /\d+/; //       0 - inf
    var matchSigned = /[+-]?\d+/; //    -inf - inf

    var matchOffset = /Z|[+-]\d\d:?\d\d/gi; // +00:00 -00:00 +0000 -0000 or Z
    var matchShortOffset = /Z|[+-]\d\d(?::?\d\d)?/gi; // +00 -00 +00:00 -00:00 +0000 -0000 or Z

    var matchTimestamp = /[+-]?\d+(\.\d{1,3})?/; // 123456789 123456789.123

    // any word (or two) characters or numbers including two/three word month in arabic.
    // includes scottish gaelic two word and hyphenated months
    var matchWord = /[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i;

    var regexes = {};

    function addRegexToken(token, regex, strictRegex) {
        regexes[token] = isFunction(regex) ? regex : function(isStrict, localeData) {
            return (isStrict && strictRegex) ? strictRegex : regex;
        };
    }

    function getParseRegexForToken(token, config) {
        if (!hasOwnProp(regexes, token)) {
            return new RegExp(unescapeFormat(token));
        }

        return regexes[token](config._strict, config._locale);
    }

    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript
    function unescapeFormat(s) {
        return regexEscape(s.replace('\\', '').replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function(matched, p1, p2, p3, p4) {
            return p1 || p2 || p3 || p4;
        }));
    }

    function regexEscape(s) {
        return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
    }

    var tokens = {};

    function addParseToken(token, callback) {
        var i, func = callback;
        if (typeof token === 'string') {
            token = [token];
        }
        if (isNumber(callback)) {
            func = function(input, array) {
                array[callback] = toInt(input);
            };
        }
        for (i = 0; i < token.length; i++) {
            tokens[token[i]] = func;
        }
    }

    function addWeekParseToken(token, callback) {
        addParseToken(token, function(input, array, config, token) {
            config._w = config._w || {};
            callback(input, config._w, config, token);
        });
    }

    function addTimeToArrayFromToken(token, input, config) {
        if (input != null && hasOwnProp(tokens, token)) {
            tokens[token](input, config._a, config, token);
        }
    }

    var YEAR = 0;
    var MONTH = 1;
    var DATE = 2;
    var HOUR = 3;
    var MINUTE = 4;
    var SECOND = 5;
    var MILLISECOND = 6;
    var WEEK = 7;
    var WEEKDAY = 8;

    // FORMATTING

    addFormatToken('Y', 0, 0, function() {
        var y = this.year();
        return y <= 9999 ? '' + y : '+' + y;
    });

    addFormatToken(0, ['YY', 2], 0, function() {
        return this.year() % 100;
    });

    addFormatToken(0, ['YYYY', 4], 0, 'year');
    addFormatToken(0, ['YYYYY', 5], 0, 'year');
    addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');

    // ALIASES

    addUnitAlias('year', 'y');

    // PRIORITIES

    addUnitPriority('year', 1);

    // PARSING

    addRegexToken('Y', matchSigned);
    addRegexToken('YY', match1to2, match2);
    addRegexToken('YYYY', match1to4, match4);
    addRegexToken('YYYYY', match1to6, match6);
    addRegexToken('YYYYYY', match1to6, match6);

    addParseToken(['YYYYY', 'YYYYYY'], YEAR);
    addParseToken('YYYY', function(input, array) {
        array[YEAR] = input.length === 2 ? hooks.parseTwoDigitYear(input) : toInt(input);
    });
    addParseToken('YY', function(input, array) {
        array[YEAR] = hooks.parseTwoDigitYear(input);
    });
    addParseToken('Y', function(input, array) {
        array[YEAR] = parseInt(input, 10);
    });

    // HELPERS

    function daysInYear(year) {
        return isLeapYear(year) ? 366 : 365;
    }

    function isLeapYear(year) {
        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;
    }

    // HOOKS

    hooks.parseTwoDigitYear = function(input) {
        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);
    };

    // MOMENTS

    var getSetYear = makeGetSet('FullYear', true);

    function getIsLeapYear() {
        return isLeapYear(this.year());
    }

    function makeGetSet(unit, keepTime) {
        return function(value) {
            if (value != null) {
                set$1(this, unit, value);
                hooks.updateOffset(this, keepTime);
                return this;
            } else {
                return get(this, unit);
            }
        };
    }

    function get(mom, unit) {
        return mom.isValid() ?
            mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]() : NaN;
    }

    function set$1(mom, unit, value) {
        if (mom.isValid() && !isNaN(value)) {
            if (unit === 'FullYear' && isLeapYear(mom.year()) && mom.month() === 1 && mom.date() === 29) {
                mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value, mom.month(), daysInMonth(value, mom.month()));
            } else {
                mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);
            }
        }
    }

    // MOMENTS

    function stringGet(units) {
        units = normalizeUnits(units);
        if (isFunction(this[units])) {
            return this[units]();
        }
        return this;
    }


    function stringSet(units, value) {
        if (typeof units === 'object') {
            units = normalizeObjectUnits(units);
            var prioritized = getPrioritizedUnits(units);
            for (var i = 0; i < prioritized.length; i++) {
                this[prioritized[i].unit](units[prioritized[i].unit]);
            }
        } else {
            units = normalizeUnits(units);
            if (isFunction(this[units])) {
                return this[units](value);
            }
        }
        return this;
    }

    function mod(n, x) {
        return ((n % x) + x) % x;
    }

    var indexOf;

    if (Array.prototype.indexOf) {
        indexOf = Array.prototype.indexOf;
    } else {
        indexOf = function(o) {
            // I know
            var i;
            for (i = 0; i < this.length; ++i) {
                if (this[i] === o) {
                    return i;
                }
            }
            return -1;
        };
    }

    function daysInMonth(year, month) {
        if (isNaN(year) || isNaN(month)) {
            return NaN;
        }
        var modMonth = mod(month, 12);
        year += (month - modMonth) / 12;
        return modMonth === 1 ? (isLeapYear(year) ? 29 : 28) : (31 - modMonth % 7 % 2);
    }

    // FORMATTING

    addFormatToken('M', ['MM', 2], 'Mo', function() {
        return this.month() + 1;
    });

    addFormatToken('MMM', 0, 0, function(format) {
        return this.localeData().monthsShort(this, format);
    });

    addFormatToken('MMMM', 0, 0, function(format) {
        return this.localeData().months(this, format);
    });

    // ALIASES

    addUnitAlias('month', 'M');

    // PRIORITY

    addUnitPriority('month', 8);

    // PARSING

    addRegexToken('M', match1to2);
    addRegexToken('MM', match1to2, match2);
    addRegexToken('MMM', function(isStrict, locale) {
        return locale.monthsShortRegex(isStrict);
    });
    addRegexToken('MMMM', function(isStrict, locale) {
        return locale.monthsRegex(isStrict);
    });

    addParseToken(['M', 'MM'], function(input, array) {
        array[MONTH] = toInt(input) - 1;
    });

    addParseToken(['MMM', 'MMMM'], function(input, array, config, token) {
        var month = config._locale.monthsParse(input, token, config._strict);
        // if we didn't find a month name, mark the date as invalid.
        if (month != null) {
            array[MONTH] = month;
        } else {
            getParsingFlags(config).invalidMonth = input;
        }
    });

    // LOCALES

    var MONTHS_IN_FORMAT = /D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;
    var defaultLocaleMonths = 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_');

    function localeMonths(m, format) {
        if (!m) {
            return isArray(this._months) ? this._months :
                this._months['standalone'];
        }
        return isArray(this._months) ? this._months[m.month()] :
            this._months[(this._months.isFormat || MONTHS_IN_FORMAT).test(format) ? 'format' : 'standalone'][m.month()];
    }

    var defaultLocaleMonthsShort = 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');

    function localeMonthsShort(m, format) {
        if (!m) {
            return isArray(this._monthsShort) ? this._monthsShort :
                this._monthsShort['standalone'];
        }
        return isArray(this._monthsShort) ? this._monthsShort[m.month()] :
            this._monthsShort[MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'][m.month()];
    }

    function handleStrictParse(monthName, format, strict) {
        var i, ii, mom, llc = monthName.toLocaleLowerCase();
        if (!this._monthsParse) {
            // this is not used
            this._monthsParse = [];
            this._longMonthsParse = [];
            this._shortMonthsParse = [];
            for (i = 0; i < 12; ++i) {
                mom = createUTC([2000, i]);
                this._shortMonthsParse[i] = this.monthsShort(mom, '').toLocaleLowerCase();
                this._longMonthsParse[i] = this.months(mom, '').toLocaleLowerCase();
            }
        }

        if (strict) {
            if (format === 'MMM') {
                ii = indexOf.call(this._shortMonthsParse, llc);
                return ii !== -1 ? ii : null;
            } else {
                ii = indexOf.call(this._longMonthsParse, llc);
                return ii !== -1 ? ii : null;
            }
        } else {
            if (format === 'MMM') {
                ii = indexOf.call(this._shortMonthsParse, llc);
                if (ii !== -1) {
                    return ii;
                }
                ii = indexOf.call(this._longMonthsParse, llc);
                return ii !== -1 ? ii : null;
            } else {
                ii = indexOf.call(this._longMonthsParse, llc);
                if (ii !== -1) {
                    return ii;
                }
                ii = indexOf.call(this._shortMonthsParse, llc);
                return ii !== -1 ? ii : null;
            }
        }
    }

    function localeMonthsParse(monthName, format, strict) {
        var i, mom, regex;

        if (this._monthsParseExact) {
            return handleStrictParse.call(this, monthName, format, strict);
        }

        if (!this._monthsParse) {
            this._monthsParse = [];
            this._longMonthsParse = [];
            this._shortMonthsParse = [];
        }

        // TODO: add sorting
        // Sorting makes sure if one month (or abbr) is a prefix of another
        // see sorting in computeMonthsParse
        for (i = 0; i < 12; i++) {
            // make the regex if we don't have it already
            mom = createUTC([2000, i]);
            if (strict && !this._longMonthsParse[i]) {
                this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');
                this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');
            }
            if (!strict && !this._monthsParse[i]) {
                regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');
                this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');
            }
            // test the regex
            if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {
                return i;
            } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {
                return i;
            } else if (!strict && this._monthsParse[i].test(monthName)) {
                return i;
            }
        }
    }

    // MOMENTS

    function setMonth(mom, value) {
        var dayOfMonth;

        if (!mom.isValid()) {
            // No op
            return mom;
        }

        if (typeof value === 'string') {
            if (/^\d+$/.test(value)) {
                value = toInt(value);
            } else {
                value = mom.localeData().monthsParse(value);
                // TODO: Another silent failure?
                if (!isNumber(value)) {
                    return mom;
                }
            }
        }

        dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));
        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);
        return mom;
    }

    function getSetMonth(value) {
        if (value != null) {
            setMonth(this, value);
            hooks.updateOffset(this, true);
            return this;
        } else {
            return get(this, 'Month');
        }
    }

    function getDaysInMonth() {
        return daysInMonth(this.year(), this.month());
    }

    var defaultMonthsShortRegex = matchWord;

    function monthsShortRegex(isStrict) {
        if (this._monthsParseExact) {
            if (!hasOwnProp(this, '_monthsRegex')) {
                computeMonthsParse.call(this);
            }
            if (isStrict) {
                return this._monthsShortStrictRegex;
            } else {
                return this._monthsShortRegex;
            }
        } else {
            if (!hasOwnProp(this, '_monthsShortRegex')) {
                this._monthsShortRegex = defaultMonthsShortRegex;
            }
            return this._monthsShortStrictRegex && isStrict ?
                this._monthsShortStrictRegex : this._monthsShortRegex;
        }
    }

    var defaultMonthsRegex = matchWord;

    function monthsRegex(isStrict) {
        if (this._monthsParseExact) {
            if (!hasOwnProp(this, '_monthsRegex')) {
                computeMonthsParse.call(this);
            }
            if (isStrict) {
                return this._monthsStrictRegex;
            } else {
                return this._monthsRegex;
            }
        } else {
            if (!hasOwnProp(this, '_monthsRegex')) {
                this._monthsRegex = defaultMonthsRegex;
            }
            return this._monthsStrictRegex && isStrict ?
                this._monthsStrictRegex : this._monthsRegex;
        }
    }

    function computeMonthsParse() {
        function cmpLenRev(a, b) {
            return b.length - a.length;
        }

        var shortPieces = [],
            longPieces = [],
            mixedPieces = [],
            i, mom;
        for (i = 0; i < 12; i++) {
            // make the regex if we don't have it already
            mom = createUTC([2000, i]);
            shortPieces.push(this.monthsShort(mom, ''));
            longPieces.push(this.months(mom, ''));
            mixedPieces.push(this.months(mom, ''));
            mixedPieces.push(this.monthsShort(mom, ''));
        }
        // Sorting makes sure if one month (or abbr) is a prefix of another it
        // will match the longer piece.
        shortPieces.sort(cmpLenRev);
        longPieces.sort(cmpLenRev);
        mixedPieces.sort(cmpLenRev);
        for (i = 0; i < 12; i++) {
            shortPieces[i] = regexEscape(shortPieces[i]);
            longPieces[i] = regexEscape(longPieces[i]);
        }
        for (i = 0; i < 24; i++) {
            mixedPieces[i] = regexEscape(mixedPieces[i]);
        }

        this._monthsRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');
        this._monthsShortRegex = this._monthsRegex;
        this._monthsStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');
        this._monthsShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');
    }

    function createDate(y, m, d, h, M, s, ms) {
        // can't just apply() to create a date:
        // https://stackoverflow.com/q/181348
        var date;
        // the date constructor remaps years 0-99 to 1900-1999
        if (y < 100 && y >= 0) {
            // preserve leap years using a full 400 year cycle, then reset
            date = new Date(y + 400, m, d, h, M, s, ms);
            if (isFinite(date.getFullYear())) {
                date.setFullYear(y);
            }
        } else {
            date = new Date(y, m, d, h, M, s, ms);
        }

        return date;
    }

    function createUTCDate(y) {
        var date;
        // the Date.UTC function remaps years 0-99 to 1900-1999
        if (y < 100 && y >= 0) {
            var args = Array.prototype.slice.call(arguments);
            // preserve leap years using a full 400 year cycle, then reset
            args[0] = y + 400;
            date = new Date(Date.UTC.apply(null, args));
            if (isFinite(date.getUTCFullYear())) {
                date.setUTCFullYear(y);
            }
        } else {
            date = new Date(Date.UTC.apply(null, arguments));
        }

        return date;
    }

    // start-of-first-week - start-of-year
    function firstWeekOffset(year, dow, doy) {
        var // first-week day -- which january is always in the first week (4 for iso, 1 for other)
            fwd = 7 + dow - doy,
            // first-week day local weekday -- which local weekday is fwd
            fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;

        return -fwdlw + fwd - 1;
    }

    // https://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday
    function dayOfYearFromWeeks(year, week, weekday, dow, doy) {
        var localWeekday = (7 + weekday - dow) % 7,
            weekOffset = firstWeekOffset(year, dow, doy),
            dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,
            resYear, resDayOfYear;

        if (dayOfYear <= 0) {
            resYear = year - 1;
            resDayOfYear = daysInYear(resYear) + dayOfYear;
        } else if (dayOfYear > daysInYear(year)) {
            resYear = year + 1;
            resDayOfYear = dayOfYear - daysInYear(year);
        } else {
            resYear = year;
            resDayOfYear = dayOfYear;
        }

        return {
            year: resYear,
            dayOfYear: resDayOfYear
        };
    }

    function weekOfYear(mom, dow, doy) {
        var weekOffset = firstWeekOffset(mom.year(), dow, doy),
            week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,
            resWeek, resYear;

        if (week < 1) {
            resYear = mom.year() - 1;
            resWeek = week + weeksInYear(resYear, dow, doy);
        } else if (week > weeksInYear(mom.year(), dow, doy)) {
            resWeek = week - weeksInYear(mom.year(), dow, doy);
            resYear = mom.year() + 1;
        } else {
            resYear = mom.year();
            resWeek = week;
        }

        return {
            week: resWeek,
            year: resYear
        };
    }

    function weeksInYear(year, dow, doy) {
        var weekOffset = firstWeekOffset(year, dow, doy),
            weekOffsetNext = firstWeekOffset(year + 1, dow, doy);
        return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;
    }

    // FORMATTING

    addFormatToken('w', ['ww', 2], 'wo', 'week');
    addFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');

    // ALIASES

    addUnitAlias('week', 'w');
    addUnitAlias('isoWeek', 'W');

    // PRIORITIES

    addUnitPriority('week', 5);
    addUnitPriority('isoWeek', 5);

    // PARSING

    addRegexToken('w', match1to2);
    addRegexToken('ww', match1to2, match2);
    addRegexToken('W', match1to2);
    addRegexToken('WW', match1to2, match2);

    addWeekParseToken(['w', 'ww', 'W', 'WW'], function(input, week, config, token) {
        week[token.substr(0, 1)] = toInt(input);
    });

    // HELPERS

    // LOCALES

    function localeWeek(mom) {
        return weekOfYear(mom, this._week.dow, this._week.doy).week;
    }

    var defaultLocaleWeek = {
        dow: 0, // Sunday is the first day of the week.
        doy: 6 // The week that contains Jan 6th is the first week of the year.
    };

    function localeFirstDayOfWeek() {
        return this._week.dow;
    }

    function localeFirstDayOfYear() {
        return this._week.doy;
    }

    // MOMENTS

    function getSetWeek(input) {
        var week = this.localeData().week(this);
        return input == null ? week : this.add((input - week) * 7, 'd');
    }

    function getSetISOWeek(input) {
        var week = weekOfYear(this, 1, 4).week;
        return input == null ? week : this.add((input - week) * 7, 'd');
    }

    // FORMATTING

    addFormatToken('d', 0, 'do', 'day');

    addFormatToken('dd', 0, 0, function(format) {
        return this.localeData().weekdaysMin(this, format);
    });

    addFormatToken('ddd', 0, 0, function(format) {
        return this.localeData().weekdaysShort(this, format);
    });

    addFormatToken('dddd', 0, 0, function(format) {
        return this.localeData().weekdays(this, format);
    });

    addFormatToken('e', 0, 0, 'weekday');
    addFormatToken('E', 0, 0, 'isoWeekday');

    // ALIASES

    addUnitAlias('day', 'd');
    addUnitAlias('weekday', 'e');
    addUnitAlias('isoWeekday', 'E');

    // PRIORITY
    addUnitPriority('day', 11);
    addUnitPriority('weekday', 11);
    addUnitPriority('isoWeekday', 11);

    // PARSING

    addRegexToken('d', match1to2);
    addRegexToken('e', match1to2);
    addRegexToken('E', match1to2);
    addRegexToken('dd', function(isStrict, locale) {
        return locale.weekdaysMinRegex(isStrict);
    });
    addRegexToken('ddd', function(isStrict, locale) {
        return locale.weekdaysShortRegex(isStrict);
    });
    addRegexToken('dddd', function(isStrict, locale) {
        return locale.weekdaysRegex(isStrict);
    });

    addWeekParseToken(['dd', 'ddd', 'dddd'], function(input, week, config, token) {
        var weekday = config._locale.weekdaysParse(input, token, config._strict);
        // if we didn't get a weekday name, mark the date as invalid
        if (weekday != null) {
            week.d = weekday;
        } else {
            getParsingFlags(config).invalidWeekday = input;
        }
    });

    addWeekParseToken(['d', 'e', 'E'], function(input, week, config, token) {
        week[token] = toInt(input);
    });

    // HELPERS

    function parseWeekday(input, locale) {
        if (typeof input !== 'string') {
            return input;
        }

        if (!isNaN(input)) {
            return parseInt(input, 10);
        }

        input = locale.weekdaysParse(input);
        if (typeof input === 'number') {
            return input;
        }

        return null;
    }

    function parseIsoWeekday(input, locale) {
        if (typeof input === 'string') {
            return locale.weekdaysParse(input) % 7 || 7;
        }
        return isNaN(input) ? null : input;
    }

    // LOCALES
    function shiftWeekdays(ws, n) {
        return ws.slice(n, 7).concat(ws.slice(0, n));
    }

    var defaultLocaleWeekdays = 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');

    function localeWeekdays(m, format) {
        var weekdays = isArray(this._weekdays) ? this._weekdays :
            this._weekdays[(m && m !== true && this._weekdays.isFormat.test(format)) ? 'format' : 'standalone'];
        return (m === true) ? shiftWeekdays(weekdays, this._week.dow) :
            (m) ? weekdays[m.day()] : weekdays;
    }

    var defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');

    function localeWeekdaysShort(m) {
        return (m === true) ? shiftWeekdays(this._weekdaysShort, this._week.dow) :
            (m) ? this._weekdaysShort[m.day()] : this._weekdaysShort;
    }

    var defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_');

    function localeWeekdaysMin(m) {
        return (m === true) ? shiftWeekdays(this._weekdaysMin, this._week.dow) :
            (m) ? this._weekdaysMin[m.day()] : this._weekdaysMin;
    }

    function handleStrictParse$1(weekdayName, format, strict) {
        var i, ii, mom, llc = weekdayName.toLocaleLowerCase();
        if (!this._weekdaysParse) {
            this._weekdaysParse = [];
            this._shortWeekdaysParse = [];
            this._minWeekdaysParse = [];

            for (i = 0; i < 7; ++i) {
                mom = createUTC([2000, 1]).day(i);
                this._minWeekdaysParse[i] = this.weekdaysMin(mom, '').toLocaleLowerCase();
                this._shortWeekdaysParse[i] = this.weekdaysShort(mom, '').toLocaleLowerCase();
                this._weekdaysParse[i] = this.weekdays(mom, '').toLocaleLowerCase();
            }
        }

        if (strict) {
            if (format === 'dddd') {
                ii = indexOf.call(this._weekdaysParse, llc);
                return ii !== -1 ? ii : null;
            } else if (format === 'ddd') {
                ii = indexOf.call(this._shortWeekdaysParse, llc);
                return ii !== -1 ? ii : null;
            } else {
                ii = indexOf.call(this._minWeekdaysParse, llc);
                return ii !== -1 ? ii : null;
            }
        } else {
            if (format === 'dddd') {
                ii = indexOf.call(this._weekdaysParse, llc);
                if (ii !== -1) {
                    return ii;
                }
                ii = indexOf.call(this._shortWeekdaysParse, llc);
                if (ii !== -1) {
                    return ii;
                }
                ii = indexOf.call(this._minWeekdaysParse, llc);
                return ii !== -1 ? ii : null;
            } else if (format === 'ddd') {
                ii = indexOf.call(this._shortWeekdaysParse, llc);
                if (ii !== -1) {
                    return ii;
                }
                ii = indexOf.call(this._weekdaysParse, llc);
                if (ii !== -1) {
                    return ii;
                }
                ii = indexOf.call(this._minWeekdaysParse, llc);
                return ii !== -1 ? ii : null;
            } else {
                ii = indexOf.call(this._minWeekdaysParse, llc);
                if (ii !== -1) {
                    return ii;
                }
                ii = indexOf.call(this._weekdaysParse, llc);
                if (ii !== -1) {
                    return ii;
                }
                ii = indexOf.call(this._shortWeekdaysParse, llc);
                return ii !== -1 ? ii : null;
            }
        }
    }

    function localeWeekdaysParse(weekdayName, format, strict) {
        var i, mom, regex;

        if (this._weekdaysParseExact) {
            return handleStrictParse$1.call(this, weekdayName, format, strict);
        }

        if (!this._weekdaysParse) {
            this._weekdaysParse = [];
            this._minWeekdaysParse = [];
            this._shortWeekdaysParse = [];
            this._fullWeekdaysParse = [];
        }

        for (i = 0; i < 7; i++) {
            // make the regex if we don't have it already

            mom = createUTC([2000, 1]).day(i);
            if (strict && !this._fullWeekdaysParse[i]) {
                this._fullWeekdaysParse[i] = new RegExp('^' + this.weekdays(mom, '').replace('.', '\\.?') + '$', 'i');
                this._shortWeekdaysParse[i] = new RegExp('^' + this.weekdaysShort(mom, '').replace('.', '\\.?') + '$', 'i');
                this._minWeekdaysParse[i] = new RegExp('^' + this.weekdaysMin(mom, '').replace('.', '\\.?') + '$', 'i');
            }
            if (!this._weekdaysParse[i]) {
                regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');
                this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');
            }
            // test the regex
            if (strict && format === 'dddd' && this._fullWeekdaysParse[i].test(weekdayName)) {
                return i;
            } else if (strict && format === 'ddd' && this._shortWeekdaysParse[i].test(weekdayName)) {
                return i;
            } else if (strict && format === 'dd' && this._minWeekdaysParse[i].test(weekdayName)) {
                return i;
            } else if (!strict && this._weekdaysParse[i].test(weekdayName)) {
                return i;
            }
        }
    }

    // MOMENTS

    function getSetDayOfWeek(input) {
        if (!this.isValid()) {
            return input != null ? this : NaN;
        }
        var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
        if (input != null) {
            input = parseWeekday(input, this.localeData());
            return this.add(input - day, 'd');
        } else {
            return day;
        }
    }

    function getSetLocaleDayOfWeek(input) {
        if (!this.isValid()) {
            return input != null ? this : NaN;
        }
        var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;
        return input == null ? weekday : this.add(input - weekday, 'd');
    }

    function getSetISODayOfWeek(input) {
        if (!this.isValid()) {
            return input != null ? this : NaN;
        }

        // behaves the same as moment#day except
        // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)
        // as a setter, sunday should belong to the previous week.

        if (input != null) {
            var weekday = parseIsoWeekday(input, this.localeData());
            return this.day(this.day() % 7 ? weekday : weekday - 7);
        } else {
            return this.day() || 7;
        }
    }

    var defaultWeekdaysRegex = matchWord;

    function weekdaysRegex(isStrict) {
        if (this._weekdaysParseExact) {
            if (!hasOwnProp(this, '_weekdaysRegex')) {
                computeWeekdaysParse.call(this);
            }
            if (isStrict) {
                return this._weekdaysStrictRegex;
            } else {
                return this._weekdaysRegex;
            }
        } else {
            if (!hasOwnProp(this, '_weekdaysRegex')) {
                this._weekdaysRegex = defaultWeekdaysRegex;
            }
            return this._weekdaysStrictRegex && isStrict ?
                this._weekdaysStrictRegex : this._weekdaysRegex;
        }
    }

    var defaultWeekdaysShortRegex = matchWord;

    function weekdaysShortRegex(isStrict) {
        if (this._weekdaysParseExact) {
            if (!hasOwnProp(this, '_weekdaysRegex')) {
                computeWeekdaysParse.call(this);
            }
            if (isStrict) {
                return this._weekdaysShortStrictRegex;
            } else {
                return this._weekdaysShortRegex;
            }
        } else {
            if (!hasOwnProp(this, '_weekdaysShortRegex')) {
                this._weekdaysShortRegex = defaultWeekdaysShortRegex;
            }
            return this._weekdaysShortStrictRegex && isStrict ?
                this._weekdaysShortStrictRegex : this._weekdaysShortRegex;
        }
    }

    var defaultWeekdaysMinRegex = matchWord;

    function weekdaysMinRegex(isStrict) {
        if (this._weekdaysParseExact) {
            if (!hasOwnProp(this, '_weekdaysRegex')) {
                computeWeekdaysParse.call(this);
            }
            if (isStrict) {
                return this._weekdaysMinStrictRegex;
            } else {
                return this._weekdaysMinRegex;
            }
        } else {
            if (!hasOwnProp(this, '_weekdaysMinRegex')) {
                this._weekdaysMinRegex = defaultWeekdaysMinRegex;
            }
            return this._weekdaysMinStrictRegex && isStrict ?
                this._weekdaysMinStrictRegex : this._weekdaysMinRegex;
        }
    }


    function computeWeekdaysParse() {
        function cmpLenRev(a, b) {
            return b.length - a.length;
        }

        var minPieces = [],
            shortPieces = [],
            longPieces = [],
            mixedPieces = [],
            i, mom, minp, shortp, longp;
        for (i = 0; i < 7; i++) {
            // make the regex if we don't have it already
            mom = createUTC([2000, 1]).day(i);
            minp = this.weekdaysMin(mom, '');
            shortp = this.weekdaysShort(mom, '');
            longp = this.weekdays(mom, '');
            minPieces.push(minp);
            shortPieces.push(shortp);
            longPieces.push(longp);
            mixedPieces.push(minp);
            mixedPieces.push(shortp);
            mixedPieces.push(longp);
        }
        // Sorting makes sure if one weekday (or abbr) is a prefix of another it
        // will match the longer piece.
        minPieces.sort(cmpLenRev);
        shortPieces.sort(cmpLenRev);
        longPieces.sort(cmpLenRev);
        mixedPieces.sort(cmpLenRev);
        for (i = 0; i < 7; i++) {
            shortPieces[i] = regexEscape(shortPieces[i]);
            longPieces[i] = regexEscape(longPieces[i]);
            mixedPieces[i] = regexEscape(mixedPieces[i]);
        }

        this._weekdaysRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');
        this._weekdaysShortRegex = this._weekdaysRegex;
        this._weekdaysMinRegex = this._weekdaysRegex;

        this._weekdaysStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');
        this._weekdaysShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');
        this._weekdaysMinStrictRegex = new RegExp('^(' + minPieces.join('|') + ')', 'i');
    }

    // FORMATTING

    function hFormat() {
        return this.hours() % 12 || 12;
    }

    function kFormat() {
        return this.hours() || 24;
    }

    addFormatToken('H', ['HH', 2], 0, 'hour');
    addFormatToken('h', ['hh', 2], 0, hFormat);
    addFormatToken('k', ['kk', 2], 0, kFormat);

    addFormatToken('hmm', 0, 0, function() {
        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2);
    });

    addFormatToken('hmmss', 0, 0, function() {
        return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2) +
            zeroFill(this.seconds(), 2);
    });

    addFormatToken('Hmm', 0, 0, function() {
        return '' + this.hours() + zeroFill(this.minutes(), 2);
    });

    addFormatToken('Hmmss', 0, 0, function() {
        return '' + this.hours() + zeroFill(this.minutes(), 2) +
            zeroFill(this.seconds(), 2);
    });

    function meridiem(token, lowercase) {
        addFormatToken(token, 0, 0, function() {
            return this.localeData().meridiem(this.hours(), this.minutes(), lowercase);
        });
    }

    meridiem('a', true);
    meridiem('A', false);

    // ALIASES

    addUnitAlias('hour', 'h');

    // PRIORITY
    addUnitPriority('hour', 13);

    // PARSING

    function matchMeridiem(isStrict, locale) {
        return locale._meridiemParse;
    }

    addRegexToken('a', matchMeridiem);
    addRegexToken('A', matchMeridiem);
    addRegexToken('H', match1to2);
    addRegexToken('h', match1to2);
    addRegexToken('k', match1to2);
    addRegexToken('HH', match1to2, match2);
    addRegexToken('hh', match1to2, match2);
    addRegexToken('kk', match1to2, match2);

    addRegexToken('hmm', match3to4);
    addRegexToken('hmmss', match5to6);
    addRegexToken('Hmm', match3to4);
    addRegexToken('Hmmss', match5to6);

    addParseToken(['H', 'HH'], HOUR);
    addParseToken(['k', 'kk'], function(input, array, config) {
        var kInput = toInt(input);
        array[HOUR] = kInput === 24 ? 0 : kInput;
    });
    addParseToken(['a', 'A'], function(input, array, config) {
        config._isPm = config._locale.isPM(input);
        config._meridiem = input;
    });
    addParseToken(['h', 'hh'], function(input, array, config) {
        array[HOUR] = toInt(input);
        getParsingFlags(config).bigHour = true;
    });
    addParseToken('hmm', function(input, array, config) {
        var pos = input.length - 2;
        array[HOUR] = toInt(input.substr(0, pos));
        array[MINUTE] = toInt(input.substr(pos));
        getParsingFlags(config).bigHour = true;
    });
    addParseToken('hmmss', function(input, array, config) {
        var pos1 = input.length - 4;
        var pos2 = input.length - 2;
        array[HOUR] = toInt(input.substr(0, pos1));
        array[MINUTE] = toInt(input.substr(pos1, 2));
        array[SECOND] = toInt(input.substr(pos2));
        getParsingFlags(config).bigHour = true;
    });
    addParseToken('Hmm', function(input, array, config) {
        var pos = input.length - 2;
        array[HOUR] = toInt(input.substr(0, pos));
        array[MINUTE] = toInt(input.substr(pos));
    });
    addParseToken('Hmmss', function(input, array, config) {
        var pos1 = input.length - 4;
        var pos2 = input.length - 2;
        array[HOUR] = toInt(input.substr(0, pos1));
        array[MINUTE] = toInt(input.substr(pos1, 2));
        array[SECOND] = toInt(input.substr(pos2));
    });

    // LOCALES

    function localeIsPM(input) {
        // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays
        // Using charAt should be more compatible.
        return ((input + '').toLowerCase().charAt(0) === 'p');
    }

    var defaultLocaleMeridiemParse = /[ap]\.?m?\.?/i;

    function localeMeridiem(hours, minutes, isLower) {
        if (hours > 11) {
            return isLower ? 'pm' : 'PM';
        } else {
            return isLower ? 'am' : 'AM';
        }
    }


    // MOMENTS

    // Setting the hour should keep the time, because the user explicitly
    // specified which hour they want. So trying to maintain the same hour (in
    // a new timezone) makes sense. Adding/subtracting hours does not follow
    // this rule.
    var getSetHour = makeGetSet('Hours', true);

    var baseConfig = {
        calendar: defaultCalendar,
        longDateFormat: defaultLongDateFormat,
        invalidDate: defaultInvalidDate,
        ordinal: defaultOrdinal,
        dayOfMonthOrdinalParse: defaultDayOfMonthOrdinalParse,
        relativeTime: defaultRelativeTime,

        months: defaultLocaleMonths,
        monthsShort: defaultLocaleMonthsShort,

        week: defaultLocaleWeek,

        weekdays: defaultLocaleWeekdays,
        weekdaysMin: defaultLocaleWeekdaysMin,
        weekdaysShort: defaultLocaleWeekdaysShort,

        meridiemParse: defaultLocaleMeridiemParse
    };

    // internal storage for locale config files
    var locales = {};
    var localeFamilies = {};
    var globalLocale;

    function normalizeLocale(key) {
        return key ? key.toLowerCase().replace('_', '-') : key;
    }

    // pick the locale from the array
    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each
    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root
    function chooseLocale(names) {
        var i = 0,
            j, next, locale, split;

        while (i < names.length) {
            split = normalizeLocale(names[i]).split('-');
            j = split.length;
            next = normalizeLocale(names[i + 1]);
            next = next ? next.split('-') : null;
            while (j > 0) {
                locale = loadLocale(split.slice(0, j).join('-'));
                if (locale) {
                    return locale;
                }
                if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {
                    //the next array item is better than a shallower substring of this one
                    break;
                }
                j--;
            }
            i++;
        }
        return globalLocale;
    }

    function loadLocale(name) {
        var oldLocale = null;
        // TODO: Find a better way to register and load all the locales in Node
        if (!locales[name] && (typeof module !== 'undefined') &&
            module && module.exports) {
            try {
                oldLocale = globalLocale._abbr;
                var aliasedRequire = require;
                aliasedRequire('./locale/' + name);
                getSetGlobalLocale(oldLocale);
            } catch (e) {}
        }
        return locales[name];
    }

    // This function will load locale and then set the global locale.  If
    // no arguments are passed in, it will simply return the current global
    // locale key.
    function getSetGlobalLocale(key, values) {
        var data;
        if (key) {
            if (isUndefined(values)) {
                data = getLocale(key);
            } else {
                data = defineLocale(key, values);
            }

            if (data) {
                // moment.duration._locale = moment._locale = data;
                globalLocale = data;
            } else {
                if ((typeof console !== 'undefined') && console.warn) {
                    //warn user if arguments are passed but the locale could not be set
                    console.warn('Locale ' + key + ' not found. Did you forget to load it?');
                }
            }
        }

        return globalLocale._abbr;
    }

    function defineLocale(name, config) {
        if (config !== null) {
            var locale, parentConfig = baseConfig;
            config.abbr = name;
            if (locales[name] != null) {
                deprecateSimple('defineLocaleOverride',
                    'use moment.updateLocale(localeName, config) to change ' +
                    'an existing locale. moment.defineLocale(localeName, ' +
                    'config) should only be used for creating a new locale ' +
                    'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.');
                parentConfig = locales[name]._config;
            } else if (config.parentLocale != null) {
                if (locales[config.parentLocale] != null) {
                    parentConfig = locales[config.parentLocale]._config;
                } else {
                    locale = loadLocale(config.parentLocale);
                    if (locale != null) {
                        parentConfig = locale._config;
                    } else {
                        if (!localeFamilies[config.parentLocale]) {
                            localeFamilies[config.parentLocale] = [];
                        }
                        localeFamilies[config.parentLocale].push({
                            name: name,
                            config: config
                        });
                        return null;
                    }
                }
            }
            locales[name] = new Locale(mergeConfigs(parentConfig, config));

            if (localeFamilies[name]) {
                localeFamilies[name].forEach(function(x) {
                    defineLocale(x.name, x.config);
                });
            }

            // backwards compat for now: also set the locale
            // make sure we set the locale AFTER all child locales have been
            // created, so we won't end up with the child locale set.
            getSetGlobalLocale(name);


            return locales[name];
        } else {
            // useful for testing
            delete locales[name];
            return null;
        }
    }

    function updateLocale(name, config) {
        if (config != null) {
            var locale, tmpLocale, parentConfig = baseConfig;
            // MERGE
            tmpLocale = loadLocale(name);
            if (tmpLocale != null) {
                parentConfig = tmpLocale._config;
            }
            config = mergeConfigs(parentConfig, config);
            locale = new Locale(config);
            locale.parentLocale = locales[name];
            locales[name] = locale;

            // backwards compat for now: also set the locale
            getSetGlobalLocale(name);
        } else {
            // pass null for config to unupdate, useful for tests
            if (locales[name] != null) {
                if (locales[name].parentLocale != null) {
                    locales[name] = locales[name].parentLocale;
                } else if (locales[name] != null) {
                    delete locales[name];
                }
            }
        }
        return locales[name];
    }

    // returns locale data
    function getLocale(key) {
        var locale;

        if (key && key._locale && key._locale._abbr) {
            key = key._locale._abbr;
        }

        if (!key) {
            return globalLocale;
        }

        if (!isArray(key)) {
            //short-circuit everything else
            locale = loadLocale(key);
            if (locale) {
                return locale;
            }
            key = [key];
        }

        return chooseLocale(key);
    }

    function listLocales() {
        return keys(locales);
    }

    function checkOverflow(m) {
        var overflow;
        var a = m._a;

        if (a && getParsingFlags(m).overflow === -2) {
            overflow =
                a[MONTH] < 0 || a[MONTH] > 11 ? MONTH :
                a[DATE] < 1 || a[DATE] > daysInMonth(a[YEAR], a[MONTH]) ? DATE :
                a[HOUR] < 0 || a[HOUR] > 24 || (a[HOUR] === 24 && (a[MINUTE] !== 0 || a[SECOND] !== 0 || a[MILLISECOND] !== 0)) ? HOUR :
                a[MINUTE] < 0 || a[MINUTE] > 59 ? MINUTE :
                a[SECOND] < 0 || a[SECOND] > 59 ? SECOND :
                a[MILLISECOND] < 0 || a[MILLISECOND] > 999 ? MILLISECOND :
                -1;

            if (getParsingFlags(m)._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {
                overflow = DATE;
            }
            if (getParsingFlags(m)._overflowWeeks && overflow === -1) {
                overflow = WEEK;
            }
            if (getParsingFlags(m)._overflowWeekday && overflow === -1) {
                overflow = WEEKDAY;
            }

            getParsingFlags(m).overflow = overflow;
        }

        return m;
    }

    // Pick the first defined of two or three arguments.
    function defaults(a, b, c) {
        if (a != null) {
            return a;
        }
        if (b != null) {
            return b;
        }
        return c;
    }

    function currentDateArray(config) {
        // hooks is actually the exported moment object
        var nowValue = new Date(hooks.now());
        if (config._useUTC) {
            return [nowValue.getUTCFullYear(), nowValue.getUTCMonth(), nowValue.getUTCDate()];
        }
        return [nowValue.getFullYear(), nowValue.getMonth(), nowValue.getDate()];
    }

    // convert an array to a date.
    // the array should mirror the parameters below
    // note: all values past the year are optional and will default to the lowest possible value.
    // [year, month, day , hour, minute, second, millisecond]
    function configFromArray(config) {
        var i, date, input = [],
            currentDate, expectedWeekday, yearToUse;

        if (config._d) {
            return;
        }

        currentDate = currentDateArray(config);

        //compute day of the year from weeks and weekdays
        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {
            dayOfYearFromWeekInfo(config);
        }

        //if the day of the year is set, figure out what it is
        if (config._dayOfYear != null) {
            yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);

            if (config._dayOfYear > daysInYear(yearToUse) || config._dayOfYear === 0) {
                getParsingFlags(config)._overflowDayOfYear = true;
            }

            date = createUTCDate(yearToUse, 0, config._dayOfYear);
            config._a[MONTH] = date.getUTCMonth();
            config._a[DATE] = date.getUTCDate();
        }

        // Default to current date.
        // * if no year, month, day of month are given, default to today
        // * if day of month is given, default month and year
        // * if month is given, default only year
        // * if year is given, don't default anything
        for (i = 0; i < 3 && config._a[i] == null; ++i) {
            config._a[i] = input[i] = currentDate[i];
        }

        // Zero out whatever was not defaulted, including time
        for (; i < 7; i++) {
            config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];
        }

        // Check for 24:00:00.000
        if (config._a[HOUR] === 24 &&
            config._a[MINUTE] === 0 &&
            config._a[SECOND] === 0 &&
            config._a[MILLISECOND] === 0) {
            config._nextDay = true;
            config._a[HOUR] = 0;
        }

        config._d = (config._useUTC ? createUTCDate : createDate).apply(null, input);
        expectedWeekday = config._useUTC ? config._d.getUTCDay() : config._d.getDay();

        // Apply timezone offset from input. The actual utcOffset can be changed
        // with parseZone.
        if (config._tzm != null) {
            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);
        }

        if (config._nextDay) {
            config._a[HOUR] = 24;
        }

        // check for mismatching day of week
        if (config._w && typeof config._w.d !== 'undefined' && config._w.d !== expectedWeekday) {
            getParsingFlags(config).weekdayMismatch = true;
        }
    }

    function dayOfYearFromWeekInfo(config) {
        var w, weekYear, week, weekday, dow, doy, temp, weekdayOverflow;

        w = config._w;
        if (w.GG != null || w.W != null || w.E != null) {
            dow = 1;
            doy = 4;

            // TODO: We need to take the current isoWeekYear, but that depends on
            // how we interpret now (local, utc, fixed offset). So create
            // a now version of current config (take local/utc/offset flags, and
            // create now).
            weekYear = defaults(w.GG, config._a[YEAR], weekOfYear(createLocal(), 1, 4).year);
            week = defaults(w.W, 1);
            weekday = defaults(w.E, 1);
            if (weekday < 1 || weekday > 7) {
                weekdayOverflow = true;
            }
        } else {
            dow = config._locale._week.dow;
            doy = config._locale._week.doy;

            var curWeek = weekOfYear(createLocal(), dow, doy);

            weekYear = defaults(w.gg, config._a[YEAR], curWeek.year);

            // Default to current week.
            week = defaults(w.w, curWeek.week);

            if (w.d != null) {
                // weekday -- low day numbers are considered next week
                weekday = w.d;
                if (weekday < 0 || weekday > 6) {
                    weekdayOverflow = true;
                }
            } else if (w.e != null) {
                // local weekday -- counting starts from beginning of week
                weekday = w.e + dow;
                if (w.e < 0 || w.e > 6) {
                    weekdayOverflow = true;
                }
            } else {
                // default to beginning of week
                weekday = dow;
            }
        }
        if (week < 1 || week > weeksInYear(weekYear, dow, doy)) {
            getParsingFlags(config)._overflowWeeks = true;
        } else if (weekdayOverflow != null) {
            getParsingFlags(config)._overflowWeekday = true;
        } else {
            temp = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy);
            config._a[YEAR] = temp.year;
            config._dayOfYear = temp.dayOfYear;
        }
    }

    // iso 8601 regex
    // 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)
    var extendedIsoRegex = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;
    var basicIsoRegex = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;

    var tzRegex = /Z|[+-]\d\d(?::?\d\d)?/;

    var isoDates = [
        ['YYYYYY-MM-DD', /[+-]\d{6}-\d\d-\d\d/],
        ['YYYY-MM-DD', /\d{4}-\d\d-\d\d/],
        ['GGGG-[W]WW-E', /\d{4}-W\d\d-\d/],
        ['GGGG-[W]WW', /\d{4}-W\d\d/, false],
        ['YYYY-DDD', /\d{4}-\d{3}/],
        ['YYYY-MM', /\d{4}-\d\d/, false],
        ['YYYYYYMMDD', /[+-]\d{10}/],
        ['YYYYMMDD', /\d{8}/],
        // YYYYMM is NOT allowed by the standard
        ['GGGG[W]WWE', /\d{4}W\d{3}/],
        ['GGGG[W]WW', /\d{4}W\d{2}/, false],
        ['YYYYDDD', /\d{7}/]
    ];

    // iso time formats and regexes
    var isoTimes = [
        ['HH:mm:ss.SSSS', /\d\d:\d\d:\d\d\.\d+/],
        ['HH:mm:ss,SSSS', /\d\d:\d\d:\d\d,\d+/],
        ['HH:mm:ss', /\d\d:\d\d:\d\d/],
        ['HH:mm', /\d\d:\d\d/],
        ['HHmmss.SSSS', /\d\d\d\d\d\d\.\d+/],
        ['HHmmss,SSSS', /\d\d\d\d\d\d,\d+/],
        ['HHmmss', /\d\d\d\d\d\d/],
        ['HHmm', /\d\d\d\d/],
        ['HH', /\d\d/]
    ];

    var aspNetJsonRegex = /^\/?Date\((\-?\d+)/i;

    // date from iso format
    function configFromISO(config) {
        var i, l,
            string = config._i,
            match = extendedIsoRegex.exec(string) || basicIsoRegex.exec(string),
            allowTime, dateFormat, timeFormat, tzFormat;

        if (match) {
            getParsingFlags(config).iso = true;

            for (i = 0, l = isoDates.length; i < l; i++) {
                if (isoDates[i][1].exec(match[1])) {
                    dateFormat = isoDates[i][0];
                    allowTime = isoDates[i][2] !== false;
                    break;
                }
            }
            if (dateFormat == null) {
                config._isValid = false;
                return;
            }
            if (match[3]) {
                for (i = 0, l = isoTimes.length; i < l; i++) {
                    if (isoTimes[i][1].exec(match[3])) {
                        // match[2] should be 'T' or space
                        timeFormat = (match[2] || ' ') + isoTimes[i][0];
                        break;
                    }
                }
                if (timeFormat == null) {
                    config._isValid = false;
                    return;
                }
            }
            if (!allowTime && timeFormat != null) {
                config._isValid = false;
                return;
            }
            if (match[4]) {
                if (tzRegex.exec(match[4])) {
                    tzFormat = 'Z';
                } else {
                    config._isValid = false;
                    return;
                }
            }
            config._f = dateFormat + (timeFormat || '') + (tzFormat || '');
            configFromStringAndFormat(config);
        } else {
            config._isValid = false;
        }
    }

    // RFC 2822 regex: For details see https://tools.ietf.org/html/rfc2822#section-3.3
    var rfc2822 = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;

    function extractFromRFC2822Strings(yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr) {
        var result = [
            untruncateYear(yearStr),
            defaultLocaleMonthsShort.indexOf(monthStr),
            parseInt(dayStr, 10),
            parseInt(hourStr, 10),
            parseInt(minuteStr, 10)
        ];

        if (secondStr) {
            result.push(parseInt(secondStr, 10));
        }

        return result;
    }

    function untruncateYear(yearStr) {
        var year = parseInt(yearStr, 10);
        if (year <= 49) {
            return 2000 + year;
        } else if (year <= 999) {
            return 1900 + year;
        }
        return year;
    }

    function preprocessRFC2822(s) {
        // Remove comments and folding whitespace and replace multiple-spaces with a single space
        return s.replace(/\([^)]*\)|[\n\t]/g, ' ').replace(/(\s\s+)/g, ' ').replace(/^\s\s*/, '').replace(/\s\s*$/, '');
    }

    function checkWeekday(weekdayStr, parsedInput, config) {
        if (weekdayStr) {
            // TODO: Replace the vanilla JS Date object with an indepentent day-of-week check.
            var weekdayProvided = defaultLocaleWeekdaysShort.indexOf(weekdayStr),
                weekdayActual = new Date(parsedInput[0], parsedInput[1], parsedInput[2]).getDay();
            if (weekdayProvided !== weekdayActual) {
                getParsingFlags(config).weekdayMismatch = true;
                config._isValid = false;
                return false;
            }
        }
        return true;
    }

    var obsOffsets = {
        UT: 0,
        GMT: 0,
        EDT: -4 * 60,
        EST: -5 * 60,
        CDT: -5 * 60,
        CST: -6 * 60,
        MDT: -6 * 60,
        MST: -7 * 60,
        PDT: -7 * 60,
        PST: -8 * 60
    };

    function calculateOffset(obsOffset, militaryOffset, numOffset) {
        if (obsOffset) {
            return obsOffsets[obsOffset];
        } else if (militaryOffset) {
            // the only allowed military tz is Z
            return 0;
        } else {
            var hm = parseInt(numOffset, 10);
            var m = hm % 100,
                h = (hm - m) / 100;
            return h * 60 + m;
        }
    }

    // date and time from ref 2822 format
    function configFromRFC2822(config) {
        var match = rfc2822.exec(preprocessRFC2822(config._i));
        if (match) {
            var parsedArray = extractFromRFC2822Strings(match[4], match[3], match[2], match[5], match[6], match[7]);
            if (!checkWeekday(match[1], parsedArray, config)) {
                return;
            }

            config._a = parsedArray;
            config._tzm = calculateOffset(match[8], match[9], match[10]);

            config._d = createUTCDate.apply(null, config._a);
            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);

            getParsingFlags(config).rfc2822 = true;
        } else {
            config._isValid = false;
        }
    }

    // date from iso format or fallback
    function configFromString(config) {
        var matched = aspNetJsonRegex.exec(config._i);

        if (matched !== null) {
            config._d = new Date(+matched[1]);
            return;
        }

        configFromISO(config);
        if (config._isValid === false) {
            delete config._isValid;
        } else {
            return;
        }

        configFromRFC2822(config);
        if (config._isValid === false) {
            delete config._isValid;
        } else {
            return;
        }

        // Final attempt, use Input Fallback
        hooks.createFromInputFallback(config);
    }

    hooks.createFromInputFallback = deprecate(
        'value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), ' +
        'which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are ' +
        'discouraged and will be removed in an upcoming major release. Please refer to ' +
        'http://momentjs.com/guides/#/warnings/js-date/ for more info.',
        function(config) {
            config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));
        }
    );

    // constant that refers to the ISO standard
    hooks.ISO_8601 = function() {};

    // constant that refers to the RFC 2822 form
    hooks.RFC_2822 = function() {};

    // date from string and format string
    function configFromStringAndFormat(config) {
        // TODO: Move this to another part of the creation flow to prevent circular deps
        if (config._f === hooks.ISO_8601) {
            configFromISO(config);
            return;
        }
        if (config._f === hooks.RFC_2822) {
            configFromRFC2822(config);
            return;
        }
        config._a = [];
        getParsingFlags(config).empty = true;

        // This array is used to make a Date, either with `new Date` or `Date.UTC`
        var string = '' + config._i,
            i, parsedInput, tokens, token, skipped,
            stringLength = string.length,
            totalParsedInputLength = 0;

        tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];

        for (i = 0; i < tokens.length; i++) {
            token = tokens[i];
            parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];
            // console.log('token', token, 'parsedInput', parsedInput,
            //         'regex', getParseRegexForToken(token, config));
            if (parsedInput) {
                skipped = string.substr(0, string.indexOf(parsedInput));
                if (skipped.length > 0) {
                    getParsingFlags(config).unusedInput.push(skipped);
                }
                string = string.slice(string.indexOf(parsedInput) + parsedInput.length);
                totalParsedInputLength += parsedInput.length;
            }
            // don't parse if it's not a known token
            if (formatTokenFunctions[token]) {
                if (parsedInput) {
                    getParsingFlags(config).empty = false;
                } else {
                    getParsingFlags(config).unusedTokens.push(token);
                }
                addTimeToArrayFromToken(token, parsedInput, config);
            } else if (config._strict && !parsedInput) {
                getParsingFlags(config).unusedTokens.push(token);
            }
        }

        // add remaining unparsed input length to the string
        getParsingFlags(config).charsLeftOver = stringLength - totalParsedInputLength;
        if (string.length > 0) {
            getParsingFlags(config).unusedInput.push(string);
        }

        // clear _12h flag if hour is <= 12
        if (config._a[HOUR] <= 12 &&
            getParsingFlags(config).bigHour === true &&
            config._a[HOUR] > 0) {
            getParsingFlags(config).bigHour = undefined;
        }

        getParsingFlags(config).parsedDateParts = config._a.slice(0);
        getParsingFlags(config).meridiem = config._meridiem;
        // handle meridiem
        config._a[HOUR] = meridiemFixWrap(config._locale, config._a[HOUR], config._meridiem);

        configFromArray(config);
        checkOverflow(config);
    }


    function meridiemFixWrap(locale, hour, meridiem) {
        var isPm;

        if (meridiem == null) {
            // nothing to do
            return hour;
        }
        if (locale.meridiemHour != null) {
            return locale.meridiemHour(hour, meridiem);
        } else if (locale.isPM != null) {
            // Fallback
            isPm = locale.isPM(meridiem);
            if (isPm && hour < 12) {
                hour += 12;
            }
            if (!isPm && hour === 12) {
                hour = 0;
            }
            return hour;
        } else {
            // this is not supposed to happen
            return hour;
        }
    }

    // date from string and array of format strings
    function configFromStringAndArray(config) {
        var tempConfig,
            bestMoment,

            scoreToBeat,
            i,
            currentScore;

        if (config._f.length === 0) {
            getParsingFlags(config).invalidFormat = true;
            config._d = new Date(NaN);
            return;
        }

        for (i = 0; i < config._f.length; i++) {
            currentScore = 0;
            tempConfig = copyConfig({}, config);
            if (config._useUTC != null) {
                tempConfig._useUTC = config._useUTC;
            }
            tempConfig._f = config._f[i];
            configFromStringAndFormat(tempConfig);

            if (!isValid(tempConfig)) {
                continue;
            }

            // if there is any input that was not parsed add a penalty for that format
            currentScore += getParsingFlags(tempConfig).charsLeftOver;

            //or tokens
            currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;

            getParsingFlags(tempConfig).score = currentScore;

            if (scoreToBeat == null || currentScore < scoreToBeat) {
                scoreToBeat = currentScore;
                bestMoment = tempConfig;
            }
        }

        extend(config, bestMoment || tempConfig);
    }

    function configFromObject(config) {
        if (config._d) {
            return;
        }

        var i = normalizeObjectUnits(config._i);
        config._a = map([i.year, i.month, i.day || i.date, i.hour, i.minute, i.second, i.millisecond], function(obj) {
            return obj && parseInt(obj, 10);
        });

        configFromArray(config);
    }

    function createFromConfig(config) {
        var res = new Moment(checkOverflow(prepareConfig(config)));
        if (res._nextDay) {
            // Adding is smart enough around DST
            res.add(1, 'd');
            res._nextDay = undefined;
        }

        return res;
    }

    function prepareConfig(config) {
        var input = config._i,
            format = config._f;

        config._locale = config._locale || getLocale(config._l);

        if (input === null || (format === undefined && input === '')) {
            return createInvalid({ nullInput: true });
        }

        if (typeof input === 'string') {
            config._i = input = config._locale.preparse(input);
        }

        if (isMoment(input)) {
            return new Moment(checkOverflow(input));
        } else if (isDate(input)) {
            config._d = input;
        } else if (isArray(format)) {
            configFromStringAndArray(config);
        } else if (format) {
            configFromStringAndFormat(config);
        } else {
            configFromInput(config);
        }

        if (!isValid(config)) {
            config._d = null;
        }

        return config;
    }

    function configFromInput(config) {
        var input = config._i;
        if (isUndefined(input)) {
            config._d = new Date(hooks.now());
        } else if (isDate(input)) {
            config._d = new Date(input.valueOf());
        } else if (typeof input === 'string') {
            configFromString(config);
        } else if (isArray(input)) {
            config._a = map(input.slice(0), function(obj) {
                return parseInt(obj, 10);
            });
            configFromArray(config);
        } else if (isObject(input)) {
            configFromObject(config);
        } else if (isNumber(input)) {
            // from milliseconds
            config._d = new Date(input);
        } else {
            hooks.createFromInputFallback(config);
        }
    }

    function createLocalOrUTC(input, format, locale, strict, isUTC) {
        var c = {};

        if (locale === true || locale === false) {
            strict = locale;
            locale = undefined;
        }

        if ((isObject(input) && isObjectEmpty(input)) ||
            (isArray(input) && input.length === 0)) {
            input = undefined;
        }
        // object construction must be done this way.
        // https://github.com/moment/moment/issues/1423
        c._isAMomentObject = true;
        c._useUTC = c._isUTC = isUTC;
        c._l = locale;
        c._i = input;
        c._f = format;
        c._strict = strict;

        return createFromConfig(c);
    }

    function createLocal(input, format, locale, strict) {
        return createLocalOrUTC(input, format, locale, strict, false);
    }

    var prototypeMin = deprecate(
        'moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/',
        function() {
            var other = createLocal.apply(null, arguments);
            if (this.isValid() && other.isValid()) {
                return other < this ? this : other;
            } else {
                return createInvalid();
            }
        }
    );

    var prototypeMax = deprecate(
        'moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/',
        function() {
            var other = createLocal.apply(null, arguments);
            if (this.isValid() && other.isValid()) {
                return other > this ? this : other;
            } else {
                return createInvalid();
            }
        }
    );

    // Pick a moment m from moments so that m[fn](other) is true for all
    // other. This relies on the function fn to be transitive.
    //
    // moments should either be an array of moment objects or an array, whose
    // first element is an array of moment objects.
    function pickBy(fn, moments) {
        var res, i;
        if (moments.length === 1 && isArray(moments[0])) {
            moments = moments[0];
        }
        if (!moments.length) {
            return createLocal();
        }
        res = moments[0];
        for (i = 1; i < moments.length; ++i) {
            if (!moments[i].isValid() || moments[i][fn](res)) {
                res = moments[i];
            }
        }
        return res;
    }

    // TODO: Use [].sort instead?
    function min() {
        var args = [].slice.call(arguments, 0);

        return pickBy('isBefore', args);
    }

    function max() {
        var args = [].slice.call(arguments, 0);

        return pickBy('isAfter', args);
    }

    var now = function() {
        return Date.now ? Date.now() : +(new Date());
    };

    var ordering = ['year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', 'millisecond'];

    function isDurationValid(m) {
        for (var key in m) {
            if (!(indexOf.call(ordering, key) !== -1 && (m[key] == null || !isNaN(m[key])))) {
                return false;
            }
        }

        var unitHasDecimal = false;
        for (var i = 0; i < ordering.length; ++i) {
            if (m[ordering[i]]) {
                if (unitHasDecimal) {
                    return false; // only allow non-integers for smallest unit
                }
                if (parseFloat(m[ordering[i]]) !== toInt(m[ordering[i]])) {
                    unitHasDecimal = true;
                }
            }
        }

        return true;
    }

    function isValid$1() {
        return this._isValid;
    }

    function createInvalid$1() {
        return createDuration(NaN);
    }

    function Duration(duration) {
        var normalizedInput = normalizeObjectUnits(duration),
            years = normalizedInput.year || 0,
            quarters = normalizedInput.quarter || 0,
            months = normalizedInput.month || 0,
            weeks = normalizedInput.week || normalizedInput.isoWeek || 0,
            days = normalizedInput.day || 0,
            hours = normalizedInput.hour || 0,
            minutes = normalizedInput.minute || 0,
            seconds = normalizedInput.second || 0,
            milliseconds = normalizedInput.millisecond || 0;

        this._isValid = isDurationValid(normalizedInput);

        // representation for dateAddRemove
        this._milliseconds = +milliseconds +
            seconds * 1e3 + // 1000
            minutes * 6e4 + // 1000 * 60
            hours * 1000 * 60 * 60; //using 1000 * 60 * 60 instead of 36e5 to avoid floating point rounding errors https://github.com/moment/moment/issues/2978
        // Because of dateAddRemove treats 24 hours as different from a
        // day when working around DST, we need to store them separately
        this._days = +days +
            weeks * 7;
        // It is impossible to translate months into days without knowing
        // which months you are are talking about, so we have to store
        // it separately.
        this._months = +months +
            quarters * 3 +
            years * 12;

        this._data = {};

        this._locale = getLocale();

        this._bubble();
    }

    function isDuration(obj) {
        return obj instanceof Duration;
    }

    function absRound(number) {
        if (number < 0) {
            return Math.round(-1 * number) * -1;
        } else {
            return Math.round(number);
        }
    }

    // FORMATTING

    function offset(token, separator) {
        addFormatToken(token, 0, 0, function() {
            var offset = this.utcOffset();
            var sign = '+';
            if (offset < 0) {
                offset = -offset;
                sign = '-';
            }
            return sign + zeroFill(~~(offset / 60), 2) + separator + zeroFill(~~(offset) % 60, 2);
        });
    }

    offset('Z', ':');
    offset('ZZ', '');

    // PARSING

    addRegexToken('Z', matchShortOffset);
    addRegexToken('ZZ', matchShortOffset);
    addParseToken(['Z', 'ZZ'], function(input, array, config) {
        config._useUTC = true;
        config._tzm = offsetFromString(matchShortOffset, input);
    });

    // HELPERS

    // timezone chunker
    // '+10:00' > ['10',  '00']
    // '-1530'  > ['-15', '30']
    var chunkOffset = /([\+\-]|\d\d)/gi;

    function offsetFromString(matcher, string) {
        var matches = (string || '').match(matcher);

        if (matches === null) {
            return null;
        }

        var chunk = matches[matches.length - 1] || [];
        var parts = (chunk + '').match(chunkOffset) || ['-', 0, 0];
        var minutes = +(parts[1] * 60) + toInt(parts[2]);

        return minutes === 0 ?
            0 :
            parts[0] === '+' ? minutes : -minutes;
    }

    // Return a moment from input, that is local/utc/zone equivalent to model.
    function cloneWithOffset(input, model) {
        var res, diff;
        if (model._isUTC) {
            res = model.clone();
            diff = (isMoment(input) || isDate(input) ? input.valueOf() : createLocal(input).valueOf()) - res.valueOf();
            // Use low-level api, because this fn is low-level api.
            res._d.setTime(res._d.valueOf() + diff);
            hooks.updateOffset(res, false);
            return res;
        } else {
            return createLocal(input).local();
        }
    }

    function getDateOffset(m) {
        // On Firefox.24 Date#getTimezoneOffset returns a floating point.
        // https://github.com/moment/moment/pull/1871
        return -Math.round(m._d.getTimezoneOffset() / 15) * 15;
    }

    // HOOKS

    // This function will be called whenever a moment is mutated.
    // It is intended to keep the offset in sync with the timezone.
    hooks.updateOffset = function() {};

    // MOMENTS

    // keepLocalTime = true means only change the timezone, without
    // affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->
    // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset
    // +0200, so we adjust the time as needed, to be valid.
    //
    // Keeping the time actually adds/subtracts (one hour)
    // from the actual represented time. That is why we call updateOffset
    // a second time. In case it wants us to change the offset again
    // _changeInProgress == true case, then we have to adjust, because
    // there is no such time in the given timezone.
    function getSetOffset(input, keepLocalTime, keepMinutes) {
        var offset = this._offset || 0,
            localAdjust;
        if (!this.isValid()) {
            return input != null ? this : NaN;
        }
        if (input != null) {
            if (typeof input === 'string') {
                input = offsetFromString(matchShortOffset, input);
                if (input === null) {
                    return this;
                }
            } else if (Math.abs(input) < 16 && !keepMinutes) {
                input = input * 60;
            }
            if (!this._isUTC && keepLocalTime) {
                localAdjust = getDateOffset(this);
            }
            this._offset = input;
            this._isUTC = true;
            if (localAdjust != null) {
                this.add(localAdjust, 'm');
            }
            if (offset !== input) {
                if (!keepLocalTime || this._changeInProgress) {
                    addSubtract(this, createDuration(input - offset, 'm'), 1, false);
                } else if (!this._changeInProgress) {
                    this._changeInProgress = true;
                    hooks.updateOffset(this, true);
                    this._changeInProgress = null;
                }
            }
            return this;
        } else {
            return this._isUTC ? offset : getDateOffset(this);
        }
    }

    function getSetZone(input, keepLocalTime) {
        if (input != null) {
            if (typeof input !== 'string') {
                input = -input;
            }

            this.utcOffset(input, keepLocalTime);

            return this;
        } else {
            return -this.utcOffset();
        }
    }

    function setOffsetToUTC(keepLocalTime) {
        return this.utcOffset(0, keepLocalTime);
    }

    function setOffsetToLocal(keepLocalTime) {
        if (this._isUTC) {
            this.utcOffset(0, keepLocalTime);
            this._isUTC = false;

            if (keepLocalTime) {
                this.subtract(getDateOffset(this), 'm');
            }
        }
        return this;
    }

    function setOffsetToParsedOffset() {
        if (this._tzm != null) {
            this.utcOffset(this._tzm, false, true);
        } else if (typeof this._i === 'string') {
            var tZone = offsetFromString(matchOffset, this._i);
            if (tZone != null) {
                this.utcOffset(tZone);
            } else {
                this.utcOffset(0, true);
            }
        }
        return this;
    }

    function hasAlignedHourOffset(input) {
        if (!this.isValid()) {
            return false;
        }
        input = input ? createLocal(input).utcOffset() : 0;

        return (this.utcOffset() - input) % 60 === 0;
    }

    function isDaylightSavingTime() {
        return (
            this.utcOffset() > this.clone().month(0).utcOffset() ||
            this.utcOffset() > this.clone().month(5).utcOffset()
        );
    }

    function isDaylightSavingTimeShifted() {
        if (!isUndefined(this._isDSTShifted)) {
            return this._isDSTShifted;
        }

        var c = {};

        copyConfig(c, this);
        c = prepareConfig(c);

        if (c._a) {
            var other = c._isUTC ? createUTC(c._a) : createLocal(c._a);
            this._isDSTShifted = this.isValid() &&
                compareArrays(c._a, other.toArray()) > 0;
        } else {
            this._isDSTShifted = false;
        }

        return this._isDSTShifted;
    }

    function isLocal() {
        return this.isValid() ? !this._isUTC : false;
    }

    function isUtcOffset() {
        return this.isValid() ? this._isUTC : false;
    }

    function isUtc() {
        return this.isValid() ? this._isUTC && this._offset === 0 : false;
    }

    // ASP.NET json date format regex
    var aspNetRegex = /^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/;

    // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html
    // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere
    // and further modified to allow for strings containing both week and day
    var isoRegex = /^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;

    function createDuration(input, key) {
        var duration = input,
            // matching against regexp is expensive, do it on demand
            match = null,
            sign,
            ret,
            diffRes;

        if (isDuration(input)) {
            duration = {
                ms: input._milliseconds,
                d: input._days,
                M: input._months
            };
        } else if (isNumber(input)) {
            duration = {};
            if (key) {
                duration[key] = input;
            } else {
                duration.milliseconds = input;
            }
        } else if (!!(match = aspNetRegex.exec(input))) {
            sign = (match[1] === '-') ? -1 : 1;
            duration = {
                y: 0,
                d: toInt(match[DATE]) * sign,
                h: toInt(match[HOUR]) * sign,
                m: toInt(match[MINUTE]) * sign,
                s: toInt(match[SECOND]) * sign,
                ms: toInt(absRound(match[MILLISECOND] * 1000)) * sign // the millisecond decimal point is included in the match
            };
        } else if (!!(match = isoRegex.exec(input))) {
            sign = (match[1] === '-') ? -1 : 1;
            duration = {
                y: parseIso(match[2], sign),
                M: parseIso(match[3], sign),
                w: parseIso(match[4], sign),
                d: parseIso(match[5], sign),
                h: parseIso(match[6], sign),
                m: parseIso(match[7], sign),
                s: parseIso(match[8], sign)
            };
        } else if (duration == null) { // checks for null or undefined
            duration = {};
        } else if (typeof duration === 'object' && ('from' in duration || 'to' in duration)) {
            diffRes = momentsDifference(createLocal(duration.from), createLocal(duration.to));

            duration = {};
            duration.ms = diffRes.milliseconds;
            duration.M = diffRes.months;
        }

        ret = new Duration(duration);

        if (isDuration(input) && hasOwnProp(input, '_locale')) {
            ret._locale = input._locale;
        }

        return ret;
    }

    createDuration.fn = Duration.prototype;
    createDuration.invalid = createInvalid$1;

    function parseIso(inp, sign) {
        // We'd normally use ~~inp for this, but unfortunately it also
        // converts floats to ints.
        // inp may be undefined, so careful calling replace on it.
        var res = inp && parseFloat(inp.replace(',', '.'));
        // apply sign while we're at it
        return (isNaN(res) ? 0 : res) * sign;
    }

    function positiveMomentsDifference(base, other) {
        var res = {};

        res.months = other.month() - base.month() +
            (other.year() - base.year()) * 12;
        if (base.clone().add(res.months, 'M').isAfter(other)) {
            --res.months;
        }

        res.milliseconds = +other - +(base.clone().add(res.months, 'M'));

        return res;
    }

    function momentsDifference(base, other) {
        var res;
        if (!(base.isValid() && other.isValid())) {
            return { milliseconds: 0, months: 0 };
        }

        other = cloneWithOffset(other, base);
        if (base.isBefore(other)) {
            res = positiveMomentsDifference(base, other);
        } else {
            res = positiveMomentsDifference(other, base);
            res.milliseconds = -res.milliseconds;
            res.months = -res.months;
        }

        return res;
    }

    // TODO: remove 'name' arg after deprecation is removed
    function createAdder(direction, name) {
        return function(val, period) {
            var dur, tmp;
            //invert the arguments, but complain about it
            if (period !== null && !isNaN(+period)) {
                deprecateSimple(name, 'moment().' + name + '(period, number) is deprecated. Please use moment().' + name + '(number, period). ' +
                    'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.');
                tmp = val;
                val = period;
                period = tmp;
            }

            val = typeof val === 'string' ? +val : val;
            dur = createDuration(val, period);
            addSubtract(this, dur, direction);
            return this;
        };
    }

    function addSubtract(mom, duration, isAdding, updateOffset) {
        var milliseconds = duration._milliseconds,
            days = absRound(duration._days),
            months = absRound(duration._months);

        if (!mom.isValid()) {
            // No op
            return;
        }

        updateOffset = updateOffset == null ? true : updateOffset;

        if (months) {
            setMonth(mom, get(mom, 'Month') + months * isAdding);
        }
        if (days) {
            set$1(mom, 'Date', get(mom, 'Date') + days * isAdding);
        }
        if (milliseconds) {
            mom._d.setTime(mom._d.valueOf() + milliseconds * isAdding);
        }
        if (updateOffset) {
            hooks.updateOffset(mom, days || months);
        }
    }

    var add = createAdder(1, 'add');
    var subtract = createAdder(-1, 'subtract');

    function getCalendarFormat(myMoment, now) {
        var diff = myMoment.diff(now, 'days', true);
        return diff < -6 ? 'sameElse' :
            diff < -1 ? 'lastWeek' :
            diff < 0 ? 'lastDay' :
            diff < 1 ? 'sameDay' :
            diff < 2 ? 'nextDay' :
            diff < 7 ? 'nextWeek' : 'sameElse';
    }

    function calendar$1(time, formats) {
        // We want to compare the start of today, vs this.
        // Getting start-of-today depends on whether we're local/utc/offset or not.
        var now = time || createLocal(),
            sod = cloneWithOffset(now, this).startOf('day'),
            format = hooks.calendarFormat(this, sod) || 'sameElse';

        var output = formats && (isFunction(formats[format]) ? formats[format].call(this, now) : formats[format]);

        return this.format(output || this.localeData().calendar(format, this, createLocal(now)));
    }

    function clone() {
        return new Moment(this);
    }

    function isAfter(input, units) {
        var localInput = isMoment(input) ? input : createLocal(input);
        if (!(this.isValid() && localInput.isValid())) {
            return false;
        }
        units = normalizeUnits(units) || 'millisecond';
        if (units === 'millisecond') {
            return this.valueOf() > localInput.valueOf();
        } else {
            return localInput.valueOf() < this.clone().startOf(units).valueOf();
        }
    }

    function isBefore(input, units) {
        var localInput = isMoment(input) ? input : createLocal(input);
        if (!(this.isValid() && localInput.isValid())) {
            return false;
        }
        units = normalizeUnits(units) || 'millisecond';
        if (units === 'millisecond') {
            return this.valueOf() < localInput.valueOf();
        } else {
            return this.clone().endOf(units).valueOf() < localInput.valueOf();
        }
    }

    function isBetween(from, to, units, inclusivity) {
        var localFrom = isMoment(from) ? from : createLocal(from),
            localTo = isMoment(to) ? to : createLocal(to);
        if (!(this.isValid() && localFrom.isValid() && localTo.isValid())) {
            return false;
        }
        inclusivity = inclusivity || '()';
        return (inclusivity[0] === '(' ? this.isAfter(localFrom, units) : !this.isBefore(localFrom, units)) &&
            (inclusivity[1] === ')' ? this.isBefore(localTo, units) : !this.isAfter(localTo, units));
    }

    function isSame(input, units) {
        var localInput = isMoment(input) ? input : createLocal(input),
            inputMs;
        if (!(this.isValid() && localInput.isValid())) {
            return false;
        }
        units = normalizeUnits(units) || 'millisecond';
        if (units === 'millisecond') {
            return this.valueOf() === localInput.valueOf();
        } else {
            inputMs = localInput.valueOf();
            return this.clone().startOf(units).valueOf() <= inputMs && inputMs <= this.clone().endOf(units).valueOf();
        }
    }

    function isSameOrAfter(input, units) {
        return this.isSame(input, units) || this.isAfter(input, units);
    }

    function isSameOrBefore(input, units) {
        return this.isSame(input, units) || this.isBefore(input, units);
    }

    function diff(input, units, asFloat) {
        var that,
            zoneDelta,
            output;

        if (!this.isValid()) {
            return NaN;
        }

        that = cloneWithOffset(input, this);

        if (!that.isValid()) {
            return NaN;
        }

        zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;

        units = normalizeUnits(units);

        switch (units) {
            case 'year':
                output = monthDiff(this, that) / 12;
                break;
            case 'month':
                output = monthDiff(this, that);
                break;
            case 'quarter':
                output = monthDiff(this, that) / 3;
                break;
            case 'second':
                output = (this - that) / 1e3;
                break; // 1000
            case 'minute':
                output = (this - that) / 6e4;
                break; // 1000 * 60
            case 'hour':
                output = (this - that) / 36e5;
                break; // 1000 * 60 * 60
            case 'day':
                output = (this - that - zoneDelta) / 864e5;
                break; // 1000 * 60 * 60 * 24, negate dst
            case 'week':
                output = (this - that - zoneDelta) / 6048e5;
                break; // 1000 * 60 * 60 * 24 * 7, negate dst
            default:
                output = this - that;
        }

        return asFloat ? output : absFloor(output);
    }

    function monthDiff(a, b) {
        // difference in months
        var wholeMonthDiff = ((b.year() - a.year()) * 12) + (b.month() - a.month()),
            // b is in (anchor - 1 month, anchor + 1 month)
            anchor = a.clone().add(wholeMonthDiff, 'months'),
            anchor2, adjust;

        if (b - anchor < 0) {
            anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');
            // linear across the month
            adjust = (b - anchor) / (anchor - anchor2);
        } else {
            anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');
            // linear across the month
            adjust = (b - anchor) / (anchor2 - anchor);
        }

        //check for negative zero, return zero if negative zero
        return -(wholeMonthDiff + adjust) || 0;
    }

    hooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';
    hooks.defaultFormatUtc = 'YYYY-MM-DDTHH:mm:ss[Z]';

    function toString() {
        return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');
    }

    function toISOString(keepOffset) {
        if (!this.isValid()) {
            return null;
        }
        var utc = keepOffset !== true;
        var m = utc ? this.clone().utc() : this;
        if (m.year() < 0 || m.year() > 9999) {
            return formatMoment(m, utc ? 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]' : 'YYYYYY-MM-DD[T]HH:mm:ss.SSSZ');
        }
        if (isFunction(Date.prototype.toISOString)) {
            // native implementation is ~50x faster, use it when we can
            if (utc) {
                return this.toDate().toISOString();
            } else {
                return new Date(this.valueOf() + this.utcOffset() * 60 * 1000).toISOString().replace('Z', formatMoment(m, 'Z'));
            }
        }
        return formatMoment(m, utc ? 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]' : 'YYYY-MM-DD[T]HH:mm:ss.SSSZ');
    }

    /**
     * Return a human readable representation of a moment that can
     * also be evaluated to get a new moment which is the same
     *
     * @link https://nodejs.org/dist/latest/docs/api/util.html#util_custom_inspect_function_on_objects
     */
    function inspect() {
        if (!this.isValid()) {
            return 'moment.invalid(/* ' + this._i + ' */)';
        }
        var func = 'moment';
        var zone = '';
        if (!this.isLocal()) {
            func = this.utcOffset() === 0 ? 'moment.utc' : 'moment.parseZone';
            zone = 'Z';
        }
        var prefix = '[' + func + '("]';
        var year = (0 <= this.year() && this.year() <= 9999) ? 'YYYY' : 'YYYYYY';
        var datetime = '-MM-DD[T]HH:mm:ss.SSS';
        var suffix = zone + '[")]';

        return this.format(prefix + year + datetime + suffix);
    }

    function format(inputString) {
        if (!inputString) {
            inputString = this.isUtc() ? hooks.defaultFormatUtc : hooks.defaultFormat;
        }
        var output = formatMoment(this, inputString);
        return this.localeData().postformat(output);
    }

    function from(time, withoutSuffix) {
        if (this.isValid() &&
            ((isMoment(time) && time.isValid()) ||
                createLocal(time).isValid())) {
            return createDuration({ to: this, from: time }).locale(this.locale()).humanize(!withoutSuffix);
        } else {
            return this.localeData().invalidDate();
        }
    }

    function fromNow(withoutSuffix) {
        return this.from(createLocal(), withoutSuffix);
    }

    function to(time, withoutSuffix) {
        if (this.isValid() &&
            ((isMoment(time) && time.isValid()) ||
                createLocal(time).isValid())) {
            return createDuration({ from: this, to: time }).locale(this.locale()).humanize(!withoutSuffix);
        } else {
            return this.localeData().invalidDate();
        }
    }

    function toNow(withoutSuffix) {
        return this.to(createLocal(), withoutSuffix);
    }

    // If passed a locale key, it will set the locale for this
    // instance.  Otherwise, it will return the locale configuration
    // variables for this instance.
    function locale(key) {
        var newLocaleData;

        if (key === undefined) {
            return this._locale._abbr;
        } else {
            newLocaleData = getLocale(key);
            if (newLocaleData != null) {
                this._locale = newLocaleData;
            }
            return this;
        }
    }

    var lang = deprecate(
        'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',
        function(key) {
            if (key === undefined) {
                return this.localeData();
            } else {
                return this.locale(key);
            }
        }
    );

    function localeData() {
        return this._locale;
    }

    var MS_PER_SECOND = 1000;
    var MS_PER_MINUTE = 60 * MS_PER_SECOND;
    var MS_PER_HOUR = 60 * MS_PER_MINUTE;
    var MS_PER_400_YEARS = (365 * 400 + 97) * 24 * MS_PER_HOUR;

    // actual modulo - handles negative numbers (for dates before 1970):
    function mod$1(dividend, divisor) {
        return (dividend % divisor + divisor) % divisor;
    }

    function localStartOfDate(y, m, d) {
        // the date constructor remaps years 0-99 to 1900-1999
        if (y < 100 && y >= 0) {
            // preserve leap years using a full 400 year cycle, then reset
            return new Date(y + 400, m, d) - MS_PER_400_YEARS;
        } else {
            return new Date(y, m, d).valueOf();
        }
    }

    function utcStartOfDate(y, m, d) {
        // Date.UTC remaps years 0-99 to 1900-1999
        if (y < 100 && y >= 0) {
            // preserve leap years using a full 400 year cycle, then reset
            return Date.UTC(y + 400, m, d) - MS_PER_400_YEARS;
        } else {
            return Date.UTC(y, m, d);
        }
    }

    function startOf(units) {
        var time;
        units = normalizeUnits(units);
        if (units === undefined || units === 'millisecond' || !this.isValid()) {
            return this;
        }

        var startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;

        switch (units) {
            case 'year':
                time = startOfDate(this.year(), 0, 1);
                break;
            case 'quarter':
                time = startOfDate(this.year(), this.month() - this.month() % 3, 1);
                break;
            case 'month':
                time = startOfDate(this.year(), this.month(), 1);
                break;
            case 'week':
                time = startOfDate(this.year(), this.month(), this.date() - this.weekday());
                break;
            case 'isoWeek':
                time = startOfDate(this.year(), this.month(), this.date() - (this.isoWeekday() - 1));
                break;
            case 'day':
            case 'date':
                time = startOfDate(this.year(), this.month(), this.date());
                break;
            case 'hour':
                time = this._d.valueOf();
                time -= mod$1(time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE), MS_PER_HOUR);
                break;
            case 'minute':
                time = this._d.valueOf();
                time -= mod$1(time, MS_PER_MINUTE);
                break;
            case 'second':
                time = this._d.valueOf();
                time -= mod$1(time, MS_PER_SECOND);
                break;
        }

        this._d.setTime(time);
        hooks.updateOffset(this, true);
        return this;
    }

    function endOf(units) {
        var time;
        units = normalizeUnits(units);
        if (units === undefined || units === 'millisecond' || !this.isValid()) {
            return this;
        }

        var startOfDate = this._isUTC ? utcStartOfDate : localStartOfDate;

        switch (units) {
            case 'year':
                time = startOfDate(this.year() + 1, 0, 1) - 1;
                break;
            case 'quarter':
                time = startOfDate(this.year(), this.month() - this.month() % 3 + 3, 1) - 1;
                break;
            case 'month':
                time = startOfDate(this.year(), this.month() + 1, 1) - 1;
                break;
            case 'week':
                time = startOfDate(this.year(), this.month(), this.date() - this.weekday() + 7) - 1;
                break;
            case 'isoWeek':
                time = startOfDate(this.year(), this.month(), this.date() - (this.isoWeekday() - 1) + 7) - 1;
                break;
            case 'day':
            case 'date':
                time = startOfDate(this.year(), this.month(), this.date() + 1) - 1;
                break;
            case 'hour':
                time = this._d.valueOf();
                time += MS_PER_HOUR - mod$1(time + (this._isUTC ? 0 : this.utcOffset() * MS_PER_MINUTE), MS_PER_HOUR) - 1;
                break;
            case 'minute':
                time = this._d.valueOf();
                time += MS_PER_MINUTE - mod$1(time, MS_PER_MINUTE) - 1;
                break;
            case 'second':
                time = this._d.valueOf();
                time += MS_PER_SECOND - mod$1(time, MS_PER_SECOND) - 1;
                break;
        }

        this._d.setTime(time);
        hooks.updateOffset(this, true);
        return this;
    }

    function valueOf() {
        return this._d.valueOf() - ((this._offset || 0) * 60000);
    }

    function unix() {
        return Math.floor(this.valueOf() / 1000);
    }

    function toDate() {
        return new Date(this.valueOf());
    }

    function toArray() {
        var m = this;
        return [m.year(), m.month(), m.date(), m.hour(), m.minute(), m.second(), m.millisecond()];
    }

    function toObject() {
        var m = this;
        return {
            years: m.year(),
            months: m.month(),
            date: m.date(),
            hours: m.hours(),
            minutes: m.minutes(),
            seconds: m.seconds(),
            milliseconds: m.milliseconds()
        };
    }

    function toJSON() {
        // new Date(NaN).toJSON() === null
        return this.isValid() ? this.toISOString() : null;
    }

    function isValid$2() {
        return isValid(this);
    }

    function parsingFlags() {
        return extend({}, getParsingFlags(this));
    }

    function invalidAt() {
        return getParsingFlags(this).overflow;
    }

    function creationData() {
        return {
            input: this._i,
            format: this._f,
            locale: this._locale,
            isUTC: this._isUTC,
            strict: this._strict
        };
    }

    // FORMATTING

    addFormatToken(0, ['gg', 2], 0, function() {
        return this.weekYear() % 100;
    });

    addFormatToken(0, ['GG', 2], 0, function() {
        return this.isoWeekYear() % 100;
    });

    function addWeekYearFormatToken(token, getter) {
        addFormatToken(0, [token, token.length], 0, getter);
    }

    addWeekYearFormatToken('gggg', 'weekYear');
    addWeekYearFormatToken('ggggg', 'weekYear');
    addWeekYearFormatToken('GGGG', 'isoWeekYear');
    addWeekYearFormatToken('GGGGG', 'isoWeekYear');

    // ALIASES

    addUnitAlias('weekYear', 'gg');
    addUnitAlias('isoWeekYear', 'GG');

    // PRIORITY

    addUnitPriority('weekYear', 1);
    addUnitPriority('isoWeekYear', 1);


    // PARSING

    addRegexToken('G', matchSigned);
    addRegexToken('g', matchSigned);
    addRegexToken('GG', match1to2, match2);
    addRegexToken('gg', match1to2, match2);
    addRegexToken('GGGG', match1to4, match4);
    addRegexToken('gggg', match1to4, match4);
    addRegexToken('GGGGG', match1to6, match6);
    addRegexToken('ggggg', match1to6, match6);

    addWeekParseToken(['gggg', 'ggggg', 'GGGG', 'GGGGG'], function(input, week, config, token) {
        week[token.substr(0, 2)] = toInt(input);
    });

    addWeekParseToken(['gg', 'GG'], function(input, week, config, token) {
        week[token] = hooks.parseTwoDigitYear(input);
    });

    // MOMENTS

    function getSetWeekYear(input) {
        return getSetWeekYearHelper.call(this,
            input,
            this.week(),
            this.weekday(),
            this.localeData()._week.dow,
            this.localeData()._week.doy);
    }

    function getSetISOWeekYear(input) {
        return getSetWeekYearHelper.call(this,
            input, this.isoWeek(), this.isoWeekday(), 1, 4);
    }

    function getISOWeeksInYear() {
        return weeksInYear(this.year(), 1, 4);
    }

    function getWeeksInYear() {
        var weekInfo = this.localeData()._week;
        return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);
    }

    function getSetWeekYearHelper(input, week, weekday, dow, doy) {
        var weeksTarget;
        if (input == null) {
            return weekOfYear(this, dow, doy).year;
        } else {
            weeksTarget = weeksInYear(input, dow, doy);
            if (week > weeksTarget) {
                week = weeksTarget;
            }
            return setWeekAll.call(this, input, week, weekday, dow, doy);
        }
    }

    function setWeekAll(weekYear, week, weekday, dow, doy) {
        var dayOfYearData = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy),
            date = createUTCDate(dayOfYearData.year, 0, dayOfYearData.dayOfYear);

        this.year(date.getUTCFullYear());
        this.month(date.getUTCMonth());
        this.date(date.getUTCDate());
        return this;
    }

    // FORMATTING

    addFormatToken('Q', 0, 'Qo', 'quarter');

    // ALIASES

    addUnitAlias('quarter', 'Q');

    // PRIORITY

    addUnitPriority('quarter', 7);

    // PARSING

    addRegexToken('Q', match1);
    addParseToken('Q', function(input, array) {
        array[MONTH] = (toInt(input) - 1) * 3;
    });

    // MOMENTS

    function getSetQuarter(input) {
        return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);
    }

    // FORMATTING

    addFormatToken('D', ['DD', 2], 'Do', 'date');

    // ALIASES

    addUnitAlias('date', 'D');

    // PRIORITY
    addUnitPriority('date', 9);

    // PARSING

    addRegexToken('D', match1to2);
    addRegexToken('DD', match1to2, match2);
    addRegexToken('Do', function(isStrict, locale) {
        // TODO: Remove "ordinalParse" fallback in next major release.
        return isStrict ?
            (locale._dayOfMonthOrdinalParse || locale._ordinalParse) :
            locale._dayOfMonthOrdinalParseLenient;
    });

    addParseToken(['D', 'DD'], DATE);
    addParseToken('Do', function(input, array) {
        array[DATE] = toInt(input.match(match1to2)[0]);
    });

    // MOMENTS

    var getSetDayOfMonth = makeGetSet('Date', true);

    // FORMATTING

    addFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');

    // ALIASES

    addUnitAlias('dayOfYear', 'DDD');

    // PRIORITY
    addUnitPriority('dayOfYear', 4);

    // PARSING

    addRegexToken('DDD', match1to3);
    addRegexToken('DDDD', match3);
    addParseToken(['DDD', 'DDDD'], function(input, array, config) {
        config._dayOfYear = toInt(input);
    });

    // HELPERS

    // MOMENTS

    function getSetDayOfYear(input) {
        var dayOfYear = Math.round((this.clone().startOf('day') - this.clone().startOf('year')) / 864e5) + 1;
        return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');
    }

    // FORMATTING

    addFormatToken('m', ['mm', 2], 0, 'minute');

    // ALIASES

    addUnitAlias('minute', 'm');

    // PRIORITY

    addUnitPriority('minute', 14);

    // PARSING

    addRegexToken('m', match1to2);
    addRegexToken('mm', match1to2, match2);
    addParseToken(['m', 'mm'], MINUTE);

    // MOMENTS

    var getSetMinute = makeGetSet('Minutes', false);

    // FORMATTING

    addFormatToken('s', ['ss', 2], 0, 'second');

    // ALIASES

    addUnitAlias('second', 's');

    // PRIORITY

    addUnitPriority('second', 15);

    // PARSING

    addRegexToken('s', match1to2);
    addRegexToken('ss', match1to2, match2);
    addParseToken(['s', 'ss'], SECOND);

    // MOMENTS

    var getSetSecond = makeGetSet('Seconds', false);

    // FORMATTING

    addFormatToken('S', 0, 0, function() {
        return ~~(this.millisecond() / 100);
    });

    addFormatToken(0, ['SS', 2], 0, function() {
        return ~~(this.millisecond() / 10);
    });

    addFormatToken(0, ['SSS', 3], 0, 'millisecond');
    addFormatToken(0, ['SSSS', 4], 0, function() {
        return this.millisecond() * 10;
    });
    addFormatToken(0, ['SSSSS', 5], 0, function() {
        return this.millisecond() * 100;
    });
    addFormatToken(0, ['SSSSSS', 6], 0, function() {
        return this.millisecond() * 1000;
    });
    addFormatToken(0, ['SSSSSSS', 7], 0, function() {
        return this.millisecond() * 10000;
    });
    addFormatToken(0, ['SSSSSSSS', 8], 0, function() {
        return this.millisecond() * 100000;
    });
    addFormatToken(0, ['SSSSSSSSS', 9], 0, function() {
        return this.millisecond() * 1000000;
    });


    // ALIASES

    addUnitAlias('millisecond', 'ms');

    // PRIORITY

    addUnitPriority('millisecond', 16);

    // PARSING

    addRegexToken('S', match1to3, match1);
    addRegexToken('SS', match1to3, match2);
    addRegexToken('SSS', match1to3, match3);

    var token;
    for (token = 'SSSS'; token.length <= 9; token += 'S') {
        addRegexToken(token, matchUnsigned);
    }

    function parseMs(input, array) {
        array[MILLISECOND] = toInt(('0.' + input) * 1000);
    }

    for (token = 'S'; token.length <= 9; token += 'S') {
        addParseToken(token, parseMs);
    }
    // MOMENTS

    var getSetMillisecond = makeGetSet('Milliseconds', false);

    // FORMATTING

    addFormatToken('z', 0, 0, 'zoneAbbr');
    addFormatToken('zz', 0, 0, 'zoneName');

    // MOMENTS

    function getZoneAbbr() {
        return this._isUTC ? 'UTC' : '';
    }

    function getZoneName() {
        return this._isUTC ? 'Coordinated Universal Time' : '';
    }

    var proto = Moment.prototype;

    proto.add = add;
    proto.calendar = calendar$1;
    proto.clone = clone;
    proto.diff = diff;
    proto.endOf = endOf;
    proto.format = format;
    proto.from = from;
    proto.fromNow = fromNow;
    proto.to = to;
    proto.toNow = toNow;
    proto.get = stringGet;
    proto.invalidAt = invalidAt;
    proto.isAfter = isAfter;
    proto.isBefore = isBefore;
    proto.isBetween = isBetween;
    proto.isSame = isSame;
    proto.isSameOrAfter = isSameOrAfter;
    proto.isSameOrBefore = isSameOrBefore;
    proto.isValid = isValid$2;
    proto.lang = lang;
    proto.locale = locale;
    proto.localeData = localeData;
    proto.max = prototypeMax;
    proto.min = prototypeMin;
    proto.parsingFlags = parsingFlags;
    proto.set = stringSet;
    proto.startOf = startOf;
    proto.subtract = subtract;
    proto.toArray = toArray;
    proto.toObject = toObject;
    proto.toDate = toDate;
    proto.toISOString = toISOString;
    proto.inspect = inspect;
    proto.toJSON = toJSON;
    proto.toString = toString;
    proto.unix = unix;
    proto.valueOf = valueOf;
    proto.creationData = creationData;
    proto.year = getSetYear;
    proto.isLeapYear = getIsLeapYear;
    proto.weekYear = getSetWeekYear;
    proto.isoWeekYear = getSetISOWeekYear;
    proto.quarter = proto.quarters = getSetQuarter;
    proto.month = getSetMonth;
    proto.daysInMonth = getDaysInMonth;
    proto.week = proto.weeks = getSetWeek;
    proto.isoWeek = proto.isoWeeks = getSetISOWeek;
    proto.weeksInYear = getWeeksInYear;
    proto.isoWeeksInYear = getISOWeeksInYear;
    proto.date = getSetDayOfMonth;
    proto.day = proto.days = getSetDayOfWeek;
    proto.weekday = getSetLocaleDayOfWeek;
    proto.isoWeekday = getSetISODayOfWeek;
    proto.dayOfYear = getSetDayOfYear;
    proto.hour = proto.hours = getSetHour;
    proto.minute = proto.minutes = getSetMinute;
    proto.second = proto.seconds = getSetSecond;
    proto.millisecond = proto.milliseconds = getSetMillisecond;
    proto.utcOffset = getSetOffset;
    proto.utc = setOffsetToUTC;
    proto.local = setOffsetToLocal;
    proto.parseZone = setOffsetToParsedOffset;
    proto.hasAlignedHourOffset = hasAlignedHourOffset;
    proto.isDST = isDaylightSavingTime;
    proto.isLocal = isLocal;
    proto.isUtcOffset = isUtcOffset;
    proto.isUtc = isUtc;
    proto.isUTC = isUtc;
    proto.zoneAbbr = getZoneAbbr;
    proto.zoneName = getZoneName;
    proto.dates = deprecate('dates accessor is deprecated. Use date instead.', getSetDayOfMonth);
    proto.months = deprecate('months accessor is deprecated. Use month instead', getSetMonth);
    proto.years = deprecate('years accessor is deprecated. Use year instead', getSetYear);
    proto.zone = deprecate('moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/', getSetZone);
    proto.isDSTShifted = deprecate('isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information', isDaylightSavingTimeShifted);

    function createUnix(input) {
        return createLocal(input * 1000);
    }

    function createInZone() {
        return createLocal.apply(null, arguments).parseZone();
    }

    function preParsePostFormat(string) {
        return string;
    }

    var proto$1 = Locale.prototype;

    proto$1.calendar = calendar;
    proto$1.longDateFormat = longDateFormat;
    proto$1.invalidDate = invalidDate;
    proto$1.ordinal = ordinal;
    proto$1.preparse = preParsePostFormat;
    proto$1.postformat = preParsePostFormat;
    proto$1.relativeTime = relativeTime;
    proto$1.pastFuture = pastFuture;
    proto$1.set = set;

    proto$1.months = localeMonths;
    proto$1.monthsShort = localeMonthsShort;
    proto$1.monthsParse = localeMonthsParse;
    proto$1.monthsRegex = monthsRegex;
    proto$1.monthsShortRegex = monthsShortRegex;
    proto$1.week = localeWeek;
    proto$1.firstDayOfYear = localeFirstDayOfYear;
    proto$1.firstDayOfWeek = localeFirstDayOfWeek;

    proto$1.weekdays = localeWeekdays;
    proto$1.weekdaysMin = localeWeekdaysMin;
    proto$1.weekdaysShort = localeWeekdaysShort;
    proto$1.weekdaysParse = localeWeekdaysParse;

    proto$1.weekdaysRegex = weekdaysRegex;
    proto$1.weekdaysShortRegex = weekdaysShortRegex;
    proto$1.weekdaysMinRegex = weekdaysMinRegex;

    proto$1.isPM = localeIsPM;
    proto$1.meridiem = localeMeridiem;

    function get$1(format, index, field, setter) {
        var locale = getLocale();
        var utc = createUTC().set(setter, index);
        return locale[field](utc, format);
    }

    function listMonthsImpl(format, index, field) {
        if (isNumber(format)) {
            index = format;
            format = undefined;
        }

        format = format || '';

        if (index != null) {
            return get$1(format, index, field, 'month');
        }

        var i;
        var out = [];
        for (i = 0; i < 12; i++) {
            out[i] = get$1(format, i, field, 'month');
        }
        return out;
    }

    // ()
    // (5)
    // (fmt, 5)
    // (fmt)
    // (true)
    // (true, 5)
    // (true, fmt, 5)
    // (true, fmt)
    function listWeekdaysImpl(localeSorted, format, index, field) {
        if (typeof localeSorted === 'boolean') {
            if (isNumber(format)) {
                index = format;
                format = undefined;
            }

            format = format || '';
        } else {
            format = localeSorted;
            index = format;
            localeSorted = false;

            if (isNumber(format)) {
                index = format;
                format = undefined;
            }

            format = format || '';
        }

        var locale = getLocale(),
            shift = localeSorted ? locale._week.dow : 0;

        if (index != null) {
            return get$1(format, (index + shift) % 7, field, 'day');
        }

        var i;
        var out = [];
        for (i = 0; i < 7; i++) {
            out[i] = get$1(format, (i + shift) % 7, field, 'day');
        }
        return out;
    }

    function listMonths(format, index) {
        return listMonthsImpl(format, index, 'months');
    }

    function listMonthsShort(format, index) {
        return listMonthsImpl(format, index, 'monthsShort');
    }

    function listWeekdays(localeSorted, format, index) {
        return listWeekdaysImpl(localeSorted, format, index, 'weekdays');
    }

    function listWeekdaysShort(localeSorted, format, index) {
        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysShort');
    }

    function listWeekdaysMin(localeSorted, format, index) {
        return listWeekdaysImpl(localeSorted, format, index, 'weekdaysMin');
    }

    getSetGlobalLocale('en', {
        dayOfMonthOrdinalParse: /\d{1,2}(th|st|nd|rd)/,
        ordinal: function(number) {
            var b = number % 10,
                output = (toInt(number % 100 / 10) === 1) ? 'th' :
                (b === 1) ? 'st' :
                (b === 2) ? 'nd' :
                (b === 3) ? 'rd' : 'th';
            return number + output;
        }
    });

    // Side effect imports

    hooks.lang = deprecate('moment.lang is deprecated. Use moment.locale instead.', getSetGlobalLocale);
    hooks.langData = deprecate('moment.langData is deprecated. Use moment.localeData instead.', getLocale);

    var mathAbs = Math.abs;

    function abs() {
        var data = this._data;

        this._milliseconds = mathAbs(this._milliseconds);
        this._days = mathAbs(this._days);
        this._months = mathAbs(this._months);

        data.milliseconds = mathAbs(data.milliseconds);
        data.seconds = mathAbs(data.seconds);
        data.minutes = mathAbs(data.minutes);
        data.hours = mathAbs(data.hours);
        data.months = mathAbs(data.months);
        data.years = mathAbs(data.years);

        return this;
    }

    function addSubtract$1(duration, input, value, direction) {
        var other = createDuration(input, value);

        duration._milliseconds += direction * other._milliseconds;
        duration._days += direction * other._days;
        duration._months += direction * other._months;

        return duration._bubble();
    }

    // supports only 2.0-style add(1, 's') or add(duration)
    function add$1(input, value) {
        return addSubtract$1(this, input, value, 1);
    }

    // supports only 2.0-style subtract(1, 's') or subtract(duration)
    function subtract$1(input, value) {
        return addSubtract$1(this, input, value, -1);
    }

    function absCeil(number) {
        if (number < 0) {
            return Math.floor(number);
        } else {
            return Math.ceil(number);
        }
    }

    function bubble() {
        var milliseconds = this._milliseconds;
        var days = this._days;
        var months = this._months;
        var data = this._data;
        var seconds, minutes, hours, years, monthsFromDays;

        // if we have a mix of positive and negative values, bubble down first
        // check: https://github.com/moment/moment/issues/2166
        if (!((milliseconds >= 0 && days >= 0 && months >= 0) ||
                (milliseconds <= 0 && days <= 0 && months <= 0))) {
            milliseconds += absCeil(monthsToDays(months) + days) * 864e5;
            days = 0;
            months = 0;
        }

        // The following code bubbles up values, see the tests for
        // examples of what that means.
        data.milliseconds = milliseconds % 1000;

        seconds = absFloor(milliseconds / 1000);
        data.seconds = seconds % 60;

        minutes = absFloor(seconds / 60);
        data.minutes = minutes % 60;

        hours = absFloor(minutes / 60);
        data.hours = hours % 24;

        days += absFloor(hours / 24);

        // convert days to months
        monthsFromDays = absFloor(daysToMonths(days));
        months += monthsFromDays;
        days -= absCeil(monthsToDays(monthsFromDays));

        // 12 months -> 1 year
        years = absFloor(months / 12);
        months %= 12;

        data.days = days;
        data.months = months;
        data.years = years;

        return this;
    }

    function daysToMonths(days) {
        // 400 years have 146097 days (taking into account leap year rules)
        // 400 years have 12 months === 4800
        return days * 4800 / 146097;
    }

    function monthsToDays(months) {
        // the reverse of daysToMonths
        return months * 146097 / 4800;
    }

    function as(units) {
        if (!this.isValid()) {
            return NaN;
        }
        var days;
        var months;
        var milliseconds = this._milliseconds;

        units = normalizeUnits(units);

        if (units === 'month' || units === 'quarter' || units === 'year') {
            days = this._days + milliseconds / 864e5;
            months = this._months + daysToMonths(days);
            switch (units) {
                case 'month':
                    return months;
                case 'quarter':
                    return months / 3;
                case 'year':
                    return months / 12;
            }
        } else {
            // handle milliseconds separately because of floating point math errors (issue #1867)
            days = this._days + Math.round(monthsToDays(this._months));
            switch (units) {
                case 'week':
                    return days / 7 + milliseconds / 6048e5;
                case 'day':
                    return days + milliseconds / 864e5;
                case 'hour':
                    return days * 24 + milliseconds / 36e5;
                case 'minute':
                    return days * 1440 + milliseconds / 6e4;
                case 'second':
                    return days * 86400 + milliseconds / 1000;
                    // Math.floor prevents floating point math errors here
                case 'millisecond':
                    return Math.floor(days * 864e5) + milliseconds;
                default:
                    throw new Error('Unknown unit ' + units);
            }
        }
    }

    // TODO: Use this.as('ms')?
    function valueOf$1() {
        if (!this.isValid()) {
            return NaN;
        }
        return (
            this._milliseconds +
            this._days * 864e5 +
            (this._months % 12) * 2592e6 +
            toInt(this._months / 12) * 31536e6
        );
    }

    function makeAs(alias) {
        return function() {
            return this.as(alias);
        };
    }

    var asMilliseconds = makeAs('ms');
    var asSeconds = makeAs('s');
    var asMinutes = makeAs('m');
    var asHours = makeAs('h');
    var asDays = makeAs('d');
    var asWeeks = makeAs('w');
    var asMonths = makeAs('M');
    var asQuarters = makeAs('Q');
    var asYears = makeAs('y');

    function clone$1() {
        return createDuration(this);
    }

    function get$2(units) {
        units = normalizeUnits(units);
        return this.isValid() ? this[units + 's']() : NaN;
    }

    function makeGetter(name) {
        return function() {
            return this.isValid() ? this._data[name] : NaN;
        };
    }

    var milliseconds = makeGetter('milliseconds');
    var seconds = makeGetter('seconds');
    var minutes = makeGetter('minutes');
    var hours = makeGetter('hours');
    var days = makeGetter('days');
    var months = makeGetter('months');
    var years = makeGetter('years');

    function weeks() {
        return absFloor(this.days() / 7);
    }

    var round = Math.round;
    var thresholds = {
        ss: 44, // a few seconds to seconds
        s: 45, // seconds to minute
        m: 45, // minutes to hour
        h: 22, // hours to day
        d: 26, // days to month
        M: 11 // months to year
    };

    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize
    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {
        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);
    }

    function relativeTime$1(posNegDuration, withoutSuffix, locale) {
        var duration = createDuration(posNegDuration).abs();
        var seconds = round(duration.as('s'));
        var minutes = round(duration.as('m'));
        var hours = round(duration.as('h'));
        var days = round(duration.as('d'));
        var months = round(duration.as('M'));
        var years = round(duration.as('y'));

        var a = seconds <= thresholds.ss && ['s', seconds] ||
            seconds < thresholds.s && ['ss', seconds] ||
            minutes <= 1 && ['m'] ||
            minutes < thresholds.m && ['mm', minutes] ||
            hours <= 1 && ['h'] ||
            hours < thresholds.h && ['hh', hours] ||
            days <= 1 && ['d'] ||
            days < thresholds.d && ['dd', days] ||
            months <= 1 && ['M'] ||
            months < thresholds.M && ['MM', months] ||
            years <= 1 && ['y'] || ['yy', years];

        a[2] = withoutSuffix;
        a[3] = +posNegDuration > 0;
        a[4] = locale;
        return substituteTimeAgo.apply(null, a);
    }

    // This function allows you to set the rounding function for relative time strings
    function getSetRelativeTimeRounding(roundingFunction) {
        if (roundingFunction === undefined) {
            return round;
        }
        if (typeof(roundingFunction) === 'function') {
            round = roundingFunction;
            return true;
        }
        return false;
    }

    // This function allows you to set a threshold for relative time strings
    function getSetRelativeTimeThreshold(threshold, limit) {
        if (thresholds[threshold] === undefined) {
            return false;
        }
        if (limit === undefined) {
            return thresholds[threshold];
        }
        thresholds[threshold] = limit;
        if (threshold === 's') {
            thresholds.ss = limit - 1;
        }
        return true;
    }

    function humanize(withSuffix) {
        if (!this.isValid()) {
            return this.localeData().invalidDate();
        }

        var locale = this.localeData();
        var output = relativeTime$1(this, !withSuffix, locale);

        if (withSuffix) {
            output = locale.pastFuture(+this, output);
        }

        return locale.postformat(output);
    }

    var abs$1 = Math.abs;

    function sign(x) {
        return ((x > 0) - (x < 0)) || +x;
    }

    function toISOString$1() {
        // for ISO strings we do not use the normal bubbling rules:
        //  * milliseconds bubble up until they become hours
        //  * days do not bubble at all
        //  * months bubble up until they become years
        // This is because there is no context-free conversion between hours and days
        // (think of clock changes)
        // and also not between days and months (28-31 days per month)
        if (!this.isValid()) {
            return this.localeData().invalidDate();
        }

        var seconds = abs$1(this._milliseconds) / 1000;
        var days = abs$1(this._days);
        var months = abs$1(this._months);
        var minutes, hours, years;

        // 3600 seconds -> 60 minutes -> 1 hour
        minutes = absFloor(seconds / 60);
        hours = absFloor(minutes / 60);
        seconds %= 60;
        minutes %= 60;

        // 12 months -> 1 year
        years = absFloor(months / 12);
        months %= 12;


        // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js
        var Y = years;
        var M = months;
        var D = days;
        var h = hours;
        var m = minutes;
        var s = seconds ? seconds.toFixed(3).replace(/\.?0+$/, '') : '';
        var total = this.asSeconds();

        if (!total) {
            // this is the same as C#'s (Noda) and python (isodate)...
            // but not other JS (goog.date)
            return 'P0D';
        }

        var totalSign = total < 0 ? '-' : '';
        var ymSign = sign(this._months) !== sign(total) ? '-' : '';
        var daysSign = sign(this._days) !== sign(total) ? '-' : '';
        var hmsSign = sign(this._milliseconds) !== sign(total) ? '-' : '';

        return totalSign + 'P' +
            (Y ? ymSign + Y + 'Y' : '') +
            (M ? ymSign + M + 'M' : '') +
            (D ? daysSign + D + 'D' : '') +
            ((h || m || s) ? 'T' : '') +
            (h ? hmsSign + h + 'H' : '') +
            (m ? hmsSign + m + 'M' : '') +
            (s ? hmsSign + s + 'S' : '');
    }

    var proto$2 = Duration.prototype;

    proto$2.isValid = isValid$1;
    proto$2.abs = abs;
    proto$2.add = add$1;
    proto$2.subtract = subtract$1;
    proto$2.as = as;
    proto$2.asMilliseconds = asMilliseconds;
    proto$2.asSeconds = asSeconds;
    proto$2.asMinutes = asMinutes;
    proto$2.asHours = asHours;
    proto$2.asDays = asDays;
    proto$2.asWeeks = asWeeks;
    proto$2.asMonths = asMonths;
    proto$2.asQuarters = asQuarters;
    proto$2.asYears = asYears;
    proto$2.valueOf = valueOf$1;
    proto$2._bubble = bubble;
    proto$2.clone = clone$1;
    proto$2.get = get$2;
    proto$2.milliseconds = milliseconds;
    proto$2.seconds = seconds;
    proto$2.minutes = minutes;
    proto$2.hours = hours;
    proto$2.days = days;
    proto$2.weeks = weeks;
    proto$2.months = months;
    proto$2.years = years;
    proto$2.humanize = humanize;
    proto$2.toISOString = toISOString$1;
    proto$2.toString = toISOString$1;
    proto$2.toJSON = toISOString$1;
    proto$2.locale = locale;
    proto$2.localeData = localeData;

    proto$2.toIsoString = deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)', toISOString$1);
    proto$2.lang = lang;

    // Side effect imports

    // FORMATTING

    addFormatToken('X', 0, 0, 'unix');
    addFormatToken('x', 0, 0, 'valueOf');

    // PARSING

    addRegexToken('x', matchSigned);
    addRegexToken('X', matchTimestamp);
    addParseToken('X', function(input, array, config) {
        config._d = new Date(parseFloat(input, 10) * 1000);
    });
    addParseToken('x', function(input, array, config) {
        config._d = new Date(toInt(input));
    });

    // Side effect imports


    hooks.version = '2.24.0';

    setHookCallback(createLocal);

    hooks.fn = proto;
    hooks.min = min;
    hooks.max = max;
    hooks.now = now;
    hooks.utc = createUTC;
    hooks.unix = createUnix;
    hooks.months = listMonths;
    hooks.isDate = isDate;
    hooks.locale = getSetGlobalLocale;
    hooks.invalid = createInvalid;
    hooks.duration = createDuration;
    hooks.isMoment = isMoment;
    hooks.weekdays = listWeekdays;
    hooks.parseZone = createInZone;
    hooks.localeData = getLocale;
    hooks.isDuration = isDuration;
    hooks.monthsShort = listMonthsShort;
    hooks.weekdaysMin = listWeekdaysMin;
    hooks.defineLocale = defineLocale;
    hooks.updateLocale = updateLocale;
    hooks.locales = listLocales;
    hooks.weekdaysShort = listWeekdaysShort;
    hooks.normalizeUnits = normalizeUnits;
    hooks.relativeTimeRounding = getSetRelativeTimeRounding;
    hooks.relativeTimeThreshold = getSetRelativeTimeThreshold;
    hooks.calendarFormat = getCalendarFormat;
    hooks.prototype = proto;

    // currently HTML5 input type only supports 24-hour formats
    hooks.HTML5_FMT = {
        DATETIME_LOCAL: 'YYYY-MM-DDTHH:mm', // <input type="datetime-local" />
        DATETIME_LOCAL_SECONDS: 'YYYY-MM-DDTHH:mm:ss', // <input type="datetime-local" step="1" />
        DATETIME_LOCAL_MS: 'YYYY-MM-DDTHH:mm:ss.SSS', // <input type="datetime-local" step="0.001" />
        DATE: 'YYYY-MM-DD', // <input type="date" />
        TIME: 'HH:mm', // <input type="time" />
        TIME_SECONDS: 'HH:mm:ss', // <input type="time" step="1" />
        TIME_MS: 'HH:mm:ss.SSS', // <input type="time" step="0.001" />
        WEEK: 'GGGG-[W]WW', // <input type="week" />
        MONTH: 'YYYY-MM' // <input type="month" />
    };

    return hooks;

})));

/**
 * This plug-in for DataTables represents the ultimate option in extensibility
 * for sorting date / time strings correctly. It uses
 * [Moment.js](http://momentjs.com) to create automatic type detection and
 * sorting plug-ins for DataTables based on a given format. This way, DataTables
 * will automatically detect your temporal information and sort it correctly.
 *
 * For usage instructions, please see the DataTables blog
 * post that [introduces it](//datatables.net/blog/2014-12-18).
 *
 * @name Ultimate Date / Time sorting
 * @summary Sort date and time in any format using Moment.js
 * @author [Allan Jardine](//datatables.net)
 * @depends DataTables 1.10+, Moment.js 1.7+
 *
 * @example
 *    $.fn.dataTable.moment( 'HH:mm MMM D, YY' );
 *    $.fn.dataTable.moment( 'dddd, MMMM Do, YYYY' );
 *
 *    $('#example').DataTable();
 */

(function(factory) {
    if (typeof define === "function" && define.amd) {
        define(["jquery", "moment", "datatables"], factory);
    } else {
        factory(jQuery, moment);
    }
}(function($, moment) {

    $.fn.dataTable.moment = function(format, locale) {
        var types = $.fn.dataTable.ext.type;

        // Add type detection
        types.detect.unshift(function(d) {
            // Strip HTML tags if possible
            if (d && d.replace) {
                d = d.replace(/<.*?>/g, '');
            }

            // Null and empty values are acceptable
            if (d === '' || d === null) {
                return 'moment-' + format;
            }

            return moment(d, format, locale, true).isValid() ?
                'moment-' + format :
                null;
        });

        // Add sorting method - use an integer for the sorting
        types.order['moment-' + format + '-pre'] = function(d) {
            return d === '' || d === null ?
                -Infinity :
                parseInt(moment(d.replace ? d.replace(/<.*?>/g, '') : d, format, locale, true).format('x'), 10);
        };
    };

}));
/**
 * This plug-in for DataTables represents the ultimate option in extensibility
 * for sorting date / time strings correctly. It uses
 * [Moment.js](http://momentjs.com) to create automatic type detection and
 * sorting plug-ins for DataTables based on a given format. This way, DataTables
 * will automatically detect your temporal information and sort it correctly.
 *
 * For usage instructions, please see the DataTables blog
 * post that [introduces it](//datatables.net/blog/2014-12-18).
 *
 * @name Ultimate Date / Time sorting
 * @summary Sort date and time in any format using Moment.js
 * @author [Allan Jardine](//datatables.net)
 * @depends DataTables 1.10+, Moment.js 1.7+
 *
 * @example
 *    $.fn.dataTable.moment( 'HH:mm MMM D, YY' );
 *    $.fn.dataTable.moment( 'dddd, MMMM Do, YYYY' );
 *
 *    $('#example').DataTable();
 */

(function(factory) {
    if (typeof define === "function" && define.amd) {
        define(["jquery", "moment", "datatables"], factory);
    } else {
        factory(jQuery, moment);
    }
}(function($, moment) {

    $.fn.dataTable.moment = function(format, locale) {
        var types = $.fn.dataTable.ext.type;

        // Add type detection
        types.detect.unshift(function(d) {
            // Strip HTML tags if possible
            if (d && d.replace) {
                d = d.replace(/<.*?>/g, '');
            }

            // Null and empty values are acceptable
            if (d === '' || d === null) {
                return 'moment-' + format;
            }

            return moment(d, format, locale, true).isValid() ?
                'moment-' + format :
                null;
        });

        // Add sorting method - use an integer for the sorting
        types.order['moment-' + format + '-pre'] = function(d) {
            return d === '' || d === null ?
                -Infinity :
                parseInt(moment(d.replace ? d.replace(/<.*?>/g, '') : d, format, locale, true).format('x'), 10);
        };
    };

}));
"use strict";

document.addEventListener("DOMContentLoaded", function () {
  $("section[data-component='DetailedComparativeContainer'] .itau-button-container a.itau-button-container__a").click(function () {
    var linkTitle = $(this).closest(".detailed-item__wrapper").find(".detailed-item__title-container h3.detailed-item__title").text();
    var linkText = $(this).text();
    var itemClicado = 'BTN' + ':DetailedComparativeItem' + ':' + linkTitle + ':' + linkText;
    itemClicado = PascalCase(itemClicado);
    setAnalyticsData(itemClicado);
  });
});
"use strict";

$(document).ready(function () {
  var sliders = [];
  var firstRun = true;
  destroySlider();
  startComparativeContainer();

  function resizeChildren(el) {
    var max = 0;
    var children = $(el).find('.detailed-item__wrapper');
    children.each(function (i, ch) {
      if ($(ch).height() > max) {
        max = $(ch).height();
      }
    });
    children.height(max + 'px');
  }

  function destroyAriaSelected(el) {
    removeAriaChildren($(el).children());
    removeAriaChildren($(el).parent().parent().find('.lSPager.lSpg').children());
  }

  function removeAriaChildren(children) {
    children.each(function (i, ch) {
      $(ch).removeAttr('aria-selected');
    });
  }

  function startCarousel(cardEl) {
    var windowSize = $(window).width();
    var windowPixelRate = window.devicePixelRatio;

    if (windowSize >= 992 || windowPixelRate < 1.5) {
      return false;
    } else if (firstRun) {
      firstRun = false;
    }

    return true;
  }

  function startComparativeContainer() {
    $('.detailed-comparative-container').each(function (i, cardEl) {
      var windowSize = $(window).width();

      if (windowSize >= 992) {
        resizeChildren(cardEl);
      }

      var isAuthor = $(cardEl).find('.detailed-comparative__list').hasClass('ul-edit-mode');

      if (!isAuthor && startCarousel(cardEl)) {
        var buildDotsPercentage = function buildDotsPercentage(el) {
          var dots = el.parent().parent().find('.lSPager li');
          var totalDots = dots.length;
          dots.each(function () {
            var index = $(this).find('a').data('index');
            var percentage = 100 * index / totalDots;
            var element = $(this).find('.timeline-track').css('width', percentage + '%');
          });
          sliders.push(slider);
        };

        var slider = $($(cardEl).find('.detailed-comparative__list')).lightSlider({
          loop: false,
          speed: 600,
          currentPagerPosition: 'middle',
          enableDrag: false,
          autoWidth: false,
          adaptiveHeight: true,
          easing: 'cubic-bezier(0.25, 0, 0.25, 1)',
          responsive: [{
            breakpoint: 8000,
            settings: {
              item: 2,
              slideMove: 1,
              controls: true
            }
          }, {
            breakpoint: 769,
            settings: {
              item: 2,
              slideMove: 2,
              controls: true,
              slideMargin: 30
            }
          }, {
            breakpoint: 652,
            settings: {
              item: 2,
              slideMove: 2,
              controls: false
            }
          }, {
            breakpoint: 321,
            settings: {
              item: 1,
              slideMove: 1,
              controls: false
            }
          }],
          onSliderLoad: function onSliderLoad(el) {
            buildDotsPercentage(el);
            $(el).removeClass('cS-hidden');
            destroyAriaSelected(el);
            resizeChildren(el);
            resizeContainerList(el);
          }
        });
      } else {
        $(cardEl).find('.detailed-comparative__list').removeClass('cS-hidden');
      }

      ;
    });
  }

  var element = $('.detailed-comparative__list .detailed-comparative-item');
  element.map(function (i, elmnt) {
    if (element.length == 2) {
      $(element).removeClass('col-lg-4').addClass('col-lg-6');
    }
  });

  function destroySlider() {
    sliders.forEach(function (slider) {
      slider.destroy();
    });
    sliders = [];
  }

  $(window).on('resize', function () {
    destroySlider();
    startComparativeContainer();
  });

  function resizeContainerList(el) {
    var sizeUl = el.width();
    var qntdLi = el.children().length;
    var sizeCard = sizeUl / qntdLi;
    var finalSize = sizeUl + sizeCard;
    el.width(finalSize);
  }
});
"use strict";

const corbanComponentes = {
  errorBox: (item)=>{
    return(
      `
      <div class="corban-search__select-error-message__title">
        <div class="corban-search__select-error-message__title--icon icon-itaufonts_exclamacao"></div>
        <h3 class="corban-search__select-error-message__title--text" role="alert" id="corban-search--alert">Existe 1 erro que precisa ser corrigido</h3>
        <div class="corban-search__select-error-message__title__close-button">
          <label for="error-message-close-button" aria-hidden="true" hidden>Fechar</label>
            <button role="button" aria-label="Fechar caixa de mensagem de erro" class="corban-search__select-error-message__title__close-button__style" id="error-message-close-button">
              <div  class="corban-search__select-error-message__title__close-button__style--icon icon-itaufonts_fechar"></div>
            </button>
        </div>
      </div>
      <div class="corban-search__select-error-message__description" id="${item.name}-error">
        <p class="corban-search__select-error-message__description__text">
          <span class="corban-search__select-error-message__description__text--number">${item.number}</span>
          <a class="corban-search__select-error-message__description__text--link" role="link" tabindex="0" id="${item.name}-select-focus" aria-describedby="corban-search--alert-description">${item.text}:</a>
          <span class="corban-search__select-error-message__description__text--complement" id="corban-search--alert-description">
            selecione ${item.article} ${item.text} para prosseguir.
          </span>
        </p>
      </div>`
    )
  }
}

const corbanSearch = {
  searchValues: {},

  init: ()=>{
    specFormer.init('.corban-search');

    corbanSearch.populateServiceSelectOnLoad();

    specFormer.toggleDisabled('#segment-select');
    specFormer.toggleDisabled('#state-select');
    specFormer.toggleDisabled('#city-select');
    specFormer.toggleDisabled('#neighborhood-select');
    specFormer.toggleDisabled('#fantasy-name-input');
    
    corbanSearch.addEventListernersOnLoad();
    
    console.log("corban search init");
  },

  addEventListernersOnLoad: ()=>{
    // SERVICE SELECT
    jQuery('#service-select').change(function() {
      resetsAfterTheErrorIsResolved('service');
      corbanSearch.populateSegmentSelectOnChange();
    });

    jQuery('#segment-select').change(function(){
      resetsAfterTheErrorIsResolved('segment');
      corbanSearch.populateStateSelectOnChange();
    });

    jQuery('#state-select').change(function(){
      resetsAfterTheErrorIsResolved('state');
      corbanSearch.populateCitySelectOnChange();
    });

    jQuery('#city-select').change(function(){
      resetsAfterTheErrorIsResolved('city');
      corbanSearch.populateNeighborhoodSelectOnChange();
    });

    jQuery('#neighborhood-select').change(function(){
      resetsAfterTheErrorIsResolved('neighborhood');
      if(jQuery('#fantasy-name-input').attr('disabled') == 'disabled') specFormer.toggleDisabled('#fantasy-name-input');
    });

    jQuery('#corban-search_button').click(()=>{
      corbanSearch.validateInputs();
    });

    jQuery('.corban-search__form').submit((e)=>{ 
      e.preventDefault(); 
      corbanSearch.validateInputs();
    });

    jQuery(document).on('click', '#btn_prev', (ev)=>{
      if(!jQuery(ev.target).hasClass('disable')){
        prevPage();
      }
    });
    
    jQuery(document).on('click', '#btn_first', (ev)=>{
      if(!jQuery(ev.target).hasClass('disable')){
        firstPage();
      }
    });
    
    jQuery(document).on('click', '#btn_last', (ev)=>{
      if(!jQuery(ev.target).hasClass('disable')){
        lastPage();
      }
    });
    
    jQuery(document).on('click', '#btn_next', (ev)=>{
      if(!jQuery(ev.target).hasClass('disable')){
        nextPage();
      }
    });
  },

  populateServiceSelectOnLoad: ()=>{
    
    var urlSvcService = $(".corban-search .container").data("corban-service"); // Call the Service type services using JSONP method

    $.jsonp({
      url: urlSvcService,
      dataType: 'jsonp',
      callbackParameter: 'callback',
      success: function success(data) {

        var serviceData = eval('(' + data.d + ')');
        var listServices = serviceData.root.listaServico.row.map((item)=>{
          return {
            value: item.CodigoServico,
            name: item.DescricaoServico.trim()
          }
        });

        specFormer.populateSelect('#service-select', listServices);
      },
      error: function error(xOptions, textStatus) {
        // display an error message in case of error
        console.log('Ocorreu um erro no processamento. Tente novamente mais tarde.');
      }
    });
  },

  populateSegmentSelectOnChange: ()=>{
    corbanSearch.searchValues = specFormer.getFormValues("#corban-search-form");
    var urlSvcSegment = jQuery(".corban-search .container").data("corban-segment");

    var selectedService = parseInt(corbanSearch.searchValues['service']); // Call the Segment services using JSONP method

    jQuery.jsonp({
      url: urlSvcSegment,
      data: {
        servico: selectedService
      },
      dataType: 'jsonp',
      callbackParameter: 'callback',
      success: function success(data) {
        // check if the service endpoint returned a list of (code, service description)
        var serviceData = [].concat(eval('(' + data.d + ')').root.listaSegmento.row || []);

        var listSegmentos = serviceData.map((item)=>{
          return {
            value: item.CodigoSegmento,
            name: item.DescricaoSegmento.trim()
          }
        });

        specFormer.clearInput('#segment-select');
        specFormer.clearInput('#state-select');
        specFormer.clearInput('#city-select');
        specFormer.clearInput('#neighborhood-select');
        specFormer.populateSelect('#segment-select', listSegmentos);
        if(jQuery('#segment-select').attr('disabled') == 'disabled') specFormer.toggleDisabled('#segment-select');

      },
      error: function error(xOptions, textStatus) {
        // display an error message in case of error
        console.log('Ocorreu um erro no processamento. Tente novamente mais tarde.');
      }
    });
  },  

  populateStateSelectOnChange: ()=>{
    var urlSvcState = $(".corban-search .container").data("corban-state");
    corbanSearch.searchValues = specFormer.getFormValues("#corban-search-form");

    var selectedService = corbanSearch.searchValues['service'];
    var selectedSegment = corbanSearch.searchValues['segment'];

    jQuery.jsonp({
      url: urlSvcState,
      data: {
        servico: selectedService,
        segmento: selectedSegment
      },
      dataType: 'jsonp',
      callbackParameter: 'callback',
      success: function success(data) {
        // check if the service endpoint returned a list of (code, service description)
        var stateData = [].concat(eval('(' + data.d + ')').root.listaUF.row || []);

        var listStates = stateData.map((item)=>{
          return {
            value: item.CodigoUf,
            name: item.CodigoUf
          }
        });
        
        specFormer.clearInput('#state-select');
        specFormer.clearInput('#city-select');
        specFormer.clearInput('#neighborhood-select');
        specFormer.populateSelect('#state-select', listStates);
        if(jQuery('#state-select').attr('disabled') == 'disabled') specFormer.toggleDisabled('#state-select');
      },
      error: function error(xOptions, textStatus) {
        // display an error message in case of error
        console.log('Ocorreu um erro no processamento. Tente novamente mais tarde.');
      }
    });
  },

  populateCitySelectOnChange: ()=>{
    const urlSvcCity = $(".corban-search .container").data("corban-city");
    corbanSearch.searchValues = specFormer.getFormValues("#corban-search-form");

    let selectedUF = corbanSearch.searchValues['state'];
    var selectedService = corbanSearch.searchValues['service'];
    var selectedSegment = corbanSearch.searchValues['segment'];

    $.jsonp({
      url: urlSvcCity,
      data: {
        estado: selectedUF,
        servico: selectedService,
        segmento: selectedSegment
      },
      dataType: 'jsonp',
      callbackParameter: 'callback',
      success: function success(data) {
        let cityData = [].concat(eval('(' + data.d + ')').root.listaCidade.row || []);

        var listCities = cityData.map((item)=>{
          return {
            value: item.CodigoMunicipio,
            name: item.DescricaoMunicipio
          }
        });

        specFormer.clearInput('#city-select');
        specFormer.clearInput('#neighborhood-select');
        specFormer.populateSelect('#city-select', listCities);
        if(jQuery('#city-select').attr('disabled') == 'disabled') specFormer.toggleDisabled('#city-select');
      },
      error: function error(xOptions, textStatus) {
        // display an error message in case of error
        console.log('Ocorreu um erro no processamento. Tente novamente mais tarde.');
      }
    });
  },

  populateNeighborhoodSelectOnChange: ()=>{
    const urlSvcNeighborhood = $(".corban-search .container").data("corban-neighborhood");
    corbanSearch.searchValues = specFormer.getFormValues("#corban-search-form");

    var selectedCity = corbanSearch.searchValues['city'];
    var selectedUF = corbanSearch.searchValues['state'];
    var selectedService = corbanSearch.searchValues['service'];
    var selectedSegment = corbanSearch.searchValues['segment'];

    $.jsonp({
      url: urlSvcNeighborhood,
      data: {
        codCidade: selectedCity,
        estado: selectedUF,
        servico: selectedService,
        segmento: selectedSegment
      },
      dataType: 'jsonp',
      callbackParameter: 'callback',
      success: function success(data) {

        let neighborhoodData = [].concat(eval('(' + data.d + ')').root.listaBairro.row || []);

        var listNeighborhoods = neighborhoodData.map((item)=>{
          return {
            value: item.CodigoBairro,
            name: item.DescricaoBairro
          }
        });

        specFormer.clearInput('#neighborhood-select');
        specFormer.populateSelect('#neighborhood-select', listNeighborhoods);
        if(jQuery('#neighborhood-select').attr('disabled') == 'disabled') specFormer.toggleDisabled('#neighborhood-select');

      },
      error: function error(xOptions, textStatus) {
        // display an error message in case of error
        console.log('Ocorreu um erro no processamento. Tente novamente mais tarde.');
      }
    });
  },

  displayResults: ()=>{
    $('.elementZebWrapper').after('<div class="loading"><img id="loading" src="/_arquivosestaticos/Itau/img/loading.gif"/></div>');
    $('.elementZeb').remove();
    $('#observacao').remove();
    $('#centralTel').remove();
    $('.page_navigation').hide();
    $('.validaForm').hide();
  
    if (json) {
      $('.loading').remove();
      $('.page_navigation').show();
      var i = 0;
      var str = '<div><h3 class="p-results-intro" aria-label="resultados da busca">resultados da busca</h3></div>';
      str = displayCorrespondentsByPage(str, correspondentsList, actualPage, pageItems);
  
      if (correspondentsList.length > 4) {
        str = paginator(str, actualPage, correspondentsList.length, pageItems);
        $('.container-result-box:last').html(str);
      } else if (correspondentsList.length === 0) {
        $('.container-result-box:last').html(str);
      } else {
        str += '<div class="pagination-correspondent" role="pagination"><span> 1 de 1 página </span></div>';
        $('.container-result-box:last').html(str);
      }
    }
  
    moveToTop();
  },

  validateInputs: ()=>{
    // CLEAN PREVIOUS SEARCH RESULTS IN CASE HAS SOME HISTORY
    $('#container-result-box').html(); //Start Validation of Select fields
    
    corbanSearch.searchValues = specFormer.getFormValues("#corban-search-form");
    console.log(corbanSearch.searchValues);
    if (corbanSearch.searchValues.service == undefined || corbanSearch.searchValues.service == '') {
      selectValuesErrorDisplay('service');
      addAccessibility('service');
      return;
    } else if (corbanSearch.searchValues.segment == undefined || corbanSearch.searchValues.segment == '') {
      selectValuesErrorDisplay('segment');
      addAccessibility('segment');
      return;
    } else if (corbanSearch.searchValues.state == undefined || corbanSearch.searchValues.state == '') {
      selectValuesErrorDisplay('state');
      addAccessibility('state');
      return;
    } else if (corbanSearch.searchValues.city== undefined || corbanSearch.searchValues.city == '') {
      selectValuesErrorDisplay('city');
      addAccessibility('city');
      return;
    } else if(corbanSearch.searchValues.neighborhood == undefined || corbanSearch.searchValues.neighborhood == '') {
      selectValuesErrorDisplay('neighborhood');
      addAccessibility('neighborhood');
      return;
    }
    
    corbanSearch.searchResultsOnClick();
  },

  searchResultsOnClick: ()=>{
    corbanSearch.searchValues = specFormer.getFormValues("#corban-search-form");

    let cityValue= corbanSearch.searchValues['city'];
    let stateValue= corbanSearch.searchValues['state'];
    let serviceValue= corbanSearch.searchValues['service'];
    let segmentValue= corbanSearch.searchValues['segment'];
    let neighborhoodValue= corbanSearch.searchValues['neighborhood'];
    let optionalValue= corbanSearch.searchValues['fantasy-name'];

    jQuery.jsonp({
      //Get the Correspondent Search Results Service endpoint URL
      url: jQuery(".corban-search .container").data("corban-searchdata"),
      data: {
        cidade: cityValue,
        estado: stateValue,
        servico: serviceValue,
        segmento: segmentValue,
        bairro: neighborhoodValue,
        nomeFantasiaCorrespondente: optionalValue
      },
      dataType: 'jsonp',
      callbackParameter: 'callback',
      // Call the Service type services using JSONP method
      success: function success(data) {
        // check if the service endpoint returned a list of (code, service description)
        var serviceData = eval('(' + data.d + ')'); // from here on in the correspondentsList variable has all the correspondents from search filters applied
        // CHECK IF NO RESULTS WAS RETURNED
  
        if (serviceData.root.listaCorrespondente === null) correspondentsList = []; // ELSE AT LEAST ONE RESULTS WAS RETURNED
        else correspondentsList = serviceData.root.listaCorrespondente.row; // DISPLAY SEARCH RESULTS USING PAGINATION
  
        displayCorrespondentsSearch(correspondentsList, 1, pageItems);
        
        jQuery(".p-results-intro").focus();
      },
      error: function error(xOptions, textStatus) {
        // display an error message in case of error
        correspondentsList = false;
        jQuery('.corban-search-error__container').show();
        jQuery(".corban-search-error__container").focus();
      }
    });
  },
  
};

jQuery(document).ready(()=>{
  if(jQuery('.corban-search').length > 0) corbanSearch.init();
});

let actualPage = 1;
let correspondentsList = [];
let pageItems = 4;

var validaObj = function validaObj(par, sinal) {
  var valor;

  var _sinal;

  _sinal = sinal != "" ? " " + sinal + " " : "";

  if (par != '[object Object]') {
    valor = _sinal + par;
  } else {
    valor = " ";
  }

  return valor;
}; //FUNCTION TO DISPLAY A COMPLETE PAGINATION ELEMENT WHEN TOTAL NR OF CORRESPONDENTS CARDS IS GREATER THAN 4 


var paginator = function paginator(str, actualPage, totalCorrespondents, pageItems) {
  // INITIATE LOCAL VARIABLES
  var lastPage = Math.ceil(totalCorrespondents / pageItems);
  var pageList = scrollPage(actualPage); // BUILD THE STRING WITH ALL THE PAGINATOR ELEMENTS

  str += '<div class="pagination-correspondent">';
  str += actualPage != 1 ? '<a  role="button" aria-disabled="false" aria-label="página anterior" id="btn_prev" tabindex="0">anterior</a>' : '<a role="button" aria-disabled="true" aria-label="página anterior" id="btn_prev" class="disable" tabindex="-1">anterior</a>';
  str += '<span class="divisor" aria-hidden="true">|</span>';
  str += actualPage != 1 ? '<a  role="button" aria-disabled="false" aria-label="primeira página" id="btn_first" tabindex="0">primeira</a>' : '<a role="button" aria-disabled="true" aria-label="primeira página" id="btn_first" class="disable" tabindex="-1">primeira</a>';
  str += '<span class="divisor" aria-hidden="true">|</span>';
  str += pageList + '<p aria-hidden="true">de ' + lastPage + ' páginas</p>';
  str += '<span class="divisor" aria-hidden="true">|</span>';
  str += actualPage != lastPage ? '<a  role="button" aria-disabled="false" aria-label="última página" id="btn_last" tabindex="0">última</a>' : '<a  role="button" aria-disabled="true" aria-label="última página" id="btn_last" class="disable" tabindex="-1">última</a>';
  str += '<span class="divisor" aria-hidden="true">|</span>';
  str += actualPage != lastPage ? '<a role="button" aria-disabled="false" aria-label="próxima página" id="btn_next" tabindex="0">próxima</a>' : '<a role="button" aria-disabled="true" aria-label="próxima página" id="btn_next" class="disable" tabindex="-1">próxima</a>';
  str += '</div>'; // RETURN THE STRING WITH THE FULL PAGINATOR FUNCTIONALITY

  return str;
}; // FUNCTION THAT BUILDS THE PAGINATOR STACK OF PAGE ELEMENTS


var scrollPage = function scrollPage(actualPage) {
  // INITIATE LOCAL VARIABLES
  var lastPage = Math.ceil(correspondentsList.length / pageItems);
  var str = ''; // BUILD THE STRING WITH THE PAGINATOR STACK OF PAGE ELEMENTS

  str += '<select id="corban-search__pagination--select-link" onchange="location = this.value"  aria-label="' + actualPage + ' de ' + lastPage + ' páginas." aria-labelledby="pagination-correspondent">';

  for (i = 1; i <= lastPage; i++) {
    var selected = i == actualPage ? 'selected' : '';
    str += '<option value="javascript:linkPageList(' + i + ')" ' + selected + '>' + i + '</option>';
  } // RETURN THE STRING WITH THE FULL PAGINATOR FUNCTIONALITY

  str += '</select>';
  return str;
};

function displayCorrespondentsByPage(str, correspondentsList, actualPage, pageItems) {
  var elementZeb = '';
  var itensToShow = [];
  if (Array.isArray(correspondentsList)) itensToShow = correspondentsList.slice(actualPage * pageItems - pageItems, actualPage * pageItems);else itensToShow[0] = correspondentsList;

  if (itensToShow[0] === undefined) {
    str += '<div>';
    str += '<p class="p-no-results" aria-label="nenhum correspondente foi encontrado">nenhum correspondente foi encontrado</p>';
    str += '</div>';
  }

  for (i = 0; i < itensToShow.length; i++) {
    elementZeb = 'elementZeb' + i;
    str += '<div role="card" class="elementZeb correspondent-result-box" id="' + elementZeb + '">';
    str += '<h4 aria-label="correspondente ' + itensToShow[i].NomeInstalacaoCorrespondente + '"><span>Correspondente: ' + itensToShow[i].NomeInstalacaoCorrespondente + '</span></h4>';
    str += '<p aria-label="nome fantasia ' + itensToShow[i].NomeFantasiaCorrespondente + '"><span>Nome Fantasia:</span> ' + itensToShow[i].NomeFantasiaCorrespondente + '</p>';
    str += '<p aria-label="cnpj ' + itensToShow[i].CnpjCorrespondente + '"><span>CNPJ:</span> ' + itensToShow[i].CnpjCorrespondente + '</p>';
    str += '<p aria-label="endereço ' + validaObj(itensToShow[i].DescricaoEnderecoCorrespondente, "") + validaObj(itensToShow[i].NumeroLogradouroCorrespondente, ",") + validaObj(itensToShow[i].DescricaoComplementoCorrespondente, "-") + validaObj(itensToShow[i].DescricaoBairroCorrespondente, "-") + validaObj(itensToShow[i].DescricaoMunicipioCorrespondente, "-") + validaObj(itensToShow[i].CodigoUfCorrespondente, "-") + '"><span>Endereço:</span> ' + validaObj(itensToShow[i].DescricaoEnderecoCorrespondente, "") + validaObj(itensToShow[i].NumeroLogradouroCorrespondente, ",") + validaObj(itensToShow[i].DescricaoComplementoCorrespondente, "-") + validaObj(itensToShow[i].DescricaoBairroCorrespondente, "-") + validaObj(itensToShow[i].DescricaoMunicipioCorrespondente, "-") + validaObj(itensToShow[i].CodigoUfCorrespondente, "-") + '</p>';
    str += '<p aria-label="contratante ' + itensToShow[i].NomeEmpresa + '"><span>Contratante:</span> ' + itensToShow[i].NomeEmpresa + '</p>';
    str += '</div>';
  }

  return str;
} // FUNCTION TO SET THE SEARCH RESULTS PAGE WITH THE CORRECT PAGINATOR MECHANISM


var displayCorrespondentsSearch = function displayCorrespondentsSearch(json, actualPage, pageItems) {
  $('.elementZebWrapper').after('<div class="loading"><img id="loading" src="/_arquivosestaticos/Itau/img/loading.gif"/></div>');
  $('.elementZeb').remove();
  $('#observacao').remove();
  $('#centralTel').remove();
  $('.page_navigation').hide();
  $('.validaForm').hide();

  let labelMaxItens = correspondentsList.length == null ? 1 : correspondentsList.length;
  let labelItemsFrom = actualPage == 1 ? '1' : (actualPage-1)*pageItems+1;
  let labelItemsTo = labelMaxItens <= 4 ? labelMaxItens : Math.min(actualPage*pageItems, labelMaxItens);  

  let labelItemsText = labelMaxItens == 0 ? `exibidos 0 itens` : `exibidos ${labelItemsFrom}-${labelItemsTo} de ${labelMaxItens} itens`;
  if (json) {
    $('.loading').remove();
    $('.page_navigation').show();
    var i = 0;
    var str = `<div><h3 class="p-results-intro" id="p-results-intro" aria-label="resultados da busca items" tabindex="-1" aria-describedby="p-results-intro p-results-itens">resultados da busca</h3><p id="p-results-itens" class="--fake-hidden" aria-label="${labelItemsText}">${labelItemsText}</p></div>`;
    str = displayCorrespondentsByPage(str, correspondentsList, actualPage, pageItems);

    if (correspondentsList.length > 4) {
      str = paginator(str, actualPage, correspondentsList.length, pageItems);
      $('.container-result-box:last').html(str);
    } else if (correspondentsList.length === 0) {
      $('.container-result-box:last').html(str);
    } else {
      str += '<div class="pagination-correspondent" role="pagination"><span> 1 de 1 página </span></div>';
      $('.container-result-box:last').html(str);
    }
  }

  moveToTop();
}; //CORRESPONDENTS SEARCH RESULTS FUNCTION: BUILD THE CORRESPONDENT RESULTS FROM THE SEARCH FILTERS


function moveToTop() {
  var targetOffset = $('#corban-search_button').offset();
  var targetTop = targetOffset.top - 60;
  $('html,body').animate({
    scrollTop: targetTop
  }, 0);

  $('.p-results-intro').focus();
}

var searchCorrespondentsData = function searchCorrespondentsData(cityValue, stateValue, serviceValue, segmentValue, neighborhoodValue, optionalValue) {
  $.jsonp({
    //Get the Correspondent Search Results Service endpoint URL
    url: $(".corban-search .container").data("corban-searchdata"),
    data: {
      cidade: cityValue,
      estado: stateValue,
      servico: serviceValue,
      segmento: segmentValue,
      bairro: neighborhoodValue,
      nomeFantasiaCorrespondente: optionalValue
    },
    dataType: 'jsonp',
    callbackParameter: 'callback',
    // Call the Service type services using JSONP method
    success: function success(data) {
      // check if the service endpoint returned a list of (code, service description)
      var serviceData = eval('(' + data.d + ')'); // from here on in the correspondentsList variable has all the correspondents from search filters applied
      // CHECK IF NO RESULTS WAS RETURNED

      if (serviceData.root.listaCorrespondente === null) correspondentsList = []; // ELSE AT LEAST ONE RESULTS WAS RETURNED
      else correspondentsList = serviceData.root.listaCorrespondente.row; // DISPLAY SEARCH RESULTS USING PAGINATION

      displayCorrespondentsSearch(correspondentsList, 1, pageItems);
    },
    error: function error(xOptions, textStatus) {
      // display an error message in case of error
      correspondentsList = false;
      $('.corban-search-error__container').show();
    }
  });
}; //Error description focus function


$('.corban-search__select-error-message__description__text--link').click(function () {
  var focus = $(this).attr('id');

  if (focus == 'service-select-focus') {
    $('#service-select').focus();
  } else if (focus == 'segment-select-focus') {
    $('#segment-select').focus();
  } else if (focus == 'state-select-focus') {
    $('#state-select').focus();
  } else if (focus == 'city-select-focus') {
    $('#city-select').focus();
  } else if (focus == 'neighborhood-select-focus') {
    $('#neighborhood-select').focus();
  }
}); //Error message close button function

$('.select-error-message__close-button--style').click(function () {
  $('.select-error-message').hide();
});

function aplyDisabled(target) {
  if (target == "input-name") {
    $("#corban-search-".concat(target)).attr("disabled", "disabled");
    $("#corban-search-".concat(target)).addClass('disabled');
    $("#corban-search-".concat(target)).parent().addClass('disabled');
    $("#corban-search-".concat(target)).siblings('label').addClass('disabled');
  } else {
    $("#".concat(target, "-select")).attr("disabled", "disabled");
    $("#".concat(target, "-select")).addClass('disabled');
    $("#".concat(target, "-select")).parent().addClass('disabled');
    $("#".concat(target, "-select")).siblings('label').addClass('disabled');
  }
}

function selectValuesErrorDisplay(target) {
  $('.corban-search-filters-error__text--style').hide();
  $(`#${target}-select`).siblings('.spec-former__form-input__error-message').removeClass('--hidden');
  $(`#${target}-select`).siblings('.spec-former__form-input__error-icon').removeClass('--hidden');
  $(`#${target}-select`).siblings('.spec-former__form-input__select__icon').addClass('--hidden');
  $(`#${target}-select`).addClass('select-input-error');
  corbanSearch_createErrorMensage(target);
}

function addAccessibility(target) {
  $("#".concat(target, "-select")).attr("aria-describedby", `${target}-error-message`);
  $("#".concat(target, "-select")).attr("aria-invalid", "true");
  $(".select-error-message").attr("aria-live", "polite");
  $("#".concat(target, "-select-focus")).focus();
}

function resetsAfterTheErrorIsResolved(target) {
  $(".select-error-message").removeAttr("aria-live");
  $("#".concat(target, "-select")).removeAttr("aria-describedby");
  $("#".concat(target, "-select")).removeAttr("aria-invalid");
  // $('.select-error-message').hide();
  $(`#${target}-select`).siblings('.spec-former__form-input__error-icon').addClass('--hidden');
  $(`#${target}-select`).siblings('.spec-former__form-input__select__icon').removeClass('--hidden');
  $('.spec-former__form-input__error-message').addClass('--hidden')
  $(".spec-former__form-input__select__input").removeClass('select-input-error');
  // $("#".concat(target, "-select")).removeAttr('aria-invalid');
  // $("#".concat(target, "-corban-search-filter > label.corban-search-filter__label--style")).removeClass('error-color');
  corbanSearch_closeErrorMessage();
}

var prevPage = function prevPage() {
  actualPage -= 1;
  displayCorrespondentsSearch(correspondentsList, actualPage, pageItems);
}; // FUCTION TO DISPLAY THE CORRESPONDENT NEXT PAGE SEARCH RESULTS


var nextPage = function nextPage() {
  actualPage += 1;
  displayCorrespondentsSearch(correspondentsList, actualPage, pageItems);
}; // FUCTION TO DISPLAY THE CORRESPONDENT FIRST PAGE SEARCH RESULTS


var firstPage = function firstPage() {
  actualPage = 1;
  displayCorrespondentsSearch(correspondentsList, actualPage, pageItems);
}; // FUCTION TO DISPLAY THE CORRESPONDENT LAST PAGE SEARCH RESULTS


var lastPage = function lastPage() {
  actualPage = Math.ceil(correspondentsList.length / pageItems);
  displayCorrespondentsSearch(correspondentsList, actualPage, pageItems);
}; // FUCTION TO DISPLAY THE CORRESPONDENT PAGE FROM THE STACK OF PAGE ELEMENTS


var linkPageList = function linkPageList(page) {
  actualPage = page;
  displayCorrespondentsSearch(correspondentsList, actualPage, pageItems);
  $("#corban-search__pagination--select-link").focus();
};

var corbanSearch_createErrorMensage = function corbanSearch_createErrorMensage(target) {
  var type = [{
    name: "service",
    article: "um",
    text: "serviço",
    number: "01."
  }, {
    name: "segment",
    article: "um",
    text: "segmento",
    number: "02."
  }, {
    name: "state",
    article: "um",
    text: "estado",
    number: "03."
  }, {
    name: "city",
    article: "uma",
    text: "cidade",
    number: "04."
  }, {
    name: "neighborhood",
    article: "um",
    text: "bairro",
    number: "05."
  }]; //TODO: Refatorar e transformar em componente

  let html = type.forEach((item)=>{
    if(target === item.name){
      jQuery(".corban-search__select-error-message").html(`
      <div class="corban-search__select-error-message__title">
        <div class="corban-search__select-error-message__title--icon icon-itaufonts_exclamacao"></div>
        <h3 class="corban-search__select-error-message__title--text" role="alert" id="corban-search--alert">Existe 1 erro que precisa ser corrigido</h3>
        <div class="corban-search__select-error-message__title__close-button">
          <label for="error-message-close-button" aria-hidden="true" hidden>Fechar</label>
            <button role="button" aria-label="Fechar caixa de mensagem de erro" class="corban-search__select-error-message__title__close-button__style" id="error-message-close-button">
              <div  class="corban-search__select-error-message__title__close-button__style--icon icon-itaufonts_fechar"></div>
            </button>
        </div>
      </div>
      <div class="corban-search__select-error-message__description" id="${item.name}-error">
        <p class="corban-search__select-error-message__description__text">
          <span class="corban-search__select-error-message__description__text--number">1.</span>
          <a class="corban-search__select-error-message__description__text--link" role="link" tabindex="0" id="${item.name}-select-focus" aria-describedby="corban-search--alert-description">${item.text}:</a>
          <span class="corban-search__select-error-message__description__text--complement" id="corban-search--alert-description">
            selecione ${item.article} ${item.text} para prosseguir.
          </span>
        </p>
      </div>`);

      jQuery('#'+ target + '-select-focus').click(function () {
        var headerHeight = $('.header header').height() + 28;

        jQuery('html, body').animate({
          scrollTop: jQuery('#' + target + '-select').offset().top - headerHeight
        }, 1000);
        jQuery('#' + target + '-select').focus();
      });
      jQuery('#error-message-close-button').click(function () {
        corbanSearch_closeErrorMessage();
      });
      jQuery(".corban-search__select-error-message").show();
    }
  });

};

var corbanSearch_closeErrorMessage = function corbanSearch_closeErrorMessage() {
  jQuery(".corban-search__select-error-message").html("");
  jQuery(".corban-search__select-error-message").hide();
};

var corbanSearch_enterKey = function corbanSearch_enterKey(event,element) {
  if(element == 'search'){
    if (event.keyCode === 13) {
      $('#corban-search_button').click();
    }
  }else{
    if (event.keyCode === 13) {
      $('#corban-search_button').focus();
    }
  }
};


"use strict";
"use strict";
"use strict";
"use strict";

document.addEventListener("DOMContentLoaded", function () {
  $("section[data-component='ContractsAndTariffsV2'] a.link").click(function () {
    var linkTitle = $(this).closest("div.content").find("h3.title").text();
    var linkText = $(this).text();
    var itemClicado = 'LNK' + ':ContractsAndTariffsV2:' + linkTitle + ':' + linkText;
    itemClicado = PascalCase(itemClicado);
    setAnalyticsData(itemClicado);
  });
});
$(document).ready(function(){
    if(isBreakPoint(1440)){
        checkCookie();
    };
});
function setCookie(cname,cvalue,exdays) {
    var d = new Date();
    d.setTime(d.getTime() + (exdays*24*60*60*1000));
    var expires = "expires=" + d.toGMTString();
    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
}

function getCookie(cname) {
    var name = cname + "=";
    var decodedCookie = decodeURIComponent(document.cookie);
    var ca = decodedCookie.split(';');
    for(var i = 0; i < ca.length; i++) {
        var c = ca[i];
        while (c.charAt(0) == ' ') {
            c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
            return c.substring(name.length, c.length);
        }
    }
    return "";
}

function checkCookie() {
    var coach = getCookie("coach-mark");
    if (coach != "true") {
        $('.coach-mark .btn-open').click();
        var index=1;
        $('.page'+index).show();
        $('.button-next').click(function(){
            $('.page'+index).hide();
            index++;
            $('.page'+index).show();
        });
    
        $('.button-back').click(function(){
            $('.page'+index).hide();
            index--;
            $('.page'+index).show();
        });
        $('.button-site, .coach-skip, .close').click(function()
        {   
            setCookie("coach-mark", true, 200);
        });
    } 
}
$(document).ready(function () {
    if ($('#carouselWithCards').length) {

        var carouselCards = {
            elCarousel: $('#carouselWithCards'),
        
            init: function () {
                this.elCarousel.carousel({
                    interval: false,
                    wrap: false
                });
                $('#carouselImage00').addClass('show');
            },
        
            changeImage: function () {
                if ($(window).width() > 991) {
                    this.elCarousel.on('slide.bs.carousel', function (e) {
                        var nextIndex = e.to;
                        $('.carousel-image').removeClass('show');
                        $('.carousel-image span').attr('aria-hidden', true);
                        $('#carouselImage0' + nextIndex).addClass('show');
                        $('#carouselImage0' + nextIndex + ' span').attr('aria-hidden', false);
                    })
                }
            },
        
            swipeCarousel: function () {
                this.elCarousel.swiperight(function () {
                    $(this).carousel('prev');
                });
        
                this.elCarousel.swipeleft(function () {
                    $(this).carousel('next');
                });
            },
        
            resize: function () {
                if ($(window).width() > 991) {
                    var elContainer = $('.carousel-with-cards .container');
                    var marginContainer = elContainer.offset().left;
                    $('.carousel-image').css('left', - marginContainer);
                }
            },
        
            equalHeightItemCarousel: function () {
                var maxHeight = 0;
                var diff = (($(window).width() > 767) ? 96 : 64);
        
                $('#carouselWithCards .carousel-item').each(function (i) {
                    if ($(this).height() > maxHeight) {
                        maxHeight = $(this).height();
                    }
                });
        
                $('#carouselWithCards .carousel-inner').css('height', maxHeight + diff);
            },
        
            accessibilily: function () {
                $('#carouselWithCards .carousel-indicators > div, #carouselWithCards .control-prev, #carouselWithCards .control-next').click(function () {
                    setTimeout(function(){ 
                        if ($('#carouselWithCards .carousel-item.active .item-footer a').length) {
                            $('#carouselWithCards .carousel-item.active .item-footer a')[0].focus();
                        }
                    }, 1000);
                });
            },
        
            controlArrow: function () {
                this.elCarousel.children('.control-prev').addClass('disable-arrow').attr('aria-hidden', true);
                        
                this.elCarousel.on('slid.bs.carousel', function (e) {
                    var $this = $(this);
                    
                    $this.children('.control').removeClass('disable-arrow').attr('aria-hidden', false);
        
                    if ($('.carousel-inner .carousel-item:last').hasClass('active')) {
                        $this.children('.control-next').addClass('disable-arrow').attr('aria-hidden', true);;
                    } else if ($('.carousel-inner .carousel-item:first').hasClass('active')) {
                        $this.children('.control-prev').addClass('disable-arrow').attr('aria-hidden', true);;
                    }
                })
            },
        
            timeline: function () {
                var indicators = $('#carouselWithCards .indicator-item');
                var totalIndicators = indicators.length;
               
                indicators.each(function (i) {
                    $(this).find('.timeline-progress').css('width', (((100 / totalIndicators) * (i + 1)) + '%'));
                })
            }
        }
        
        //Init carousel
        carouselCards.init();

        // Image resize
        carouselCards.resize();

        // Init event swipe in carousel
        carouselCards.swipeCarousel();

        // Change image when slide change
        carouselCards.changeImage();

        // Set same haight Carousel item
        carouselCards.equalHeightItemCarousel();
        
        carouselCards.accessibilily();

        // Enable/Disable arrows 
        carouselCards.controlArrow();
        
        // Animate timeline
        carouselCards. timeline();

        $(window).resize(function () {
            carouselCards.resize();
            carouselCards.changeImage();
            carouselCards.swipeCarousel();
            carouselCards.equalHeightItemCarousel();
        });
    }
});
"use strict";

$(document).ready(function () {
  var carousel_component = $('.carousel-container-v2');
  var sliders = [];
  var max = 0;
  var firstRun = false;
  var cardClass = ['one-card', 'two-cards', 'three-cards', 'four-cards', 'more-than-four-cards'];

  if (carousel_component) {
    startCarouselContainer();
    adjustCarousel();
  }

  function changeStatusArrow(valor, index, el) {
    var status = index == valor;
    el.css('cursor', status ? 'not-allowed' : 'pointer');
  }

  function arrowValidate(el) {
    var index = $(el).find('.lSPager.lSpg li').index($(el).find('.lSPager.lSpg li.active'));
    var lastIndex = $(el).find('.lSPager.lSpg li').length - 1;
    changeStatusArrow(0, index, $(el).find('.lSPrev'));
    changeStatusArrow(lastIndex, index, $(el).find('.lSNext'));
  }

  function changeClassCards(cardEl) {
    var cards = $(cardEl).find('.carousel-container-item').length;
    var cClass = cardClass[cards - 1];

    if (cardClass[cards - 1]) {
      $(cardEl).addClass(cClass);
    } else {
      $(cardEl).addClass(cardClass[cardClass.length - 1]);
    }
  }

  function resizeChildren(el) {
    max = 0;
    $(el).find('.carousel-container-item').each(function (i, ch) {
      if ($(ch).height() > max) {
        max = $(ch).height();
      }
    });
    $(el).find('.carousel-container-item').height(max + 'px');
    $(el).height(max + 'px');
  }

  function startCarousel(cardEl) {
    var cards = $(cardEl).find('.carousel-container-item').length;
    return $(cardEl).find('.carousel-container-item').eq(0).outerWidth() * cards > $(cardEl).find('.carousel-container__list').outerWidth();
  }

  function destroyAriaSelected() {
    var list = document.getElementsByClassName('carousel-container-item');
    var list_scrool = document.getElementsByClassName('lSPager lSpg');
    list = Object.entries(list);
    list_scrool = Object.entries(list_scrool);
    list.map(function (elmnt) {
      var removeAriaSelectedElement = elmnt[1];
      removeAriaSelectedElement.removeAttribute('aria-selected');
    });
    list_scrool.map(function (elmnt) {
      var removeAriaSelectedElement = elmnt[1];
      var myli = removeAriaSelectedElement.getElementsByTagName("li");
      myli = Object.entries(myli);
      myli.map(function (elmnt) {
        elmnt[1].removeAttribute('aria-selected');
      });
    });
  }

  function startCarouselContainer() {
    $('.carousel-container-v2').each(function (i, cardEl) {
      var isAuthor = $(cardEl).find('.carousel-container-box').hasClass('edit-mode');
      changeClassCards(cardEl);

      if ($('.carousel-container__list .card__thumbnail').hasClass('without-img')) {
        if (!isAuthor && startCarousel(cardEl)) {
          var buildDotsPercentage = function buildDotsPercentage(el) {
            var dots = el.parent().parent().find('.lSPager li');
            var totalDots = dots.length;
            dots.each(function () {
              var index = $(this).find('a').data('index');
              var percentage = 100 * index / totalDots;
              var element = $(this).find('.timeline-track').css('width', percentage + '%');
            });
            sliders.push(slider);
          };

          var slider = $($(cardEl).find('.carousel-container__list')).lightSlider({
            loop: false,
            speed: 600,
            currentPagerPosition: 'middle',
            enableDrag: false,
            enableTouch: false,
            autoWidth: false,
            adaptiveHeight: true,
            slideMove: 4,
            slideMargin: 30,
            responsive: [{
              breakpoint: 8000,
              settings: {
                item: 4,
                slideMove: 4
              }
            }, {
              breakpoint: 993,
              settings: {
                item: 4,
                slideMove: 4,
                controls: false
              }
            }, {
              breakpoint: 769,
              settings: {
                item: 2,
                slideMove: 2,
                controls: true,
                slideMargin: 15
              }
            }, {
              breakpoint: 577,
              settings: {
                item: 2,
                slideMove: 1,
                controls: false,
                slideMargin: 20,
                enableTouch: true
              }
            }, {
              breakpoint: 321,
              settings: {
                item: 1,
                slideMove: 1,
                controls: false,
                enableTouch: true
              }
            }],
            onSliderLoad: function onSliderLoad(el) {
              buildDotsPercentage(el);
              $(el).removeClass('cS-hidden');
              resizeChildren(el);
              destroyAriaSelected();
              arrowValidate(cardEl);
            },
            onAfterSlide: function onAfterSlide(el) {
              arrowValidate(cardEl);
            }
          });
        } else {
          $(cardEl).find('.carousel-container__list').removeClass('cS-hidden');
        }

        ;
      } else {
        if (!isAuthor && startCarousel(cardEl)) {
          var _buildDotsPercentage = function _buildDotsPercentage(el) {
            var dots = el.parent().parent().find('.lSPager li');
            var totalDots = dots.length;
            dots.each(function () {
              var index = $(this).find('a').data('index');
              var percentage = 100 * index / totalDots;
              var element = $(this).find('.timeline-track').css('width', percentage + '%');
            });
            sliders.push(slider);
          };

          var slider = $($(cardEl).find('.carousel-container__list')).lightSlider({
            loop: false,
            speed: 600,
            currentPagerPosition: 'middle',
            enableDrag: false,
            enableTouch: false,
            autoWidth: false,
            adaptiveHeight: true,
            slideMove: 4,
            slideMargin: 30,
            responsive: [{
              breakpoint: 8000,
              settings: {
                item: 4,
                slideMove: 4
              }
            }, {
              breakpoint: 993,
              settings: {
                item: 4,
                slideMove: 4,
                controls: false
              }
            }, {
              breakpoint: 769,
              settings: {
                item: 2,
                slideMove: 2,
                controls: true,
                slideMargin: 15
              }
            }, {
              breakpoint: 577,
              settings: {
                item: 1,
                slideMove: 1,
                controls: false,
                slideMargin: 20,
                enableTouch: true
              }
            }, {
              breakpoint: 321,
              settings: {
                item: 1,
                slideMove: 1,
                controls: false,
                enableTouch: true
              }
            }],
            onSliderLoad: function onSliderLoad(el) {
              _buildDotsPercentage(el);

              $(el).removeClass('cS-hidden');
              resizeChildren(el);
              destroyAriaSelected();
              arrowValidate(cardEl);
            },
            onAfterSlide: function onAfterSlide(el) {
              arrowValidate(cardEl);
            }
          });
        } else {
          $(cardEl).find('.carousel-container__list').removeClass('cS-hidden');
        }

        ;
      }
    });
    firstRun = true;
  }

  $(window).on('resize', function () {
    if (carousel_component) {
      firstRun = false;
      adjustCarousel();
    }
  });

  function adjustCarousel() {
    if (carousel_component) {
      var page = detectZoom.zoom();

      if (page <= 1 && !firstRun) {
        destroySlider();
        startCarouselContainer();
      }

      if (page >= 1.10 && page < 1.25) {
        destroySlider();
        startCarouselContainer();
      }

      if (page >= 1.25 && page < 1.50) {
        destroySlider();
        startCarouselContainer();
      }

      if (page >= 1.50 && page < 1.75) {
        destroySlider();
        startCarouselContainer();
      }

      if (page >= 1.75 && page < 2) {
        destroySlider();
        startCarouselContainer();
      }

      if (page >= 2) {
        destroySlider();
        startCarouselContainer();
      }
    }

    function destroySlider() {
      sliders.forEach(function (slider) {
        slider.destroy();
      });
    }
  }
});
"use strict";

$(document).ready(function () {
  function openLink(el) {
    var link = $(el).find('.card__footer--click');
    window.open(link.attr('href'));
  }

  function clickCard(el) {
    $(el).click(function () {
      openLink(el);
    });
  }

  $('.image-with-text-inside .card-box').each(function (i, el) {
    clickCard(el);
  });

  function checkCardType() {
    $('.carousel-container-v2').each(function () {
      var imageWithTextInsideType = $(this).find('.image-with-text-inside');
      var cardDefaultType = $(this).find('.card-default');

      if (imageWithTextInsideType || cardDefaultType) {
        $(imageWithTextInsideType).find('.card-box').addClass('hover-animation');
        $(cardDefaultType).find('.card-box').addClass('hover-animation');
      }
    });
  }

  ;
  checkCardType();
});
$(document).ready(function () {

	var cardClass = ['one-card', 'two-cards', 'three-cards', 'four-cards', 'more-than-four-cards'];

	function changeClassCards(cardEl) {
		var cards = $(cardEl).find('.carousel-container-item').length;
		var cClass = cardClass[cards -1];
		if(cardClass[cards -1]) {
			$(cardEl).addClass(cClass);
		} else {
			$(cardEl).addClass(cardClass[cardClass.length -1]);
		}
	}

	function resizeChildren(el) {
		var max = 0;
		$(el).find('.carousel-container-item').each(function(i, ch) {
				if($(ch).height() > max) {
					max = $(ch).height();
				}
		});
		$(el).find('.carousel-container-item').height(max + 'px');
	}

	function startCarousel(cardEl) {
		var cards = $(cardEl).find('.carousel-container-item').length;
		var windowSize = $(window).width();
			if(windowSize >= 992 && cards > 4) {
				return true;
			} else if(windowSize >= 768 && windowSize < 992  && cards > 2) {
				return true;
			} else if(windowSize < 768 && cards > 1) {
				return true;
			}
			return false;
	}

	$('.carousel-container').each(function (i, cardEl) {
		var isAuthor = $(cardEl).find('.carousel-container-box').hasClass('edit-mode');
		changeClassCards(cardEl);
		if ( !isAuthor && startCarousel(cardEl)) {
			$($(cardEl).find('.carousel-container__list')).lightSlider({
				loop: false,
				speed: 600,
				currentPagerPosition: 'middle',
				enableDrag: false,
				autoWidth: false,
				adaptiveHeight: true, 
				slideMove: 4,
				slideMargin: 30, 
				responsive: [{
						breakpoint: 8000,
						settings: {
							item: 4,
							slideMove: 4,
						}
					},
					{
						breakpoint: 993,
						settings: {
							item: 4,
							slideMove: 4,
							controls: false
						}
					},
					{
						breakpoint: 769,
						settings: {
							item: 2,
							slideMove: 2,
							controls: true,
							slideMargin: 15, 
						}
					},
					{
						breakpoint: 577,
						settings: {
							item: 1.62,
							slideMove: 1,
							controls: false,
							slideMargin: 20, 
						}
					},
					{
						breakpoint: 362,
						settings: {
							item: 1.2,
							slideMove: 1,
							controls: false
						}
					},
					{
						breakpoint: 321,
						settings: {
							item: 1.3,
							slideMove: 1,
							controls: false
						}
					}
				],
				onSliderLoad: function (el) {
					buildDotsPercentage(el);
					$(el).removeClass('cS-hidden');
					resizeChildren(el);
					$('.lSPager li a').on('click',function(){
						var parentNode = $(this).parent().parent().parent();
							setTimeout(function(){
								parentNode.find('.carousel-container-item.active').focus();
							},100);
					});
				}
			});
			buildDotsPercentage: function buildDotsPercentage(el) {
				var dots = el.parent().parent().find('.lSPager li');
				var totalDots = dots.length;

				dots.each(function () {
					var index = $(this).find('a').data('index');
					var percentage = (100 * index) / totalDots;
					var element = $(this).find('.timeline-track').css('width', percentage + '%');
				});
			}
		} else {
				$(cardEl).find('.carousel-container__list').removeClass('cS-hidden');
		};
	});
	verificaPagina();
	$( ".lightSlider li" ).each(function( index ) {
		if($(this).position().left > ($('.lSSlideWrapper').width() * parseInt($('.lSPager li.active .counter').html()))){
			$(this).attr('aria-hidden','true');
			$(this).find('a').attr('tabindex','-1');
			}
	});
	var anterior = 0;
	var active = $('.lSSlideWrapper').width() * parseInt($('.lSPager li.active .counter').html());
	$('.lSNext').click(function(){
		var parentNode = $(this).parent().parent();
		if($('.lSSlideWrapper').width() * parseInt($('.lSPager li.active .counter').html())!= active){
			anterior = active;
			active = $('.lSSlideWrapper').width() * parseInt($('.lSPager li.active .counter').html());
		}
		$(".lightSlider li").removeAttr('aria-hidden');
		$('.lightSlider li a').removeAttr('tabindex');
		$( ".lightSlider li" ).each(function( index ) {
			if($(this).position().left < ($('.lSSlideWrapper').width() * parseInt($('.lSPager li.active .counter').html()) && anterior)){
				$(this).attr('aria-hidden','true');
				$(this).find('a').attr('tabindex','-1');
				}
		});
		verificaPagina();
		parentNode.find('.carousel-container-item.active').focus();
	});
	$('.lSNext').keyup(function(e){
		if(e.keyCode == 13){
			$(this).click();
		}
	});
	$('.lSPrev').click(function(){
		var parentNode = $(this).parent().parent();
		$(".lightSlider li").removeAttr('aria-hidden');
		$('.lightSlider li a').removeAttr('tabindex');
		$( ".lightSlider li" ).each(function( index ) {
			if($(this).position().left > ($('.lSSlideWrapper').width() * parseInt($('.lSPager li.active .counter').html()))){
				$(this).attr('aria-hidden','true');
				$(this).find('a').attr('tabindex','-1');
				}
		});
		verificaPagina();
		parentNode.find('.carousel-container-item.active').focus(); 
	});
	$('.lSPrev').keyup(function(e){
		if(e.keyCode == 13){
			$(this).click();
		}
	});
	function verificaPagina(){
		if($('.lSPager li').first().hasClass('active')){
			$('.lSPrev').attr({'tabindex':'-1','aria-hidden':'true'});
		}
		else{
			$('.lSPrev').attr({'tabindex':'0','aria-hidden':'false'});
		}
		if($('.lSPager li').last().hasClass('active')){
			$('.lSNext').attr({'tabindex':'-1','aria-hidden':'true'});
		}
		else{
			$('.lSNext').attr({'tabindex':'0','aria-hidden':'false'});
		}
	}
});

$(document).ready(function () {
  if ($('#carouselWithCards').length) {

      var carouselCards = {
          elCarousel: $('#carouselWithCards'),
      
          init: function () {
              this.elCarousel.carousel({
                  interval: false,
                  wrap: false
              });
              $('#carouselImage00').addClass('show');
          },
      
          changeImage: function () {
              if ($(window).width() > 991) {
                  this.elCarousel.on('slide.bs.carousel', function (e) {
                      var nextIndex = e.to;
                      $('.carousel-image').removeClass('show');
                      $('.carousel-image span').attr('aria-hidden', true);
                      $('#carouselImage0' + nextIndex).addClass('show');
                      $('#carouselImage0' + nextIndex + ' span').attr('aria-hidden', false);
                  })
              }
          },
      
          swipeCarousel: function () {
              this.elCarousel.swiperight(function () {
                  $(this).carousel('prev');
              });
      
              this.elCarousel.swipeleft(function () {
                  $(this).carousel('next');
              });
          },
      
          resize: function () {
              if ($(window).width() > 991) {
                  var elContainer = $('.carousel-with-cards .container');
                  var marginContainer = elContainer.offset().left;
                  $('.carousel-image').css('left', - marginContainer);
              }
          },
      
          equalHeightItemCarousel: function () {
              var maxHeight = 0;
              var diff = (($(window).width() > 767) ? 96 : 64);
      
              $('#carouselWithCards .carousel-item').each(function (i) {
                  if ($(this).height() > maxHeight) {
                      maxHeight = $(this).height();
                  }
              });
      
              $('#carouselWithCards .carousel-inner').css('height', maxHeight + diff);
          },
      
          accessibilily: function () {
              $('#carouselWithCards .carousel-indicators > div, #carouselWithCards .control-prev, #carouselWithCards .control-next').click(function () {
                  setTimeout(function(){ 
                      if ($('#carouselWithCards .carousel-item.active .item-footer a').length) {
                          $('#carouselWithCards .carousel-item.active .item-footer a')[0].focus();
                      }
                  }, 1000);
              });
          },
      
          controlArrow: function () {
              this.elCarousel.children('.control-prev').addClass('disable-arrow').attr('aria-hidden', true);
                      
              this.elCarousel.on('slid.bs.carousel', function (e) {
                  var $this = $(this);
                  
                  $this.children('.control').removeClass('disable-arrow').attr('aria-hidden', false);
      
                  if ($('.carousel-inner .carousel-item:last').hasClass('active')) {
                      $this.children('.control-next').addClass('disable-arrow').attr('aria-hidden', true);;
                  } else if ($('.carousel-inner .carousel-item:first').hasClass('active')) {
                      $this.children('.control-prev').addClass('disable-arrow').attr('aria-hidden', true);;
                  }
              })
          },
      
          timeline: function () {
              var indicators = $('#carouselWithCards .indicator-item');
              var totalIndicators = indicators.length;
             
              indicators.each(function (i) {
                  $(this).find('.timeline-progress').css('width', (((100 / totalIndicators) * (i + 1)) + '%'));
              })
          }
      }
      
      //Init carousel
      carouselCards.init();

      // Image resize
      carouselCards.resize();

      // Init event swipe in carousel
      carouselCards.swipeCarousel();

      // Change image when slide change
      carouselCards.changeImage();

      // Set same haight Carousel item
      carouselCards.equalHeightItemCarousel();
      
      carouselCards.accessibilily();

      // Enable/Disable arrows 
      carouselCards.controlArrow();
      
      // Animate timeline
      carouselCards. timeline();

      $(window).resize(function () {
          carouselCards.resize();
          carouselCards.changeImage();
          carouselCards.swipeCarousel();
          carouselCards.equalHeightItemCarousel();
      });
  }
});

"use strict";
"use strict";

document.addEventListener("DOMContentLoaded", function () {
  $("section[data-component='CardContainerV2'] .card-with-list__footer a.link").click(function () {
    var linkTitle = $(this).closest('.card-with-list__inner').find('.card-with-list__caption h3').eq(0).text();
    var linkText = $(this).text();
    var itemClicado = 'LNK' + ':CardWithList' + ':' + (linkTitle ? linkTitle : 'empty H3 element') + ':' + linkText;
    itemClicado = PascalCase(itemClicado);
    setAnalyticsData(itemClicado);
  });
});
"use strict";

document.addEventListener("DOMContentLoaded", function () {
  if ($(".card-with-icon-container-v2 .card-with-icon-container__list").length > 0) {
    $(".card-with-icon-container-v2 .card-with-icon-container__list").each(function (index) {
      var childrenCount = $(this).children('.card-with-icon').length;

      if (childrenCount > 1) {
        $(this).parent().attr('aria-label', "Vitrine com " + childrenCount + " itens");
      } else if (childrenCount == 1) {
        $(this).parent().attr('aria-label', "Vitrine com um item");
      } else {
        $(this).parent().attr('aria-label', "Vitrine");
      }
    });
  }
});
$(document).ready(function(){
  
  const cards = $('.card-with-icon-box');
  
  cards.map( function(i,index) {
    if($(index).attr('clickable')){
      $(index).css('cursor', 'pointer')
      $(index).mouseenter( function() {
        $(index).click( function() {
          window.location.href = $(cards[i]).attr('data').split('%')[0]
        })
      })
      $(index).mouseleave( function() {
        $(index).off("click");
      })

    }
    $(index).attr("onclick", null);
  })


});


"use strict";

$(document).ready(function () {
  function genarateCarousel(card_container) {
    var cards = $(card_container).find('.card-container-v2__list .card').length;
    var isAuthor = $(card_container).find('.card-container-v2__list').hasClass('authoring-mode');

    if (!isAuthor) {
      if (cards >= 5 || window.outerWidth < 992 && cards >= 3 || window.outerWidth < 768 && cards >= 2) {
        var buildDotsPercentage = function buildDotsPercentage(el) {
          var dots = el.parent().parent().find('.lSPager li');
          var totalDots = dots.length;
          dots.each(function () {
            var index = $(this).find('a').data('index');
            var percentage = 100 * index / totalDots;
            var element = $(this).find('.timeline-track').css('width', percentage + '%');
          });
        };

        $(card_container).find('.card-container-v2__list').lightSlider({
          loop: false,
          slideMargin: 0,
          speed: 600,
          currentPagerPosition: 'middle',
          enableDrag: false,
          responsive: [{
            breakpoint: 8000,
            settings: {
              item: 3.5,
              slideMove: 4
            }
          }, {
            breakpoint: 992,
            settings: {
              item: 2,
              slideMove: 2,
              slideMargin: 30
            }
          }, {
            breakpoint: 768,
            settings: {
              item: 1.6,
              slideMove: 1,
              controls: false,
              slideMargin: 0
            }
          }, {
            breakpoint: 576,
            settings: {
              item: 1.9,
              slideMove: 1,
              controls: false,
              slideMargin: 0
            }
          }, {
            breakpoint: 375,
            settings: {
              item: 1.5,
              slideMove: 1,
              controls: false,
              slideMargin: 0
            }
          }],
          onSliderLoad: function onSliderLoad(el) {
            //resize(el);
            $(el).css('height', parseInt($(el).css('height'), 10) + 32 + 'px');
            buildDotsPercentage(el);
          }
        });

        if ($('.lightSlider > div').hasClass('card') && isBreakPoint(768) || isBreakPoint(576)) {
          $('.lSSlideOuter').parent().removeClass('container');
          $('.lSSlideOuter').parent().addClass('container-fluid');
        }

        ;
      }

      ;
    }

    ;
  }

  $('.card-container-v2').each(function (i, card_container) {
    genarateCarousel(card_container);
  });
});
'use strict';

document.addEventListener('DOMContentLoaded', function () {
  $("section[data-component='CardContainerV2'] .itau-button-container a.itau-button-container__a").click(function () {
    var linkTitle = $(this).closest("section[data-component='CardContainerV2']").find('h2.title-d-container__title').text();
    var linkText = $(this).text();
    var itemClicado = 'BTN' + ':CardContainerV2' + ':' + linkTitle + ':' + linkText;
    itemClicado = PascalCase(itemClicado);
    setAnalyticsData(itemClicado);
  });
});
$(document).ready(function() {
  $('.card-container-product').each(function() {
    var maxHeight = 0;
    $(this).find('.card-with-list-product-container').each(function() {
      var thisHeight = $(this).height();
      if(maxHeight < thisHeight) {
          maxHeight = thisHeight;
      } 
    });
    $(this).find('.card-with-list-product-container').height(maxHeight);
  });
});
$(document).ready(function(){
    var cards = $('.card-container__list').find('.card').length;
    var isAuthor = $('.card-container__list').hasClass('authoring-mode'); 
    if(!isAuthor){
    if (cards >= 5 || (window.outerWidth < 992 && cards >= 3) || (window.outerWidth < 768 && cards >= 2)){
        $($('.card-container__list .card').parent()).lightSlider({
            loop: false,
            slideMargin: 0,
            speed: 600,
            currentPagerPosition: 'middle',
            enableDrag: false,
            responsive: [
                {
                    breakpoint: 8000,
                    settings: {
                        item: 3.5,
                        slideMove: 4,
                    }
                },
                {
                    breakpoint: 992,
                    settings: {
                        item: 2,
                        slideMove: 2,
                        slideMargin: 30
                    }
                },
                {
                    breakpoint: 768,
                    settings: {
                        item: 1.6,
                        slideMove: 1,
                        controls: false,
                        slideMargin: 0
                    }
                },
                {
                    breakpoint: 576,
                    settings: {
                        item: 1.9,
                        slideMove: 1,
                        controls: false,
                        slideMargin: 0
                    }
                },
                {
                    breakpoint: 375,
                    settings: {
                        item: 1.5,
                        slideMove: 1,
                        controls: false,
                        slideMargin: 0
                    }
                }

            ],
            onSliderLoad: function (el) {
                //resize(el);
                $(el).css('height',parseInt($('.card-container__list').css('height'), 10) + 32 + 'px');
                buildDotsPercentage(el);
            }
        });
        buildDotsPercentage:function buildDotsPercentage(el) {
            var dots = el.parent().parent().find('.lSPager li');
            var totalDots = dots.length;

            dots.each(function() {
                var index = $(this).find('a').data('index');
                var percentage = (100 * index) / totalDots;
                var element = $(this).find('.timeline-track').css('width', percentage + '%'); 
            });
        }
        if($('.lightSlider > div').hasClass('card') && (isBreakPoint(768))||(isBreakPoint(576))){
            $('.lSSlideOuter').parent().removeClass('container');
            $('.lSSlideOuter').parent().addClass('container-fluid');
            $('.card-container__inner .container-fluid .card-container__title').addClass('card-container__title--fluid');
        };
    };
    };
});
"use strict";
"use strict";

document.addEventListener("DOMContentLoaded", function () {
  $("section[data-component='CardContainerV2'] .card-comparative__inner a").click(function () {
    var linkTitle = $(this).closest('.card-comparative__inner').find('.card-comparative__caption h3').eq(0).text();
    var itemClicado = 'LNK' + ':CardComparative' + ':' + (linkTitle ? linkTitle : 'empty H3 element');
    itemClicado = PascalCase(itemClicado);
    setAnalyticsData(itemClicado);
  });
});
"use strict";
"use strict";

document.addEventListener("DOMContentLoaded", function () {
  $("section[data-component='CardContainerV2'] .card-with-text .card__footer a.link").click(function () {
    var linkTitle = $(this).closest('.card__body').find('.card__caption h3').eq(0).text();
    var linkText = $(this).text();
    var itemClicado = 'LNK' + ':CardWithText' + ':' + (linkTitle ? linkTitle : 'empty H3 element') + ':' + linkText;
    itemClicado = PascalCase(itemClicado);
    setAnalyticsData(itemClicado);
  });
  $("section[data-component='CardContainerV2'] .card-with-text .card__footer a.button").click(function () {
    var linkTitle = $(this).closest('.card__body').find('.card__caption h3').eq(0).text();
    var linkText = $(this).text();
    var itemClicado = 'BTN' + ':CardWithText' + ':' + (linkTitle ? linkTitle : 'empty H3 element') + ':' + linkText;
    itemClicado = PascalCase(itemClicado);
    setAnalyticsData(itemClicado);
  });
  $("section[data-component='CardContainerV2'] .card-without-text a.link").click(function () {
    var linkTitle = $(this).find('h2').eq(0).text();
    var itemClicado = 'LNK' + ':CardWithoutText' + ':' + (linkTitle ? linkTitle : 'empty H2 element');
    itemClicado = PascalCase(itemClicado);
    setAnalyticsData(itemClicado);
  });
});
    var btnHelp = '.but-duvidas';
    $(window).scroll(function () {
        if (isVisible($('.footer'))) {
            $(btnHelp).css('position', 'absolute');
            $(btnHelp).css('top', $('.footer').offset().top - $(btnHelp).outerHeight() - 80);
            $(btnHelp).css('bottom', '30px');
            }else {
            $(btnHelp).css('position', 'fixed');
            $(btnHelp).css('top', ($(window).height() - 110) + 'px');
        }
    });
"use strict";

document.addEventListener("DOMContentLoaded", function () {
  $('.button-container a').on('click keydown', function (e) {
    var clickedButton = $(this);

    if (e.type == "click" || e.type == "keydown" && (e.keyCode == 13 || e.keyCode == 32)) {
      // check if url has parameters, link wasn't already fixed and contains a valid link        
      if (!clickedButton.hasClass('is-anchor') && window.location.href.includes("?") && $(this).attr('data-fixed') != "true" && $(this).attr('href')) {
        var currentLink = $(this).attr('href');
        var newLink = window.location.href.split("?")[1].replace("?", "");
        $(this).attr('data-fixed', 'true'); // check if button link parameter exists and it's not empty

        if (currentLink.includes("?") && typeof currentLink.split("?")[1] != "undefined" && currentLink.split("?")[1] != "") {
          $(this).attr('href', currentLink + "&" + newLink);
        } else {
          $(this).attr('href', currentLink.replace("?", "") + "?" + newLink);
        }
      }
    }
  });
});
function clickAndEnter(el, callback) {
	$(el).click(callback).keypress(callback);
}

function setTopButton() {
	var topButton = ($(window).height() - 110) + 'px';
	var absoluteSize = $('.footer').offset().top - $('.box-help-button').outerHeight() - 80;
	setPostionEl($('.box-help-button'), topButton, absoluteSize);
}

function setTopContainer() {
	if ($(window).width() >= 576) {
		var topContainer = ($(window).outerHeight() - $('.box-help-container').outerHeight()) + 'px';
		var absoluteSize = $('.footer').offset().top - $('.box-help-container').outerHeight();
		setPostionEl($('.box-help-container'), topContainer, absoluteSize);
	}
}

function setPostionEl(el, topFixed, absoluteSize) {
	if (isVisible($('.footer'))) {
		$(el).css('position', 'fixed');
		$(el).css('top', topFixed);
	} else {
		$(el).css('position', 'fixed');
		$(el).css('top', topFixed);
	}
}

function scrollPostionBtnHelp() {
	$(window).scroll(function () {
		setTopButton();
		setTopContainer();
	});
}

function changeIconBoxHelpHeader() {
	$('.icon-header').toggle();
}

function changeTab(tab) {
	$('.box-help .active').removeClass('active');
	$('.' + tab).addClass('active');
	changeIconBoxHelpHeader();
}

function clickChooseTab() {
	clickAndEnter('.tabs li', function () {
		var tab = $(this).attr('data-tab');
		changeTab(tab);
	});

	$('.box-help-return').click(function () {
		changeTab('tab-1');
	});
}

function closeHelpBox() {
	$('.close-box-help').click(openAndCloseHelpBox);
}

function openAndCloseHelpBox() {
	$('.box-help-button').toggleClass('hide');
	if (!$('.box-help-container').is(':visible')) {
		$('.box-help-container').show();
	}
	$('.box-help-container')
		.toggleClass('fadeInUp')
		.toggleClass('fadeOutDown');
	$('.box-help-container').find('.tabs').css('display', '');
}

function closeWithEscHelpBox() {
	$('body').keyup(function (e) {
		if (e.keyCode == 27 && ($('.box-help-container').hasClass('fadeInUp'))) {
			openAndCloseHelpBox();
		}
	});
}

function focusOutContainer() {
	var container = $('.box-help');
	$('body').click(function (e) {
		var target = $(e.target);
		if ($('.box-help-container').hasClass('fadeInUp') && !(container.has(target).length > 0)) {
			openAndCloseHelpBox();
		}
	});
}

function clickHelpButton() {
	$('.box-help-button').click(function (e) {
		e.preventDefault();
		openAndCloseHelpBox();
		$('.box-help-button').css('top', '');
		$('.box-help-container .title.active').focus();
		$(this).attr('aria-expended', 'true');
	});
}

function setMaxSizeTabs() {
	var size = $('.box-help-container').outerHeight() - $('.box-help-container .box-help-nav').outerHeight() - 120;
	$('.lavel-2').height(size + 'px');
}

function onResizeHideBox() {
	$(window).resize(function () {
		if ($('.box-help-container').hasClass('fadeInUp')) {
			openAndCloseHelpBox();
		};
		setTopButton();
		setTopContainer();
	});


}

function adjustHeightBox() {
	const windowHeight = window.innerHeight;
	const headerHeight = $('header').outerHeight();
	const finalHeight = windowHeight - headerHeight;
	const box = $('.box-help-container');
	const boxSize = finalHeight - (finalHeight * 0.05);

	if (finalHeight >= 568) {
		box.height(568)
	} else {
		box.height(boxSize)
	}
	$('.box-help-interno').height(boxSize - 53);
}


function adjustWidthBox() {
	const windowWidth = window.innerWidth;
	const windowHeight = window.innerHeight;
	const box = $('.box-help-container');
	return windowWidth === 320 ? box.height(windowHeight) : adjustHeightBox()
}

function initBoxHelp() {
	adjustHeightBox();
	adjustWidthBox();
	setTopContainer();
	focusOutContainer();
	scrollPostionBtnHelp();
	clickChooseTab();
	closeHelpBox();
	clickHelpButton();
	setMaxSizeTabs();
	closeWithEscHelpBox();
	onResizeHideBox();
}

$(document).ready(initBoxHelp);

'use strict';

const billetServices = {
  hiddenFormSelector: "",
  errorMessagesContainerSelector: "",
  errorMessagesIntroSelector: "",
  billetType: "",
  //Recaptcha
  EXPECTED_ACTION: 'BILLETSERVICES',
  SITE_KEY: '6Lc7vqIaAAAAAJyfWTiL6t9Wcpc24AMN-H2dQFG0',
  API_KEY: 'AIzaSyDPTGneSc6TaSi7hUvJIGunyT0CywUxQUs',
  PROJECT_ID: 'prj-lab-bd-redisign-id',

  init: () => {
    specFormer.init('.billet-services');

    billetServices.setMasks();
    billetServices.hiddenFormSelector = `${specFormer.parentSelector}__form-hidden`;
    billetServices.errorMessagesContainerSelector = `${specFormer.parentSelector}__error-message`;
    billetServices.errorMessagesListSelector = `${billetServices.errorMessagesContainerSelector}__error-list`;
    billetServices.errorMessagesIntroSelector = `${billetServices.errorMessagesContainerSelector}__intro`;

    billetServices.siteKey = jQuery(`${specFormer.parentSelector} > .container`).data('recaptcha-key');
    billetServices.setBilletType();
    billetServices.closeErrorMessageOnClick();

    billetServices.addEventListeners();
  },

  addEventListeners: () => {
    jQuery(document).on(`click`, `.billet-services__error-message__error-link`, (ev) => {
      jQuery(`${jQuery(ev.target).data('focus-id')}`).focus();
    });

    jQuery(`#billet-services-code,#billet-services-cpf-cnpj`).keypress(function (ev) {
      if (ev.which == 13 && !jQuery(ev.target).hasClass('--error')) {
        billetServices.submitFormOnClick(ev);
      }
    });

    jQuery(`${specFormer.parentSelector}__button`).keypress(function (ev) {
      if (ev.which == 13) {
        ev.stopPropagation();
        ev.preventDefault();
      }
    });

    jQuery(`${specFormer.parentSelector}__button`).click((ev) => {
      billetServices.submitFormOnClick(ev);
    });

    jQuery('#billet-services-code,#billet-services-cpf-cnpj').on('input', function (e) {
      billetServices.clearErroMessages();
    });
  },

  setBilletType: () => {
    billetServices.billetType = jQuery(`${specFormer.parentSelector} > .container`).data('billet-type');
  },

  setMasks: () => {
    jQuery('[data-mask="CPF/CNPJ"]').keyup((ev) => {
      let cpfCnpjInputedValue = jQuery(ev.target).val().replace(/[^0-9]/g, '').length;

      if (cpfCnpjInputedValue <= 11) {
        jQuery(ev.target).setMask("999.999.999-999");
      } else if (cpfCnpjInputedValue > 11) {
        jQuery(ev.target).setMask("99.999.999/9999-99");
      }
    });
    
    jQuery('[data-mask="BILLET_CODE"]').keyup((ev) => {
      jQuery(ev.target).setMask("99999.99999 99999.999999 99999.999999 9 999999999999999");
    });

    jQuery('[data-mask="ID_CODE"]').keyup((ev) => {
      jQuery(ev.target).setMask("99999999999999999999");
    });
  },

  submitFormOnClick: () => {
    let errorMessages = [];
    let targetForm = `#${jQuery(".billet-services__form").attr("id")}`
    billetServices.clearErroMessages();

    if (!billetServices.validateInputs(targetForm)) {
      return;
    }

    grecaptcha.enterprise.ready(function () {
      grecaptcha.enterprise.execute(billetServices.SITE_KEY, { action: billetServices.EXPECTED_ACTION }).then(function (token) {
        jQuery.ajax({
          url: `https://recaptchaenterprise.googleapis.com/v1beta1/projects/${billetServices.PROJECT_ID}/assessments?key=${billetServices.API_KEY}`,
          method: "POST",
          contentType: "application/json; charset=utf-8",
          data: JSON.stringify({
            "event": {
              "token": token,
              "siteKey": billetServices.SITE_KEY,
              "expectedAction": billetServices.EXPECTED_ACTION
            }
          }),
        }).done((response) => {
          if (response.tokenProperties.action != billetServices.EXPECTED_ACTION && !response.tokenProperties.action) {
            errorMessages.push('<a class="billet-services__error-message__error-link" data-focus-id="#" role="link" tabindex="0" aria-label="reCaptcha: verifique a validação do reCaptcha.">reCaptcha:</a> verifique a validação do reCaptcha.');
          }

          if (errorMessages.length == 0) {
            let formHtml = "";

            if (billetServices.billetType == 'vencidos') {
              formHtml = billetServices.buildOverdueForm(targetForm);
            }
            if (billetServices.billetType == 'email') {
              formHtml = billetServices.buildEmailForm(targetForm);
            }
            if (billetServices.billetType == 'segunda-via') {
              formHtml = billetServices.buildSecondPrintForm(targetForm);
            }

            return billetServices.submitForm(formHtml);
          }else{
            billetServices.processErrorMessages(errorMessages, []);
            return; 
          }
        });
      });
    });

  },

  validateInputs: (targetForm) => {
    let inputs = specFormer.getFormValues(targetForm);
    let errorMessages = [];
    let fieldsWithErrors = [];

    let cpfCnpj = inputs['cpf_cnpj'].replace(/[^0-9]/g, '');
    let billetCode = inputs['billet_code'].replace(/[^0-9]/g, '');

    //Remove margin
    jQuery(".spec-former__form-input").removeClass("--error-field");

    if(cpfCnpj.length == 0){
      errorMessages.push('<a class="billet-services__error-message__error-link" data-focus-id="#billet-services-cpf-cnpj" role="link" tabindex="0" aria-label="CPF/CNPJ do pagador: informe este dado para continuar">CPF/CNPJ do pagador:</a> informe este dado para continuar.');
      fieldsWithErrors.push({
        id: 'billet-services-cpf-cnpj',
        message: "informe este dado para continuar"
      });
    } else if(cpfCnpj.length > 0 && cpfCnpj.length < 11){
      errorMessages.push('<a class="billet-services__error-message__error-link" data-focus-id="#billet-services-cpf-cnpj" role="link" tabindex="0" aria-label="CPF/CNPJ do pagador: o CPF precisa conter 11 digitos">CPF/CNPJ do pagador:</a> o CPF precisa conter 11 digitos.');
      fieldsWithErrors.push({
        id: 'billet-services-cpf-cnpj',
        message: "o CPF precisa conter 11 digitos"
      });
    } else if(cpfCnpj.length > 11 && cpfCnpj.length < 14){
      errorMessages.push('<a class="billet-services__error-message__error-link" data-focus-id="#billet-services-cpf-cnpj" role="link" tabindex="0" aria-label="CPF/CNPJ do pagador: o CNPJ precisa conter 14 digitos">CPF/CNPJ do pagador:</a> o CNPJ precisa conter 14 digitos.');
      fieldsWithErrors.push({
        id: 'billet-services-cpf-cnpj',
        message: "o CNPJ precisa conter 14 digitos"
      });
    } else if (!billetServices.validateCpfCnpj(cpfCnpj)){
      errorMessages.push('<a class="billet-services__error-message__error-link" data-focus-id="#billet-services-cpf-cnpj" role="link" tabindex="0" aria-label="CPF/CNPJ do pagador:informe um CPF/CNPJ válido para continuar">CPF/CNPJ do pagador:</a> informe um CPF/CNPJ válido para continuar.');
      fieldsWithErrors.push({
        id: 'billet-services-cpf-cnpj',
        message: "informe um CPF/CNPJ válido para continuar"
      });
    }

    if(billetServices.billetType == 'email'){
      if(billetCode.length == 0){
        errorMessages.push('<a class="billet-services__error-message__error-link" data-focus-id="#billet-services-code" role="link" tabindex="0" aria-label="código de identificação: informe este dado para continuar">código de identificação:</a> informe este dado para continuar.'); 
        
        fieldsWithErrors.push({
          id: 'billet-services-code',
          message: "informe este dado para continuar"
        });
      } else if(billetCode.length < 20){
        errorMessages.push('<a class="billet-services__error-message__error-link" data-focus-id="#billet-services-code" role="link" tabindex="0" aria-label="código de identificação: informe este dado para continuar">código de identificação:</a> o código de identificação deve conter 20 digitos.'); 
        
        fieldsWithErrors.push({
          id: 'billet-services-code',
          message: "o código de identificação deve conter 20 digitos"
        });
      }
    } else {
      if(billetCode.length == 0){
        errorMessages.push('<a class="billet-services__error-message__error-link" data-focus-id="#billet-services-code" role="link" tabindex="0" aria-label="informe este dado para continuar">linha digitável boleto:</a> informe este dado para continuar.');
        fieldsWithErrors.push({
          id: 'billet-services-code',
          message: "informe este dado para continuar"
        });
      } else if(billetCode.length < 47 || billetCode.length > 48){
        errorMessages.push('<a class="billet-services__error-message__error-link" data-focus-id="#billet-services-code" role="link" tabindex="0" aria-label="linha digitável boleto: deve conter entre 47 e 48 digitos">linha digitável boleto:</a> deve conter entre 47 e 48 digitos');
        fieldsWithErrors.push({
          id: 'billet-services-code',
          message: "deve conter entre 47 e 48 digitos"
        });
      }
    }

    //Add margin on error message
    fieldsWithErrors.forEach(field => {
      jQuery(`#${field.id}`).parents('.spec-former__form-input').addClass('--error-field');
    });

    if (errorMessages.length > 0) {
      billetServices.processErrorMessages(errorMessages, fieldsWithErrors);
      specFormer.showFieldsWithErrors(fieldsWithErrors);
      return false;
    }

    return true;
  },

  clearErroMessages: () => {
    jQuery(`${billetServices.errorMessagesContainerSelector}`).addClass('--hidden');
    jQuery(`${billetServices.errorMessagesListSelector}`).empty();
    jQuery(`${billetServices.errorMessagesIntroSelector}`).empty();

    jQuery(`#billet-services-cpf-cnpj`).removeAttr('aria-describedby');
    jQuery(`#billet-services-code`).removeAttr('aria-describedby');
    specFormer.clearFieldsWithErrors();
  },

  validateCpfCnpj: (value) => {
    if (value.length == 11) {
      let sum = 0;
      let rest = 0;

      for (i = 1; i <= 9; i++) {
        sum = sum + parseInt(value.substring(i - 1, i)) * (11 - i);
      }
      rest = (sum * 10) % 11;

      if ((rest == 10) || (rest == 11)) {
        rest = 0;
      }

      if (rest != parseInt(value.substring(9, 10))) {
        return false;
      }

      sum = 0;
      for (i = 1; i <= 10; i++) {
        sum = sum + parseInt(value.substring(i - 1, i)) * (12 - i);
      }
      rest = (sum * 10) % 11;

      if ((rest == 10) || (rest == 11)) {
        rest = 0;
      }
      if (rest != parseInt(value.substring(10, 11))) {
        return false;
      }

      return true;
    }

    if (value.length == 14) {
      let size = value.length - 2
      let cnpjSubstr = value.substring(0, size);
      let lastDigits = value.substring(size);
      let sum = 0;
      let pos = size - 7;

      for (i = size; i >= 1; i--) {
        sum += cnpjSubstr.charAt(size - i) * pos--;
        if (pos < 2) {
          pos = 9;
        }
      }

      let result = sum % 11 < 2 ? 0 : 11 - sum % 11;
      if (result != lastDigits.charAt(0)) {
        return false;
      }

      size = size + 1;
      cnpjSubstr = value.substring(0, size);
      sum = 0;
      pos = size - 7;

      for (i = size; i >= 1; i--) {
        sum += cnpjSubstr.charAt(size - i) * pos--;
        if (pos < 2) {
          pos = 9;
        }
      }

      result = sum % 11 < 2 ? 0 : 11 - sum % 11;
      if (result != lastDigits.charAt(1)) {
        return false;
      }

      return true;
    }

    return false;
  },

  validateBilletCode: (value) => {
    if (value == null || value.length == 0 || value.length < 47) {
      return false;
    }

    if (!value.match(/^[0-9]+$/)) {
      return false;
    }

    return true;
  },

  processErrorMessages: (messages, fieldsWithErrors) => {
    jQuery(`${billetServices.errorMessagesIntroSelector}`).html('');
    if (messages.length == 1) {
      jQuery(`${billetServices.errorMessagesIntroSelector}`).append(`Existe ${messages.length} erro que precisa ser corrigido:`);
    } else {
      jQuery(`${billetServices.errorMessagesIntroSelector}`).append(`Existem ${messages.length} erros que precisam ser corrigidos:`);
    }

    messages.forEach((message, i) => {
      jQuery(`${billetServices.errorMessagesListSelector}`).append(`<p class="billet-services__error-message__item">0${i + 1}. ${message}</p>`);
    });

    fieldsWithErrors.forEach((field, i) => {
      jQuery(`#${field.id}`).attr(`aria-describedby`, `${field.id}-error-message`);
    });

    jQuery(`${billetServices.errorMessagesContainerSelector}`).removeClass('--hidden');
    jQuery(`.billet-services__error-message__error-link`).first().focus();
  },

  closeErrorMessageOnClick: (messages) => {
    jQuery('#billet-services-error-message-close-button').click(() => {
      jQuery(`${billetServices.errorMessagesContainerSelector}`).addClass('--hidden');
      billetServices.focusOnfirstInput();
    });
  },

  focusOnfirstInput: () => {
    jQuery('.spec-former__form-input__input').first().focus();
  },

  buildOverdueForm: (targetForm) => {
    let formValues = specFormer.getFormValues(targetForm);

    const CPF_CNPJ = formValues['cpf_cnpj'].replace(/[^0-9]/g, '');
    const NUMERO_BOLETO = formValues['billet_code'].replace(/[^0-9]/g, '');;

    const AGENCIA = NUMERO_BOLETO.length < 23 ? NUMERO_BOLETO.substring(0, 4) : NUMERO_BOLETO.substring(17, 20) + NUMERO_BOLETO.substring(21, 22);
    const CONTA = NUMERO_BOLETO.length < 23 ? NUMERO_BOLETO.substring(4, 9) : NUMERO_BOLETO.substring(22, 27);
    const DAC = NUMERO_BOLETO.length < 23 ? NUMERO_BOLETO.substring(9, 10) : NUMERO_BOLETO.substring(27, 28);
    const CARTEIRA = NUMERO_BOLETO.length < 23 ? NUMERO_BOLETO.substring(10, 13) : NUMERO_BOLETO.substring(4, 7);
    const NOSSO_NUMERO = NUMERO_BOLETO.length < 23 ? NUMERO_BOLETO.substring(13) : NUMERO_BOLETO.substring(7, 9) + NUMERO_BOLETO.substring(10, 17);
    const CODE_ACCESS = AGENCIA + CONTA == "000000000" ? NOSSO_NUMERO : AGENCIA + CONTA;

    return `<form action="https://bankline.itau.com.br/GRIPNET/BKLCom.dll" method="POST" target="_blank">
      <input type="hidden" name="id" value="U2TS">
      <input type="hidden" name="op"value="B6D4624527ED5A5EC81F4A4BEB98F8B8CF5D831DDB536C4437AB8319400D953E">
      <input type="hidden" name="codacess"value="${CODE_ACCESS}">
      <input type="hidden" name="AgenciaConta" value="${AGENCIA + CONTA + DAC}">
      <input type="hidden" name="carteira" value="${CARTEIRA}">
      <input type="hidden" name="nossonumero" value="${NOSSO_NUMERO}">
      <input type="hidden" name="ChaveDoBoleto" value="000000000">
      <input type="hidden" name="TipoBoleto" value="R">
      <input type="hidden" name="DocumentoSacado" value="${CPF_CNPJ}">
      </form>`;
  },

  buildEmailForm: (targetForm) => {
    let formValues = specFormer.getFormValues(targetForm);

    const CPF_CNPJ = formValues['cpf_cnpj'].replace(/[^0-9]/g, '');
    const NUMERO_BOLETO = formValues['billet_code'].replace(/[^0-9]/g, '');;

    const AGENCIA = NUMERO_BOLETO == 16 ? "000" + NUMERO_BOLETO.substring(9, 16) : "0" + NUMERO_BOLETO.substring(4, 13);
    const CODE_ACCESS = NUMERO_BOLETO == 16 ? NUMERO_BOLETO.substring(0, 9) : NUMERO_BOLETO.substring(4, 13);

    return `<form action="https://bankline.itau.com.br/GRIPNET/BKLCom.dll" method="POST" target="_blank">
      <input type="hidden" name="id" value="U2TS">
      <input type="hidden" name="op" value="B6D4624527ED5A5EC81F4A4BEB98F8B8CF5D831DDB536C4437AB8319400D953E">
      <input type="hidden" name="codacess" value="${CODE_ACCESS}">
      <input type="hidden" name="AgenciaConta" value="${AGENCIA}">
      <input type="hidden" name="carteira" value="000">
      <input type="hidden" name="nossonumero" value="000000000">
      <input type="hidden" name="ChaveDoBoleto" value="${NUMERO_BOLETO}">
      <input type="hidden" name="TipoBoleto" value="E">
      <input type="hidden" name="DocumentoSacado" value="${CPF_CNPJ}">
      </form>`;
  },

  buildSecondPrintForm: () => {
    let formValues = specFormer.getFormValues(`#billet-services-seccond-form`);

    const CPF_CNPJ = formValues['cpf_cnpj'].replace(/[^0-9]/g, '');
    const NUMERO_BOLETO = formValues['billet_code'].replace(/[^0-9]/g, '');;

    const AGENCIA = NUMERO_BOLETO < 23 ? NUMERO_BOLETO.substring(0, 4) : NUMERO_BOLETO.substring(17, 20) + NUMERO_BOLETO.substring(21, 22);
    const CONTA = NUMERO_BOLETO < 23 ? NUMERO_BOLETO.substring(4, 9) : NUMERO_BOLETO.substring(22, 27);
    const DAC = NUMERO_BOLETO < 23 ? NUMERO_BOLETO.substring(9, 10) : NUMERO_BOLETO.substring(27, 28);
    const CARTEIRA = NUMERO_BOLETO < 23 ? NUMERO_BOLETO.substring(10, 13) : NUMERO_BOLETO.substring(4, 7);
    const NOSSO_NUMERO = NUMERO_BOLETO < 23 ? NUMERO_BOLETO.substring(13) : NUMERO_BOLETO.substring(7, 9) + NUMERO_BOLETO.substring(10, 17);
    const CODE_ACCESS = AGENCIA + CONTA == "000000000" ? NOSSO_NUMERO : AGENCIA + CONTA;

    return `<form action="https://bankline.itau.com.br/GRIPNET/BKLCom.dll" method="POST" target="_blank">
      <input type="hidden" name="id" value="U2TS">
      <input type="hidden" name="op"value="B6D4624527ED5A5EC81F4A4BEB98F8B8CF5D831DDB536C4437AB8319400D953E">
      <input type="hidden" name="codacess"value="${CODE_ACCESS}">
      <input type="hidden" name="AgenciaConta" value="${AGENCIA + CONTA + DAC}">
      <input type="hidden" name="carteira" value="${CARTEIRA}">
      <input type="hidden" name="nossonumero" value="${NOSSO_NUMERO}">
      <input type="hidden" name="ChaveDoBoleto" value="000000000">
      <input type="hidden" name="TipoBoleto" value="O">
      <input type="hidden" name="DocumentoSacado" value="${CPF_CNPJ}">
      </form>`;
  },

  submitForm: (formContent = "") => {
    jQuery(`${billetServices.hiddenFormSelector}`).append(formContent);
    jQuery(`${billetServices.hiddenFormSelector} > form`).submit();
    jQuery(`${billetServices.hiddenFormSelector} > form`).remove();
  },
}

jQuery(document).ready(() => {
  if (jQuery('.billet-services').length > 0) {
    billetServices.init();
  }
});

"use strict";

"use strict";

$(document).ready(function ($) {
  setDynamicSectionId();

  if (getUrlVar('agencia')) {
    scrollToElement('#localizador');
    $('.js-map-search').val(getUrlVar('agencia'));
    $('.find-agency__map-element').click();
    setTimeout(function () {
      $('.button-search').click();
    }, 2000);
  } else {
    var hash = ['#AGINST', '#AGPERSON', '#AGPJ', '#CAIXAS', '#DISPENSADOR'];

    if (window.location.hash && hash.includes(window.location.hash)) {
      scrollToElement('#localizador');
      setTimeout(function () {
        $('.find-agency__map-element').click();
      }, 2000);
    } else {
      if (window.location.hash) {
        scrollToElement(window.location.hash);
      }
    }
  }

  $('.lazyload').lazy({
    effect: "fadeIn",
    effectTime: 500,
    threshold: 0
  });
});

function setDynamicSectionId() {
  $("section:not(.keepId)").each(function (index) {
    $(this).attr("id", "section" + (index + 1));

    if ($(this).parent('div').hasClass('find-agency')) {
      $(this).attr("id", "localizador");
    }
  });
}

function getUrlVars() {
  var vars = [],
      hash;
  var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');

  for (var i = 0; i < hashes.length; i++) {
    hash = hashes[i].split('=');
    vars.push(hash[0]);
    vars[hash[0]] = hash[1];
  }

  return vars;
}

function getUrlVar(name) {
  return getUrlVars()[name];
}

function scrollToElement(elementId) {
  var element = $(elementId);

  if (elementId && element && element.offset()) {
    var headerHeight = $('header').height();
    $('html,body').animate({
      scrollTop: element.offset().top - headerHeight
    });
  }
}

if (!String.prototype.padStart) {
  String.prototype.padStart = function padStart(targetLength, padString) {
    targetLength = targetLength >> 0; //truncate if number, or convert non-number to 0;

    padString = String(typeof padString !== 'undefined' ? padString : ' ');

    if (this.length >= targetLength) {
      return String(this);
    } else {
      targetLength = targetLength - this.length;

      if (targetLength > padString.length) {
        padString += padString.repeat(targetLength / padString.length); //append to original to ensure we are longer than needed
      }

      return padString.slice(0, targetLength) + String(this);
    }
  };
}
"use strict";

$(document).ready(function () {
  var jsonLD = '';
  $('.json-ld').each(function () {
    if (jsonLD !== '') {
      if (jsonLD.indexOf($(this).html()) === -1) {
        jsonLD += $(this).html() !== undefined ? $(this).html() : '';
      }
    } else {
      jsonLD += $(this).html() !== undefined ? $(this).html() : '';
    }
  });
  $('.json-ld').remove();

  if (jsonLD) {
    $('head script[type="application/ld+json"]').append(jsonLD);
  }
});
"use strict"; // variaveis que definem a versão minima de cada navegador

var browserMinIe = 11;
var browserMinFirefox = 36;
var browserMinChrome = 40;
var browserMinOpera = 28;
var browserMinSafari = 7;
jQuery.browser = {};
var nAgt = navigator.userAgent;
jQuery.browser.ua = nAgt;
jQuery.browser.name = navigator.appName;
jQuery.browser.fullVersion = '' + parseFloat(navigator.appVersion);
jQuery.browser.majorVersion = parseInt(navigator.appVersion, 10);
var nameOffset, verOffset, ix;

if ((verOffset = nAgt.indexOf("Opera")) != -1) {
  jQuery.browser.name = "Opera";
  jQuery.browser.fullVersion = nAgt.substring(verOffset + 6);
  if ((verOffset = nAgt.indexOf("Version")) != -1) jQuery.browser.fullVersion = nAgt.substring(verOffset + 8); // In Opera, the true version is after "Opera" or after "Version"
} else if ((verOffset = nAgt.indexOf("MSIE")) != -1) {
  jQuery.browser.name = "Microsoft Internet Explorer";
  jQuery.browser.fullVersion = nAgt.substring(verOffset + 5); // In MSIE < 11, the true version is after "MSIE" in userAgent
} else if (nAgt.indexOf("Trident") != -1) {
  jQuery.browser.name = "Microsoft Internet Explorer";
  var start = nAgt.indexOf("rv:") + 3;
  var end = start + 4;
  jQuery.browser.fullVersion = nAgt.substring(start, end); // In TRIDENT (IE11) => 11, the true version is after "rv:" in userAgent
} else if ((verOffset = nAgt.indexOf("Chrome")) != -1) {
  jQuery.browser.name = "Chrome";
  jQuery.browser.fullVersion = nAgt.substring(verOffset + 7); // In Chrome, the true version is after "Chrome"
} else if ((verOffset = nAgt.indexOf("Safari")) != -1) {
  jQuery.browser.name = "Safari";
  jQuery.browser.fullVersion = nAgt.substring(verOffset + 7);
  if ((verOffset = nAgt.indexOf("Version")) != -1) jQuery.browser.fullVersion = nAgt.substring(verOffset + 8); // In Safari, the true version is after "Safari" or after "Version"
} else if ((verOffset = nAgt.indexOf("AppleWebkit")) != -1) {
  jQuery.browser.name = "Safari";
  jQuery.browser.fullVersion = nAgt.substring(verOffset + 7);
  if ((verOffset = nAgt.indexOf("Version")) != -1) jQuery.browser.fullVersion = nAgt.substring(verOffset + 8); // In Safari, the true version is after "Safari" or after "Version"
} else if ((verOffset = nAgt.indexOf("Firefox")) != -1) {
  jQuery.browser.name = "Firefox";
  jQuery.browser.fullVersion = nAgt.substring(verOffset + 8); // In Firefox, the true version is after "Firefox"
} else if ((nameOffset = nAgt.lastIndexOf(' ') + 1) < (verOffset = nAgt.lastIndexOf('/'))) {
  jQuery.browser.name = nAgt.substring(nameOffset, verOffset);
  jQuery.browser.fullVersion = nAgt.substring(verOffset + 1);

  if (jQuery.browser.name.toLowerCase() == jQuery.browser.name.toUpperCase()) {
    jQuery.browser.name = navigator.appName;
  } // In most other browsers, "name/version" is at the end of userAgent

} // trim the fullVersion string at semicolon/space if present


if ((ix = jQuery.browser.fullVersion.indexOf(";")) != -1) {
  jQuery.browser.fullVersion = jQuery.browser.fullVersion.substring(0, ix);
}

if ((ix = jQuery.browser.fullVersion.indexOf(" ")) != -1) {
  jQuery.browser.fullVersion = jQuery.browser.fullVersion.substring(0, ix);
}

jQuery.browser.majorVersion = parseInt('' + jQuery.browser.fullVersion, 10);

if (isNaN(jQuery.browser.majorVersion)) {
  jQuery.browser.fullVersion = '' + parseFloat(navigator.appVersion);
  jQuery.browser.majorVersion = parseInt(navigator.appVersion, 10);
}

jQuery.browser.version = jQuery.browser.majorVersion;
var browserAntigoStatus = false;

if (jQuery.browser.name === "Microsoft Internet Explorer") {
  $(".mosaic-container .mosaic--big img").css({
    'background-image': "url(" + $(".mosaic-container .mosaic--big img").attr('srcset') + ")",
    'background-size': 'cover'
  });
  $(".mosaic-container .mosaic--wide img").css({
    'background-image': "url(" + $(".mosaic-container .mosaic--wide img").attr('srcset') + ")",
    'background-size': 'cover'
  });
  $(".mosaic-container .mosaic--small-1 img").css({
    'background-image': "url(" + $(".mosaic-container .mosaic--small-1 img").attr('srcset') + ")",
    'background-size': 'cover'
  });
  $(".mosaic-container .mosaic--small-2 img").css({
    'background-image': "url(" + $(".mosaic-container .mosaic--small-2 img").attr('srcset') + ")",
    'background-size': 'cover'
  });
  $(".mosaic-container .mosaic--big img").removeAttr('alt');
  $(".mosaic-container .mosaic--wide img").removeAttr('alt');
  $(".mosaic-container .mosaic--small-1 img").removeAttr('alt');
  $(".mosaic-container .mosaic--small-2 img").removeAttr('alt');
} else {
  $('.card-container .card__caption + .card__footer').css({
    'position': 'fixed',
    'bottom': '24px'
  });
}

if (jQuery.browser.name === "Microsoft Internet Explorer" && jQuery.browser.version <= browserMinIe || jQuery.browser.name === "Firefox" && jQuery.browser.version < browserMinFirefox || jQuery.browser.name === "Chrome" && jQuery.browser.version < browserMinChrome || jQuery.browser.name === "Opera" && jQuery.browser.version < browserMinOpera || jQuery.browser.name === "Safari" && jQuery.browser.version < browserMinSafari) {
  var htm2 = ' <div id="certificados">' + ' <div id="div_main">' + ' <div id="div_text">' + ' <p><b>Atualize seu navegador para ter acesso a todos os recursos.</b><br>' + ' Selecione uma das opções ao lado.</p>' + ' </div>' + ' <div id="div_img">' + ' <ul>' + ' <li><a href="https://www.itau.com.br/computador/" target="_blank"><img src="https://jarvisfabrica.itau/summer-cdn/commons/img/browser-btn-app-itau.gif"></a></li>' + ' <li><a href="https://www.google.com/intl/pt-BR/chrome/browser/?hl=pt-br" target="_blank"><img src="https://jarvisfabrica.itau/summer-cdn/commons/img/browser-btn-chrome.gif"></a></li>' + ' <li><a href="http://www.mozilla.org/pt-BR/firefox/new/" target="_blank"><img src="https://jarvisfabrica.itau/summer-cdn/commons/img/browser-btn-firefox.gif"></a></li>' + ' <li><a href="http://www.apple.com/br/safari/" target="_blank"><img src="https://jarvisfabrica.itau/summer-cdn/commons/img/browser-btn-safari.gif"></a></li>' + ' </ul>' + ' </div>' + ' </div>';
  $('body:first').prepend(htm2);
  $('#certificados #div_img ul li a img').css({
    'border': '0'
  });
  $('#certificados #div_img ul li').css({
    'display': 'inline-block',
    'padding': '0 1px',
    'list-style': 'none'
  });
  $('#certificados #div_img ul').css({
    'height': '40px',
    'padding': '0',
    'margin': '0'
  });
  $('#certificados #div_img').css({
    'display': 'inline-block',
    'padding': '10px 20px 10px 0',
    'float': 'right'
  });
  $('#certificados #div_text b').css({
    'font-family': "'ItauDisplay-Light', 'Myriad Pro', 'Arial';",
    'font-size': '18px'
  });
  $('#certificados #div_text p').css({
    'line-height': '20px',
    'font-family': "'ItauDisplay-Light', 'Myriad Pro', 'Arial';",
    'color': 'black',
    'font-size': '15px'
  });
  $('#certificados #div_text').css({
    'font-size': '12px',
    'float': 'left',
    'display': 'inline-block',
    'padding': '10px 120px'
  });
  $('#certificados').css('line-height', '1');
  $('#certificados #div_main').css({
    'min-width': '980px',
    'width': '100%',
    'height': '60px',
    'background-color': '#FFF'
  });

  if (jQuery.browser.name === "Microsoft Internet Explorer" && jQuery.browser.version <= 8) {
    document.body.innerHTML = htm2;
  }
}
"use strict"; // jquery.jsonp 2.4.0 (c)2012 Julian Aubourg | MIT License
// https://github.com/jaubourg/jquery-jsonp

(function (e) {
  function t() {}

  function n(e) {
    C = [e];
  }

  function r(e, t, n) {
    return e && e.apply && e.apply(t.context || t, n);
  }

  function i(e) {
    return /\?/.test(e) ? "&" : "?";
  }

  function O(c) {
    function Y(e) {
      z++ || (W(), j && (T[I] = {
        s: [e]
      }), D && (e = D.apply(c, [e])), r(O, c, [e, b, c]), r(_, c, [c, b]));
    }

    function Z(e) {
      z++ || (W(), j && e != w && (T[I] = e), r(M, c, [c, e]), r(_, c, [c, e]));
    }

    c = e.extend({}, k, c);
    var O = c.success,
        M = c.error,
        _ = c.complete,
        D = c.dataFilter,
        P = c.callbackParameter,
        H = c.callback,
        B = c.cache,
        j = c.pageCache,
        F = c.charset,
        I = c.url,
        q = c.data,
        R = c.timeout,
        U,
        z = 0,
        W = t,
        X,
        V,
        J,
        K,
        Q,
        G;
    return S && S(function (e) {
      e.done(O).fail(M), O = e.resolve, M = e.reject;
    }).promise(c), c.abort = function () {
      !z++ && W();
    }, r(c.beforeSend, c, [c]) === !1 || z ? c : (I = I || u, q = q ? typeof q == "string" ? q : e.param(q, c.traditional) : u, I += q ? i(I) + q : u, P && (I += i(I) + encodeURIComponent(P) + "=?"), !B && !j && (I += i(I) + "_" + new Date().getTime() + "="), I = I.replace(/=\?(&|$)/, "=" + H + "$1"), j && (U = T[I]) ? U.s ? Y(U.s[0]) : Z(U) : (E[H] = n, K = e(y)[0], K.id = l + N++, F && (K[o] = F), L && L.version() < 11.6 ? (Q = e(y)[0]).text = "document.getElementById('" + K.id + "')." + p + "()" : K[s] = s, A && (K.htmlFor = K.id, K.event = h), K[d] = K[p] = K[v] = function (e) {
      if (!K[m] || !/i/.test(K[m])) {
        try {
          K[h] && K[h]();
        } catch (t) {}

        e = C, C = 0, e ? Y(e[0]) : Z(a);
      }
    }, K.src = I, W = function W(e) {
      G && clearTimeout(G), K[v] = K[d] = K[p] = null, x[g](K), Q && x[g](Q);
    }, x[f](K, J = x.firstChild), Q && x[f](Q, J), G = R > 0 && setTimeout(function () {
      Z(w);
    }, R)), c);
  }

  var s = "async",
      o = "charset",
      u = "",
      a = "error",
      f = "insertBefore",
      l = "_jqjsp",
      c = "on",
      h = c + "click",
      p = c + a,
      d = c + "load",
      v = c + "readystatechange",
      m = "readyState",
      g = "removeChild",
      y = "<script>",
      b = "success",
      w = "timeout",
      E = window,
      S = e.Deferred,
      x = e("head")[0] || document.documentElement,
      T = {},
      N = 0,
      C,
      k = {
    callback: l,
    url: location.href
  },
      L = E.opera,
      A = !!e("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;
  O.setup = function (t) {
    e.extend(k, t);
  }, e.jsonp = O;
})(jQuery);
